function GameConstants() {}
function GameVars() {
    if (GameVars._instance) throw new Error("Error: Instantiation failed: Use GameVars.getInstance() instead of new ");
    GameVars._instance = this
}
function GHCallbackAPIReady() {
    ApiManager.getInstance().ghCallgbackAPIReady()
}
function GHCallbackGameContinue() {
    ApiManager.getInstance().ghCallbackGameContinue()
} (function() {
    var a = this,
    b = b || {};
    b.WEBGL_RENDERER = 0,
    b.CANVAS_RENDERER = 1,
    b.VERSION = "v2.2.8",
    b._UID = 0,
    "undefined" != typeof Float32Array ? (b.Float32Array = Float32Array, b.Uint16Array = Uint16Array, b.Uint32Array = Uint32Array, b.ArrayBuffer = ArrayBuffer) : (b.Float32Array = Array, b.Uint16Array = Array),
    b.PI_2 = 2 * Math.PI,
    b.RAD_TO_DEG = 180 / Math.PI,
    b.DEG_TO_RAD = Math.PI / 180,
    b.RETINA_PREFIX = "@2x",
    b.defaultRenderOptions = {
        view: null,
        transparent: !1,
        antialias: !1,
        preserveDrawingBuffer: !1,
        resolution: 1,
        clearBeforeRender: !0,
        autoResize: !1
    },
    b.DisplayObject = function() {
        this.position = new b.Point(0, 0),
        this.scale = new b.Point(1, 1),
        this.transformCallback = null,
        this.transformCallbackContext = null,
        this.pivot = new b.Point(0, 0),
        this.rotation = 0,
        this.alpha = 1,
        this.visible = !0,
        this.hitArea = null,
        this.renderable = !1,
        this.parent = null,
        this.stage = null,
        this.worldAlpha = 1,
        this.worldTransform = new b.Matrix,
        this._sr = 0,
        this._cr = 1,
        this.filterArea = null,
        this._bounds = new b.Rectangle(0, 0, 1, 1),
        this._currentBounds = null,
        this._mask = null,
        this._cacheAsBitmap = !1,
        this._cacheIsDirty = !1
    },
    b.DisplayObject.prototype.constructor = b.DisplayObject,
    b.DisplayObject.prototype.destroy = function() {
        if (this.children) {
            for (var a = this.children.length; a--;) this.children[a].destroy();
            this.children = []
        }
        this.transformCallback = null,
        this.transformCallbackContext = null,
        this.hitArea = null,
        this.parent = null,
        this.stage = null,
        this.worldTransform = null,
        this.filterArea = null,
        this._bounds = null,
        this._currentBounds = null,
        this._mask = null,
        this.renderable = !1,
        this._destroyCachedSprite()
    },
    Object.defineProperty(b.DisplayObject.prototype, "worldVisible", {
        get: function() {
            var a = this;
            do {
                if (!a.visible) return ! 1;
                a = a.parent
            } while ( a );
            return ! 0
        }
    }),
    Object.defineProperty(b.DisplayObject.prototype, "mask", {
        get: function() {
            return this._mask
        },
        set: function(a) {
            this._mask && (this._mask.isMask = !1),
            this._mask = a,
            this._mask && (this._mask.isMask = !0)
        }
    }),
    Object.defineProperty(b.DisplayObject.prototype, "filters", {
        get: function() {
            return this._filters
        },
        set: function(a) {
            if (a) {
                for (var b = [], c = 0; c < a.length; c++) for (var d = a[c].passes, e = 0; e < d.length; e++) b.push(d[e]);
                this._filterBlock = {
                    target: this,
                    filterPasses: b
                }
            }
            this._filters = a
        }
    }),
    Object.defineProperty(b.DisplayObject.prototype, "cacheAsBitmap", {
        get: function() {
            return this._cacheAsBitmap
        },
        set: function(a) {
            this._cacheAsBitmap !== a && (a ? this._generateCachedSprite() : this._destroyCachedSprite(), this._cacheAsBitmap = a)
        }
    }),
    b.DisplayObject.prototype.updateTransform = function() {
        if (this.parent) {
            var a, c, d, e, f, g, h = this.parent.worldTransform,
            i = this.worldTransform;
            this.rotation % b.PI_2 ? (this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation)), a = this._cr * this.scale.x, c = this._sr * this.scale.x, d = -this._sr * this.scale.y, e = this._cr * this.scale.y, f = this.position.x, g = this.position.y, (this.pivot.x || this.pivot.y) && (f -= this.pivot.x * a + this.pivot.y * d, g -= this.pivot.x * c + this.pivot.y * e), i.a = a * h.a + c * h.c, i.b = a * h.b + c * h.d, i.c = d * h.a + e * h.c, i.d = d * h.b + e * h.d, i.tx = f * h.a + g * h.c + h.tx, i.ty = f * h.b + g * h.d + h.ty) : (a = this.scale.x, e = this.scale.y, f = this.position.x - this.pivot.x * a, g = this.position.y - this.pivot.y * e, i.a = a * h.a, i.b = a * h.b, i.c = e * h.c, i.d = e * h.d, i.tx = f * h.a + g * h.c + h.tx, i.ty = f * h.b + g * h.d + h.ty),
            this.worldAlpha = this.alpha * this.parent.worldAlpha,
            this.transformCallback && this.transformCallback.call(this.transformCallbackContext, i, h)
        }
    },
    b.DisplayObject.prototype.displayObjectUpdateTransform = b.DisplayObject.prototype.updateTransform,
    b.DisplayObject.prototype.getBounds = function(a) {
        return a = a,
        b.EmptyRectangle
    },
    b.DisplayObject.prototype.getLocalBounds = function() {
        return this.getBounds(b.identityMatrix)
    },
    b.DisplayObject.prototype.setStageReference = function(a) {
        this.stage = a
    },
    b.DisplayObject.prototype.preUpdate = function() {},
    b.DisplayObject.prototype.generateTexture = function(a, c, d) {
        var e = this.getLocalBounds(),
        f = new b.RenderTexture(0 | e.width, 0 | e.height, d, c, a);
        return b.DisplayObject._tempMatrix.tx = -e.x,
        b.DisplayObject._tempMatrix.ty = -e.y,
        f.render(this, b.DisplayObject._tempMatrix),
        f
    },
    b.DisplayObject.prototype.updateCache = function() {
        this._generateCachedSprite()
    },
    b.DisplayObject.prototype.toGlobal = function(a) {
        return this.displayObjectUpdateTransform(),
        this.worldTransform.apply(a)
    },
    b.DisplayObject.prototype.toLocal = function(a, b) {
        return b && (a = b.toGlobal(a)),
        this.displayObjectUpdateTransform(),
        this.worldTransform.applyInverse(a)
    },
    b.DisplayObject.prototype._renderCachedSprite = function(a) {
        this._cachedSprite.worldAlpha = this.worldAlpha,
        a.gl ? b.Sprite.prototype._renderWebGL.call(this._cachedSprite, a) : b.Sprite.prototype._renderCanvas.call(this._cachedSprite, a)
    },
    b.DisplayObject.prototype._generateCachedSprite = function() {
        this._cacheAsBitmap = !1;
        var a = this.getLocalBounds();
        if (this._cachedSprite) this._cachedSprite.texture.resize(0 | a.width, 0 | a.height);
        else {
            var c = new b.RenderTexture(0 | a.width, 0 | a.height);
            this._cachedSprite = new b.Sprite(c),
            this._cachedSprite.worldTransform = this.worldTransform
        }
        var d = this._filters;
        this._filters = null,
        this._cachedSprite.filters = d,
        b.DisplayObject._tempMatrix.tx = -a.x,
        b.DisplayObject._tempMatrix.ty = -a.y,
        this._cachedSprite.texture.render(this, b.DisplayObject._tempMatrix, !0),
        this._cachedSprite.anchor.x = -(a.x / a.width),
        this._cachedSprite.anchor.y = -(a.y / a.height),
        this._filters = d,
        this._cacheAsBitmap = !0
    },
    b.DisplayObject.prototype._destroyCachedSprite = function() {
        this._cachedSprite && (this._cachedSprite.texture.destroy(!0), this._cachedSprite = null)
    },
    b.DisplayObject.prototype._renderWebGL = function(a) {
        a = a
    },
    b.DisplayObject.prototype._renderCanvas = function(a) {
        a = a
    },
    Object.defineProperty(b.DisplayObject.prototype, "x", {
        get: function() {
            return this.position.x
        },
        set: function(a) {
            this.position.x = a
        }
    }),
    Object.defineProperty(b.DisplayObject.prototype, "y", {
        get: function() {
            return this.position.y
        },
        set: function(a) {
            this.position.y = a
        }
    }),
    b.DisplayObjectContainer = function() {
        b.DisplayObject.call(this),
        this.children = []
    },
    b.DisplayObjectContainer.prototype = Object.create(b.DisplayObject.prototype),
    b.DisplayObjectContainer.prototype.constructor = b.DisplayObjectContainer,
    Object.defineProperty(b.DisplayObjectContainer.prototype, "width", {
        get: function() {
            return this.scale.x * this.getLocalBounds().width
        },
        set: function(a) {
            var b = this.getLocalBounds().width;
            this.scale.x = 0 !== b ? a / b: 1,
            this._width = a
        }
    }),
    Object.defineProperty(b.DisplayObjectContainer.prototype, "height", {
        get: function() {
            return this.scale.y * this.getLocalBounds().height
        },
        set: function(a) {
            var b = this.getLocalBounds().height;
            this.scale.y = 0 !== b ? a / b: 1,
            this._height = a
        }
    }),
    b.DisplayObjectContainer.prototype.addChild = function(a) {
        return this.addChildAt(a, this.children.length)
    },
    b.DisplayObjectContainer.prototype.addChildAt = function(a, b) {
        if (b >= 0 && b <= this.children.length) return a.parent && a.parent.removeChild(a),
        a.parent = this,
        this.children.splice(b, 0, a),
        this.stage && a.setStageReference(this.stage),
        a;
        throw new Error(a + "addChildAt: The index " + b + " supplied is out of bounds " + this.children.length)
    },
    b.DisplayObjectContainer.prototype.swapChildren = function(a, b) {
        if (a !== b) {
            var c = this.getChildIndex(a),
            d = this.getChildIndex(b);
            if (0 > c || 0 > d) throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
            this.children[c] = b,
            this.children[d] = a
        }
    },
    b.DisplayObjectContainer.prototype.getChildIndex = function(a) {
        var b = this.children.indexOf(a);
        if ( - 1 === b) throw new Error("The supplied DisplayObject must be a child of the caller");
        return b
    },
    b.DisplayObjectContainer.prototype.setChildIndex = function(a, b) {
        if (0 > b || b >= this.children.length) throw new Error("The supplied index is out of bounds");
        var c = this.getChildIndex(a);
        this.children.splice(c, 1),
        this.children.splice(b, 0, a)
    },
    b.DisplayObjectContainer.prototype.getChildAt = function(a) {
        if (0 > a || a >= this.children.length) throw new Error("getChildAt: Supplied index " + a + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller");
        return this.children[a]
    },
    b.DisplayObjectContainer.prototype.removeChild = function(a) {
        var b = this.children.indexOf(a);
        return - 1 !== b ? this.removeChildAt(b) : void 0
    },
    b.DisplayObjectContainer.prototype.removeChildAt = function(a) {
        var b = this.getChildAt(a);
        return this.stage && b.removeStageReference(),
        b.parent = void 0,
        this.children.splice(a, 1),
        b
    },
    b.DisplayObjectContainer.prototype.removeChildren = function(a, b) {
        var c = a || 0,
        d = "number" == typeof b ? b: this.children.length,
        e = d - c;
        if (e > 0 && d >= e) {
            for (var f = this.children.splice(c, e), g = 0; g < f.length; g++) {
                var h = f[g];
                this.stage && h.removeStageReference(),
                h.parent = void 0
            }
            return f
        }
        if (0 === e && 0 === this.children.length) return [];
        throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")
    },
    b.DisplayObjectContainer.prototype.updateTransform = function() {
        if (this.visible && (this.displayObjectUpdateTransform(), !this._cacheAsBitmap)) for (var a = 0,
        b = this.children.length; b > a; a++) this.children[a].updateTransform()
    },
    b.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = b.DisplayObjectContainer.prototype.updateTransform,
    b.DisplayObjectContainer.prototype.getBounds = function() {
        if (0 === this.children.length) return b.EmptyRectangle;
        for (var a, c, d, e = 1 / 0,
        f = 1 / 0,
        g = -1 / 0,
        h = -1 / 0,
        i = !1,
        j = 0,
        k = this.children.length; k > j; j++) {
            var l = this.children[j];
            l.visible && (i = !0, a = this.children[j].getBounds(), e = e < a.x ? e: a.x, f = f < a.y ? f: a.y, c = a.width + a.x, d = a.height + a.y, g = g > c ? g: c, h = h > d ? h: d)
        }
        if (!i) return b.EmptyRectangle;
        var m = this._bounds;
        return m.x = e,
        m.y = f,
        m.width = g - e,
        m.height = h - f,
        m
    },
    b.DisplayObjectContainer.prototype.getLocalBounds = function() {
        var a = this.worldTransform;
        this.worldTransform = b.identityMatrix;
        for (var c = 0,
        d = this.children.length; d > c; c++) this.children[c].updateTransform();
        var e = this.getBounds();
        return this.worldTransform = a,
        e
    },
    b.DisplayObjectContainer.prototype.setStageReference = function(a) {
        this.stage = a;
        for (var b = 0; b < this.children.length; b++) this.children[b].setStageReference(a)
    },
    b.DisplayObjectContainer.prototype.removeStageReference = function() {
        for (var a = 0; a < this.children.length; a++) this.children[a].removeStageReference();
        this.stage = null
    },
    b.DisplayObjectContainer.prototype._renderWebGL = function(a) {
        if (this.visible && !(this.alpha <= 0)) {
            if (this._cacheAsBitmap) return void this._renderCachedSprite(a);
            var b;
            if (this._mask || this._filters) {
                for (this._filters && (a.spriteBatch.flush(), a.filterManager.pushFilter(this._filterBlock)), this._mask && (a.spriteBatch.stop(), a.maskManager.pushMask(this.mask, a), a.spriteBatch.start()), b = 0; b < this.children.length; b++) this.children[b]._renderWebGL(a);
                a.spriteBatch.stop(),
                this._mask && a.maskManager.popMask(this._mask, a),
                this._filters && a.filterManager.popFilter(),
                a.spriteBatch.start()
            } else for (b = 0; b < this.children.length; b++) this.children[b]._renderWebGL(a)
        }
    },
    b.DisplayObjectContainer.prototype._renderCanvas = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha) {
            if (this._cacheAsBitmap) return void this._renderCachedSprite(a);
            this._mask && a.maskManager.pushMask(this._mask, a);
            for (var b = 0; b < this.children.length; b++) this.children[b]._renderCanvas(a);
            this._mask && a.maskManager.popMask(a)
        }
    },
    b.Sprite = function(a) {
        b.DisplayObjectContainer.call(this),
        this.anchor = new b.Point,
        this.texture = a || b.Texture.emptyTexture,
        this._width = 0,
        this._height = 0,
        this.tint = 16777215,
        this.blendMode = b.blendModes.NORMAL,
        this.shader = null,
        this.texture.baseTexture.hasLoaded && this.onTextureUpdate(),
        this.renderable = !0
    },
    b.Sprite.prototype = Object.create(b.DisplayObjectContainer.prototype),
    b.Sprite.prototype.constructor = b.Sprite,
    Object.defineProperty(b.Sprite.prototype, "width", {
        get: function() {
            return this.scale.x * this.texture.frame.width
        },
        set: function(a) {
            this.scale.x = a / this.texture.frame.width,
            this._width = a
        }
    }),
    Object.defineProperty(b.Sprite.prototype, "height", {
        get: function() {
            return this.scale.y * this.texture.frame.height
        },
        set: function(a) {
            this.scale.y = a / this.texture.frame.height,
            this._height = a
        }
    }),
    b.Sprite.prototype.setTexture = function(a) {
        this.texture = a,
        this.cachedTint = 16777215
    },
    b.Sprite.prototype.onTextureUpdate = function() {
        this._width && (this.scale.x = this._width / this.texture.frame.width),
        this._height && (this.scale.y = this._height / this.texture.frame.height)
    },
    b.Sprite.prototype.getBounds = function(a) {
        var b = this.texture.frame.width,
        c = this.texture.frame.height,
        d = b * (1 - this.anchor.x),
        e = b * -this.anchor.x,
        f = c * (1 - this.anchor.y),
        g = c * -this.anchor.y,
        h = a || this.worldTransform,
        i = h.a,
        j = h.b,
        k = h.c,
        l = h.d,
        m = h.tx,
        n = h.ty,
        o = -1 / 0,
        p = -1 / 0,
        q = 1 / 0,
        r = 1 / 0;
        if (0 === j && 0 === k) 0 > i && (i *= -1),
        0 > l && (l *= -1),
        q = i * e + m,
        o = i * d + m,
        r = l * g + n,
        p = l * f + n;
        else {
            var s = i * e + k * g + m,
            t = l * g + j * e + n,
            u = i * d + k * g + m,
            v = l * g + j * d + n,
            w = i * d + k * f + m,
            x = l * f + j * d + n,
            y = i * e + k * f + m,
            z = l * f + j * e + n;
            q = q > s ? s: q,
            q = q > u ? u: q,
            q = q > w ? w: q,
            q = q > y ? y: q,
            r = r > t ? t: r,
            r = r > v ? v: r,
            r = r > x ? x: r,
            r = r > z ? z: r,
            o = s > o ? s: o,
            o = u > o ? u: o,
            o = w > o ? w: o,
            o = y > o ? y: o,
            p = t > p ? t: p,
            p = v > p ? v: p,
            p = x > p ? x: p,
            p = z > p ? z: p
        }
        var A = this._bounds;
        return A.x = q,
        A.width = o - q,
        A.y = r,
        A.height = p - r,
        this._currentBounds = A,
        A
    },
    b.Sprite.prototype._renderWebGL = function(a) {
        if (this.visible && !(this.alpha <= 0) && this.renderable) {
            var b;
            if (this._mask || this._filters) {
                var c = a.spriteBatch;
                for (this._filters && (c.flush(), a.filterManager.pushFilter(this._filterBlock)), this._mask && (c.stop(), a.maskManager.pushMask(this.mask, a), c.start()), c.render(this), b = 0; b < this.children.length; b++) this.children[b]._renderWebGL(a);
                c.stop(),
                this._mask && a.maskManager.popMask(this._mask, a),
                this._filters && a.filterManager.popFilter(),
                c.start()
            } else for (a.spriteBatch.render(this), b = 0; b < this.children.length; b++) this.children[b]._renderWebGL(a)
        }
    },
    b.Sprite.prototype._renderCanvas = function(a) {
        if (! (this.visible === !1 || 0 === this.alpha || this.renderable === !1 || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) {
            if (this.blendMode !== a.currentBlendMode && (a.currentBlendMode = this.blendMode, a.context.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode]), this._mask && a.maskManager.pushMask(this._mask, a), this.texture.valid) {
                var c = this.texture.baseTexture.resolution / a.resolution;
                a.context.globalAlpha = this.worldAlpha,
                a.smoothProperty && a.scaleMode !== this.texture.baseTexture.scaleMode && (a.scaleMode = this.texture.baseTexture.scaleMode, a.context[a.smoothProperty] = a.scaleMode === b.scaleModes.LINEAR);
                var d = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width: this.anchor.x * -this.texture.frame.width,
                e = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height: this.anchor.y * -this.texture.frame.height;
                a.roundPixels ? (a.context.setTransform(this.worldTransform.a, this.worldTransform.b, this.worldTransform.c, this.worldTransform.d, this.worldTransform.tx * a.resolution | 0, this.worldTransform.ty * a.resolution | 0), d = 0 | d, e = 0 | e) : a.context.setTransform(this.worldTransform.a, this.worldTransform.b, this.worldTransform.c, this.worldTransform.d, this.worldTransform.tx * a.resolution, this.worldTransform.ty * a.resolution),
                16777215 !== this.tint ? (this.cachedTint !== this.tint && (this.cachedTint = this.tint, this.tintedTexture = b.CanvasTinter.getTintedTexture(this, this.tint)), a.context.drawImage(this.tintedTexture, 0, 0, this.texture.crop.width, this.texture.crop.height, d / c, e / c, this.texture.crop.width / c, this.texture.crop.height / c)) : a.context.drawImage(this.texture.baseTexture.source, this.texture.crop.x, this.texture.crop.y, this.texture.crop.width, this.texture.crop.height, d / c, e / c, this.texture.crop.width / c, this.texture.crop.height / c)
            }
            for (var f = 0; f < this.children.length; f++) this.children[f]._renderCanvas(a);
            this._mask && a.maskManager.popMask(a)
        }
    },
    b.Sprite.fromFrame = function(a) {
        var c = b.TextureCache[a];
        if (!c) throw new Error('The frameId "' + a + '" does not exist in the texture cache' + this);
        return new b.Sprite(c)
    },
    b.Sprite.fromImage = function(a, c, d) {
        var e = b.Texture.fromImage(a, c, d);
        return new b.Sprite(e)
    },
    b.SpriteBatch = function(a) {
        b.DisplayObjectContainer.call(this),
        this.textureThing = a,
        this.ready = !1
    },
    b.SpriteBatch.prototype = Object.create(b.DisplayObjectContainer.prototype),
    b.SpriteBatch.prototype.constructor = b.SpriteBatch,
    b.SpriteBatch.prototype.initWebGL = function(a) {
        this.fastSpriteBatch = new b.WebGLFastSpriteBatch(a),
        this.ready = !0
    },
    b.SpriteBatch.prototype.updateTransform = function() {
        this.displayObjectUpdateTransform()
    },
    b.SpriteBatch.prototype._renderWebGL = function(a) { ! this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(a.gl), this.fastSpriteBatch.gl !== a.gl && this.fastSpriteBatch.setContext(a.gl), a.spriteBatch.stop(), a.shaderManager.setShader(a.shaderManager.fastShader), this.fastSpriteBatch.begin(this, a), this.fastSpriteBatch.render(this), a.spriteBatch.start())
    },
    b.SpriteBatch.prototype._renderCanvas = function(a) {
        if (this.visible && !(this.alpha <= 0) && this.children.length) {
            var b = a.context;
            b.globalAlpha = this.worldAlpha,
            this.displayObjectUpdateTransform();
            for (var c = this.worldTransform,
            d = !0,
            e = 0; e < this.children.length; e++) {
                var f = this.children[e];
                if (f.visible) {
                    var g = f.texture,
                    h = g.frame;
                    if (b.globalAlpha = this.worldAlpha * f.alpha, f.rotation % (2 * Math.PI) === 0) d && (b.setTransform(c.a, c.b, c.c, c.d, c.tx, c.ty), d = !1),
                    b.drawImage(g.baseTexture.source, h.x, h.y, h.width, h.height, f.anchor.x * -h.width * f.scale.x + f.position.x + .5 | 0, f.anchor.y * -h.height * f.scale.y + f.position.y + .5 | 0, h.width * f.scale.x, h.height * f.scale.y);
                    else {
                        d || (d = !0),
                        f.displayObjectUpdateTransform();
                        var i = f.worldTransform;
                        a.roundPixels ? b.setTransform(i.a, i.b, i.c, i.d, 0 | i.tx, 0 | i.ty) : b.setTransform(i.a, i.b, i.c, i.d, i.tx, i.ty),
                        b.drawImage(g.baseTexture.source, h.x, h.y, h.width, h.height, f.anchor.x * -h.width + .5 | 0, f.anchor.y * -h.height + .5 | 0, h.width, h.height)
                    }
                }
            }
        }
    },
    b.Text = function(a, c) {
        this.canvas = document.createElement("canvas"),
        this.context = this.canvas.getContext("2d"),
        this.resolution = 1,
        b.Sprite.call(this, b.Texture.fromCanvas(this.canvas)),
        this.setText(a),
        this.setStyle(c)
    },
    b.Text.prototype = Object.create(b.Sprite.prototype),
    b.Text.prototype.constructor = b.Text,
    Object.defineProperty(b.Text.prototype, "width", {
        get: function() {
            return this.dirty && (this.updateText(), this.dirty = !1),
            this.scale.x * this.texture.frame.width
        },
        set: function(a) {
            this.scale.x = a / this.texture.frame.width,
            this._width = a
        }
    }),
    Object.defineProperty(b.Text.prototype, "height", {
        get: function() {
            return this.dirty && (this.updateText(), this.dirty = !1),
            this.scale.y * this.texture.frame.height
        },
        set: function(a) {
            this.scale.y = a / this.texture.frame.height,
            this._height = a
        }
    }),
    b.Text.prototype.setStyle = function(a) {
        a = a || {},
        a.font = a.font || "bold 20pt Arial",
        a.fill = a.fill || "black",
        a.align = a.align || "left",
        a.stroke = a.stroke || "black",
        a.strokeThickness = a.strokeThickness || 0,
        a.wordWrap = a.wordWrap || !1,
        a.wordWrapWidth = a.wordWrapWidth || 100,
        a.dropShadow = a.dropShadow || !1,
        a.dropShadowAngle = a.dropShadowAngle || Math.PI / 6,
        a.dropShadowDistance = a.dropShadowDistance || 4,
        a.dropShadowColor = a.dropShadowColor || "black",
        this.style = a,
        this.dirty = !0
    },
    b.Text.prototype.setText = function(a) {
        this.text = a.toString() || " ",
        this.dirty = !0
    },
    b.Text.prototype.updateText = function() {
        this.texture.baseTexture.resolution = this.resolution,
        this.context.font = this.style.font;
        var a = this.text;
        this.style.wordWrap && (a = this.wordWrap(this.text));
        for (var b = a.split(/(?:\r\n|\r|\n)/), c = [], d = 0, e = this.determineFontProperties(this.style.font), f = 0; f < b.length; f++) {
            var g = this.context.measureText(b[f]).width;
            c[f] = g,
            d = Math.max(d, g)
        }
        var h = d + this.style.strokeThickness;
        this.style.dropShadow && (h += this.style.dropShadowDistance),
        this.canvas.width = (h + this.context.lineWidth) * this.resolution;
        var i = e.fontSize + this.style.strokeThickness,
        j = i * b.length;
        this.style.dropShadow && (j += this.style.dropShadowDistance),
        this.canvas.height = j * this.resolution,
        this.context.scale(this.resolution, this.resolution),
        navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height),
        this.context.font = this.style.font,
        this.context.strokeStyle = this.style.stroke,
        this.context.lineWidth = this.style.strokeThickness,
        this.context.textBaseline = "alphabetic";
        var k, l;
        if (this.style.dropShadow) {
            this.context.fillStyle = this.style.dropShadowColor;
            var m = Math.sin(this.style.dropShadowAngle) * this.style.dropShadowDistance,
            n = Math.cos(this.style.dropShadowAngle) * this.style.dropShadowDistance;
            for (f = 0; f < b.length; f++) k = this.style.strokeThickness / 2,
            l = this.style.strokeThickness / 2 + f * i + e.ascent,
            "right" === this.style.align ? k += d - c[f] : "center" === this.style.align && (k += (d - c[f]) / 2),
            this.style.fill && this.context.fillText(b[f], k + m, l + n)
        }
        for (this.context.fillStyle = this.style.fill, f = 0; f < b.length; f++) k = this.style.strokeThickness / 2,
        l = this.style.strokeThickness / 2 + f * i + e.ascent,
        "right" === this.style.align ? k += d - c[f] : "center" === this.style.align && (k += (d - c[f]) / 2),
        this.style.stroke && this.style.strokeThickness && this.context.strokeText(b[f], k, l),
        this.style.fill && this.context.fillText(b[f], k, l);
        this.updateTexture()
    },
    b.Text.prototype.updateTexture = function() {
        this.texture.baseTexture.width = this.canvas.width,
        this.texture.baseTexture.height = this.canvas.height,
        this.texture.crop.width = this.texture.frame.width = this.canvas.width,
        this.texture.crop.height = this.texture.frame.height = this.canvas.height,
        this._width = this.canvas.width,
        this._height = this.canvas.height,
        this.texture.baseTexture.dirty()
    },
    b.Text.prototype._renderWebGL = function(a) {
        this.dirty && (this.resolution = a.resolution, this.updateText(), this.dirty = !1),
        b.Sprite.prototype._renderWebGL.call(this, a)
    },
    b.Text.prototype._renderCanvas = function(a) {
        this.dirty && (this.resolution = a.resolution, this.updateText(), this.dirty = !1),
        b.Sprite.prototype._renderCanvas.call(this, a)
    },
    b.Text.prototype.determineFontProperties = function(a) {
        var c = b.Text.fontPropertiesCache[a];
        if (!c) {
            c = {};
            var d = b.Text.fontPropertiesCanvas,
            e = b.Text.fontPropertiesContext;
            e.font = a;
            var f = Math.ceil(e.measureText("|MÉq").width),
            g = Math.ceil(e.measureText("|MÉq").width),
            h = 2 * g;
            g = 1.4 * g | 0,
            d.width = f,
            d.height = h,
            e.fillStyle = "#f00",
            e.fillRect(0, 0, f, h),
            e.font = a,
            e.textBaseline = "alphabetic",
            e.fillStyle = "#000",
            e.fillText("|MÉq", 0, g);
            var i, j, k = e.getImageData(0, 0, f, h).data,
            l = k.length,
            m = 4 * f,
            n = 0,
            o = !1;
            for (i = 0; g > i; i++) {
                for (j = 0; m > j; j += 4) if (255 !== k[n + j]) {
                    o = !0;
                    break
                }
                if (o) break;
                n += m
            }
            for (c.ascent = g - i, n = l - m, o = !1, i = h; i > g; i--) {
                for (j = 0; m > j; j += 4) if (255 !== k[n + j]) {
                    o = !0;
                    break
                }
                if (o) break;
                n -= m
            }
            c.descent = i - g,
            c.descent += 6,
            c.fontSize = c.ascent + c.descent,
            b.Text.fontPropertiesCache[a] = c
        }
        return c
    },
    b.Text.prototype.wordWrap = function(a) {
        for (var b = "",
        c = a.split("\n"), d = 0; d < c.length; d++) {
            for (var e = this.style.wordWrapWidth,
            f = c[d].split(" "), g = 0; g < f.length; g++) {
                var h = this.context.measureText(f[g]).width,
                i = h + this.context.measureText(" ").width;
                0 === g || i > e ? (g > 0 && (b += "\n"), b += f[g], e = this.style.wordWrapWidth - h) : (e -= i, b += " " + f[g])
            }
            d < c.length - 1 && (b += "\n")
        }
        return b
    },
    b.Text.prototype.getBounds = function(a) {
        return this.dirty && (this.updateText(), this.dirty = !1),
        b.Sprite.prototype.getBounds.call(this, a)
    },
    b.Text.prototype.destroy = function(a) {
        this.context = null,
        this.canvas = null,
        this.texture.destroy(void 0 === a ? !0 : a)
    },
    b.Text.fontPropertiesCache = {},
    b.Text.fontPropertiesCanvas = document.createElement("canvas"),
    b.Text.fontPropertiesContext = b.Text.fontPropertiesCanvas.getContext("2d"),
    b.BitmapText = function(a, c) {
        b.DisplayObjectContainer.call(this),
        this.textWidth = 0,
        this.textHeight = 0,
        this.maxWidth = 0,
        this.anchor = new Phaser.Point(0, 0),
        this._prevAnchor = new Phaser.Point(0, 0),
        this._pool = [],
        this.setText(a),
        this.setStyle(c),
        this.updateText(),
        this.dirty = !1
    },
    b.BitmapText.prototype = Object.create(b.DisplayObjectContainer.prototype),
    b.BitmapText.prototype.constructor = b.BitmapText,
    b.BitmapText.prototype.setText = function(a) {
        this.text = a || " ",
        this.dirty = !0
    },
    b.BitmapText.prototype.setStyle = function(a) {
        a = a || {},
        a.align = a.align || "left",
        this.style = a;
        var c = a.font.split(" ");
        this.fontName = c[c.length - 1],
        this.fontSize = c.length >= 2 ? parseInt(c[c.length - 2], 10) : b.BitmapText.fonts[this.fontName].size,
        this.dirty = !0,
        this.tint = a.tint
    },
    b.BitmapText.prototype.updateText = function() {
        for (var a = b.BitmapText.fonts[this.fontName], c = new b.Point, d = null, e = [], f = 0, g = [], h = 0, i = this.fontSize / a.size, j = 0, k = 0; k < this.text.length; k++) {
            var l = this.text.charCodeAt(k);
            if (j = /(\s)/.test(this.text.charAt(k)) ? k: j, /(?:\r\n|\r|\n)/.test(this.text.charAt(k))) g.push(c.x),
            f = Math.max(f, c.x),
            h++,
            c.x = 0,
            c.y += a.lineHeight,
            d = null;
            else if ( - 1 !== j && this.maxWidth > 0 && c.x * i > this.maxWidth) e.splice(j, k - j),
            k = j,
            j = -1,
            g.push(lastLineWidth),
            f = Math.max(f, lastLineWidth),
            h++,
            c.x = 0,
            c.y += a.lineHeight,
            d = null;
            else {
                var m = a.chars[l];
                m && (d && m.kerning[d] && (c.x += m.kerning[d]), e.push({
                    texture: m.texture,
                    line: h,
                    charCode: l,
                    position: new b.Point(c.x + m.xOffset, c.y + m.yOffset)
                }), c.x += m.xAdvance, d = l)
            }
        }
        g.push(c.x),
        f = Math.max(f, c.x);
        var n = [];
        for (k = 0; h >= k; k++) {
            var o = 0;
            "right" === this.style.align ? o = f - g[k] : "center" === this.style.align && (o = (f - g[k]) / 2),
            n.push(o)
        }
        var p = this.children.length,
        q = e.length,
        r = this.tint || 16777215;
        this.textWidth = f * i,
        this.textHeight = (c.y + a.lineHeight) * i;
        var s = this.textWidth * this.anchor.x,
        t = this.textHeight * this.anchor.y;
        for (k = 0; q > k; k++) {
            var u = p > k ? this.children[k] : this._pool.pop();
            u ? u.setTexture(e[k].texture) : u = new b.Sprite(e[k].texture),
            u.position.x = (e[k].position.x + n[e[k].line]) * i - s,
            u.position.y = e[k].position.y * i - t,
            u.scale.x = u.scale.y = i,
            u.tint = r,
            u.parent || this.addChild(u)
        }
        for (; this.children.length > q;) {
            var v = this.getChildAt(this.children.length - 1);
            this._pool.push(v),
            this.removeChild(v)
        }
    },
    b.BitmapText.prototype.updateTransform = function() { (this.dirty || !this.anchor.equals(this._prevAnchor)) && (this.updateText(), this.dirty = !1, this._prevAnchor.copyFrom(this.anchor)),
        b.DisplayObjectContainer.prototype.updateTransform.call(this)
    },
    b.BitmapText.fonts = {},
    b.Stage = function(a) {
        b.DisplayObjectContainer.call(this),
        this.worldTransform = new b.Matrix,
        this.stage = this,
        this.setBackgroundColor(a)
    },
    b.Stage.prototype = Object.create(b.DisplayObjectContainer.prototype),
    b.Stage.prototype.constructor = b.Stage,
    b.Stage.prototype.updateTransform = function() {
        this.worldAlpha = 1;
        for (var a = 0; a < this.children.length; a++) this.children[a].updateTransform()
    },
    b.Stage.prototype.setBackgroundColor = function(a) {
        this.backgroundColor = a || 0,
        this.backgroundColorSplit = b.hex2rgb(this.backgroundColor);
        var c = this.backgroundColor.toString(16);
        c = "000000".substr(0, 6 - c.length) + c,
        this.backgroundColorString = "#" + c
    },
    b.hex2rgb = function(a) {
        return [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (255 & a) / 255]
    },
    b.rgb2hex = function(a) {
        return (255 * a[0] << 16) + (255 * a[1] << 8) + 255 * a[2]
    },
    b.canUseNewCanvasBlendModes = function() {
        if ("undefined" == typeof document) return ! 1;
        var a = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",
        b = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",
        c = new Image;
        c.src = a + "AP804Oa6" + b;
        var d = new Image;
        d.src = a + "/wCKxvRF" + b;
        var e = document.createElement("canvas");
        e.width = 6,
        e.height = 1;
        var f = e.getContext("2d");
        f.globalCompositeOperation = "multiply",
        f.drawImage(c, 0, 0),
        f.drawImage(d, 2, 0);
        var g = f.getImageData(2, 0, 1, 1).data;
        return 255 === g[0] && 0 === g[1] && 0 === g[2]
    },
    b.getNextPowerOfTwo = function(a) {
        if (a > 0 && 0 === (a & a - 1)) return a;
        for (var b = 1; a > b;) b <<= 1;
        return b
    },
    b.isPowerOfTwo = function(a, b) {
        return a > 0 && 0 === (a & a - 1) && b > 0 && 0 === (b & b - 1)
    },
    b.PolyK = {},
    b.PolyK.Triangulate = function(a) {
        var c = !0,
        d = a.length >> 1;
        if (3 > d) return [];
        for (var e = [], f = [], g = 0; d > g; g++) f.push(g);
        g = 0;
        for (var h = d; h > 3;) {
            var i = f[(g + 0) % h],
            j = f[(g + 1) % h],
            k = f[(g + 2) % h],
            l = a[2 * i],
            m = a[2 * i + 1],
            n = a[2 * j],
            o = a[2 * j + 1],
            p = a[2 * k],
            q = a[2 * k + 1],
            r = !1;
            if (b.PolyK._convex(l, m, n, o, p, q, c)) {
                r = !0;
                for (var s = 0; h > s; s++) {
                    var t = f[s];
                    if (t !== i && t !== j && t !== k && b.PolyK._PointInTriangle(a[2 * t], a[2 * t + 1], l, m, n, o, p, q)) {
                        r = !1;
                        break
                    }
                }
            }
            if (r) e.push(i, j, k),
            f.splice((g + 1) % h, 1),
            h--,
            g = 0;
            else if (g++>3 * h) {
                if (!c) return null;
                for (e = [], f = [], g = 0; d > g; g++) f.push(g);
                g = 0,
                h = d,
                c = !1
            }
        }
        return e.push(f[0], f[1], f[2]),
        e
    },
    b.PolyK._PointInTriangle = function(a, b, c, d, e, f, g, h) {
        var i = g - c,
        j = h - d,
        k = e - c,
        l = f - d,
        m = a - c,
        n = b - d,
        o = i * i + j * j,
        p = i * k + j * l,
        q = i * m + j * n,
        r = k * k + l * l,
        s = k * m + l * n,
        t = 1 / (o * r - p * p),
        u = (r * q - p * s) * t,
        v = (o * s - p * q) * t;
        return u >= 0 && v >= 0 && 1 > u + v
    },
    b.PolyK._convex = function(a, b, c, d, e, f, g) {
        return (b - d) * (e - c) + (c - a) * (f - d) >= 0 === g
    },
    b.initDefaultShaders = function() {},
    b.CompileVertexShader = function(a, c) {
        return b._CompileShader(a, c, a.VERTEX_SHADER)
    },
    b.CompileFragmentShader = function(a, c) {
        return b._CompileShader(a, c, a.FRAGMENT_SHADER)
    },
    b._CompileShader = function(a, b, c) {
        var d = b.join("\n"),
        e = a.createShader(c);
        return a.shaderSource(e, d),
        a.compileShader(e),
        a.getShaderParameter(e, a.COMPILE_STATUS) ? e: (window.console.log(a.getShaderInfoLog(e)), null)
    },
    b.compileProgram = function(a, c, d) {
        var e = b.CompileFragmentShader(a, d),
        f = b.CompileVertexShader(a, c),
        g = a.createProgram();
        return a.attachShader(g, f),
        a.attachShader(g, e),
        a.linkProgram(g),
        a.getProgramParameter(g, a.LINK_STATUS) || window.console.log("Could not initialise shaders"),
        g
    },
    b.PixiShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"],
        this.textureCount = 0,
        this.firstRun = !0,
        this.dirty = !0,
        this.attributes = [],
        this.init()
    },
    b.PixiShader.prototype.constructor = b.PixiShader,
    b.PixiShader.prototype.init = function() {
        var a = this.gl,
        c = b.compileProgram(a, this.vertexSrc || b.PixiShader.defaultVertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.uSampler = a.getUniformLocation(c, "uSampler"),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.dimensions = a.getUniformLocation(c, "dimensions"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        -1 === this.colorAttribute && (this.colorAttribute = 2),
        this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
        for (var d in this.uniforms) this.uniforms[d].uniformLocation = a.getUniformLocation(c, d);
        this.initUniforms(),
        this.program = c
    },
    b.PixiShader.prototype.initUniforms = function() {
        this.textureCount = 1;
        var a, b = this.gl;
        for (var c in this.uniforms) {
            a = this.uniforms[c];
            var d = a.type;
            "sampler2D" === d ? (a._init = !1, null !== a.value && this.initSampler2D(a)) : "mat2" === d || "mat3" === d || "mat4" === d ? (a.glMatrix = !0, a.glValueLength = 1, "mat2" === d ? a.glFunc = b.uniformMatrix2fv: "mat3" === d ? a.glFunc = b.uniformMatrix3fv: "mat4" === d && (a.glFunc = b.uniformMatrix4fv)) : (a.glFunc = b["uniform" + d], a.glValueLength = "2f" === d || "2i" === d ? 2 : "3f" === d || "3i" === d ? 3 : "4f" === d || "4i" === d ? 4 : 1)
        }
    },
    b.PixiShader.prototype.initSampler2D = function(a) {
        if (a.value && a.value.baseTexture && a.value.baseTexture.hasLoaded) {
            var b = this.gl;
            if (b.activeTexture(b["TEXTURE" + this.textureCount]), b.bindTexture(b.TEXTURE_2D, a.value.baseTexture._glTextures[b.id]), a.textureData) {
                var c = a.textureData,
                d = c.magFilter ? c.magFilter: b.LINEAR,
                e = c.minFilter ? c.minFilter: b.LINEAR,
                f = c.wrapS ? c.wrapS: b.CLAMP_TO_EDGE,
                g = c.wrapT ? c.wrapT: b.CLAMP_TO_EDGE,
                h = c.luminance ? b.LUMINANCE: b.RGBA;
                if (c.repeat && (f = b.REPEAT, g = b.REPEAT), b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL, !!c.flipY), c.width) {
                    var i = c.width ? c.width: 512,
                    j = c.height ? c.height: 2,
                    k = c.border ? c.border: 0;
                    b.texImage2D(b.TEXTURE_2D, 0, h, i, j, k, h, b.UNSIGNED_BYTE, null)
                } else b.texImage2D(b.TEXTURE_2D, 0, h, b.RGBA, b.UNSIGNED_BYTE, a.value.baseTexture.source);
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, d),
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, e),
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, f),
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, g)
            }
            b.uniform1i(a.uniformLocation, this.textureCount),
            a._init = !0,
            this.textureCount++
        }
    },
    b.PixiShader.prototype.syncUniforms = function() {
        this.textureCount = 1;
        var a, c = this.gl;
        for (var d in this.uniforms) a = this.uniforms[d],
        1 === a.glValueLength ? a.glMatrix === !0 ? a.glFunc.call(c, a.uniformLocation, a.transpose, a.value) : a.glFunc.call(c, a.uniformLocation, a.value) : 2 === a.glValueLength ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y) : 3 === a.glValueLength ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y, a.value.z) : 4 === a.glValueLength ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y, a.value.z, a.value.w) : "sampler2D" === a.type && (a._init ? (c.activeTexture(c["TEXTURE" + this.textureCount]), a.value.baseTexture._dirty[c.id] ? b.instances[c.id].updateTexture(a.value.baseTexture) : c.bindTexture(c.TEXTURE_2D, a.value.baseTexture._glTextures[c.id]), c.uniform1i(a.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(a))
    },
    b.PixiShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attributes = null
    },
    b.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"],
    b.PixiFastShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"],
        this.textureCount = 0,
        this.init()
    },
    b.PixiFastShader.prototype.constructor = b.PixiFastShader,
    b.PixiFastShader.prototype.init = function() {
        var a = this.gl,
        c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.uSampler = a.getUniformLocation(c, "uSampler"),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.dimensions = a.getUniformLocation(c, "dimensions"),
        this.uMatrix = a.getUniformLocation(c, "uMatrix"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.aPositionCoord = a.getAttribLocation(c, "aPositionCoord"),
        this.aScale = a.getAttribLocation(c, "aScale"),
        this.aRotation = a.getAttribLocation(c, "aRotation"),
        this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        -1 === this.colorAttribute && (this.colorAttribute = 2),
        this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute],
        this.program = c
    },
    b.PixiFastShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attributes = null
    },
    b.StripShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"],
        this.init()
    },
    b.StripShader.prototype.constructor = b.StripShader,
    b.StripShader.prototype.init = function() {
        var a = this.gl,
        c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.uSampler = a.getUniformLocation(c, "uSampler"),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord"),
        this.attributes = [this.aVertexPosition, this.aTextureCoord],
        this.translationMatrix = a.getUniformLocation(c, "translationMatrix"),
        this.alpha = a.getUniformLocation(c, "alpha"),
        this.program = c
    },
    b.StripShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attribute = null
    },
    b.PrimitiveShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"],
        this.init()
    },
    b.PrimitiveShader.prototype.constructor = b.PrimitiveShader,
    b.PrimitiveShader.prototype.init = function() {
        var a = this.gl,
        c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.tintColor = a.getUniformLocation(c, "tint"),
        this.flipY = a.getUniformLocation(c, "flipY"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        this.attributes = [this.aVertexPosition, this.colorAttribute],
        this.translationMatrix = a.getUniformLocation(c, "translationMatrix"),
        this.alpha = a.getUniformLocation(c, "alpha"),
        this.program = c
    },
    b.PrimitiveShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attributes = null
    },
    b.ComplexPrimitiveShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "uniform float flipY;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"],
        this.init()
    },
    b.ComplexPrimitiveShader.prototype.constructor = b.ComplexPrimitiveShader,
    b.ComplexPrimitiveShader.prototype.init = function() {
        var a = this.gl,
        c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.tintColor = a.getUniformLocation(c, "tint"),
        this.color = a.getUniformLocation(c, "color"),
        this.flipY = a.getUniformLocation(c, "flipY"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.attributes = [this.aVertexPosition, this.colorAttribute],
        this.translationMatrix = a.getUniformLocation(c, "translationMatrix"),
        this.alpha = a.getUniformLocation(c, "alpha"),
        this.program = c
    },
    b.ComplexPrimitiveShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attribute = null
    },
    b.WebGLGraphics = function() {},
    b.WebGLGraphics.renderGraphics = function(a, c) {
        var d, e = c.gl,
        f = c.projection,
        g = c.offset,
        h = c.shaderManager.primitiveShader;
        a.dirty && b.WebGLGraphics.updateGraphics(a, e);
        for (var i = a._webGL[e.id], j = 0; j < i.data.length; j++) 1 === i.data[j].mode ? (d = i.data[j], c.stencilManager.pushStencil(a, d, c), e.drawElements(e.TRIANGLE_FAN, 4, e.UNSIGNED_SHORT, 2 * (d.indices.length - 4)), c.stencilManager.popStencil(a, d, c)) : (d = i.data[j], c.shaderManager.setShader(h), h = c.shaderManager.primitiveShader, e.uniformMatrix3fv(h.translationMatrix, !1, a.worldTransform.toArray(!0)), e.uniform1f(h.flipY, 1), e.uniform2f(h.projectionVector, f.x, -f.y), e.uniform2f(h.offsetVector, -g.x, -g.y), e.uniform3fv(h.tintColor, b.hex2rgb(a.tint)), e.uniform1f(h.alpha, a.worldAlpha), e.bindBuffer(e.ARRAY_BUFFER, d.buffer), e.vertexAttribPointer(h.aVertexPosition, 2, e.FLOAT, !1, 24, 0), e.vertexAttribPointer(h.colorAttribute, 4, e.FLOAT, !1, 24, 8), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, d.indexBuffer), e.drawElements(e.TRIANGLE_STRIP, d.indices.length, e.UNSIGNED_SHORT, 0))
    },
    b.WebGLGraphics.updateGraphics = function(a, c) {
        var d = a._webGL[c.id];
        d || (d = a._webGL[c.id] = {
            lastIndex: 0,
            data: [],
            gl: c
        }),
        a.dirty = !1;
        var e;
        if (a.clearDirty) {
            for (a.clearDirty = !1, e = 0; e < d.data.length; e++) {
                var f = d.data[e];
                f.reset(),
                b.WebGLGraphics.graphicsDataPool.push(f)
            }
            d.data = [],
            d.lastIndex = 0
        }
        var g;
        for (e = d.lastIndex; e < a.graphicsData.length; e++) {
            var h = a.graphicsData[e];
            if (h.type === b.Graphics.POLY) {
                if (h.points = h.shape.points.slice(), h.shape.closed && (h.points[0] !== h.points[h.points.length - 2] || h.points[1] !== h.points[h.points.length - 1]) && h.points.push(h.points[0], h.points[1]), h.fill && h.points.length >= 6) if (h.points.length < 12) {
                    g = b.WebGLGraphics.switchMode(d, 0);
                    var i = b.WebGLGraphics.buildPoly(h, g);
                    i || (g = b.WebGLGraphics.switchMode(d, 1), b.WebGLGraphics.buildComplexPoly(h, g))
                } else g = b.WebGLGraphics.switchMode(d, 1),
                b.WebGLGraphics.buildComplexPoly(h, g);
                h.lineWidth > 0 && (g = b.WebGLGraphics.switchMode(d, 0), b.WebGLGraphics.buildLine(h, g))
            } else g = b.WebGLGraphics.switchMode(d, 0),
            h.type === b.Graphics.RECT ? b.WebGLGraphics.buildRectangle(h, g) : h.type === b.Graphics.CIRC || h.type === b.Graphics.ELIP ? b.WebGLGraphics.buildCircle(h, g) : h.type === b.Graphics.RREC && b.WebGLGraphics.buildRoundedRectangle(h, g);
            d.lastIndex++
        }
        for (e = 0; e < d.data.length; e++) g = d.data[e],
        g.dirty && g.upload()
    },
    b.WebGLGraphics.switchMode = function(a, c) {
        var d;
        return a.data.length ? (d = a.data[a.data.length - 1], (d.mode !== c || 1 === c) && (d = b.WebGLGraphics.graphicsDataPool.pop() || new b.WebGLGraphicsData(a.gl), d.mode = c, a.data.push(d))) : (d = b.WebGLGraphics.graphicsDataPool.pop() || new b.WebGLGraphicsData(a.gl), d.mode = c, a.data.push(d)),
        d.dirty = !0,
        d
    },
    b.WebGLGraphics.buildRectangle = function(a, c) {
        var d = a.shape,
        e = d.x,
        f = d.y,
        g = d.width,
        h = d.height;
        if (a.fill) {
            var i = b.hex2rgb(a.fillColor),
            j = a.fillAlpha,
            k = i[0] * j,
            l = i[1] * j,
            m = i[2] * j,
            n = c.points,
            o = c.indices,
            p = n.length / 6;
            n.push(e, f),
            n.push(k, l, m, j),
            n.push(e + g, f),
            n.push(k, l, m, j),
            n.push(e, f + h),
            n.push(k, l, m, j),
            n.push(e + g, f + h),
            n.push(k, l, m, j),
            o.push(p, p, p + 1, p + 2, p + 3, p + 3)
        }
        if (a.lineWidth) {
            var q = a.points;
            a.points = [e, f, e + g, f, e + g, f + h, e, f + h, e, f],
            b.WebGLGraphics.buildLine(a, c),
            a.points = q
        }
    },
    b.WebGLGraphics.buildRoundedRectangle = function(a, c) {
        var d = a.shape,
        e = d.x,
        f = d.y,
        g = d.width,
        h = d.height,
        i = d.radius,
        j = [];
        if (j.push(e, f + i), j = j.concat(b.WebGLGraphics.quadraticBezierCurve(e, f + h - i, e, f + h, e + i, f + h)), j = j.concat(b.WebGLGraphics.quadraticBezierCurve(e + g - i, f + h, e + g, f + h, e + g, f + h - i)), j = j.concat(b.WebGLGraphics.quadraticBezierCurve(e + g, f + i, e + g, f, e + g - i, f)), j = j.concat(b.WebGLGraphics.quadraticBezierCurve(e + i, f, e, f, e, f + i)), a.fill) {
            var k = b.hex2rgb(a.fillColor),
            l = a.fillAlpha,
            m = k[0] * l,
            n = k[1] * l,
            o = k[2] * l,
            p = c.points,
            q = c.indices,
            r = p.length / 6,
            s = b.PolyK.Triangulate(j),
            t = 0;
            for (t = 0; t < s.length; t += 3) q.push(s[t] + r),
            q.push(s[t] + r),
            q.push(s[t + 1] + r),
            q.push(s[t + 2] + r),
            q.push(s[t + 2] + r);
            for (t = 0; t < j.length; t++) p.push(j[t], j[++t], m, n, o, l)
        }
        if (a.lineWidth) {
            var u = a.points;
            a.points = j,
            b.WebGLGraphics.buildLine(a, c),
            a.points = u
        }
    },
    b.WebGLGraphics.quadraticBezierCurve = function(a, b, c, d, e, f) {
        function g(a, b, c) {
            var d = b - a;
            return a + d * c
        }
        for (var h, i, j, k, l, m, n = 20,
        o = [], p = 0, q = 0; n >= q; q++) p = q / n,
        h = g(a, c, p),
        i = g(b, d, p),
        j = g(c, e, p),
        k = g(d, f, p),
        l = g(h, j, p),
        m = g(i, k, p),
        o.push(l, m);
        return o
    },
    b.WebGLGraphics.buildCircle = function(a, c) {
        var d, e, f = a.shape,
        g = f.x,
        h = f.y;
        a.type === b.Graphics.CIRC ? (d = f.radius, e = f.radius) : (d = f.width, e = f.height);
        var i = 40,
        j = 2 * Math.PI / i,
        k = 0;
        if (a.fill) {
            var l = b.hex2rgb(a.fillColor),
            m = a.fillAlpha,
            n = l[0] * m,
            o = l[1] * m,
            p = l[2] * m,
            q = c.points,
            r = c.indices,
            s = q.length / 6;
            for (r.push(s), k = 0; i + 1 > k; k++) q.push(g, h, n, o, p, m),
            q.push(g + Math.sin(j * k) * d, h + Math.cos(j * k) * e, n, o, p, m),
            r.push(s++, s++);
            r.push(s - 1)
        }
        if (a.lineWidth) {
            var t = a.points;
            for (a.points = [], k = 0; i + 1 > k; k++) a.points.push(g + Math.sin(j * k) * d, h + Math.cos(j * k) * e);
            b.WebGLGraphics.buildLine(a, c),
            a.points = t
        }
    },
    b.WebGLGraphics.buildLine = function(a, c) {
        var d = 0,
        e = a.points;
        if (0 !== e.length) {
            if (a.lineWidth % 2) for (d = 0; d < e.length; d++) e[d] += .5;
            var f = new b.Point(e[0], e[1]),
            g = new b.Point(e[e.length - 2], e[e.length - 1]);
            if (f.x === g.x && f.y === g.y) {
                e = e.slice(),
                e.pop(),
                e.pop(),
                g = new b.Point(e[e.length - 2], e[e.length - 1]);
                var h = g.x + .5 * (f.x - g.x),
                i = g.y + .5 * (f.y - g.y);
                e.unshift(h, i),
                e.push(h, i)
            }
            var j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G = c.points,
            H = c.indices,
            I = e.length / 2,
            J = e.length,
            K = G.length / 6,
            L = a.lineWidth / 2,
            M = b.hex2rgb(a.lineColor),
            N = a.lineAlpha,
            O = M[0] * N,
            P = M[1] * N,
            Q = M[2] * N;
            for (l = e[0], m = e[1], n = e[2], o = e[3], r = -(m - o), s = l - n, F = Math.sqrt(r * r + s * s), r /= F, s /= F, r *= L, s *= L, G.push(l - r, m - s, O, P, Q, N), G.push(l + r, m + s, O, P, Q, N), d = 1; I - 1 > d; d++) l = e[2 * (d - 1)],
            m = e[2 * (d - 1) + 1],
            n = e[2 * d],
            o = e[2 * d + 1],
            p = e[2 * (d + 1)],
            q = e[2 * (d + 1) + 1],
            r = -(m - o),
            s = l - n,
            F = Math.sqrt(r * r + s * s),
            r /= F,
            s /= F,
            r *= L,
            s *= L,
            t = -(o - q),
            u = n - p,
            F = Math.sqrt(t * t + u * u),
            t /= F,
            u /= F,
            t *= L,
            u *= L,
            x = -s + m - ( - s + o),
            y = -r + n - ( - r + l),
            z = ( - r + l) * ( - s + o) - ( - r + n) * ( - s + m),
            A = -u + q - ( - u + o),
            B = -t + n - ( - t + p),
            C = ( - t + p) * ( - u + o) - ( - t + n) * ( - u + q),
            D = x * B - A * y,
            Math.abs(D) < .1 ? (D += 10.1, G.push(n - r, o - s, O, P, Q, N), G.push(n + r, o + s, O, P, Q, N)) : (j = (y * C - B * z) / D, k = (A * z - x * C) / D, E = (j - n) * (j - n) + (k - o) + (k - o), E > 19600 ? (v = r - t, w = s - u, F = Math.sqrt(v * v + w * w), v /= F, w /= F, v *= L, w *= L, G.push(n - v, o - w), G.push(O, P, Q, N), G.push(n + v, o + w), G.push(O, P, Q, N), G.push(n - v, o - w), G.push(O, P, Q, N), J++) : (G.push(j, k), G.push(O, P, Q, N), G.push(n - (j - n), o - (k - o)), G.push(O, P, Q, N)));
            for (l = e[2 * (I - 2)], m = e[2 * (I - 2) + 1], n = e[2 * (I - 1)], o = e[2 * (I - 1) + 1], r = -(m - o), s = l - n, F = Math.sqrt(r * r + s * s), r /= F, s /= F, r *= L, s *= L, G.push(n - r, o - s), G.push(O, P, Q, N), G.push(n + r, o + s), G.push(O, P, Q, N), H.push(K), d = 0; J > d; d++) H.push(K++);
            H.push(K - 1)
        }
    },
    b.WebGLGraphics.buildComplexPoly = function(a, c) {
        var d = a.points.slice();
        if (! (d.length < 6)) {
            var e = c.indices;
            c.points = d,
            c.alpha = a.fillAlpha,
            c.color = b.hex2rgb(a.fillColor);
            for (var f, g, h = 1 / 0,
            i = -1 / 0,
            j = 1 / 0,
            k = -1 / 0,
            l = 0; l < d.length; l += 2) f = d[l],
            g = d[l + 1],
            h = h > f ? f: h,
            i = f > i ? f: i,
            j = j > g ? g: j,
            k = g > k ? g: k;
            d.push(h, j, i, j, i, k, h, k);
            var m = d.length / 2;
            for (l = 0; m > l; l++) e.push(l)
        }
    },
    b.WebGLGraphics.buildPoly = function(a, c) {
        var d = a.points;
        if (! (d.length < 6)) {
            var e = c.points,
            f = c.indices,
            g = d.length / 2,
            h = b.hex2rgb(a.fillColor),
            i = a.fillAlpha,
            j = h[0] * i,
            k = h[1] * i,
            l = h[2] * i,
            m = b.PolyK.Triangulate(d);
            if (!m) return ! 1;
            var n = e.length / 6,
            o = 0;
            for (o = 0; o < m.length; o += 3) f.push(m[o] + n),
            f.push(m[o] + n),
            f.push(m[o + 1] + n),
            f.push(m[o + 2] + n),
            f.push(m[o + 2] + n);
            for (o = 0; g > o; o++) e.push(d[2 * o], d[2 * o + 1], j, k, l, i);
            return ! 0
        }
    },
    b.WebGLGraphics.graphicsDataPool = [],
    b.WebGLGraphicsData = function(a) {
        this.gl = a,
        this.color = [0, 0, 0],
        this.points = [],
        this.indices = [],
        this.buffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        this.mode = 1,
        this.alpha = 1,
        this.dirty = !0
    },
    b.WebGLGraphicsData.prototype.reset = function() {
        this.points = [],
        this.indices = []
    },
    b.WebGLGraphicsData.prototype.upload = function() {
        var a = this.gl;
        this.glPoints = new b.Float32Array(this.points),
        a.bindBuffer(a.ARRAY_BUFFER, this.buffer),
        a.bufferData(a.ARRAY_BUFFER, this.glPoints, a.STATIC_DRAW),
        this.glIndicies = new b.Uint16Array(this.indices),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.glIndicies, a.STATIC_DRAW),
        this.dirty = !1
    },
    b.glContexts = [],
    b.instances = [],
    b.WebGLRenderer = function(a, c, d) {
        if (d) for (var e in b.defaultRenderOptions)"undefined" == typeof d[e] && (d[e] = b.defaultRenderOptions[e]);
        else d = b.defaultRenderOptions;
        b.defaultRenderer || (b.defaultRenderer = this),
        this.type = b.WEBGL_RENDERER,
        this.resolution = d.resolution,
        this.transparent = d.transparent,
        this.autoResize = d.autoResize || !1,
        this.preserveDrawingBuffer = d.preserveDrawingBuffer,
        this.clearBeforeRender = d.clearBeforeRender,
        this.width = a || 800,
        this.height = c || 600,
        this.view = d.view || document.createElement("canvas"),
        this.contextLostBound = this.handleContextLost.bind(this),
        this.contextRestoredBound = this.handleContextRestored.bind(this),
        this.view.addEventListener("webglcontextlost", this.contextLostBound, !1),
        this.view.addEventListener("webglcontextrestored", this.contextRestoredBound, !1),
        this._contextOptions = {
            alpha: this.transparent,
            antialias: d.antialias,
            premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent,
            stencil: !0,
            preserveDrawingBuffer: d.preserveDrawingBuffer
        },
        this.projection = new b.Point,
        this.offset = new b.Point(0, 0),
        this.shaderManager = new b.WebGLShaderManager,
        this.spriteBatch = new b.WebGLSpriteBatch,
        this.maskManager = new b.WebGLMaskManager,
        this.filterManager = new b.WebGLFilterManager,
        this.stencilManager = new b.WebGLStencilManager,
        this.blendModeManager = new b.WebGLBlendModeManager,
        this.renderSession = {},
        this.renderSession.gl = this.gl,
        this.renderSession.drawCount = 0,
        this.renderSession.shaderManager = this.shaderManager,
        this.renderSession.maskManager = this.maskManager,
        this.renderSession.filterManager = this.filterManager,
        this.renderSession.blendModeManager = this.blendModeManager,
        this.renderSession.spriteBatch = this.spriteBatch,
        this.renderSession.stencilManager = this.stencilManager,
        this.renderSession.renderer = this,
        this.renderSession.resolution = this.resolution,
        this.initContext(),
        this.mapBlendModes()
    },
    b.WebGLRenderer.prototype.constructor = b.WebGLRenderer,
    b.WebGLRenderer.prototype.initContext = function() {
        var a = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);
        if (this.gl = a, !a) throw new Error("This browser does not support webGL. Try using the canvas renderer");
        this.glContextId = a.id = b.WebGLRenderer.glContextId++,
        b.glContexts[this.glContextId] = a,
        b.instances[this.glContextId] = this,
        a.disable(a.DEPTH_TEST),
        a.disable(a.CULL_FACE),
        a.enable(a.BLEND),
        this.shaderManager.setContext(a),
        this.spriteBatch.setContext(a),
        this.maskManager.setContext(a),
        this.filterManager.setContext(a),
        this.blendModeManager.setContext(a),
        this.stencilManager.setContext(a),
        this.renderSession.gl = this.gl,
        this.resize(this.width, this.height)
    },
    b.WebGLRenderer.prototype.render = function(a) {
        if (!this.contextLost) {
            this.__stage !== a && (this.__stage = a),
            a.updateTransform();
            var b = this.gl;
            b.viewport(0, 0, this.width, this.height),
            b.bindFramebuffer(b.FRAMEBUFFER, null),
            this.clearBeforeRender && (this.transparent ? b.clearColor(0, 0, 0, 0) : b.clearColor(a.backgroundColorSplit[0], a.backgroundColorSplit[1], a.backgroundColorSplit[2], 1), b.clear(b.COLOR_BUFFER_BIT)),
            this.renderDisplayObject(a, this.projection)
        }
    },
    b.WebGLRenderer.prototype.renderDisplayObject = function(a, c, d) {
        this.renderSession.blendModeManager.setBlendMode(b.blendModes.NORMAL),
        this.renderSession.drawCount = 0,
        this.renderSession.flipY = d ? -1 : 1,
        this.renderSession.projection = c,
        this.renderSession.offset = this.offset,
        this.spriteBatch.begin(this.renderSession),
        this.filterManager.begin(this.renderSession, d),
        a._renderWebGL(this.renderSession),
        this.spriteBatch.end()
    },
    b.WebGLRenderer.prototype.resize = function(a, b) {
        this.width = a * this.resolution,
        this.height = b * this.resolution,
        this.view.width = this.width,
        this.view.height = this.height,
        this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"),
        this.gl.viewport(0, 0, this.width, this.height),
        this.projection.x = this.width / 2 / this.resolution,
        this.projection.y = -this.height / 2 / this.resolution
    },
    b.WebGLRenderer.prototype.updateTexture = function(a) {
        if (a.hasLoaded) {
            var c = this.gl;
            return a._glTextures[c.id] || (a._glTextures[c.id] = c.createTexture()),
            c.bindTexture(c.TEXTURE_2D, a._glTextures[c.id]),
            c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.premultipliedAlpha),
            c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, c.RGBA, c.UNSIGNED_BYTE, a.source),
            c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MAG_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR: c.NEAREST),
            a.mipmap && b.isPowerOfTwo(a.width, a.height) ? (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR_MIPMAP_LINEAR: c.NEAREST_MIPMAP_NEAREST), c.generateMipmap(c.TEXTURE_2D)) : c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR: c.NEAREST),
            a._powerOf2 ? (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.REPEAT), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.REPEAT)) : (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.CLAMP_TO_EDGE), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.CLAMP_TO_EDGE)),
            a._dirty[c.id] = !1,
            a._glTextures[c.id]
        }
    },
    b.WebGLRenderer.prototype.handleContextLost = function(a) {
        a.preventDefault(),
        this.contextLost = !0
    },
    b.WebGLRenderer.prototype.handleContextRestored = function() {
        this.initContext();
        for (var a in b.TextureCache) {
            var c = b.TextureCache[a].baseTexture;
            c._glTextures = []
        }
        this.contextLost = !1
    },
    b.WebGLRenderer.prototype.destroy = function() {
        this.view.removeEventListener("webglcontextlost", this.contextLostBound),
        this.view.removeEventListener("webglcontextrestored", this.contextRestoredBound),
        b.glContexts[this.glContextId] = null,
        this.projection = null,
        this.offset = null,
        this.shaderManager.destroy(),
        this.spriteBatch.destroy(),
        this.maskManager.destroy(),
        this.filterManager.destroy(),
        this.shaderManager = null,
        this.spriteBatch = null,
        this.maskManager = null,
        this.filterManager = null,
        this.gl = null,
        this.renderSession = null,
        b.instances[this.glContextId] = null,
        b.WebGLRenderer.glContextId--
    },
    b.WebGLRenderer.prototype.mapBlendModes = function() {
        var a = this.gl;
        b.blendModesWebGL || (b.blendModesWebGL = [], b.blendModesWebGL[b.blendModes.NORMAL] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.ADD] = [a.SRC_ALPHA, a.DST_ALPHA], b.blendModesWebGL[b.blendModes.MULTIPLY] = [a.DST_COLOR, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.SCREEN] = [a.SRC_ALPHA, a.ONE], b.blendModesWebGL[b.blendModes.OVERLAY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.DARKEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.LIGHTEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.COLOR_DODGE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.COLOR_BURN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.HARD_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.SOFT_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.DIFFERENCE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.EXCLUSION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.HUE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.SATURATION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.COLOR] = [a.ONE, a.ONE_MINUS_SRC_ALPHA], b.blendModesWebGL[b.blendModes.LUMINOSITY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA])
    },
    b.WebGLRenderer.glContextId = 0,
    b.WebGLBlendModeManager = function() {
        this.currentBlendMode = 99999
    },
    b.WebGLBlendModeManager.prototype.constructor = b.WebGLBlendModeManager,
    b.WebGLBlendModeManager.prototype.setContext = function(a) {
        this.gl = a
    },
    b.WebGLBlendModeManager.prototype.setBlendMode = function(a) {
        if (this.currentBlendMode === a) return ! 1;
        this.currentBlendMode = a;
        var c = b.blendModesWebGL[this.currentBlendMode];
        return this.gl.blendFunc(c[0], c[1]),
        !0
    },
    b.WebGLBlendModeManager.prototype.destroy = function() {
        this.gl = null
    },
    b.WebGLMaskManager = function() {},
    b.WebGLMaskManager.prototype.constructor = b.WebGLMaskManager,
    b.WebGLMaskManager.prototype.setContext = function(a) {
        this.gl = a
    },
    b.WebGLMaskManager.prototype.pushMask = function(a, c) {
        var d = c.gl;
        a.dirty && b.WebGLGraphics.updateGraphics(a, d),
        a._webGL[d.id].data.length && c.stencilManager.pushStencil(a, a._webGL[d.id].data[0], c)
    },
    b.WebGLMaskManager.prototype.popMask = function(a, b) {
        var c = this.gl;
        b.stencilManager.popStencil(a, a._webGL[c.id].data[0], b)
    },
    b.WebGLMaskManager.prototype.destroy = function() {
        this.gl = null
    },
    b.WebGLStencilManager = function() {
        this.stencilStack = [],
        this.reverse = !0,
        this.count = 0
    },
    b.WebGLStencilManager.prototype.setContext = function(a) {
        this.gl = a
    },
    b.WebGLStencilManager.prototype.pushStencil = function(a, b, c) {
        var d = this.gl;
        this.bindGraphics(a, b, c),
        0 === this.stencilStack.length && (d.enable(d.STENCIL_TEST), d.clear(d.STENCIL_BUFFER_BIT), this.reverse = !0, this.count = 0),
        this.stencilStack.push(b);
        var e = this.count;
        d.colorMask(!1, !1, !1, !1),
        d.stencilFunc(d.ALWAYS, 0, 255),
        d.stencilOp(d.KEEP, d.KEEP, d.INVERT),
        1 === b.mode ? (d.drawElements(d.TRIANGLE_FAN, b.indices.length - 4, d.UNSIGNED_SHORT, 0), this.reverse ? (d.stencilFunc(d.EQUAL, 255 - e, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)) : (d.stencilFunc(d.EQUAL, e, 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)), d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (b.indices.length - 4)), this.reverse ? d.stencilFunc(d.EQUAL, 255 - (e + 1), 255) : d.stencilFunc(d.EQUAL, e + 1, 255), this.reverse = !this.reverse) : (this.reverse ? (d.stencilFunc(d.EQUAL, e, 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)) : (d.stencilFunc(d.EQUAL, 255 - e, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)), d.drawElements(d.TRIANGLE_STRIP, b.indices.length, d.UNSIGNED_SHORT, 0), this.reverse ? d.stencilFunc(d.EQUAL, e + 1, 255) : d.stencilFunc(d.EQUAL, 255 - (e + 1), 255)),
        d.colorMask(!0, !0, !0, !0),
        d.stencilOp(d.KEEP, d.KEEP, d.KEEP),
        this.count++
    },
    b.WebGLStencilManager.prototype.bindGraphics = function(a, c, d) {
        this._currentGraphics = a;
        var e, f = this.gl,
        g = d.projection,
        h = d.offset;
        1 === c.mode ? (e = d.shaderManager.complexPrimitiveShader, d.shaderManager.setShader(e), f.uniform1f(e.flipY, d.flipY), f.uniformMatrix3fv(e.translationMatrix, !1, a.worldTransform.toArray(!0)), f.uniform2f(e.projectionVector, g.x, -g.y), f.uniform2f(e.offsetVector, -h.x, -h.y), f.uniform3fv(e.tintColor, b.hex2rgb(a.tint)), f.uniform3fv(e.color, c.color), f.uniform1f(e.alpha, a.worldAlpha * c.alpha), f.bindBuffer(f.ARRAY_BUFFER, c.buffer), f.vertexAttribPointer(e.aVertexPosition, 2, f.FLOAT, !1, 8, 0), f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, c.indexBuffer)) : (e = d.shaderManager.primitiveShader, d.shaderManager.setShader(e), f.uniformMatrix3fv(e.translationMatrix, !1, a.worldTransform.toArray(!0)), f.uniform1f(e.flipY, d.flipY), f.uniform2f(e.projectionVector, g.x, -g.y), f.uniform2f(e.offsetVector, -h.x, -h.y), f.uniform3fv(e.tintColor, b.hex2rgb(a.tint)), f.uniform1f(e.alpha, a.worldAlpha), f.bindBuffer(f.ARRAY_BUFFER, c.buffer), f.vertexAttribPointer(e.aVertexPosition, 2, f.FLOAT, !1, 24, 0), f.vertexAttribPointer(e.colorAttribute, 4, f.FLOAT, !1, 24, 8), f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, c.indexBuffer))
    },
    b.WebGLStencilManager.prototype.popStencil = function(a, b, c) {
        var d = this.gl;
        if (this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length) d.disable(d.STENCIL_TEST);
        else {
            var e = this.count;
            this.bindGraphics(a, b, c),
            d.colorMask(!1, !1, !1, !1),
            1 === b.mode ? (this.reverse = !this.reverse, this.reverse ? (d.stencilFunc(d.EQUAL, 255 - (e + 1), 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)) : (d.stencilFunc(d.EQUAL, e + 1, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)), d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (b.indices.length - 4)), d.stencilFunc(d.ALWAYS, 0, 255), d.stencilOp(d.KEEP, d.KEEP, d.INVERT), d.drawElements(d.TRIANGLE_FAN, b.indices.length - 4, d.UNSIGNED_SHORT, 0), this.reverse ? d.stencilFunc(d.EQUAL, e, 255) : d.stencilFunc(d.EQUAL, 255 - e, 255)) : (this.reverse ? (d.stencilFunc(d.EQUAL, e + 1, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)) : (d.stencilFunc(d.EQUAL, 255 - (e + 1), 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)), d.drawElements(d.TRIANGLE_STRIP, b.indices.length, d.UNSIGNED_SHORT, 0), this.reverse ? d.stencilFunc(d.EQUAL, e, 255) : d.stencilFunc(d.EQUAL, 255 - e, 255)),
            d.colorMask(!0, !0, !0, !0),
            d.stencilOp(d.KEEP, d.KEEP, d.KEEP)
        }
    },
    b.WebGLStencilManager.prototype.destroy = function() {
        this.stencilStack = null,
        this.gl = null
    },
    b.WebGLShaderManager = function() {
        this.maxAttibs = 10,
        this.attribState = [],
        this.tempAttribState = [];
        for (var a = 0; a < this.maxAttibs; a++) this.attribState[a] = !1;
        this.stack = []
    },
    b.WebGLShaderManager.prototype.constructor = b.WebGLShaderManager,
    b.WebGLShaderManager.prototype.setContext = function(a) {
        this.gl = a,
        this.primitiveShader = new b.PrimitiveShader(a),
        this.complexPrimitiveShader = new b.ComplexPrimitiveShader(a),
        this.defaultShader = new b.PixiShader(a),
        this.fastShader = new b.PixiFastShader(a),
        this.stripShader = new b.StripShader(a),
        this.setShader(this.defaultShader)
    },
    b.WebGLShaderManager.prototype.setAttribs = function(a) {
        var b;
        for (b = 0; b < this.tempAttribState.length; b++) this.tempAttribState[b] = !1;
        for (b = 0; b < a.length; b++) {
            var c = a[b];
            this.tempAttribState[c] = !0
        }
        var d = this.gl;
        for (b = 0; b < this.attribState.length; b++) this.attribState[b] !== this.tempAttribState[b] && (this.attribState[b] = this.tempAttribState[b], this.tempAttribState[b] ? d.enableVertexAttribArray(b) : d.disableVertexAttribArray(b))
    },
    b.WebGLShaderManager.prototype.setShader = function(a) {
        return this._currentId === a._UID ? !1 : (this._currentId = a._UID, this.currentShader = a, this.gl.useProgram(a.program), this.setAttribs(a.attributes), !0)
    },
    b.WebGLShaderManager.prototype.destroy = function() {
        this.attribState = null,
        this.tempAttribState = null,
        this.primitiveShader.destroy(),
        this.complexPrimitiveShader.destroy(),
        this.defaultShader.destroy(),
        this.fastShader.destroy(),
        this.stripShader.destroy(),
        this.gl = null
    },
    b.WebGLSpriteBatch = function() {
        this.vertSize = 5,
        this.size = 2e3;
        var a = 4 * this.size * 4 * this.vertSize,
        c = 6 * this.size;
        this.vertices = new b.ArrayBuffer(a),
        this.positions = new b.Float32Array(this.vertices),
        this.colors = new b.Uint32Array(this.vertices),
        this.indices = new b.Uint16Array(c),
        this.lastIndexCount = 0;
        for (var d = 0,
        e = 0; c > d; d += 6, e += 4) this.indices[d + 0] = e + 0,
        this.indices[d + 1] = e + 1,
        this.indices[d + 2] = e + 2,
        this.indices[d + 3] = e + 0,
        this.indices[d + 4] = e + 2,
        this.indices[d + 5] = e + 3;
        this.drawing = !1,
        this.currentBatchSize = 0,
        this.currentBaseTexture = null,
        this.dirty = !0,
        this.textures = [],
        this.blendModes = [],
        this.shaders = [],
        this.sprites = [],
        this.defaultShader = new b.AbstractFilter(["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"])
    },
    b.WebGLSpriteBatch.prototype.setContext = function(a) {
        this.gl = a,
        this.vertexBuffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices, a.STATIC_DRAW),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW),
        this.currentBlendMode = 99999;
        var c = new b.PixiShader(a);
        c.fragmentSrc = this.defaultShader.fragmentSrc,
        c.uniforms = {},
        c.init(),
        this.defaultShader.shaders[a.id] = c
    },
    b.WebGLSpriteBatch.prototype.begin = function(a) {
        this.renderSession = a,
        this.shader = this.renderSession.shaderManager.defaultShader,
        this.start()
    },
    b.WebGLSpriteBatch.prototype.end = function() {
        this.flush()
    },
    b.WebGLSpriteBatch.prototype.render = function(a) {
        var b = a.texture;
        this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = b.baseTexture);
        var c = b._uvs;
        if (c) {
            var d, e, f, g, h = a.anchor.x,
            i = a.anchor.y;
            if (b.trim) {
                var j = b.trim;
                e = j.x - h * j.width,
                d = e + b.crop.width,
                g = j.y - i * j.height,
                f = g + b.crop.height
            } else d = b.frame.width * (1 - h),
            e = b.frame.width * -h,
            f = b.frame.height * (1 - i),
            g = b.frame.height * -i;
            var k = 4 * this.currentBatchSize * this.vertSize,
            l = b.baseTexture.resolution,
            m = a.worldTransform,
            n = m.a / l,
            o = m.b / l,
            p = m.c / l,
            q = m.d / l,
            r = m.tx,
            s = m.ty,
            t = this.colors,
            u = this.positions;
            this.renderSession.roundPixels ? (u[k] = n * e + p * g + r | 0, u[k + 1] = q * g + o * e + s | 0, u[k + 5] = n * d + p * g + r | 0, u[k + 6] = q * g + o * d + s | 0, u[k + 10] = n * d + p * f + r | 0, u[k + 11] = q * f + o * d + s | 0, u[k + 15] = n * e + p * f + r | 0, u[k + 16] = q * f + o * e + s | 0) : (u[k] = n * e + p * g + r, u[k + 1] = q * g + o * e + s, u[k + 5] = n * d + p * g + r, u[k + 6] = q * g + o * d + s, u[k + 10] = n * d + p * f + r, u[k + 11] = q * f + o * d + s, u[k + 15] = n * e + p * f + r, u[k + 16] = q * f + o * e + s),
            u[k + 2] = c.x0,
            u[k + 3] = c.y0,
            u[k + 7] = c.x1,
            u[k + 8] = c.y1,
            u[k + 12] = c.x2,
            u[k + 13] = c.y2,
            u[k + 17] = c.x3,
            u[k + 18] = c.y3;
            var v = a.tint;
            t[k + 4] = t[k + 9] = t[k + 14] = t[k + 19] = (v >> 16) + (65280 & v) + ((255 & v) << 16) + (255 * a.worldAlpha << 24),
            this.sprites[this.currentBatchSize++] = a
        }
    },
    b.WebGLSpriteBatch.prototype.renderTilingSprite = function(a) {
        var c = a.tilingTexture;
        this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = c.baseTexture),
        a._uvs || (a._uvs = new b.TextureUvs);
        var d = a._uvs;
        a.tilePosition.x %= c.baseTexture.width * a.tileScaleOffset.x,
        a.tilePosition.y %= c.baseTexture.height * a.tileScaleOffset.y;
        var e = a.tilePosition.x / (c.baseTexture.width * a.tileScaleOffset.x),
        f = a.tilePosition.y / (c.baseTexture.height * a.tileScaleOffset.y),
        g = a.width / c.baseTexture.width / (a.tileScale.x * a.tileScaleOffset.x),
        h = a.height / c.baseTexture.height / (a.tileScale.y * a.tileScaleOffset.y);
        d.x0 = 0 - e,
        d.y0 = 0 - f,
        d.x1 = 1 * g - e,
        d.y1 = 0 - f,
        d.x2 = 1 * g - e,
        d.y2 = 1 * h - f,
        d.x3 = 0 - e,
        d.y3 = 1 * h - f;
        var i = a.tint,
        j = (i >> 16) + (65280 & i) + ((255 & i) << 16) + (255 * a.alpha << 24),
        k = this.positions,
        l = this.colors,
        m = a.width,
        n = a.height,
        o = a.anchor.x,
        p = a.anchor.y,
        q = m * (1 - o),
        r = m * -o,
        s = n * (1 - p),
        t = n * -p,
        u = 4 * this.currentBatchSize * this.vertSize,
        v = c.baseTexture.resolution,
        w = a.worldTransform,
        x = w.a / v,
        y = w.b / v,
        z = w.c / v,
        A = w.d / v,
        B = w.tx,
        C = w.ty;
        k[u++] = x * r + z * t + B,
        k[u++] = A * t + y * r + C,
        k[u++] = d.x0,
        k[u++] = d.y0,
        l[u++] = j,
        k[u++] = x * q + z * t + B,
        k[u++] = A * t + y * q + C,
        k[u++] = d.x1,
        k[u++] = d.y1,
        l[u++] = j,
        k[u++] = x * q + z * s + B,
        k[u++] = A * s + y * q + C,
        k[u++] = d.x2,
        k[u++] = d.y2,
        l[u++] = j,
        k[u++] = x * r + z * s + B,
        k[u++] = A * s + y * r + C,
        k[u++] = d.x3,
        k[u++] = d.y3,
        l[u++] = j,
        this.sprites[this.currentBatchSize++] = a
    },
    b.WebGLSpriteBatch.prototype.flush = function() {
        if (0 !== this.currentBatchSize) {
            var a, c = this.gl;
            if (this.dirty) {
                this.dirty = !1,
                c.activeTexture(c.TEXTURE0),
                c.bindBuffer(c.ARRAY_BUFFER, this.vertexBuffer),
                c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                a = this.defaultShader.shaders[c.id];
                var d = 4 * this.vertSize;
                c.vertexAttribPointer(a.aVertexPosition, 2, c.FLOAT, !1, d, 0),
                c.vertexAttribPointer(a.aTextureCoord, 2, c.FLOAT, !1, d, 8),
                c.vertexAttribPointer(a.colorAttribute, 4, c.UNSIGNED_BYTE, !0, d, 16)
            }
            if (this.currentBatchSize > .5 * this.size) c.bufferSubData(c.ARRAY_BUFFER, 0, this.vertices);
            else {
                var e = this.positions.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                c.bufferSubData(c.ARRAY_BUFFER, 0, e)
            }
            for (var f, g, h, i, j = 0,
            k = 0,
            l = null,
            m = this.renderSession.blendModeManager.currentBlendMode,
            n = null,
            o = !1,
            p = !1,
            q = 0,
            r = this.currentBatchSize; r > q; q++) {
                if (i = this.sprites[q], f = i.texture.baseTexture, g = i.blendMode, h = i.shader || this.defaultShader, o = m !== g, p = n !== h, (l !== f || o || p) && (this.renderBatch(l, j, k), k = q, j = 0, l = f, o && (m = g, this.renderSession.blendModeManager.setBlendMode(m)), p)) {
                    n = h,
                    a = n.shaders[c.id],
                    a || (a = new b.PixiShader(c), a.fragmentSrc = n.fragmentSrc, a.uniforms = n.uniforms, a.init(), n.shaders[c.id] = a),
                    this.renderSession.shaderManager.setShader(a),
                    a.dirty && a.syncUniforms();
                    var s = this.renderSession.projection;
                    c.uniform2f(a.projectionVector, s.x, s.y);
                    var t = this.renderSession.offset;
                    c.uniform2f(a.offsetVector, t.x, t.y)
                }
                j++
            }
            this.renderBatch(l, j, k),
            this.currentBatchSize = 0
        }
    },
    b.WebGLSpriteBatch.prototype.renderBatch = function(a, b, c) {
        if (0 !== b) {
            var d = this.gl;
            a._dirty[d.id] ? this.renderSession.renderer.updateTexture(a) : d.bindTexture(d.TEXTURE_2D, a._glTextures[d.id]),
            d.drawElements(d.TRIANGLES, 6 * b, d.UNSIGNED_SHORT, 6 * c * 2),
            this.renderSession.drawCount++
        }
    },
    b.WebGLSpriteBatch.prototype.stop = function() {
        this.flush(),
        this.dirty = !0
    },
    b.WebGLSpriteBatch.prototype.start = function() {
        this.dirty = !0
    },
    b.WebGLSpriteBatch.prototype.destroy = function() {
        this.vertices = null,
        this.indices = null,
        this.gl.deleteBuffer(this.vertexBuffer),
        this.gl.deleteBuffer(this.indexBuffer),
        this.currentBaseTexture = null,
        this.gl = null
    },
    b.WebGLFastSpriteBatch = function(a) {
        this.vertSize = 10,
        this.maxSize = 6e3,
        this.size = this.maxSize;
        var c = 4 * this.size * this.vertSize,
        d = 6 * this.maxSize;
        this.vertices = new b.Float32Array(c),
        this.indices = new b.Uint16Array(d),
        this.vertexBuffer = null,
        this.indexBuffer = null,
        this.lastIndexCount = 0;
        for (var e = 0,
        f = 0; d > e; e += 6, f += 4) this.indices[e + 0] = f + 0,
        this.indices[e + 1] = f + 1,
        this.indices[e + 2] = f + 2,
        this.indices[e + 3] = f + 0,
        this.indices[e + 4] = f + 2,
        this.indices[e + 5] = f + 3;
        this.drawing = !1,
        this.currentBatchSize = 0,
        this.currentBaseTexture = null,
        this.currentBlendMode = 0,
        this.renderSession = null,
        this.shader = null,
        this.matrix = null,
        this.setContext(a)
    },
    b.WebGLFastSpriteBatch.prototype.constructor = b.WebGLFastSpriteBatch,
    b.WebGLFastSpriteBatch.prototype.setContext = function(a) {
        this.gl = a,
        this.vertexBuffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices, a.STATIC_DRAW),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW)
    },
    b.WebGLFastSpriteBatch.prototype.begin = function(a, b) {
        this.renderSession = b,
        this.shader = this.renderSession.shaderManager.fastShader,
        this.matrix = a.worldTransform.toArray(!0),
        this.start()
    },
    b.WebGLFastSpriteBatch.prototype.end = function() {
        this.flush()
    },
    b.WebGLFastSpriteBatch.prototype.render = function(a) {
        var b = a.children,
        c = b[0];
        if (c.texture._uvs) {
            this.currentBaseTexture = c.texture.baseTexture,
            c.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(c.blendMode));
            for (var d = 0,
            e = b.length; e > d; d++) this.renderSprite(b[d]);
            this.flush()
        }
    },
    b.WebGLFastSpriteBatch.prototype.renderSprite = function(a) {
        if (a.visible && (a.texture.baseTexture === this.currentBaseTexture || (this.flush(), this.currentBaseTexture = a.texture.baseTexture, a.texture._uvs))) {
            var b, c, d, e, f, g, h, i, j = this.vertices;
            if (b = a.texture._uvs, c = a.texture.frame.width, d = a.texture.frame.height, a.texture.trim) {
                var k = a.texture.trim;
                f = k.x - a.anchor.x * k.width,
                e = f + a.texture.crop.width,
                h = k.y - a.anchor.y * k.height,
                g = h + a.texture.crop.height
            } else e = a.texture.frame.width * (1 - a.anchor.x),
            f = a.texture.frame.width * -a.anchor.x,
            g = a.texture.frame.height * (1 - a.anchor.y),
            h = a.texture.frame.height * -a.anchor.y;
            i = 4 * this.currentBatchSize * this.vertSize,
            j[i++] = f,
            j[i++] = h,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x0,
            j[i++] = b.y1,
            j[i++] = a.alpha,
            j[i++] = e,
            j[i++] = h,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x1,
            j[i++] = b.y1,
            j[i++] = a.alpha,
            j[i++] = e,
            j[i++] = g,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x2,
            j[i++] = b.y2,
            j[i++] = a.alpha,
            j[i++] = f,
            j[i++] = g,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x3,
            j[i++] = b.y3,
            j[i++] = a.alpha,
            this.currentBatchSize++,
            this.currentBatchSize >= this.size && this.flush()
        }
    },
    b.WebGLFastSpriteBatch.prototype.flush = function() {
        if (0 !== this.currentBatchSize) {
            var a = this.gl;
            if (this.currentBaseTexture._glTextures[a.id] || this.renderSession.renderer.updateTexture(this.currentBaseTexture, a), a.bindTexture(a.TEXTURE_2D, this.currentBaseTexture._glTextures[a.id]), this.currentBatchSize > .5 * this.size) a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertices);
            else {
                var b = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                a.bufferSubData(a.ARRAY_BUFFER, 0, b)
            }
            a.drawElements(a.TRIANGLES, 6 * this.currentBatchSize, a.UNSIGNED_SHORT, 0),
            this.currentBatchSize = 0,
            this.renderSession.drawCount++
        }
    },
    b.WebGLFastSpriteBatch.prototype.stop = function() {
        this.flush()
    },
    b.WebGLFastSpriteBatch.prototype.start = function() {
        var a = this.gl;
        a.activeTexture(a.TEXTURE0),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
        var b = this.renderSession.projection;
        a.uniform2f(this.shader.projectionVector, b.x, b.y),
        a.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
        var c = 4 * this.vertSize;
        a.vertexAttribPointer(this.shader.aVertexPosition, 2, a.FLOAT, !1, c, 0),
        a.vertexAttribPointer(this.shader.aPositionCoord, 2, a.FLOAT, !1, c, 8),
        a.vertexAttribPointer(this.shader.aScale, 2, a.FLOAT, !1, c, 16),
        a.vertexAttribPointer(this.shader.aRotation, 1, a.FLOAT, !1, c, 24),
        a.vertexAttribPointer(this.shader.aTextureCoord, 2, a.FLOAT, !1, c, 28),
        a.vertexAttribPointer(this.shader.colorAttribute, 1, a.FLOAT, !1, c, 36)
    },
    b.WebGLFilterManager = function() {
        this.filterStack = [],
        this.offsetX = 0,
        this.offsetY = 0
    },
    b.WebGLFilterManager.prototype.constructor = b.WebGLFilterManager,
    b.WebGLFilterManager.prototype.setContext = function(a) {
        this.gl = a,
        this.texturePool = [],
        this.initShaderBuffers()
    },
    b.WebGLFilterManager.prototype.begin = function(a, b) {
        this.renderSession = a,
        this.defaultShader = a.shaderManager.defaultShader;
        var c = this.renderSession.projection;
        this.width = 2 * c.x,
        this.height = 2 * -c.y,
        this.buffer = b
    },
    b.WebGLFilterManager.prototype.pushFilter = function(a) {
        var c = this.gl,
        d = this.renderSession.projection,
        e = this.renderSession.offset;
        a._filterArea = a.target.filterArea || a.target.getBounds(),
        this.filterStack.push(a);
        var f = a.filterPasses[0];
        this.offsetX += a._filterArea.x,
        this.offsetY += a._filterArea.y;
        var g = this.texturePool.pop();
        g ? g.resize(this.width, this.height) : g = new b.FilterTexture(this.gl, this.width, this.height),
        c.bindTexture(c.TEXTURE_2D, g.texture);
        var h = a._filterArea,
        i = f.padding;
        h.x -= i,
        h.y -= i,
        h.width += 2 * i,
        h.height += 2 * i,
        h.x < 0 && (h.x = 0),
        h.width > this.width && (h.width = this.width),
        h.y < 0 && (h.y = 0),
        h.height > this.height && (h.height = this.height),
        c.bindFramebuffer(c.FRAMEBUFFER, g.frameBuffer),
        c.viewport(0, 0, h.width, h.height),
        d.x = h.width / 2,
        d.y = -h.height / 2,
        e.x = -h.x,
        e.y = -h.y,
        c.colorMask(!0, !0, !0, !0),
        c.clearColor(0, 0, 0, 0),
        c.clear(c.COLOR_BUFFER_BIT),
        a._glFilterTexture = g
    },
    b.WebGLFilterManager.prototype.popFilter = function() {
        var a = this.gl,
        c = this.filterStack.pop(),
        d = c._filterArea,
        e = c._glFilterTexture,
        f = this.renderSession.projection,
        g = this.renderSession.offset;
        if (c.filterPasses.length > 1) {
            a.viewport(0, 0, d.width, d.height),
            a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
            this.vertexArray[0] = 0,
            this.vertexArray[1] = d.height,
            this.vertexArray[2] = d.width,
            this.vertexArray[3] = d.height,
            this.vertexArray[4] = 0,
            this.vertexArray[5] = 0,
            this.vertexArray[6] = d.width,
            this.vertexArray[7] = 0,
            a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertexArray),
            a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
            this.uvArray[2] = d.width / this.width,
            this.uvArray[5] = d.height / this.height,
            this.uvArray[6] = d.width / this.width,
            this.uvArray[7] = d.height / this.height,
            a.bufferSubData(a.ARRAY_BUFFER, 0, this.uvArray);
            var h = e,
            i = this.texturePool.pop();
            i || (i = new b.FilterTexture(this.gl, this.width, this.height)),
            i.resize(this.width, this.height),
            a.bindFramebuffer(a.FRAMEBUFFER, i.frameBuffer),
            a.clear(a.COLOR_BUFFER_BIT),
            a.disable(a.BLEND);
            for (var j = 0; j < c.filterPasses.length - 1; j++) {
                var k = c.filterPasses[j];
                a.bindFramebuffer(a.FRAMEBUFFER, i.frameBuffer),
                a.activeTexture(a.TEXTURE0),
                a.bindTexture(a.TEXTURE_2D, h.texture),
                this.applyFilterPass(k, d, d.width, d.height);
                var l = h;
                h = i,
                i = l
            }
            a.enable(a.BLEND),
            e = h,
            this.texturePool.push(i)
        }
        var m = c.filterPasses[c.filterPasses.length - 1];
        this.offsetX -= d.x,
        this.offsetY -= d.y;
        var n = this.width,
        o = this.height,
        p = 0,
        q = 0,
        r = this.buffer;
        if (0 === this.filterStack.length) a.colorMask(!0, !0, !0, !0);
        else {
            var s = this.filterStack[this.filterStack.length - 1];
            d = s._filterArea,
            n = d.width,
            o = d.height,
            p = d.x,
            q = d.y,
            r = s._glFilterTexture.frameBuffer
        }
        f.x = n / 2,
        f.y = -o / 2,
        g.x = p,
        g.y = q,
        d = c._filterArea;
        var t = d.x - p,
        u = d.y - q;
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        this.vertexArray[0] = t,
        this.vertexArray[1] = u + d.height,
        this.vertexArray[2] = t + d.width,
        this.vertexArray[3] = u + d.height,
        this.vertexArray[4] = t,
        this.vertexArray[5] = u,
        this.vertexArray[6] = t + d.width,
        this.vertexArray[7] = u,
        a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertexArray),
        a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
        this.uvArray[2] = d.width / this.width,
        this.uvArray[5] = d.height / this.height,
        this.uvArray[6] = d.width / this.width,
        this.uvArray[7] = d.height / this.height,
        a.bufferSubData(a.ARRAY_BUFFER, 0, this.uvArray),
        a.viewport(0, 0, n * this.renderSession.resolution, o * this.renderSession.resolution),
        a.bindFramebuffer(a.FRAMEBUFFER, r),
        a.activeTexture(a.TEXTURE0),
        a.bindTexture(a.TEXTURE_2D, e.texture),
        this.applyFilterPass(m, d, n, o),
        this.texturePool.push(e),
        c._glFilterTexture = null
    },
    b.WebGLFilterManager.prototype.applyFilterPass = function(a, c, d, e) {
        var f = this.gl,
        g = a.shaders[f.id];
        g || (g = new b.PixiShader(f), g.fragmentSrc = a.fragmentSrc, g.uniforms = a.uniforms, g.init(), a.shaders[f.id] = g),
        this.renderSession.shaderManager.setShader(g),
        f.uniform2f(g.projectionVector, d / 2, -e / 2),
        f.uniform2f(g.offsetVector, 0, 0),
        a.uniforms.dimensions && (a.uniforms.dimensions.value[0] = this.width, a.uniforms.dimensions.value[1] = this.height, a.uniforms.dimensions.value[2] = this.vertexArray[0], a.uniforms.dimensions.value[3] = this.vertexArray[5]),
        g.syncUniforms(),
        f.bindBuffer(f.ARRAY_BUFFER, this.vertexBuffer),
        f.vertexAttribPointer(g.aVertexPosition, 2, f.FLOAT, !1, 0, 0),
        f.bindBuffer(f.ARRAY_BUFFER, this.uvBuffer),
        f.vertexAttribPointer(g.aTextureCoord, 2, f.FLOAT, !1, 0, 0),
        f.bindBuffer(f.ARRAY_BUFFER, this.colorBuffer),
        f.vertexAttribPointer(g.colorAttribute, 2, f.FLOAT, !1, 0, 0),
        f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        f.drawElements(f.TRIANGLES, 6, f.UNSIGNED_SHORT, 0),
        this.renderSession.drawCount++
    },
    b.WebGLFilterManager.prototype.initShaderBuffers = function() {
        var a = this.gl;
        this.vertexBuffer = a.createBuffer(),
        this.uvBuffer = a.createBuffer(),
        this.colorBuffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        this.vertexArray = new b.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.vertexArray, a.STATIC_DRAW),
        this.uvArray = new b.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
        a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.uvArray, a.STATIC_DRAW),
        this.colorArray = new b.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]),
        a.bindBuffer(a.ARRAY_BUFFER, this.colorBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.colorArray, a.STATIC_DRAW),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), a.STATIC_DRAW)
    },
    b.WebGLFilterManager.prototype.destroy = function() {
        var a = this.gl;
        this.filterStack = null,
        this.offsetX = 0,
        this.offsetY = 0;
        for (var b = 0; b < this.texturePool.length; b++) this.texturePool[b].destroy();
        this.texturePool = null,
        a.deleteBuffer(this.vertexBuffer),
        a.deleteBuffer(this.uvBuffer),
        a.deleteBuffer(this.colorBuffer),
        a.deleteBuffer(this.indexBuffer)
    },
    b.FilterTexture = function(a, c, d, e) {
        this.gl = a,
        this.frameBuffer = a.createFramebuffer(),
        this.texture = a.createTexture(),
        e = e || b.scaleModes.DEFAULT,
        a.bindTexture(a.TEXTURE_2D, this.texture),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, e === b.scaleModes.LINEAR ? a.LINEAR: a.NEAREST),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, e === b.scaleModes.LINEAR ? a.LINEAR: a.NEAREST),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE),
        a.bindFramebuffer(a.FRAMEBUFFER, this.frameBuffer),
        a.bindFramebuffer(a.FRAMEBUFFER, this.frameBuffer),
        a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_2D, this.texture, 0),
        this.renderBuffer = a.createRenderbuffer(),
        a.bindRenderbuffer(a.RENDERBUFFER, this.renderBuffer),
        a.framebufferRenderbuffer(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.RENDERBUFFER, this.renderBuffer),
        this.resize(c, d)
    },
    b.FilterTexture.prototype.constructor = b.FilterTexture,
    b.FilterTexture.prototype.clear = function() {
        var a = this.gl;
        a.clearColor(0, 0, 0, 0),
        a.clear(a.COLOR_BUFFER_BIT)
    },
    b.FilterTexture.prototype.resize = function(a, b) {
        if (this.width !== a || this.height !== b) {
            this.width = a,
            this.height = b;
            var c = this.gl;
            c.bindTexture(c.TEXTURE_2D, this.texture),
            c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, a, b, 0, c.RGBA, c.UNSIGNED_BYTE, null),
            c.bindRenderbuffer(c.RENDERBUFFER, this.renderBuffer),
            c.renderbufferStorage(c.RENDERBUFFER, c.DEPTH_STENCIL, a, b)
        }
    },
    b.FilterTexture.prototype.destroy = function() {
        var a = this.gl;
        a.deleteFramebuffer(this.frameBuffer),
        a.deleteTexture(this.texture),
        this.frameBuffer = null,
        this.texture = null
    },
    b.CanvasBuffer = function(a, b) {
        this.width = a,
        this.height = b,
        this.canvas = document.createElement("canvas"),
        this.context = this.canvas.getContext("2d"),
        this.canvas.width = a,
        this.canvas.height = b
    },
    b.CanvasBuffer.prototype.constructor = b.CanvasBuffer,
    b.CanvasBuffer.prototype.clear = function() {
        this.context.setTransform(1, 0, 0, 1, 0, 0),
        this.context.clearRect(0, 0, this.width, this.height)
    },
    b.CanvasBuffer.prototype.resize = function(a, b) {
        this.width = this.canvas.width = a,
        this.height = this.canvas.height = b
    },
    b.CanvasMaskManager = function() {},
    b.CanvasMaskManager.prototype.constructor = b.CanvasMaskManager,
    b.CanvasMaskManager.prototype.pushMask = function(a, c) {
        var d = c.context;
        d.save();
        var e = a.alpha,
        f = a.worldTransform,
        g = c.resolution;
        d.setTransform(f.a * g, f.b * g, f.c * g, f.d * g, f.tx * g, f.ty * g),
        b.CanvasGraphics.renderGraphicsMask(a, d),
        d.clip(),
        a.worldAlpha = e
    },
    b.CanvasMaskManager.prototype.popMask = function(a) {
        a.context.restore()
    },
    b.CanvasTinter = function() {},
    b.CanvasTinter.getTintedTexture = function(a, c) {
        var d = a.texture,
        e = b.CanvasTinter.canvas || document.createElement("canvas");
        if (b.CanvasTinter.tintMethod(d, c, e), b.CanvasTinter.convertTintToImage) {
            var f = new Image;
            f.src = e.toDataURL()
        } else b.CanvasTinter.canvas = null;
        return e
    },
    b.CanvasTinter.tintWithMultiply = function(a, b, c) {
        var d = c.getContext("2d"),
        e = a.crop;
        c.width = e.width,
        c.height = e.height,
        d.fillStyle = "#" + ("00000" + (0 | b).toString(16)).substr( - 6),
        d.fillRect(0, 0, e.width, e.height),
        d.globalCompositeOperation = "multiply",
        d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height),
        d.globalCompositeOperation = "destination-atop",
        d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height)
    },
    b.CanvasTinter.tintWithOverlay = function(a, b, c) {
        var d = c.getContext("2d"),
        e = a.crop;
        c.width = e.width,
        c.height = e.height,
        d.globalCompositeOperation = "copy",
        d.fillStyle = "#" + ("00000" + (0 | b).toString(16)).substr( - 6),
        d.fillRect(0, 0, e.width, e.height),
        d.globalCompositeOperation = "destination-atop",
        d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height)
    },
    b.CanvasTinter.tintWithPerPixel = function(a, c, d) {
        var e = d.getContext("2d"),
        f = a.crop;
        d.width = f.width,
        d.height = f.height,
        e.globalCompositeOperation = "copy",
        e.drawImage(a.baseTexture.source, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
        for (var g = b.hex2rgb(c), h = g[0], i = g[1], j = g[2], k = e.getImageData(0, 0, f.width, f.height), l = k.data, m = 0; m < l.length; m += 4) if (l[m + 0] *= h, l[m + 1] *= i, l[m + 2] *= j, !b.CanvasTinter.canHandleAlpha) {
            var n = l[m + 3];
            l[m + 0] /= 255 / n,
            l[m + 1] /= 255 / n,
            l[m + 2] /= 255 / n
        }
        e.putImageData(k, 0, 0)
    },
    b.CanvasTinter.roundColor = function(a) {
        var c = b.CanvasTinter.cacheStepsPerColorChannel,
        d = b.hex2rgb(a);
        return d[0] = Math.min(255, d[0] / c * c),
        d[1] = Math.min(255, d[1] / c * c),
        d[2] = Math.min(255, d[2] / c * c),
        b.rgb2hex(d)
    },
    b.CanvasTinter.checkInverseAlpha = function() {
        var a = new b.CanvasBuffer(2, 1);
        a.context.fillStyle = "rgba(10, 20, 30, 0.5)",
        a.context.fillRect(0, 0, 1, 1);
        var c = a.context.getImageData(0, 0, 1, 1);
        a.context.putImageData(c, 1, 0);
        var d = a.context.getImageData(1, 0, 1, 1);
        return d.data[0] === c.data[0] && d.data[1] === c.data[1] && d.data[2] === c.data[2] && d.data[3] === c.data[3]
    },
    b.CanvasTinter.cacheStepsPerColorChannel = 8,
    b.CanvasTinter.convertTintToImage = !1,
    b.CanvasTinter.canHandleAlpha = b.CanvasTinter.checkInverseAlpha(),
    b.CanvasTinter.canUseMultiply = b.canUseNewCanvasBlendModes(),
    b.CanvasTinter.tintMethod = b.CanvasTinter.canUseMultiply ? b.CanvasTinter.tintWithMultiply: b.CanvasTinter.tintWithPerPixel,
    b.CanvasRenderer = function(a, c, d) {
        if (d) for (var e in b.defaultRenderOptions)"undefined" == typeof d[e] && (d[e] = b.defaultRenderOptions[e]);
        else d = b.defaultRenderOptions;
        b.defaultRenderer || (b.defaultRenderer = this),
        this.type = b.CANVAS_RENDERER,
        this.resolution = d.resolution,
        this.clearBeforeRender = d.clearBeforeRender,
        this.transparent = d.transparent,
        this.autoResize = d.autoResize || !1,
        this.width = a || 800,
        this.height = c || 600,
        this.width *= this.resolution,
        this.height *= this.resolution,
        this.view = d.view || document.createElement("canvas"),
        this.context = this.view.getContext("2d", {
            alpha: this.transparent
        }),
        this.refresh = !0,
        this.view.width = this.width * this.resolution,
        this.view.height = this.height * this.resolution,
        this.count = 0,
        this.maskManager = new b.CanvasMaskManager,
        this.renderSession = {
            context: this.context,
            maskManager: this.maskManager,
            scaleMode: null,
            smoothProperty: null,
            roundPixels: !1
        },
        this.mapBlendModes(),
        this.resize(a, c),
        "imageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "imageSmoothingEnabled": "webkitImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "webkitImageSmoothingEnabled": "mozImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "mozImageSmoothingEnabled": "oImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "oImageSmoothingEnabled": "msImageSmoothingEnabled" in this.context && (this.renderSession.smoothProperty = "msImageSmoothingEnabled")
    },
    b.CanvasRenderer.prototype.constructor = b.CanvasRenderer,
    b.CanvasRenderer.prototype.render = function(a) {
        a.updateTransform(),
        this.context.setTransform(1, 0, 0, 1, 0, 0),
        this.context.globalAlpha = 1,
        this.renderSession.currentBlendMode = b.blendModes.NORMAL,
        this.context.globalCompositeOperation = b.blendModesCanvas[b.blendModes.NORMAL],
        navigator.isCocoonJS && this.view.screencanvas && (this.context.fillStyle = "black", this.context.clear()),
        this.clearBeforeRender && (this.transparent ? this.context.clearRect(0, 0, this.width, this.height) : (this.context.fillStyle = a.backgroundColorString, this.context.fillRect(0, 0, this.width, this.height))),
        this.renderDisplayObject(a)
    },
    b.CanvasRenderer.prototype.destroy = function(a) {
        "undefined" == typeof a && (a = !0),
        a && this.view.parent && this.view.parent.removeChild(this.view),
        this.view = null,
        this.context = null,
        this.maskManager = null,
        this.renderSession = null
    },
    b.CanvasRenderer.prototype.resize = function(a, b) {
        this.width = a * this.resolution,
        this.height = b * this.resolution,
        this.view.width = this.width,
        this.view.height = this.height,
        this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px")
    },
    b.CanvasRenderer.prototype.renderDisplayObject = function(a, b) {
        this.renderSession.context = b || this.context,
        this.renderSession.resolution = this.resolution,
        a._renderCanvas(this.renderSession)
    },
    b.CanvasRenderer.prototype.mapBlendModes = function() {
        b.blendModesCanvas || (b.blendModesCanvas = [], b.canUseNewCanvasBlendModes() ? (b.blendModesCanvas[b.blendModes.NORMAL] = "source-over", b.blendModesCanvas[b.blendModes.ADD] = "lighter", b.blendModesCanvas[b.blendModes.MULTIPLY] = "multiply", b.blendModesCanvas[b.blendModes.SCREEN] = "screen", b.blendModesCanvas[b.blendModes.OVERLAY] = "overlay", b.blendModesCanvas[b.blendModes.DARKEN] = "darken", b.blendModesCanvas[b.blendModes.LIGHTEN] = "lighten", b.blendModesCanvas[b.blendModes.COLOR_DODGE] = "color-dodge", b.blendModesCanvas[b.blendModes.COLOR_BURN] = "color-burn", b.blendModesCanvas[b.blendModes.HARD_LIGHT] = "hard-light", b.blendModesCanvas[b.blendModes.SOFT_LIGHT] = "soft-light", b.blendModesCanvas[b.blendModes.DIFFERENCE] = "difference", b.blendModesCanvas[b.blendModes.EXCLUSION] = "exclusion", b.blendModesCanvas[b.blendModes.HUE] = "hue", b.blendModesCanvas[b.blendModes.SATURATION] = "saturation", b.blendModesCanvas[b.blendModes.COLOR] = "color", b.blendModesCanvas[b.blendModes.LUMINOSITY] = "luminosity") : (b.blendModesCanvas[b.blendModes.NORMAL] = "source-over", b.blendModesCanvas[b.blendModes.ADD] = "lighter", b.blendModesCanvas[b.blendModes.MULTIPLY] = "source-over", b.blendModesCanvas[b.blendModes.SCREEN] = "source-over", b.blendModesCanvas[b.blendModes.OVERLAY] = "source-over", b.blendModesCanvas[b.blendModes.DARKEN] = "source-over", b.blendModesCanvas[b.blendModes.LIGHTEN] = "source-over", b.blendModesCanvas[b.blendModes.COLOR_DODGE] = "source-over", b.blendModesCanvas[b.blendModes.COLOR_BURN] = "source-over", b.blendModesCanvas[b.blendModes.HARD_LIGHT] = "source-over", b.blendModesCanvas[b.blendModes.SOFT_LIGHT] = "source-over", b.blendModesCanvas[b.blendModes.DIFFERENCE] = "source-over", b.blendModesCanvas[b.blendModes.EXCLUSION] = "source-over", b.blendModesCanvas[b.blendModes.HUE] = "source-over", b.blendModesCanvas[b.blendModes.SATURATION] = "source-over", b.blendModesCanvas[b.blendModes.COLOR] = "source-over", b.blendModesCanvas[b.blendModes.LUMINOSITY] = "source-over"))
    },
    b.CanvasGraphics = function() {},
    b.CanvasGraphics.renderGraphics = function(a, c) {
        var d = a.worldAlpha;
        a.dirty && (this.updateGraphicsTint(a), a.dirty = !1);
        for (var e = 0; e < a.graphicsData.length; e++) {
            var f = a.graphicsData[e],
            g = f.shape,
            h = f._fillTint,
            i = f._lineTint;
            if (c.lineWidth = f.lineWidth, f.type === b.Graphics.POLY) {
                c.beginPath();
                var j = g.points;
                c.moveTo(j[0], j[1]);
                for (var k = 1; k < j.length / 2; k++) c.lineTo(j[2 * k], j[2 * k + 1]);
                g.closed && c.lineTo(j[0], j[1]),
                j[0] === j[j.length - 2] && j[1] === j[j.length - 1] && c.closePath(),
                f.fill && (c.globalAlpha = f.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | h).toString(16)).substr( - 6), c.fill()),
                f.lineWidth && (c.globalAlpha = f.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | i).toString(16)).substr( - 6), c.stroke())
            } else if (f.type === b.Graphics.RECT)(f.fillColor || 0 === f.fillColor) && (c.globalAlpha = f.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | h).toString(16)).substr( - 6), c.fillRect(g.x, g.y, g.width, g.height)),
            f.lineWidth && (c.globalAlpha = f.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | i).toString(16)).substr( - 6), c.strokeRect(g.x, g.y, g.width, g.height));
            else if (f.type === b.Graphics.CIRC) c.beginPath(),
            c.arc(g.x, g.y, g.radius, 0, 2 * Math.PI),
            c.closePath(),
            f.fill && (c.globalAlpha = f.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | h).toString(16)).substr( - 6), c.fill()),
            f.lineWidth && (c.globalAlpha = f.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | i).toString(16)).substr( - 6), c.stroke());
            else if (f.type === b.Graphics.ELIP) {
                var l = 2 * g.width,
                m = 2 * g.height,
                n = g.x - l / 2,
                o = g.y - m / 2;
                c.beginPath();
                var p = .5522848,
                q = l / 2 * p,
                r = m / 2 * p,
                s = n + l,
                t = o + m,
                u = n + l / 2,
                v = o + m / 2;
                c.moveTo(n, v),
                c.bezierCurveTo(n, v - r, u - q, o, u, o),
                c.bezierCurveTo(u + q, o, s, v - r, s, v),
                c.bezierCurveTo(s, v + r, u + q, t, u, t),
                c.bezierCurveTo(u - q, t, n, v + r, n, v),
                c.closePath(),
                f.fill && (c.globalAlpha = f.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | h).toString(16)).substr( - 6), c.fill()),
                f.lineWidth && (c.globalAlpha = f.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | i).toString(16)).substr( - 6), c.stroke())
            } else if (f.type === b.Graphics.RREC) {
                var w = g.x,
                x = g.y,
                y = g.width,
                z = g.height,
                A = g.radius,
                B = Math.min(y, z) / 2 | 0;
                A = A > B ? B: A,
                c.beginPath(),
                c.moveTo(w, x + A),
                c.lineTo(w, x + z - A),
                c.quadraticCurveTo(w, x + z, w + A, x + z),
                c.lineTo(w + y - A, x + z),
                c.quadraticCurveTo(w + y, x + z, w + y, x + z - A),
                c.lineTo(w + y, x + A),
                c.quadraticCurveTo(w + y, x, w + y - A, x),
                c.lineTo(w + A, x),
                c.quadraticCurveTo(w, x, w, x + A),
                c.closePath(),
                (f.fillColor || 0 === f.fillColor) && (c.globalAlpha = f.fillAlpha * d, c.fillStyle = "#" + ("00000" + (0 | h).toString(16)).substr( - 6), c.fill()),
                f.lineWidth && (c.globalAlpha = f.lineAlpha * d, c.strokeStyle = "#" + ("00000" + (0 | i).toString(16)).substr( - 6), c.stroke())
            }
        }
    },
    b.CanvasGraphics.renderGraphicsMask = function(a, c) {
        var d = a.graphicsData.length;
        if (0 !== d) {
            c.beginPath();
            for (var e = 0; d > e; e++) {
                var f = a.graphicsData[e],
                g = f.shape;
                if (f.type === b.Graphics.POLY) {
                    var h = g.points;
                    c.moveTo(h[0], h[1]);
                    for (var i = 1; i < h.length / 2; i++) c.lineTo(h[2 * i], h[2 * i + 1]);
                    h[0] === h[h.length - 2] && h[1] === h[h.length - 1] && c.closePath()
                } else if (f.type === b.Graphics.RECT) c.rect(g.x, g.y, g.width, g.height),
                c.closePath();
                else if (f.type === b.Graphics.CIRC) c.arc(g.x, g.y, g.radius, 0, 2 * Math.PI),
                c.closePath();
                else if (f.type === b.Graphics.ELIP) {
                    var j = 2 * g.width,
                    k = 2 * g.height,
                    l = g.x - j / 2,
                    m = g.y - k / 2,
                    n = .5522848,
                    o = j / 2 * n,
                    p = k / 2 * n,
                    q = l + j,
                    r = m + k,
                    s = l + j / 2,
                    t = m + k / 2;
                    c.moveTo(l, t),
                    c.bezierCurveTo(l, t - p, s - o, m, s, m),
                    c.bezierCurveTo(s + o, m, q, t - p, q, t),
                    c.bezierCurveTo(q, t + p, s + o, r, s, r),
                    c.bezierCurveTo(s - o, r, l, t + p, l, t),
                    c.closePath()
                } else if (f.type === b.Graphics.RREC) {
                    var u = g.x,
                    v = g.y,
                    w = g.width,
                    x = g.height,
                    y = g.radius,
                    z = Math.min(w, x) / 2 | 0;
                    y = y > z ? z: y,
                    c.moveTo(u, v + y),
                    c.lineTo(u, v + x - y),
                    c.quadraticCurveTo(u, v + x, u + y, v + x),
                    c.lineTo(u + w - y, v + x),
                    c.quadraticCurveTo(u + w, v + x, u + w, v + x - y),
                    c.lineTo(u + w, v + y),
                    c.quadraticCurveTo(u + w, v, u + w - y, v),
                    c.lineTo(u + y, v),
                    c.quadraticCurveTo(u, v, u, v + y),
                    c.closePath()
                }
            }
        }
    },
    b.CanvasGraphics.updateGraphicsTint = function(a) {
        if (16777215 !== a.tint) for (var b = (a.tint >> 16 & 255) / 255, c = (a.tint >> 8 & 255) / 255, d = (255 & a.tint) / 255, e = 0; e < a.graphicsData.length; e++) {
            var f = a.graphicsData[e],
            g = 0 | f.fillColor,
            h = 0 | f.lineColor;
            f._fillTint = ((g >> 16 & 255) / 255 * b * 255 << 16) + ((g >> 8 & 255) / 255 * c * 255 << 8) + (255 & g) / 255 * d * 255,
            f._lineTint = ((h >> 16 & 255) / 255 * b * 255 << 16) + ((h >> 8 & 255) / 255 * c * 255 << 8) + (255 & h) / 255 * d * 255
        }
    },
    b.Graphics = function() {
        b.DisplayObjectContainer.call(this),
        this.renderable = !0,
        this.fillAlpha = 1,
        this.lineWidth = 0,
        this.lineColor = 0,
        this.graphicsData = [],
        this.tint = 16777215,
        this.blendMode = b.blendModes.NORMAL,
        this.currentPath = null,
        this._webGL = [],
        this.isMask = !1,
        this.boundsPadding = 0,
        this._localBounds = new b.Rectangle(0, 0, 1, 1),
        this.dirty = !0,
        this.webGLDirty = !1,
        this.cachedSpriteDirty = !1
    },
    b.Graphics.prototype = Object.create(b.DisplayObjectContainer.prototype),
    b.Graphics.prototype.constructor = b.Graphics,
    b.Graphics.prototype.lineStyle = function(a, c, d) {
        return this.lineWidth = a || 0,
        this.lineColor = c || 0,
        this.lineAlpha = void 0 === d ? 1 : d,
        this.currentPath && (this.currentPath.shape.points.length ? this.drawShape(new b.Polygon(this.currentPath.shape.points.slice( - 2))) : (this.currentPath.lineWidth = this.lineWidth, this.currentPath.lineColor = this.lineColor, this.currentPath.lineAlpha = this.lineAlpha)),
        this
    },
    b.Graphics.prototype.moveTo = function(a, c) {
        return this.drawShape(new b.Polygon([a, c])),
        this
    },
    b.Graphics.prototype.lineTo = function(a, b) {
        return this.currentPath || this.moveTo(0, 0),
        this.currentPath.shape.points.push(a, b),
        this.dirty = !0,
        this
    },
    b.Graphics.prototype.quadraticCurveTo = function(a, b, c, d) {
        this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
        var e, f, g = 20,
        h = this.currentPath.shape.points;
        0 === h.length && this.moveTo(0, 0);
        for (var i = h[h.length - 2], j = h[h.length - 1], k = 0, l = 1; g >= l; ++l) k = l / g,
        e = i + (a - i) * k,
        f = j + (b - j) * k,
        h.push(e + (a + (c - a) * k - e) * k, f + (b + (d - b) * k - f) * k);
        return this.dirty = !0,
        this
    },
    b.Graphics.prototype.bezierCurveTo = function(a, b, c, d, e, f) {
        this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
        for (var g, h, i, j, k, l = 20,
        m = this.currentPath.shape.points,
        n = m[m.length - 2], o = m[m.length - 1], p = 0, q = 1; l >= q; ++q) p = q / l,
        g = 1 - p,
        h = g * g,
        i = h * g,
        j = p * p,
        k = j * p,
        m.push(i * n + 3 * h * p * a + 3 * g * j * c + k * e, i * o + 3 * h * p * b + 3 * g * j * d + k * f);
        return this.dirty = !0,
        this
    },
    b.Graphics.prototype.arcTo = function(a, b, c, d, e) {
        this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(a, b) : this.moveTo(a, b);
        var f = this.currentPath.shape.points,
        g = f[f.length - 2],
        h = f[f.length - 1],
        i = h - b,
        j = g - a,
        k = d - b,
        l = c - a,
        m = Math.abs(i * l - j * k);
        if (1e-8 > m || 0 === e)(f[f.length - 2] !== a || f[f.length - 1] !== b) && f.push(a, b);
        else {
            var n = i * i + j * j,
            o = k * k + l * l,
            p = i * k + j * l,
            q = e * Math.sqrt(n) / m,
            r = e * Math.sqrt(o) / m,
            s = q * p / n,
            t = r * p / o,
            u = q * l + r * j,
            v = q * k + r * i,
            w = j * (r + s),
            x = i * (r + s),
            y = l * (q + t),
            z = k * (q + t),
            A = Math.atan2(x - v, w - u),
            B = Math.atan2(z - v, y - u);
            this.arc(u + a, v + b, e, A, B, j * k > l * i)
        }
        return this.dirty = !0,
        this
    },
    b.Graphics.prototype.arc = function(a, b, c, d, e, f) {
        if (d === e) return this;
        "undefined" == typeof f && (f = !1),
        !f && d >= e ? e += 2 * Math.PI: f && e >= d && (d += 2 * Math.PI);
        var g = f ? -1 * (d - e) : e - d,
        h = 40 * Math.ceil(Math.abs(g) / (2 * Math.PI));
        if (0 === g) return this;
        var i = a + Math.cos(d) * c,
        j = b + Math.sin(d) * c;
        f && this.filling ? this.moveTo(a, b) : this.moveTo(i, j);
        for (var k = this.currentPath.shape.points,
        l = g / (2 * h), m = 2 * l, n = Math.cos(l), o = Math.sin(l), p = h - 1, q = p % 1 / p, r = 0; p >= r; r++) {
            var s = r + q * r,
            t = l + d + m * s,
            u = Math.cos(t),
            v = -Math.sin(t);
            k.push((n * u + o * v) * c + a, (n * -v + o * u) * c + b)
        }
        return this.dirty = !0,
        this
    },
    b.Graphics.prototype.beginFill = function(a, b) {
        return this.filling = !0,
        this.fillColor = a || 0,
        this.fillAlpha = void 0 === b ? 1 : b,
        this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha),
        this
    },
    b.Graphics.prototype.endFill = function() {
        return this.filling = !1,
        this.fillColor = null,
        this.fillAlpha = 1,
        this
    },
    b.Graphics.prototype.drawRect = function(a, c, d, e) {
        return this.drawShape(new b.Rectangle(a, c, d, e)),
        this
    },
    b.Graphics.prototype.drawRoundedRect = function(a, c, d, e, f) {
        return this.drawShape(new b.RoundedRectangle(a, c, d, e, f)),
        this
    },
    b.Graphics.prototype.drawCircle = function(a, c, d) {
        return this.drawShape(new b.Circle(a, c, d)),
        this
    },
    b.Graphics.prototype.drawEllipse = function(a, c, d, e) {
        return this.drawShape(new b.Ellipse(a, c, d, e)),
        this
    },
    b.Graphics.prototype.drawPolygon = function(a) {
        var b = a;
        if (!Array.isArray(b)) {
            b = new Array(arguments.length);
            for (var c = 0; c < b.length; ++c) b[c] = arguments[c]
        }
        return this.drawShape(new Phaser.Polygon(b)),
        this
    },
    b.Graphics.prototype.clear = function() {
        return this.lineWidth = 0,
        this.filling = !1,
        this.dirty = !0,
        this.clearDirty = !0,
        this.graphicsData = [],
        this
    },
    b.Graphics.prototype.generateTexture = function(a, c) {
        a = a || 1;
        var d = this.getBounds(),
        e = new b.CanvasBuffer(d.width * a, d.height * a),
        f = b.Texture.fromCanvas(e.canvas, c);
        return f.baseTexture.resolution = a,
        e.context.scale(a, a),
        e.context.translate( - d.x, -d.y),
        b.CanvasGraphics.renderGraphics(this, e.context),
        f
    },
    b.Graphics.prototype._renderWebGL = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
            if (this._cacheAsBitmap) return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1),
            this._cachedSprite.worldAlpha = this.worldAlpha,
            void b.Sprite.prototype._renderWebGL.call(this._cachedSprite, a);
            if (a.spriteBatch.stop(), a.blendModeManager.setBlendMode(this.blendMode), this._mask && a.maskManager.pushMask(this._mask, a), this._filters && a.filterManager.pushFilter(this._filterBlock), this.blendMode !== a.spriteBatch.currentBlendMode) {
                a.spriteBatch.currentBlendMode = this.blendMode;
                var c = b.blendModesWebGL[a.spriteBatch.currentBlendMode];
                a.spriteBatch.gl.blendFunc(c[0], c[1])
            }
            if (this.webGLDirty && (this.dirty = !0, this.webGLDirty = !1), b.WebGLGraphics.renderGraphics(this, a), this.children.length) {
                a.spriteBatch.start();
                for (var d = 0; d < this.children.length; d++) this.children[d]._renderWebGL(a);
                a.spriteBatch.stop()
            }
            this._filters && a.filterManager.popFilter(),
            this._mask && a.maskManager.popMask(this.mask, a),
            a.drawCount++,
            a.spriteBatch.start()
        }
    },
    b.Graphics.prototype._renderCanvas = function(a) {
        if (this.isMask !== !0) {
            if (this._prevTint !== this.tint && (this.dirty = !0, this._prevTint = this.tint), this._cacheAsBitmap) return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1),
            this._cachedSprite.alpha = this.alpha,
            void b.Sprite.prototype._renderCanvas.call(this._cachedSprite, a);
            var c = a.context,
            d = this.worldTransform;
            this.blendMode !== a.currentBlendMode && (a.currentBlendMode = this.blendMode, c.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode]),
            this._mask && a.maskManager.pushMask(this._mask, a);
            var e = a.resolution;
            c.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, d.tx * e, d.ty * e),
            b.CanvasGraphics.renderGraphics(this, c);
            for (var f = 0; f < this.children.length; f++) this.children[f]._renderCanvas(a);
            this._mask && a.maskManager.popMask(a)
        }
    },
    b.Graphics.prototype.getBounds = function(a) {
        if (!this._currentBounds) {
            if (!this.renderable) return b.EmptyRectangle;
            this.dirty && (this.updateLocalBounds(), this.webGLDirty = !0, this.cachedSpriteDirty = !0, this.dirty = !1);
            var c = this._localBounds,
            d = c.x,
            e = c.width + c.x,
            f = c.y,
            g = c.height + c.y,
            h = a || this.worldTransform,
            i = h.a,
            j = h.b,
            k = h.c,
            l = h.d,
            m = h.tx,
            n = h.ty,
            o = i * e + k * g + m,
            p = l * g + j * e + n,
            q = i * d + k * g + m,
            r = l * g + j * d + n,
            s = i * d + k * f + m,
            t = l * f + j * d + n,
            u = i * e + k * f + m,
            v = l * f + j * e + n,
            w = o,
            x = p,
            y = o,
            z = p;
            y = y > q ? q: y,
            y = y > s ? s: y,
            y = y > u ? u: y,
            z = z > r ? r: z,
            z = z > t ? t: z,
            z = z > v ? v: z,
            w = q > w ? q: w,
            w = s > w ? s: w,
            w = u > w ? u: w,
            x = r > x ? r: x,
            x = t > x ? t: x,
            x = v > x ? v: x,
            this._bounds.x = y,
            this._bounds.width = w - y,
            this._bounds.y = z,
            this._bounds.height = x - z,
            this._currentBounds = this._bounds
        }
        return this._currentBounds
    },
    b.Graphics.prototype.containsPoint = function(a) {
        this.worldTransform.applyInverse(a, tempPoint);
        for (var b = this.graphicsData,
        c = 0; c < b.length; c++) {
            var d = b[c];
            if (d.fill && d.shape && d.shape.contains(tempPoint.x, tempPoint.y)) return ! 0
        }
        return ! 1
    },
    b.Graphics.prototype.updateLocalBounds = function() {
        var a = 1 / 0,
        c = -1 / 0,
        d = 1 / 0,
        e = -1 / 0;
        if (this.graphicsData.length) for (var f, g, h, i, j, k, l = 0; l < this.graphicsData.length; l++) {
            var m = this.graphicsData[l],
            n = m.type,
            o = m.lineWidth;
            if (f = m.shape, n === b.Graphics.RECT || n === b.Graphics.RREC) h = f.x - o / 2,
            i = f.y - o / 2,
            j = f.width + o,
            k = f.height + o,
            a = a > h ? h: a,
            c = h + j > c ? h + j: c,
            d = d > i ? i: d,
            e = i + k > e ? i + k: e;
            else if (n === b.Graphics.CIRC) h = f.x,
            i = f.y,
            j = f.radius + o / 2,
            k = f.radius + o / 2,
            a = a > h - j ? h - j: a,
            c = h + j > c ? h + j: c,
            d = d > i - k ? i - k: d,
            e = i + k > e ? i + k: e;
            else if (n === b.Graphics.ELIP) h = f.x,
            i = f.y,
            j = f.width + o / 2,
            k = f.height + o / 2,
            a = a > h - j ? h - j: a,
            c = h + j > c ? h + j: c,
            d = d > i - k ? i - k: d,
            e = i + k > e ? i + k: e;
            else {
                g = f.points;
                for (var p = 0; p < g.length; p++) g[p] instanceof Phaser.Point ? (h = g[p].x, i = g[p].y) : (h = g[p], i = g[p + 1], p < g.length - 1 && p++),
                a = a > h - o ? h - o: a,
                c = h + o > c ? h + o: c,
                d = d > i - o ? i - o: d,
                e = i + o > e ? i + o: e
            }
        } else a = 0,
        c = 0,
        d = 0,
        e = 0;
        var q = this.boundsPadding;
        this._localBounds.x = a - q,
        this._localBounds.width = c - a + 2 * q,
        this._localBounds.y = d - q,
        this._localBounds.height = e - d + 2 * q
    },
    b.Graphics.prototype._generateCachedSprite = function() {
        var a = this.getLocalBounds();
        if (this._cachedSprite) this._cachedSprite.buffer.resize(a.width, a.height);
        else {
            var c = new b.CanvasBuffer(a.width, a.height),
            d = b.Texture.fromCanvas(c.canvas);
            this._cachedSprite = new b.Sprite(d),
            this._cachedSprite.buffer = c,
            this._cachedSprite.worldTransform = this.worldTransform
        }
        this._cachedSprite.anchor.x = -(a.x / a.width),
        this._cachedSprite.anchor.y = -(a.y / a.height),
        this._cachedSprite.buffer.context.translate( - a.x, -a.y),
        this.worldAlpha = 1,
        b.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context),
        this._cachedSprite.alpha = this.alpha
    },
    b.Graphics.prototype.updateCachedSpriteTexture = function() {
        var a = this._cachedSprite,
        b = a.texture,
        c = a.buffer.canvas;
        b.baseTexture.width = c.width,
        b.baseTexture.height = c.height,
        b.crop.width = b.frame.width = c.width,
        b.crop.height = b.frame.height = c.height,
        a._width = c.width,
        a._height = c.height,
        b.baseTexture.dirty()
    },
    b.Graphics.prototype.destroyCachedSprite = function() {
        this._cachedSprite.texture.destroy(!0),
        this._cachedSprite = null
    },
    b.Graphics.prototype.drawShape = function(a) {
        this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(),
        this.currentPath = null,
        a instanceof b.Polygon && a.flatten();
        var c = new b.GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, a);
        return this.graphicsData.push(c),
        c.type === b.Graphics.POLY && (c.shape.closed = this.filling, this.currentPath = c),
        this.dirty = !0,
        c
    },
    Object.defineProperty(b.Graphics.prototype, "cacheAsBitmap", {
        get: function() {
            return this._cacheAsBitmap
        },
        set: function(a) {
            this._cacheAsBitmap = a,
            this._cacheAsBitmap ? this._generateCachedSprite() : (this.destroyCachedSprite(), this.dirty = !0)
        }
    }),
    b.GraphicsData = function(a, b, c, d, e, f, g) {
        this.lineWidth = a,
        this.lineColor = b,
        this.lineAlpha = c,
        this._lineTint = b,
        this.fillColor = d,
        this.fillAlpha = e,
        this._fillTint = d,
        this.fill = f,
        this.shape = g,
        this.type = g.type
    },
    b.GraphicsData.prototype.constructor = b.GraphicsData,
    b.GraphicsData.prototype.clone = function() {
        return new GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.shape)
    },
    b.Strip = function(a) {
        b.DisplayObjectContainer.call(this),
        this.texture = a,
        this.uvs = new b.Float32Array([0, 1, 1, 1, 1, 0, 0, 1]),
        this.vertices = new b.Float32Array([0, 0, 100, 0, 100, 100, 0, 100]),
        this.colors = new b.Float32Array([1, 1, 1, 1]),
        this.indices = new b.Uint16Array([0, 1, 2, 3]),
        this.dirty = !0,
        this.blendMode = b.blendModes.NORMAL,
        this.canvasPadding = 0,
        this.drawMode = b.Strip.DrawModes.TRIANGLE_STRIP
    },
    b.Strip.prototype = Object.create(b.DisplayObjectContainer.prototype),
    b.Strip.prototype.constructor = b.Strip,
    b.Strip.prototype._renderWebGL = function(a) { ! this.visible || this.alpha <= 0 || (a.spriteBatch.stop(), this._vertexBuffer || this._initWebGL(a), a.shaderManager.setShader(a.shaderManager.stripShader), this._renderStrip(a), a.spriteBatch.start())
    },
    b.Strip.prototype._initWebGL = function(a) {
        var b = a.gl;
        this._vertexBuffer = b.createBuffer(),
        this._indexBuffer = b.createBuffer(),
        this._uvBuffer = b.createBuffer(),
        this._colorBuffer = b.createBuffer(),
        b.bindBuffer(b.ARRAY_BUFFER, this._vertexBuffer),
        b.bufferData(b.ARRAY_BUFFER, this.vertices, b.DYNAMIC_DRAW),
        b.bindBuffer(b.ARRAY_BUFFER, this._uvBuffer),
        b.bufferData(b.ARRAY_BUFFER, this.uvs, b.STATIC_DRAW),
        b.bindBuffer(b.ARRAY_BUFFER, this._colorBuffer),
        b.bufferData(b.ARRAY_BUFFER, this.colors, b.STATIC_DRAW),
        b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, this._indexBuffer),
        b.bufferData(b.ELEMENT_ARRAY_BUFFER, this.indices, b.STATIC_DRAW)
    },
    b.Strip.prototype._renderStrip = function(a) {
        var c = a.gl,
        d = a.projection,
        e = a.offset,
        f = a.shaderManager.stripShader,
        g = this.drawMode === b.Strip.DrawModes.TRIANGLE_STRIP ? c.TRIANGLE_STRIP: c.TRIANGLES;
        a.blendModeManager.setBlendMode(this.blendMode),
        c.uniformMatrix3fv(f.translationMatrix, !1, this.worldTransform.toArray(!0)),
        c.uniform2f(f.projectionVector, d.x, -d.y),
        c.uniform2f(f.offsetVector, -e.x, -e.y),
        c.uniform1f(f.alpha, this.worldAlpha),
        this.dirty ? (this.dirty = !1, c.bindBuffer(c.ARRAY_BUFFER, this._vertexBuffer), c.bufferData(c.ARRAY_BUFFER, this.vertices, c.STATIC_DRAW), c.vertexAttribPointer(f.aVertexPosition, 2, c.FLOAT, !1, 0, 0), c.bindBuffer(c.ARRAY_BUFFER, this._uvBuffer), c.bufferData(c.ARRAY_BUFFER, this.uvs, c.STATIC_DRAW), c.vertexAttribPointer(f.aTextureCoord, 2, c.FLOAT, !1, 0, 0), c.activeTexture(c.TEXTURE0), this.texture.baseTexture._dirty[c.id] ? a.renderer.updateTexture(this.texture.baseTexture) : c.bindTexture(c.TEXTURE_2D, this.texture.baseTexture._glTextures[c.id]), c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this._indexBuffer), c.bufferData(c.ELEMENT_ARRAY_BUFFER, this.indices, c.STATIC_DRAW)) : (c.bindBuffer(c.ARRAY_BUFFER, this._vertexBuffer), c.bufferSubData(c.ARRAY_BUFFER, 0, this.vertices), c.vertexAttribPointer(f.aVertexPosition, 2, c.FLOAT, !1, 0, 0), c.bindBuffer(c.ARRAY_BUFFER, this._uvBuffer), c.vertexAttribPointer(f.aTextureCoord, 2, c.FLOAT, !1, 0, 0), c.activeTexture(c.TEXTURE0), this.texture.baseTexture._dirty[c.id] ? a.renderer.updateTexture(this.texture.baseTexture) : c.bindTexture(c.TEXTURE_2D, this.texture.baseTexture._glTextures[c.id]), c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this._indexBuffer)),
        c.drawElements(g, this.indices.length, c.UNSIGNED_SHORT, 0)
    },
    b.Strip.prototype._renderCanvas = function(a) {
        var c = a.context,
        d = this.worldTransform;
        a.roundPixels ? c.setTransform(d.a, d.b, d.c, d.d, 0 | d.tx, 0 | d.ty) : c.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty),
        this.drawMode === b.Strip.DrawModes.TRIANGLE_STRIP ? this._renderCanvasTriangleStrip(c) : this._renderCanvasTriangles(c)
    },
    b.Strip.prototype._renderCanvasTriangleStrip = function(a) {
        var b = this.vertices,
        c = this.uvs,
        d = b.length / 2;
        this.count++;
        for (var e = 0; d - 2 > e; e++) {
            var f = 2 * e;
            this._renderCanvasDrawTriangle(a, b, c, f, f + 2, f + 4)
        }
    },
    b.Strip.prototype._renderCanvasTriangles = function(a) {
        var b = this.vertices,
        c = this.uvs,
        d = this.indices,
        e = d.length;
        this.count++;
        for (var f = 0; e > f; f += 3) {
            var g = 2 * d[f],
            h = 2 * d[f + 1],
            i = 2 * d[f + 2];
            this._renderCanvasDrawTriangle(a, b, c, g, h, i)
        }
    },
    b.Strip.prototype._renderCanvasDrawTriangle = function(a, b, c, d, e, f) {
        var g = this.texture.baseTexture.source,
        h = this.texture.width,
        i = this.texture.height,
        j = b[d],
        k = b[e],
        l = b[f],
        m = b[d + 1],
        n = b[e + 1],
        o = b[f + 1],
        p = c[d] * h,
        q = c[e] * h,
        r = c[f] * h,
        s = c[d + 1] * i,
        t = c[e + 1] * i,
        u = c[f + 1] * i;
        if (this.canvasPadding > 0) {
            var v = this.canvasPadding / this.worldTransform.a,
            w = this.canvasPadding / this.worldTransform.d,
            x = (j + k + l) / 3,
            y = (m + n + o) / 3,
            z = j - x,
            A = m - y,
            B = Math.sqrt(z * z + A * A);
            j = x + z / B * (B + v),
            m = y + A / B * (B + w),
            z = k - x,
            A = n - y,
            B = Math.sqrt(z * z + A * A),
            k = x + z / B * (B + v),
            n = y + A / B * (B + w),
            z = l - x,
            A = o - y,
            B = Math.sqrt(z * z + A * A),
            l = x + z / B * (B + v),
            o = y + A / B * (B + w)
        }
        a.save(),
        a.beginPath(),
        a.moveTo(j, m),
        a.lineTo(k, n),
        a.lineTo(l, o),
        a.closePath(),
        a.clip();
        var C = p * t + s * r + q * u - t * r - s * q - p * u,
        D = j * t + s * l + k * u - t * l - s * k - j * u,
        E = p * k + j * r + q * l - k * r - j * q - p * l,
        F = p * t * l + s * k * r + j * q * u - j * t * r - s * q * l - p * k * u,
        G = m * t + s * o + n * u - t * o - s * n - m * u,
        H = p * n + m * r + q * o - n * r - m * q - p * o,
        I = p * t * o + s * n * r + m * q * u - m * t * r - s * q * o - p * n * u;
        a.transform(D / C, G / C, E / C, H / C, F / C, I / C),
        a.drawImage(g, 0, 0),
        a.restore()
    },
    b.Strip.prototype.renderStripFlat = function(a) {
        var b = this.context,
        c = a.vertices,
        d = c.length / 2;
        this.count++,
        b.beginPath();
        for (var e = 1; d - 2 > e; e++) {
            var f = 2 * e,
            g = c[f],
            h = c[f + 2],
            i = c[f + 4],
            j = c[f + 1],
            k = c[f + 3],
            l = c[f + 5];
            b.moveTo(g, j),
            b.lineTo(h, k),
            b.lineTo(i, l)
        }
        b.fillStyle = "#FF0000",
        b.fill(),
        b.closePath()
    },
    b.Strip.prototype.onTextureUpdate = function() {
        this.updateFrame = !0
    },
    b.Strip.prototype.getBounds = function(a) {
        for (var c = a || this.worldTransform,
        d = c.a,
        e = c.b,
        f = c.c,
        g = c.d,
        h = c.tx,
        i = c.ty,
        j = -1 / 0,
        k = -1 / 0,
        l = 1 / 0,
        m = 1 / 0,
        n = this.vertices,
        o = 0,
        p = n.length; p > o; o += 2) {
            var q = n[o],
            r = n[o + 1],
            s = d * q + f * r + h,
            t = g * r + e * q + i;
            l = l > s ? s: l,
            m = m > t ? t: m,
            j = s > j ? s: j,
            k = t > k ? t: k
        }
        if (l === -1 / 0 || 1 / 0 === k) return b.EmptyRectangle;
        var u = this._bounds;
        return u.x = l,
        u.width = j - l,
        u.y = m,
        u.height = k - m,
        this._currentBounds = u,
        u
    },
    b.Strip.DrawModes = {
        TRIANGLE_STRIP: 0,
        TRIANGLES: 1
    },
    b.Rope = function(a, c) {
        b.Strip.call(this, a),
        this.points = c,
        this.vertices = new b.Float32Array(4 * c.length),
        this.uvs = new b.Float32Array(4 * c.length),
        this.colors = new b.Float32Array(2 * c.length),
        this.indices = new b.Uint16Array(2 * c.length),
        this.refresh()
    },
    b.Rope.prototype = Object.create(b.Strip.prototype),
    b.Rope.prototype.constructor = b.Rope,
    b.Rope.prototype.refresh = function() {
        var a = this.points;
        if (! (a.length < 1)) {
            var b = this.uvs,
            c = a[0],
            d = this.indices,
            e = this.colors;
            this.count -= .2,
            b[0] = 0,
            b[1] = 0,
            b[2] = 0,
            b[3] = 1,
            e[0] = 1,
            e[1] = 1,
            d[0] = 0,
            d[1] = 1;
            for (var f, g, h, i = a.length,
            j = 1; i > j; j++) f = a[j],
            g = 4 * j,
            h = j / (i - 1),
            j % 2 ? (b[g] = h, b[g + 1] = 0, b[g + 2] = h, b[g + 3] = 1) : (b[g] = h, b[g + 1] = 0, b[g + 2] = h, b[g + 3] = 1),
            g = 2 * j,
            e[g] = 1,
            e[g + 1] = 1,
            g = 2 * j,
            d[g] = g,
            d[g + 1] = g + 1,
            c = f
        }
    },
    b.Rope.prototype.updateTransform = function() {
        var a = this.points;
        if (! (a.length < 1)) {
            var c, d = a[0],
            e = {
                x: 0,
                y: 0
            };
            this.count -= .2;
            for (var f, g, h, i, j, k = this.vertices,
            l = a.length,
            m = 0; l > m; m++) f = a[m],
            g = 4 * m,
            c = m < a.length - 1 ? a[m + 1] : f,
            e.y = -(c.x - d.x),
            e.x = c.y - d.y,
            h = 10 * (1 - m / (l - 1)),
            h > 1 && (h = 1),
            i = Math.sqrt(e.x * e.x + e.y * e.y),
            j = this.texture.height / 2,
            e.x /= i,
            e.y /= i,
            e.x *= j,
            e.y *= j,
            k[g] = f.x + e.x,
            k[g + 1] = f.y + e.y,
            k[g + 2] = f.x - e.x,
            k[g + 3] = f.y - e.y,
            d = f;
            b.DisplayObjectContainer.prototype.updateTransform.call(this)
        }
    },
    b.Rope.prototype.setTexture = function(a) {
        this.texture = a
    },
    b.TilingSprite = function(a, c, d) {
        b.Sprite.call(this, a),
        this._width = c || 100,
        this._height = d || 100,
        this.tileScale = new b.Point(1, 1),
        this.tileScaleOffset = new b.Point(1, 1),
        this.tilePosition = new b.Point(0, 0),
        this.renderable = !0,
        this.tint = 16777215,
        this.blendMode = b.blendModes.NORMAL
    },
    b.TilingSprite.prototype = Object.create(b.Sprite.prototype),
    b.TilingSprite.prototype.constructor = b.TilingSprite,
    Object.defineProperty(b.TilingSprite.prototype, "width", {
        get: function() {
            return this._width
        },
        set: function(a) {
            this._width = a
        }
    }),
    Object.defineProperty(b.TilingSprite.prototype, "height", {
        get: function() {
            return this._height
        },
        set: function(a) {
            this._height = a
        }
    }),
    b.TilingSprite.prototype.setTexture = function(a) {
        this.texture !== a && (this.texture = a, this.refreshTexture = !0, this.cachedTint = 16777215)
    },
    b.TilingSprite.prototype._renderWebGL = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha) {
            var b, c;
            for (this._mask && (a.spriteBatch.stop(), a.maskManager.pushMask(this.mask, a), a.spriteBatch.start()), this._filters && (a.spriteBatch.flush(), a.filterManager.pushFilter(this._filterBlock)), !this.tilingTexture || this.refreshTexture ? (this.generateTilingTexture(!0), this.tilingTexture && this.tilingTexture.needsUpdate && (a.renderer.updateTexture(this.tilingTexture.baseTexture), this.tilingTexture.needsUpdate = !1)) : a.spriteBatch.renderTilingSprite(this), b = 0, c = this.children.length; c > b; b++) this.children[b]._renderWebGL(a);
            a.spriteBatch.stop(),
            this._filters && a.filterManager.popFilter(),
            this._mask && a.maskManager.popMask(this._mask, a),
            a.spriteBatch.start()
        }
    },
    b.TilingSprite.prototype._renderCanvas = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha) {
            var c = a.context;
            this._mask && a.maskManager.pushMask(this._mask, a),
            c.globalAlpha = this.worldAlpha;
            var d, e, f = this.worldTransform,
            g = a.resolution;
            if (c.setTransform(f.a * g, f.b * g, f.c * g, f.d * g, f.tx * g, f.ty * g), !this.__tilePattern || this.refreshTexture) {
                if (this.generateTilingTexture(!1), !this.tilingTexture) return;
                this.__tilePattern = c.createPattern(this.tilingTexture.baseTexture.source, "repeat")
            }
            this.blendMode !== a.currentBlendMode && (a.currentBlendMode = this.blendMode, c.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode]);
            var h = this.tilePosition,
            i = this.tileScale;
            for (h.x %= this.tilingTexture.baseTexture.width, h.y %= this.tilingTexture.baseTexture.height, c.scale(i.x, i.y), c.translate(h.x + this.anchor.x * -this._width, h.y + this.anchor.y * -this._height), c.fillStyle = this.__tilePattern, c.fillRect( - h.x, -h.y, this._width / i.x, this._height / i.y), c.scale(1 / i.x, 1 / i.y), c.translate( - h.x + this.anchor.x * this._width, -h.y + this.anchor.y * this._height), this._mask && a.maskManager.popMask(a), d = 0, e = this.children.length; e > d; d++) this.children[d]._renderCanvas(a)
        }
    },
    b.TilingSprite.prototype.getBounds = function() {
        var a = this._width,
        b = this._height,
        c = a * (1 - this.anchor.x),
        d = a * -this.anchor.x,
        e = b * (1 - this.anchor.y),
        f = b * -this.anchor.y,
        g = this.worldTransform,
        h = g.a,
        i = g.b,
        j = g.c,
        k = g.d,
        l = g.tx,
        m = g.ty,
        n = h * d + j * f + l,
        o = k * f + i * d + m,
        p = h * c + j * f + l,
        q = k * f + i * c + m,
        r = h * c + j * e + l,
        s = k * e + i * c + m,
        t = h * d + j * e + l,
        u = k * e + i * d + m,
        v = -1 / 0,
        w = -1 / 0,
        x = 1 / 0,
        y = 1 / 0;
        x = x > n ? n: x,
        x = x > p ? p: x,
        x = x > r ? r: x,
        x = x > t ? t: x,
        y = y > o ? o: y,
        y = y > q ? q: y,
        y = y > s ? s: y,
        y = y > u ? u: y,
        v = n > v ? n: v,
        v = p > v ? p: v,
        v = r > v ? r: v,
        v = t > v ? t: v,
        w = o > w ? o: w,
        w = q > w ? q: w,
        w = s > w ? s: w,
        w = u > w ? u: w;
        var z = this._bounds;
        return z.x = x,
        z.width = v - x,
        z.y = y,
        z.height = w - y,
        this._currentBounds = z,
        z
    },
    b.TilingSprite.prototype.onTextureUpdate = function() {},
    b.TilingSprite.prototype.generateTilingTexture = function(a) {
        if (this.texture.baseTexture.hasLoaded) {
            var c, d, e = this.originalTexture || this.texture,
            f = e.frame,
            g = f.width !== e.baseTexture.width || f.height !== e.baseTexture.height,
            h = !1;
            if (a ? (e.crop ? (c = b.getNextPowerOfTwo(e.crop.width), d = b.getNextPowerOfTwo(e.crop.height)) : (c = b.getNextPowerOfTwo(f.width), d = b.getNextPowerOfTwo(f.height)), h = !0) : g && (e.crop ? (c = e.crop.width, d = e.crop.height) : (c = f.width, d = f.height), h = !0), h) {
                var i;
                this.tilingTexture && this.tilingTexture.isTiling ? (i = this.tilingTexture.canvasBuffer, i.resize(c, d), this.tilingTexture.baseTexture.width = c, this.tilingTexture.baseTexture.height = d, this.tilingTexture.needsUpdate = !0) : (i = new b.CanvasBuffer(c, d), this.tilingTexture = b.Texture.fromCanvas(i.canvas), this.tilingTexture.canvasBuffer = i, this.tilingTexture.isTiling = !0),
                i.context.drawImage(e.baseTexture.source, e.crop.x, e.crop.y, e.crop.width, e.crop.height, 0, 0, c, d),
                this.tileScaleOffset.x = f.width / c,
                this.tileScaleOffset.y = f.height / d
            } else this.tilingTexture && this.tilingTexture.isTiling && this.tilingTexture.destroy(!0),
            this.tileScaleOffset.x = 1,
            this.tileScaleOffset.y = 1,
            this.tilingTexture = e;
            this.refreshTexture = !1,
            this.originalTexture = this.texture,
            this.texture = this.tilingTexture,
            this.tilingTexture.baseTexture._powerOf2 = !0
        }
    },
    b.TilingSprite.prototype.destroy = function() {
        b.Sprite.prototype.destroy.call(this),
        this.tileScale = null,
        this.tileScaleOffset = null,
        this.tilePosition = null,
        this.tilingTexture && (this.tilingTexture.destroy(!0), this.tilingTexture = null)
    },
    b.BaseTextureCache = {},
    b.BaseTextureCacheIdGenerator = 0,
    b.BaseTexture = function(a, c) {
        this.resolution = 1,
        this.width = 100,
        this.height = 100,
        this.scaleMode = c || b.scaleModes.DEFAULT,
        this.hasLoaded = !1,
        this.source = a,
        this._UID = b._UID++,
        this.premultipliedAlpha = !0,
        this._glTextures = [],
        this.mipmap = !1,
        this._dirty = [!0, !0, !0, !0],
        a && ((this.source.complete || this.source.getContext) && this.source.width && this.source.height && (this.hasLoaded = !0, this.width = this.source.naturalWidth || this.source.width, this.height = this.source.naturalHeight || this.source.height, this.dirty()), this.imageUrl = null, this._powerOf2 = !1)
    },
    b.BaseTexture.prototype.constructor = b.BaseTexture,
    b.BaseTexture.prototype.destroy = function() {
        this.imageUrl ? (delete b.BaseTextureCache[this.imageUrl], delete b.TextureCache[this.imageUrl], this.imageUrl = null, navigator.isCocoonJS || (this.source.src = "")) : this.source && this.source._pixiId && delete b.BaseTextureCache[this.source._pixiId],
        this.source = null,
        this.unloadFromGPU()
    },
    b.BaseTexture.prototype.updateSourceImage = function(a) {
        this.hasLoaded = !1,
        this.source.src = null,
        this.source.src = a
    },
    b.BaseTexture.prototype.dirty = function() {
        for (var a = 0; a < this._glTextures.length; a++) this._dirty[a] = !0
    },
    b.BaseTexture.prototype.unloadFromGPU = function() {
        this.dirty();
        for (var a = this._glTextures.length - 1; a >= 0; a--) {
            var c = this._glTextures[a],
            d = b.glContexts[a];
            d && c && d.deleteTexture(c)
        }
        this._glTextures.length = 0,
        this.dirty()
    },
    b.BaseTexture.fromImage = function(a, c, d) {
        var e = b.BaseTextureCache[a];
        if (void 0 === c && -1 === a.indexOf("data:") && (c = !0), !e) {
            var f = new Image;
            c && (f.crossOrigin = ""),
            f.src = a,
            e = new b.BaseTexture(f, d),
            e.imageUrl = a,
            b.BaseTextureCache[a] = e,
            -1 !== a.indexOf(b.RETINA_PREFIX + ".") && (e.resolution = 2)
        }
        return e
    },
    b.BaseTexture.fromCanvas = function(a, c) {
        a._pixiId || (a._pixiId = "canvas_" + b.TextureCacheIdGenerator++);
        var d = b.BaseTextureCache[a._pixiId];
        return d || (d = new b.BaseTexture(a, c), b.BaseTextureCache[a._pixiId] = d),
        d
    },
    b.TextureCache = {},
    b.FrameCache = {},
    b.TextureSilentFail = !1,
    b.TextureCacheIdGenerator = 0,
    b.Texture = function(a, c, d, e) {
        this.noFrame = !1,
        c || (this.noFrame = !0, c = new b.Rectangle(0, 0, 1, 1)),
        a instanceof b.Texture && (a = a.baseTexture),
        this.baseTexture = a,
        this.frame = c,
        this.trim = e,
        this.valid = !1,
        this.requiresUpdate = !1,
        this._uvs = null,
        this.width = 0,
        this.height = 0,
        this.crop = d || new b.Rectangle(0, 0, 1, 1),
        a.hasLoaded && (this.noFrame && (c = new b.Rectangle(0, 0, a.width, a.height)), this.setFrame(c))
    },
    b.Texture.prototype.constructor = b.Texture,
    b.Texture.prototype.onBaseTextureLoaded = function() {
        var a = this.baseTexture;
        this.noFrame && (this.frame = new b.Rectangle(0, 0, a.width, a.height)),
        this.setFrame(this.frame)
    },
    b.Texture.prototype.destroy = function(a) {
        a && this.baseTexture.destroy(),
        this.valid = !1
    },
    b.Texture.prototype.setFrame = function(a) {
        if (this.noFrame = !1, this.frame = a, this.width = a.width, this.height = a.height, this.crop.x = a.x, this.crop.y = a.y, this.crop.width = a.width, this.crop.height = a.height, !this.trim && (a.x + a.width > this.baseTexture.width || a.y + a.height > this.baseTexture.height)) {
            if (!b.TextureSilentFail) throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
            return void(this.valid = !1)
        }
        this.valid = a && a.width && a.height && this.baseTexture.source && this.baseTexture.hasLoaded,
        this.trim && (this.width = this.trim.width, this.height = this.trim.height, this.frame.width = this.trim.width, this.frame.height = this.trim.height),
        this.valid && this._updateUvs()
    },
    b.Texture.prototype._updateUvs = function() {
        this._uvs || (this._uvs = new b.TextureUvs);
        var a = this.crop,
        c = this.baseTexture.width,
        d = this.baseTexture.height;
        this._uvs.x0 = a.x / c,
        this._uvs.y0 = a.y / d,
        this._uvs.x1 = (a.x + a.width) / c,
        this._uvs.y1 = a.y / d,
        this._uvs.x2 = (a.x + a.width) / c,
        this._uvs.y2 = (a.y + a.height) / d,
        this._uvs.x3 = a.x / c,
        this._uvs.y3 = (a.y + a.height) / d
    },
    b.Texture.fromImage = function(a, c, d) {
        var e = b.TextureCache[a];
        return e || (e = new b.Texture(b.BaseTexture.fromImage(a, c, d)), b.TextureCache[a] = e),
        e
    },
    b.Texture.fromFrame = function(a) {
        var c = b.TextureCache[a];
        if (!c) throw new Error('The frameId "' + a + '" does not exist in the texture cache ');
        return c
    },
    b.Texture.fromCanvas = function(a, c) {
        var d = b.BaseTexture.fromCanvas(a, c);
        return new b.Texture(d)
    },
    b.Texture.addTextureToCache = function(a, c) {
        b.TextureCache[c] = a
    },
    b.Texture.removeTextureFromCache = function(a) {
        var c = b.TextureCache[a];
        return delete b.TextureCache[a],
        delete b.BaseTextureCache[a],
        c
    },
    b.TextureUvs = function() {
        this.x0 = 0,
        this.y0 = 0,
        this.x1 = 0,
        this.y1 = 0,
        this.x2 = 0,
        this.y2 = 0,
        this.x3 = 0,
        this.y3 = 0
    },
    b.RenderTexture = function(a, c, d, e, f) {
        if (this.width = a || 100, this.height = c || 100, this.resolution = f || 1, this.frame = new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.crop = new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.baseTexture = new b.BaseTexture, this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution, this.baseTexture._glTextures = [], this.baseTexture.resolution = this.resolution, this.baseTexture.scaleMode = e || b.scaleModes.DEFAULT, this.baseTexture.hasLoaded = !0, b.Texture.call(this, this.baseTexture, new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)), this.renderer = d || b.defaultRenderer, this.renderer.type === b.WEBGL_RENDERER) {
            var g = this.renderer.gl;
            this.baseTexture._dirty[g.id] = !1,
            this.textureBuffer = new b.FilterTexture(g, this.width, this.height, this.baseTexture.scaleMode),
            this.baseTexture._glTextures[g.id] = this.textureBuffer.texture,
            this.render = this.renderWebGL,
            this.projection = new b.Point(.5 * this.width, .5 * -this.height)
        } else this.render = this.renderCanvas,
        this.textureBuffer = new b.CanvasBuffer(this.width * this.resolution, this.height * this.resolution),
        this.baseTexture.source = this.textureBuffer.canvas;
        this.valid = !0,
        this._updateUvs()
    },
    b.RenderTexture.prototype = Object.create(b.Texture.prototype),
    b.RenderTexture.prototype.constructor = b.RenderTexture,
    b.RenderTexture.prototype.resize = function(a, c, d) { (a !== this.width || c !== this.height) && (this.valid = a > 0 && c > 0, this.width = a, this.height = c, this.frame.width = this.crop.width = a * this.resolution, this.frame.height = this.crop.height = c * this.resolution, d && (this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution), this.renderer.type === b.WEBGL_RENDERER && (this.projection.x = this.width / 2, this.projection.y = -this.height / 2), this.valid && this.textureBuffer.resize(this.width, this.height))
    },
    b.RenderTexture.prototype.clear = function() {
        this.valid && (this.renderer.type === b.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear())
    },
    b.RenderTexture.prototype.renderWebGL = function(a, b, c) {
        if (this.valid) {
            var d = a.worldTransform;
            d.identity(),
            d.translate(0, 2 * this.projection.y),
            b && d.append(b),
            d.scale(1, -1),
            a.worldAlpha = 1;
            for (var e = a.children,
            f = 0,
            g = e.length; g > f; f++) e[f].updateTransform();
            var h = this.renderer.gl;
            h.viewport(0, 0, this.width * this.resolution, this.height * this.resolution),
            h.bindFramebuffer(h.FRAMEBUFFER, this.textureBuffer.frameBuffer),
            c && this.textureBuffer.clear(),
            this.renderer.spriteBatch.dirty = !0,
            this.renderer.renderDisplayObject(a, this.projection, this.textureBuffer.frameBuffer),
            this.renderer.spriteBatch.dirty = !0
        }
    },
    b.RenderTexture.prototype.renderCanvas = function(a, b, c) {
        if (this.valid) {
            var d = a.worldTransform;
            d.identity(),
            b && d.append(b),
            a.worldAlpha = 1;
            for (var e = a.children,
            f = 0,
            g = e.length; g > f; f++) e[f].updateTransform();
            c && this.textureBuffer.clear();
            var h = this.textureBuffer.context,
            i = this.renderer.resolution;
            this.renderer.resolution = this.resolution,
            this.renderer.renderDisplayObject(a, h),
            this.renderer.resolution = i
        }
    },
    b.RenderTexture.prototype.getImage = function() {
        var a = new Image;
        return a.src = this.getBase64(),
        a
    },
    b.RenderTexture.prototype.getBase64 = function() {
        return this.getCanvas().toDataURL()
    },
    b.RenderTexture.prototype.getCanvas = function() {
        if (this.renderer.type === b.WEBGL_RENDERER) {
            var a = this.renderer.gl,
            c = this.textureBuffer.width,
            d = this.textureBuffer.height,
            e = new Uint8Array(4 * c * d);
            a.bindFramebuffer(a.FRAMEBUFFER, this.textureBuffer.frameBuffer),
            a.readPixels(0, 0, c, d, a.RGBA, a.UNSIGNED_BYTE, e),
            a.bindFramebuffer(a.FRAMEBUFFER, null);
            var f = new b.CanvasBuffer(c, d),
            g = f.context.getImageData(0, 0, c, d);
            return g.data.set(e),
            f.context.putImageData(g, 0, 0),
            f.canvas
        }
        return this.textureBuffer.canvas
    },
    b.AbstractFilter = function(a, b) {
        this.passes = [this],
        this.shaders = [],
        this.dirty = !0,
        this.padding = 0,
        this.uniforms = b || {},
        this.fragmentSrc = a || []
    },
    b.AbstractFilter.prototype.constructor = b.AbstractFilter,
    b.AbstractFilter.prototype.syncUniforms = function() {
        for (var a = 0,
        b = this.shaders.length; b > a; a++) this.shaders[a].dirty = !0
    },
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = b), exports.PIXI = b) : "undefined" != typeof define && define.amd ? define("PIXI",
    function() {
        return a.PIXI = b
    } ()) : a.PIXI = b
}).call(this),
function() {
    function a(a, b) {
        this._scaleFactor = a,
        this._deltaMode = b,
        this.originalEvent = null
    }
    var b = this,
    c = c || {
        VERSION: "2.3.0",
        GAMES: [],
        AUTO: 0,
        CANVAS: 1,
        WEBGL: 2,
        HEADLESS: 3,
        NONE: 0,
        LEFT: 1,
        RIGHT: 2,
        UP: 3,
        DOWN: 4,
        SPRITE: 0,
        BUTTON: 1,
        IMAGE: 2,
        GRAPHICS: 3,
        TEXT: 4,
        TILESPRITE: 5,
        BITMAPTEXT: 6,
        GROUP: 7,
        RENDERTEXTURE: 8,
        TILEMAP: 9,
        TILEMAPLAYER: 10,
        EMITTER: 11,
        POLYGON: 12,
        BITMAPDATA: 13,
        CANVAS_FILTER: 14,
        WEBGL_FILTER: 15,
        ELLIPSE: 16,
        SPRITEBATCH: 17,
        RETROFONT: 18,
        POINTER: 19,
        ROPE: 20,
        CIRCLE: 21,
        RECTANGLE: 22,
        LINE: 23,
        MATRIX: 24,
        POINT: 25,
        ROUNDEDRECTANGLE: 26,
        blendModes: {
            NORMAL: 0,
            ADD: 1,
            MULTIPLY: 2,
            SCREEN: 3,
            OVERLAY: 4,
            DARKEN: 5,
            LIGHTEN: 6,
            COLOR_DODGE: 7,
            COLOR_BURN: 8,
            HARD_LIGHT: 9,
            SOFT_LIGHT: 10,
            DIFFERENCE: 11,
            EXCLUSION: 12,
            HUE: 13,
            SATURATION: 14,
            COLOR: 15,
            LUMINOSITY: 16
        },
        scaleModes: {
            DEFAULT: 0,
            LINEAR: 0,
            NEAREST: 1
        }
    };
    if (Math.trunc || (Math.trunc = function(a) {
        return 0 > a ? Math.ceil(a) : Math.floor(a)
    }), Function.prototype.bind || (Function.prototype.bind = function() {
        var a = Array.prototype.slice;
        return function(b) {
            function c() {
                var f = e.concat(a.call(arguments));
                d.apply(this instanceof c ? this: b, f)
            }
            var d = this,
            e = a.call(arguments, 1);
            if ("function" != typeof d) throw new TypeError;
            return c.prototype = function f(a) {
                return a && (f.prototype = a),
                this instanceof f ? void 0 : new f
            } (d.prototype),
            c
        }
    } ()), Array.isArray || (Array.isArray = function(a) {
        return "[object Array]" == Object.prototype.toString.call(a)
    }), Array.prototype.forEach || (Array.prototype.forEach = function(a) {
        "use strict";
        if (void 0 === this || null === this) throw new TypeError;
        var b = Object(this),
        c = b.length >>> 0;
        if ("function" != typeof a) throw new TypeError;
        for (var d = arguments.length >= 2 ? arguments[1] : void 0, e = 0; c > e; e++) e in b && a.call(d, b[e], e, b)
    }), "function" != typeof window.Uint32Array && "object" != typeof window.Uint32Array) {
        var d = function(a) {
            var b = new Array;
            window[a] = function(a) {
                if ("number" == typeof a) {
                    Array.call(this, a),
                    this.length = a;
                    for (var b = 0; b < this.length; b++) this[b] = 0
                } else {
                    Array.call(this, a.length),
                    this.length = a.length;
                    for (var b = 0; b < this.length; b++) this[b] = a[b]
                }
            },
            window[a].prototype = b,
            window[a].constructor = window[a]
        };
        d("Uint32Array"),
        d("Int16Array")
    }
    window.console || (window.console = {},
    window.console.log = window.console.assert = function() {},
    window.console.warn = window.console.assert = function() {}),
    c.Utils = {
        getProperty: function(a, b) {
            for (var c = b.split("."), d = c.pop(), e = c.length, f = 1, g = c[0]; e > f && (a = a[g]);) g = c[f],
            f++;
            return a ? a[d] : null
        },
        setProperty: function(a, b, c) {
            for (var d = b.split("."), e = d.pop(), f = d.length, g = 1, h = d[0]; f > g && (a = a[h]);) h = d[g],
            g++;
            return a && (a[e] = c),
            a
        },
        chanceRoll: function(a) {
            return "undefined" == typeof a && (a = 50),
            a > 0 && 100 * Math.random() <= a
        },
        randomChoice: function(a, b) {
            return Math.random() < .5 ? a: b
        },
        transposeArray: function(a) {
            return c.ArrayUtils.transposeMatrix(a)
        },
        rotateArray: function(a, b) {
            return c.ArrayUtils.rotateMatrix(a, b)
        },
        shuffle: function(a) {
            return c.ArrayUtils.shuffle(a)
        },
        parseDimension: function(a, b) {
            var c = 0,
            d = 0;
            return "string" == typeof a ? "%" === a.substr( - 1) ? (c = parseInt(a, 10) / 100, d = 0 === b ? window.innerWidth * c: window.innerHeight * c) : d = parseInt(a, 10) : d = a,
            d
        },
        pad: function(a, b, c, d) {
            if ("undefined" == typeof b) var b = 0;
            if ("undefined" == typeof c) var c = " ";
            if ("undefined" == typeof d) var d = 3;
            var e = 0;
            if (b + 1 >= a.length) switch (d) {
            case 1:
                a = new Array(b + 1 - a.length).join(c) + a;
                break;
            case 3:
                var f = Math.ceil((e = b - a.length) / 2),
                g = e - f;
                a = new Array(g + 1).join(c) + a + new Array(f + 1).join(c);
                break;
            default:
                a += new Array(b + 1 - a.length).join(c)
            }
            return a
        },
        isPlainObject: function(a) {
            if ("object" != typeof a || a.nodeType || a === a.window) return ! 1;
            try {
                if (a.constructor && !{}.hasOwnProperty.call(a.constructor.prototype, "isPrototypeOf")) return ! 1
            } catch(b) {
                return ! 1
            }
            return ! 0
        },
        extend: function() {
            var a, b, d, e, f, g, h = arguments[0] || {},
            i = 1,
            j = arguments.length,
            k = !1;
            for ("boolean" == typeof h && (k = h, h = arguments[1] || {},
            i = 2), j === i && (h = this, --i); j > i; i++) if (null != (a = arguments[i])) for (b in a) d = h[b],
            e = a[b],
            h !== e && (k && e && (c.Utils.isPlainObject(e) || (f = Array.isArray(e))) ? (f ? (f = !1, g = d && Array.isArray(d) ? d: []) : g = d && c.Utils.isPlainObject(d) ? d: {},
            h[b] = c.Utils.extend(k, g, e)) : void 0 !== e && (h[b] = e));
            return h
        },
        mixinPrototype: function(a, b, c) {
            "undefined" == typeof c && (c = !1);
            for (var d = Object.keys(b), e = 0; e < d.length; e++) {
                var f = d[e],
                g = b[f]; ! c && f in a || (!g || "function" != typeof g.get && "function" != typeof g.set ? a[f] = g: "function" == typeof g.clone ? a[f] = g.clone() : Object.defineProperty(a, f, g))
            }
        },
        mixin: function(a, b) {
            if (!a || "object" != typeof a) return b;
            for (var d in a) {
                var e = a[d];
                if (!e.childNodes && !e.cloneNode) {
                    var f = typeof a[d];
                    b[d] = a[d] && "object" === f ? typeof b[d] === f ? c.Utils.mixin(a[d], b[d]) : c.Utils.mixin(a[d], new e.constructor) : a[d]
                }
            }
            return b
        }
    },
    c.Circle = function(a, b, d) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        this.x = a,
        this.y = b,
        this._diameter = d,
        this._radius = 0,
        d > 0 && (this._radius = .5 * d),
        this.type = c.CIRCLE
    },
    c.Circle.prototype = {
        circumference: function() {
            return 2 * Math.PI * this._radius
        },
        getBounds: function() {
            return new c.Rectangle(this.x - this.radius, this.y - this.radius, this.diameter, this.diameter)
        },
        setTo: function(a, b, c) {
            return this.x = a,
            this.y = b,
            this._diameter = c,
            this._radius = .5 * c,
            this
        },
        copyFrom: function(a) {
            return this.setTo(a.x, a.y, a.diameter)
        },
        copyTo: function(a) {
            return a.x = this.x,
            a.y = this.y,
            a.diameter = this._diameter,
            a
        },
        distance: function(a, b) {
            var d = c.Math.distance(this.x, this.y, a.x, a.y);
            return b ? Math.round(d) : d
        },
        clone: function(a) {
            return "undefined" == typeof a || null === a ? a = new c.Circle(this.x, this.y, this.diameter) : a.setTo(this.x, this.y, this.diameter),
            a
        },
        contains: function(a, b) {
            return c.Circle.contains(this, a, b)
        },
        circumferencePoint: function(a, b, d) {
            return c.Circle.circumferencePoint(this, a, b, d)
        },
        offset: function(a, b) {
            return this.x += a,
            this.y += b,
            this
        },
        offsetPoint: function(a) {
            return this.offset(a.x, a.y)
        },
        toString: function() {
            return "[{Phaser.Circle (x=" + this.x + " y=" + this.y + " diameter=" + this.diameter + " radius=" + this.radius + ")}]"
        }
    },
    c.Circle.prototype.constructor = c.Circle,
    Object.defineProperty(c.Circle.prototype, "diameter", {
        get: function() {
            return this._diameter
        },
        set: function(a) {
            a > 0 && (this._diameter = a, this._radius = .5 * a)
        }
    }),
    Object.defineProperty(c.Circle.prototype, "radius", {
        get: function() {
            return this._radius
        },
        set: function(a) {
            a > 0 && (this._radius = a, this._diameter = 2 * a)
        }
    }),
    Object.defineProperty(c.Circle.prototype, "left", {
        get: function() {
            return this.x - this._radius
        },
        set: function(a) {
            a > this.x ? (this._radius = 0, this._diameter = 0) : this.radius = this.x - a
        }
    }),
    Object.defineProperty(c.Circle.prototype, "right", {
        get: function() {
            return this.x + this._radius
        },
        set: function(a) {
            a < this.x ? (this._radius = 0, this._diameter = 0) : this.radius = a - this.x
        }
    }),
    Object.defineProperty(c.Circle.prototype, "top", {
        get: function() {
            return this.y - this._radius
        },
        set: function(a) {
            a > this.y ? (this._radius = 0, this._diameter = 0) : this.radius = this.y - a
        }
    }),
    Object.defineProperty(c.Circle.prototype, "bottom", {
        get: function() {
            return this.y + this._radius
        },
        set: function(a) {
            a < this.y ? (this._radius = 0, this._diameter = 0) : this.radius = a - this.y
        }
    }),
    Object.defineProperty(c.Circle.prototype, "area", {
        get: function() {
            return this._radius > 0 ? Math.PI * this._radius * this._radius: 0
        }
    }),
    Object.defineProperty(c.Circle.prototype, "empty", {
        get: function() {
            return 0 === this._diameter
        },
        set: function(a) {
            a === !0 && this.setTo(0, 0, 0)
        }
    }),
    c.Circle.contains = function(a, b, c) {
        if (a.radius > 0 && b >= a.left && b <= a.right && c >= a.top && c <= a.bottom) {
            var d = (a.x - b) * (a.x - b),
            e = (a.y - c) * (a.y - c);
            return d + e <= a.radius * a.radius
        }
        return ! 1
    },
    c.Circle.equals = function(a, b) {
        return a.x == b.x && a.y == b.y && a.diameter == b.diameter
    },
    c.Circle.intersects = function(a, b) {
        return c.Math.distance(a.x, a.y, b.x, b.y) <= a.radius + b.radius
    },
    c.Circle.circumferencePoint = function(a, b, d, e) {
        return "undefined" == typeof d && (d = !1),
        "undefined" == typeof e && (e = new c.Point),
        d === !0 && (b = c.Math.degToRad(b)),
        e.x = a.x + a.radius * Math.cos(b),
        e.y = a.y + a.radius * Math.sin(b),
        e
    },
    c.Circle.intersectsRectangle = function(a, b) {
        var c = Math.abs(a.x - b.x - b.halfWidth),
        d = b.halfWidth + a.radius;
        if (c > d) return ! 1;
        var e = Math.abs(a.y - b.y - b.halfHeight),
        f = b.halfHeight + a.radius;
        if (e > f) return ! 1;
        if (c <= b.halfWidth || e <= b.halfHeight) return ! 0;
        var g = c - b.halfWidth,
        h = e - b.halfHeight,
        i = g * g,
        j = h * h,
        k = a.radius * a.radius;
        return k >= i + j
    },
    PIXI.Circle = c.Circle,
    c.Ellipse = function(a, b, d, e) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        e = e || 0,
        this.x = a,
        this.y = b,
        this.width = d,
        this.height = e,
        this.type = c.ELLIPSE
    },
    c.Ellipse.prototype = {
        setTo: function(a, b, c, d) {
            return this.x = a,
            this.y = b,
            this.width = c,
            this.height = d,
            this
        },
        getBounds: function() {
            return new c.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height)
        },
        copyFrom: function(a) {
            return this.setTo(a.x, a.y, a.width, a.height)
        },
        copyTo: function(a) {
            return a.x = this.x,
            a.y = this.y,
            a.width = this.width,
            a.height = this.height,
            a
        },
        clone: function(a) {
            return "undefined" == typeof a || null === a ? a = new c.Ellipse(this.x, this.y, this.width, this.height) : a.setTo(this.x, this.y, this.width, this.height),
            a
        },
        contains: function(a, b) {
            return c.Ellipse.contains(this, a, b)
        },
        toString: function() {
            return "[{Phaser.Ellipse (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")}]"
        }
    },
    c.Ellipse.prototype.constructor = c.Ellipse,
    Object.defineProperty(c.Ellipse.prototype, "left", {
        get: function() {
            return this.x
        },
        set: function(a) {
            this.x = a
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "right", {
        get: function() {
            return this.x + this.width
        },
        set: function(a) {
            this.width = a < this.x ? 0 : a - this.x
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "top", {
        get: function() {
            return this.y
        },
        set: function(a) {
            this.y = a
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "bottom", {
        get: function() {
            return this.y + this.height
        },
        set: function(a) {
            this.height = a < this.y ? 0 : a - this.y
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "empty", {
        get: function() {
            return 0 === this.width || 0 === this.height
        },
        set: function(a) {
            a === !0 && this.setTo(0, 0, 0, 0)
        }
    }),
    c.Ellipse.contains = function(a, b, c) {
        if (a.width <= 0 || a.height <= 0) return ! 1;
        var d = (b - a.x) / a.width - .5,
        e = (c - a.y) / a.height - .5;
        return d *= d,
        e *= e,
        .25 > d + e
    },
    PIXI.Ellipse = c.Ellipse,
    c.Line = function(a, b, d, e) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        e = e || 0,
        this.start = new c.Point(a, b),
        this.end = new c.Point(d, e),
        this.type = c.LINE
    },
    c.Line.prototype = {
        setTo: function(a, b, c, d) {
            return this.start.setTo(a, b),
            this.end.setTo(c, d),
            this
        },
        fromSprite: function(a, b, c) {
            return "undefined" == typeof c && (c = !1),
            c ? this.setTo(a.center.x, a.center.y, b.center.x, b.center.y) : this.setTo(a.x, a.y, b.x, b.y)
        },
        fromAngle: function(a, b, c, d) {
            return this.start.setTo(a, b),
            this.end.setTo(a + Math.cos(c) * d, b + Math.sin(c) * d),
            this
        },
        intersects: function(a, b, d) {
            return c.Line.intersectsPoints(this.start, this.end, a.start, a.end, b, d)
        },
        reflect: function(a) {
            return c.Line.reflect(this, a)
        },
        pointOnLine: function(a, b) {
            return (a - this.start.x) * (this.end.y - this.start.y) === (this.end.x - this.start.x) * (b - this.start.y)
        },
        pointOnSegment: function(a, b) {
            var c = Math.min(this.start.x, this.end.x),
            d = Math.max(this.start.x, this.end.x),
            e = Math.min(this.start.y, this.end.y),
            f = Math.max(this.start.y, this.end.y);
            return this.pointOnLine(a, b) && a >= c && d >= a && b >= e && f >= b
        },
        coordinatesOnLine: function(a, b) {
            "undefined" == typeof a && (a = 1),
            "undefined" == typeof b && (b = []);
            var c = Math.round(this.start.x),
            d = Math.round(this.start.y),
            e = Math.round(this.end.x),
            f = Math.round(this.end.y),
            g = Math.abs(e - c),
            h = Math.abs(f - d),
            i = e > c ? 1 : -1,
            j = f > d ? 1 : -1,
            k = g - h;
            b.push([c, d]);
            for (var l = 1; c != e || d != f;) {
                var m = k << 1;
                m > -h && (k -= h, c += i),
                g > m && (k += g, d += j),
                l % a === 0 && b.push([c, d]),
                l++
            }
            return b
        },
        clone: function(a) {
            return "undefined" == typeof a || null === a ? a = new c.Line(this.start.x, this.start.y, this.end.x, this.end.y) : a.setTo(this.start.x, this.start.y, this.end.x, this.end.y),
            a
        }
    },
    Object.defineProperty(c.Line.prototype, "length", {
        get: function() {
            return Math.sqrt((this.end.x - this.start.x) * (this.end.x - this.start.x) + (this.end.y - this.start.y) * (this.end.y - this.start.y))
        }
    }),
    Object.defineProperty(c.Line.prototype, "angle", {
        get: function() {
            return Math.atan2(this.end.y - this.start.y, this.end.x - this.start.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "slope", {
        get: function() {
            return (this.end.y - this.start.y) / (this.end.x - this.start.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "perpSlope", {
        get: function() {
            return - ((this.end.x - this.start.x) / (this.end.y - this.start.y))
        }
    }),
    Object.defineProperty(c.Line.prototype, "x", {
        get: function() {
            return Math.min(this.start.x, this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "y", {
        get: function() {
            return Math.min(this.start.y, this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "left", {
        get: function() {
            return Math.min(this.start.x, this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "right", {
        get: function() {
            return Math.max(this.start.x, this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "top", {
        get: function() {
            return Math.min(this.start.y, this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "bottom", {
        get: function() {
            return Math.max(this.start.y, this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "width", {
        get: function() {
            return Math.abs(this.start.x - this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "height", {
        get: function() {
            return Math.abs(this.start.y - this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "normalX", {
        get: function() {
            return Math.cos(this.angle - 1.5707963267948966)
        }
    }),
    Object.defineProperty(c.Line.prototype, "normalY", {
        get: function() {
            return Math.sin(this.angle - 1.5707963267948966)
        }
    }),
    Object.defineProperty(c.Line.prototype, "normalAngle", {
        get: function() {
            return c.Math.wrap(this.angle - 1.5707963267948966, -Math.PI, Math.PI)
        }
    }),
    c.Line.intersectsPoints = function(a, b, d, e, f, g) {
        "undefined" == typeof f && (f = !0),
        "undefined" == typeof g && (g = new c.Point);
        var h = b.y - a.y,
        i = e.y - d.y,
        j = a.x - b.x,
        k = d.x - e.x,
        l = b.x * a.y - a.x * b.y,
        m = e.x * d.y - d.x * e.y,
        n = h * k - i * j;
        if (0 === n) return null;
        if (g.x = (j * m - k * l) / n, g.y = (i * l - h * m) / n, f) {
            var o = (e.y - d.y) * (b.x - a.x) - (e.x - d.x) * (b.y - a.y),
            p = ((e.x - d.x) * (a.y - d.y) - (e.y - d.y) * (a.x - d.x)) / o,
            q = ((b.x - a.x) * (a.y - d.y) - (b.y - a.y) * (a.x - d.x)) / o;
            return p >= 0 && 1 >= p && q >= 0 && 1 >= q ? g: null
        }
        return g
    },
    c.Line.intersects = function(a, b, d, e) {
        return c.Line.intersectsPoints(a.start, a.end, b.start, b.end, d, e)
    },
    c.Line.reflect = function(a, b) {
        return 2 * b.normalAngle - 3.141592653589793 - a.angle
    },
    c.Matrix = function() {
        this.a = 1,
        this.b = 0,
        this.c = 0,
        this.d = 1,
        this.tx = 0,
        this.ty = 0,
        this.type = c.MATRIX
    },
    c.Matrix.prototype.fromArray = function(a) {
        this.a = a[0],
        this.b = a[1],
        this.c = a[3],
        this.d = a[4],
        this.tx = a[2],
        this.ty = a[5]
    },
    c.Matrix.prototype.toArray = function(a) {
        this.array || (this.array = new PIXI.Float32Array(9));
        var b = this.array;
        return a ? (b[0] = this.a, b[1] = this.b, b[2] = 0, b[3] = this.c, b[4] = this.d, b[5] = 0, b[6] = this.tx, b[7] = this.ty, b[8] = 1) : (b[0] = this.a, b[1] = this.c, b[2] = this.tx, b[3] = this.b, b[4] = this.d, b[5] = this.ty, b[6] = 0, b[7] = 0, b[8] = 1),
        b
    },
    c.Matrix.prototype.apply = function(a, b) {
        b = b || new c.Point;
        var d = a.x,
        e = a.y;
        return b.x = this.a * d + this.c * e + this.tx,
        b.y = this.b * d + this.d * e + this.ty,
        b
    },
    c.Matrix.prototype.applyInverse = function(a, b) {
        b = b || new c.Point;
        var d = 1 / (this.a * this.d + this.c * -this.b),
        e = a.x,
        f = a.y;
        return b.x = this.d * d * e + -this.c * d * f + (this.ty * this.c - this.tx * this.d) * d,
        b.y = this.a * d * f + -this.b * d * e + ( - this.ty * this.a + this.tx * this.b) * d,
        b
    },
    c.Matrix.prototype.translate = function(a, b) {
        return this.tx += a,
        this.ty += b,
        this
    },
    c.Matrix.prototype.scale = function(a, b) {
        return this.a *= a,
        this.d *= b,
        this.c *= a,
        this.b *= b,
        this.tx *= a,
        this.ty *= b,
        this
    },
    c.Matrix.prototype.rotate = function(a) {
        var b = Math.cos(a),
        c = Math.sin(a),
        d = this.a,
        e = this.c,
        f = this.tx;
        return this.a = d * b - this.b * c,
        this.b = d * c + this.b * b,
        this.c = e * b - this.d * c,
        this.d = e * c + this.d * b,
        this.tx = f * b - this.ty * c,
        this.ty = f * c + this.ty * b,
        this
    },
    c.Matrix.prototype.append = function(a) {
        var b = this.a,
        c = this.b,
        d = this.c,
        e = this.d;
        return this.a = a.a * b + a.b * d,
        this.b = a.a * c + a.b * e,
        this.c = a.c * b + a.d * d,
        this.d = a.c * c + a.d * e,
        this.tx = a.tx * b + a.ty * d + this.tx,
        this.ty = a.tx * c + a.ty * e + this.ty,
        this
    },
    c.Matrix.prototype.identity = function() {
        return this.a = 1,
        this.b = 0,
        this.c = 0,
        this.d = 1,
        this.tx = 0,
        this.ty = 0,
        this
    },
    c.identityMatrix = new c.Matrix,
    PIXI.Matrix = c.Matrix,
    PIXI.identityMatrix = c.identityMatrix,
    c.Point = function(a, b) {
        a = a || 0,
        b = b || 0,
        this.x = a,
        this.y = b,
        this.type = c.POINT
    },
    c.Point.prototype = {
        copyFrom: function(a) {
            return this.setTo(a.x, a.y)
        },
        invert: function() {
            return this.setTo(this.y, this.x)
        },
        setTo: function(a, b) {
            return this.x = a || 0,
            this.y = b || (0 !== b ? this.x: 0),
            this
        },
        set: function(a, b) {
            return this.x = a || 0,
            this.y = b || (0 !== b ? this.x: 0),
            this
        },
        add: function(a, b) {
            return this.x += a,
            this.y += b,
            this
        },
        subtract: function(a, b) {
            return this.x -= a,
            this.y -= b,
            this
        },
        multiply: function(a, b) {
            return this.x *= a,
            this.y *= b,
            this
        },
        divide: function(a, b) {
            return this.x /= a,
            this.y /= b,
            this
        },
        clampX: function(a, b) {
            return this.x = c.Math.clamp(this.x, a, b),
            this
        },
        clampY: function(a, b) {
            return this.y = c.Math.clamp(this.y, a, b),
            this
        },
        clamp: function(a, b) {
            return this.x = c.Math.clamp(this.x, a, b),
            this.y = c.Math.clamp(this.y, a, b),
            this
        },
        clone: function(a) {
            return "undefined" == typeof a || null === a ? a = new c.Point(this.x, this.y) : a.setTo(this.x, this.y),
            a
        },
        copyTo: function(a) {
            return a.x = this.x,
            a.y = this.y,
            a
        },
        distance: function(a, b) {
            return c.Point.distance(this, a, b)
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y
        },
        angle: function(a, b) {
            return "undefined" == typeof b && (b = !1),
            b ? c.Math.radToDeg(Math.atan2(a.y - this.y, a.x - this.x)) : Math.atan2(a.y - this.y, a.x - this.x)
        },
        rotate: function(a, b, d, e, f) {
            return c.Point.rotate(this, a, b, d, e, f)
        },
        getMagnitude: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        getMagnitudeSq: function() {
            return this.x * this.x + this.y * this.y
        },
        setMagnitude: function(a) {
            return this.normalize().multiply(a, a)
        },
        normalize: function() {
            if (!this.isZero()) {
                var a = this.getMagnitude();
                this.x /= a,
                this.y /= a
            }
            return this
        },
        isZero: function() {
            return 0 === this.x && 0 === this.y
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y
        },
        cross: function(a) {
            return this.x * a.y - this.y * a.x
        },
        perp: function() {
            return this.setTo( - this.y, this.x)
        },
        rperp: function() {
            return this.setTo(this.y, -this.x)
        },
        normalRightHand: function() {
            return this.setTo( - 1 * this.y, this.x)
        },
        floor: function() {
            return this.setTo(Math.floor(this.x), Math.floor(this.y))
        },
        ceil: function() {
            return this.setTo(Math.ceil(this.x), Math.ceil(this.y))
        },
        toString: function() {
            return "[{Point (x=" + this.x + " y=" + this.y + ")}]"
        }
    },
    c.Point.prototype.constructor = c.Point,
    c.Point.add = function(a, b, d) {
        return "undefined" == typeof d && (d = new c.Point),
        d.x = a.x + b.x,
        d.y = a.y + b.y,
        d
    },
    c.Point.subtract = function(a, b, d) {
        return "undefined" == typeof d && (d = new c.Point),
        d.x = a.x - b.x,
        d.y = a.y - b.y,
        d
    },
    c.Point.multiply = function(a, b, d) {
        return "undefined" == typeof d && (d = new c.Point),
        d.x = a.x * b.x,
        d.y = a.y * b.y,
        d
    },
    c.Point.divide = function(a, b, d) {
        return "undefined" == typeof d && (d = new c.Point),
        d.x = a.x / b.x,
        d.y = a.y / b.y,
        d
    },
    c.Point.equals = function(a, b) {
        return a.x === b.x && a.y === b.y
    },
    c.Point.angle = function(a, b) {
        return Math.atan2(a.y - b.y, a.x - b.x)
    },
    c.Point.negative = function(a, b) {
        return "undefined" == typeof b && (b = new c.Point),
        b.setTo( - a.x, -a.y)
    },
    c.Point.multiplyAdd = function(a, b, d, e) {
        return "undefined" == typeof e && (e = new c.Point),
        e.setTo(a.x + b.x * d, a.y + b.y * d)
    },
    c.Point.interpolate = function(a, b, d, e) {
        return "undefined" == typeof e && (e = new c.Point),
        e.setTo(a.x + (b.x - a.x) * d, a.y + (b.y - a.y) * d)
    },
    c.Point.perp = function(a, b) {
        return "undefined" == typeof b && (b = new c.Point),
        b.setTo( - a.y, a.x)
    },
    c.Point.rperp = function(a, b) {
        return "undefined" == typeof b && (b = new c.Point),
        b.setTo(a.y, -a.x)
    },
    c.Point.distance = function(a, b, d) {
        var e = c.Math.distance(a.x, a.y, b.x, b.y);
        return d ? Math.round(e) : e
    },
    c.Point.project = function(a, b, d) {
        "undefined" == typeof d && (d = new c.Point);
        var e = a.dot(b) / b.getMagnitudeSq();
        return 0 !== e && d.setTo(e * b.x, e * b.y),
        d
    },
    c.Point.projectUnit = function(a, b, d) {
        "undefined" == typeof d && (d = new c.Point);
        var e = a.dot(b);
        return 0 !== e && d.setTo(e * b.x, e * b.y),
        d
    },
    c.Point.normalRightHand = function(a, b) {
        return "undefined" == typeof b && (b = new c.Point),
        b.setTo( - 1 * a.y, a.x)
    },
    c.Point.normalize = function(a, b) {
        "undefined" == typeof b && (b = new c.Point);
        var d = a.getMagnitude();
        return 0 !== d && b.setTo(a.x / d, a.y / d),
        b
    },
    c.Point.rotate = function(a, b, d, e, f, g) {
        f = f || !1,
        g = g || null,
        f && (e = c.Math.degToRad(e)),
        null === g && (g = Math.sqrt((b - a.x) * (b - a.x) + (d - a.y) * (d - a.y)));
        var h = e + Math.atan2(a.y - d, a.x - b);
        return a.setTo(b + g * Math.cos(h), d + g * Math.sin(h))
    },
    c.Point.centroid = function(a, b) {
        if ("undefined" == typeof b && (b = new c.Point), "[object Array]" !== Object.prototype.toString.call(a)) throw new Error("Phaser.Point. Parameter 'points' must be an array");
        var d = a.length;
        if (1 > d) throw new Error("Phaser.Point. Parameter 'points' array must not be empty");
        if (1 === d) return b.copyFrom(a[0]),
        b;
        for (var e = 0; d > e; e++) c.Point.add(b, a[e], b);
        return b.divide(d, d),
        b
    },
    c.Point.parse = function(a, b, d) {
        b = b || "x",
        d = d || "y";
        var e = new c.Point;
        return a[b] && (e.x = parseInt(a[b], 10)),
        a[d] && (e.y = parseInt(a[d], 10)),
        e
    },
    PIXI.Point = c.Point,
    c.Polygon = function() {
        this.area = 0,
        this._points = [],
        arguments.length > 0 && this.setTo.apply(this, arguments),
        this.closed = !0,
        this.type = c.POLYGON
    },
    c.Polygon.prototype = {
        toNumberArray: function(a) {
            "undefined" == typeof a && (a = []);
            for (var b = 0; b < this._points.length; b++)"number" == typeof this._points[b] ? (a.push(this._points[b]), a.push(this._points[b + 1]), b++) : (a.push(this._points[b].x), a.push(this._points[b].y));
            return a
        },
        flatten: function() {
            return this._points = this.toNumberArray(),
            this
        },
        clone: function(a) {
            var b = this._points.slice();
            return "undefined" == typeof a || null === a ? a = new c.Polygon(b) : a.setTo(b),
            a
        },
        contains: function(a, b) {
            for (var c = this._points.length,
            d = !1,
            e = -1,
            f = c - 1; ++e < c; f = e) {
                var g = this._points[e].x,
                h = this._points[e].y,
                i = this._points[f].x,
                j = this._points[f].y; (b >= h && j > b || b >= j && h > b) && (i - g) * (b - h) / (j - h) + g > a && (d = !d)
            }
            return d
        },
        setTo: function(a) {
            if (this.area = 0, this._points = [], arguments.length > 0) {
                Array.isArray(a) || (a = Array.prototype.slice.call(arguments));
                for (var b = Number.MAX_VALUE,
                c = 0,
                d = a.length; d > c; c++) {
                    if ("number" == typeof a[c]) {
                        var e = new PIXI.Point(a[c], a[c + 1]);
                        c++
                    } else var e = new PIXI.Point(a[c].x, a[c].y);
                    this._points.push(e),
                    e.y < b && (b = e.y)
                }
                this.calculateArea(b)
            }
            return this
        },
        calculateArea: function(a) {
            for (var b, c, d, e, f = 0,
            g = this._points.length; g > f; f++) b = this._points[f],
            c = f === g - 1 ? this._points[0] : this._points[f + 1],
            d = (b.y - a + (c.y - a)) / 2,
            e = b.x - c.x,
            this.area += d * e;
            return this.area
        }
    },
    c.Polygon.prototype.constructor = c.Polygon,
    Object.defineProperty(c.Polygon.prototype, "points", {
        get: function() {
            return this._points
        },
        set: function(a) {
            null != a ? this.setTo(a) : this.setTo()
        }
    }),
    PIXI.Polygon = c.Polygon,
    c.Rectangle = function(a, b, d, e) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        e = e || 0,
        this.x = a,
        this.y = b,
        this.width = d,
        this.height = e,
        this.type = c.RECTANGLE
    },
    c.Rectangle.prototype = {
        offset: function(a, b) {
            return this.x += a,
            this.y += b,
            this
        },
        offsetPoint: function(a) {
            return this.offset(a.x, a.y)
        },
        setTo: function(a, b, c, d) {
            return this.x = a,
            this.y = b,
            this.width = c,
            this.height = d,
            this
        },
        scale: function(a, b) {
            return "undefined" == typeof b && (b = a),
            this.width *= a,
            this.height *= b,
            this
        },
        centerOn: function(a, b) {
            return this.centerX = a,
            this.centerY = b,
            this
        },
        floor: function() {
            this.x = Math.floor(this.x),
            this.y = Math.floor(this.y)
        },
        floorAll: function() {
            this.x = Math.floor(this.x),
            this.y = Math.floor(this.y),
            this.width = Math.floor(this.width),
            this.height = Math.floor(this.height)
        },
        copyFrom: function(a) {
            return this.setTo(a.x, a.y, a.width, a.height)
        },
        copyTo: function(a) {
            return a.x = this.x,
            a.y = this.y,
            a.width = this.width,
            a.height = this.height,
            a
        },
        inflate: function(a, b) {
            return c.Rectangle.inflate(this, a, b)
        },
        size: function(a) {
            return c.Rectangle.size(this, a)
        },
        clone: function(a) {
            return c.Rectangle.clone(this, a)
        },
        contains: function(a, b) {
            return c.Rectangle.contains(this, a, b)
        },
        containsRect: function(a) {
            return c.Rectangle.containsRect(a, this)
        },
        equals: function(a) {
            return c.Rectangle.equals(this, a)
        },
        intersection: function(a, b) {
            return c.Rectangle.intersection(this, a, b)
        },
        intersects: function(a) {
            return c.Rectangle.intersects(this, a)
        },
        intersectsRaw: function(a, b, d, e, f) {
            return c.Rectangle.intersectsRaw(this, a, b, d, e, f)
        },
        union: function(a, b) {
            return c.Rectangle.union(this, a, b)
        },
        toString: function() {
            return "[{Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + " empty=" + this.empty + ")}]"
        }
    },
    Object.defineProperty(c.Rectangle.prototype, "halfWidth", {
        get: function() {
            return Math.round(this.width / 2)
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "halfHeight", {
        get: function() {
            return Math.round(this.height / 2)
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "bottom", {
        get: function() {
            return this.y + this.height
        },
        set: function(a) {
            this.height = a <= this.y ? 0 : a - this.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "bottomRight", {
        get: function() {
            return new c.Point(this.right, this.bottom)
        },
        set: function(a) {
            this.right = a.x,
            this.bottom = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "left", {
        get: function() {
            return this.x
        },
        set: function(a) {
            this.width = a >= this.right ? 0 : this.right - a,
            this.x = a
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "right", {
        get: function() {
            return this.x + this.width
        },
        set: function(a) {
            this.width = a <= this.x ? 0 : a - this.x
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "volume", {
        get: function() {
            return this.width * this.height
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "perimeter", {
        get: function() {
            return 2 * this.width + 2 * this.height
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "centerX", {
        get: function() {
            return this.x + this.halfWidth
        },
        set: function(a) {
            this.x = a - this.halfWidth
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "centerY", {
        get: function() {
            return this.y + this.halfHeight
        },
        set: function(a) {
            this.y = a - this.halfHeight
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "randomX", {
        get: function() {
            return this.x + Math.random() * this.width
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "randomY", {
        get: function() {
            return this.y + Math.random() * this.height
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "top", {
        get: function() {
            return this.y
        },
        set: function(a) {
            a >= this.bottom ? (this.height = 0, this.y = a) : this.height = this.bottom - a
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "topLeft", {
        get: function() {
            return new c.Point(this.x, this.y)
        },
        set: function(a) {
            this.x = a.x,
            this.y = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "topRight", {
        get: function() {
            return new c.Point(this.x + this.width, this.y)
        },
        set: function(a) {
            this.right = a.x,
            this.y = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "empty", {
        get: function() {
            return ! this.width || !this.height
        },
        set: function(a) {
            a === !0 && this.setTo(0, 0, 0, 0)
        }
    }),
    c.Rectangle.prototype.constructor = c.Rectangle,
    c.Rectangle.inflate = function(a, b, c) {
        return a.x -= b,
        a.width += 2 * b,
        a.y -= c,
        a.height += 2 * c,
        a
    },
    c.Rectangle.inflatePoint = function(a, b) {
        return c.Rectangle.inflate(a, b.x, b.y)
    },
    c.Rectangle.size = function(a, b) {
        return "undefined" == typeof b || null === b ? b = new c.Point(a.width, a.height) : b.setTo(a.width, a.height),
        b
    },
    c.Rectangle.clone = function(a, b) {
        return "undefined" == typeof b || null === b ? b = new c.Rectangle(a.x, a.y, a.width, a.height) : b.setTo(a.x, a.y, a.width, a.height),
        b
    },
    c.Rectangle.contains = function(a, b, c) {
        return a.width <= 0 || a.height <= 0 ? !1 : b >= a.x && b < a.right && c >= a.y && c < a.bottom
    },
    c.Rectangle.containsRaw = function(a, b, c, d, e, f) {
        return e >= a && a + c > e && f >= b && b + d > f
    },
    c.Rectangle.containsPoint = function(a, b) {
        return c.Rectangle.contains(a, b.x, b.y)
    },
    c.Rectangle.containsRect = function(a, b) {
        return a.volume > b.volume ? !1 : a.x >= b.x && a.y >= b.y && a.right < b.right && a.bottom < b.bottom
    },
    c.Rectangle.equals = function(a, b) {
        return a.x == b.x && a.y == b.y && a.width == b.width && a.height == b.height
    },
    c.Rectangle.sameDimensions = function(a, b) {
        return a.width === b.width && a.height === b.height
    },
    c.Rectangle.intersection = function(a, b, d) {
        return "undefined" == typeof d && (d = new c.Rectangle),
        c.Rectangle.intersects(a, b) && (d.x = Math.max(a.x, b.x), d.y = Math.max(a.y, b.y), d.width = Math.min(a.right, b.right) - d.x, d.height = Math.min(a.bottom, b.bottom) - d.y),
        d
    },
    c.Rectangle.intersects = function(a, b) {
        return a.width <= 0 || a.height <= 0 || b.width <= 0 || b.height <= 0 ? !1 : !(a.right < b.x || a.bottom < b.y || a.x > b.right || a.y > b.bottom)
    },
    c.Rectangle.intersectsRaw = function(a, b, c, d, e, f) {
        return "undefined" == typeof f && (f = 0),
        !(b > a.right + f || c < a.left - f || d > a.bottom + f || e < a.top - f)
    },
    c.Rectangle.union = function(a, b, d) {
        return "undefined" == typeof d && (d = new c.Rectangle),
        d.setTo(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.max(a.right, b.right) - Math.min(a.left, b.left), Math.max(a.bottom, b.bottom) - Math.min(a.top, b.top))
    },
    c.Rectangle.aabb = function(a, b) {
        "undefined" == typeof b && (b = new c.Rectangle);
        var d = Number.MIN_VALUE,
        e = Number.MAX_VALUE,
        f = Number.MIN_VALUE,
        g = Number.MAX_VALUE;
        return a.forEach(function(a) {
            a.x > d && (d = a.x),
            a.x < e && (e = a.x),
            a.y > f && (f = a.y),
            a.y < g && (g = a.y)
        }),
        b.setTo(e, g, d - e, f - g),
        b
    },
    PIXI.Rectangle = c.Rectangle,
    PIXI.EmptyRectangle = new c.Rectangle(0, 0, 0, 0),
    c.RoundedRectangle = function(a, b, d, e, f) {
        this.x = a || 0,
        this.y = b || 0,
        this.width = d || 0,
        this.height = e || 0,
        this.radius = f || 20,
        this.type = c.ROUNDEDRECTANGLE
    },
    c.RoundedRectangle.prototype.clone = function() {
        return new c.RoundedRectangle(this.x, this.y, this.width, this.height, this.radius)
    },
    c.RoundedRectangle.prototype.contains = function(a, b) {
        if (this.width <= 0 || this.height <= 0) return ! 1;
        var c = this.x;
        if (a >= c && a <= c + this.width) {
            var d = this.y;
            if (b >= d && b <= d + this.height) return ! 0
        }
        return ! 1
    },
    c.RoundedRectangle.prototype.constructor = c.RoundedRectangle,
    PIXI.RoundedRectangle = c.RoundedRectangle,
    c.Camera = function(a, b, d, e, f, g) {
        this.game = a,
        this.world = a.world,
        this.id = 0,
        this.view = new c.Rectangle(d, e, f, g),
        this.screenView = new c.Rectangle(d, e, f, g),
        this.bounds = new c.Rectangle(d, e, f, g),
        this.deadzone = null,
        this.visible = !0,
        this.roundPx = !0,
        this.atLimit = {
            x: !1,
            y: !1
        },
        this.target = null,
        this.displayObject = null,
        this.scale = null,
        this.totalInView = 0,
        this._targetPosition = new c.Point,
        this._edge = 0,
        this._position = new c.Point
    },
    c.Camera.FOLLOW_LOCKON = 0,
    c.Camera.FOLLOW_PLATFORMER = 1,
    c.Camera.FOLLOW_TOPDOWN = 2,
    c.Camera.FOLLOW_TOPDOWN_TIGHT = 3,
    c.Camera.prototype = {
        preUpdate: function() {
            this.totalInView = 0
        },
        follow: function(a, b) {
            "undefined" == typeof b && (b = c.Camera.FOLLOW_LOCKON),
            this.target = a;
            var d;
            switch (b) {
            case c.Camera.FOLLOW_PLATFORMER:
                var e = this.width / 8,
                f = this.height / 3;
                this.deadzone = new c.Rectangle((this.width - e) / 2, (this.height - f) / 2 - .25 * f, e, f);
                break;
            case c.Camera.FOLLOW_TOPDOWN:
                d = Math.max(this.width, this.height) / 4,
                this.deadzone = new c.Rectangle((this.width - d) / 2, (this.height - d) / 2, d, d);
                break;
            case c.Camera.FOLLOW_TOPDOWN_TIGHT:
                d = Math.max(this.width, this.height) / 8,
                this.deadzone = new c.Rectangle((this.width - d) / 2, (this.height - d) / 2, d, d);
                break;
            case c.Camera.FOLLOW_LOCKON:
                this.deadzone = null;
                break;
            default:
                this.deadzone = null
            }
        },
        unfollow: function() {
            this.target = null
        },
        focusOn: function(a) {
            this.setPosition(Math.round(a.x - this.view.halfWidth), Math.round(a.y - this.view.halfHeight))
        },
        focusOnXY: function(a, b) {
            this.setPosition(Math.round(a - this.view.halfWidth), Math.round(b - this.view.halfHeight))
        },
        update: function() {
            this.target && this.updateTarget(),
            this.bounds && this.checkBounds(),
            this.roundPx && this.view.floor(),
            this.displayObject.position.x = -this.view.x,
            this.displayObject.position.y = -this.view.y
        },
        updateTarget: function() {
            this._targetPosition.copyFrom(this.target),
            this.target.parent && this._targetPosition.multiply(this.target.parent.worldTransform.a, this.target.parent.worldTransform.d),
            this.deadzone ? (this._edge = this._targetPosition.x - this.view.x, this._edge < this.deadzone.left ? this.view.x = this._targetPosition.x - this.deadzone.left: this._edge > this.deadzone.right && (this.view.x = this._targetPosition.x - this.deadzone.right), this._edge = this._targetPosition.y - this.view.y, this._edge < this.deadzone.top ? this.view.y = this._targetPosition.y - this.deadzone.top: this._edge > this.deadzone.bottom && (this.view.y = this._targetPosition.y - this.deadzone.bottom)) : (this.view.x = this._targetPosition.x - this.view.halfWidth, this.view.y = this._targetPosition.y - this.view.halfHeight)
        },
        setBoundsToWorld: function() {
            this.bounds && this.bounds.setTo(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height)
        },
        checkBounds: function() {
            this.atLimit.x = !1,
            this.atLimit.y = !1,
            this.view.x <= this.bounds.x && (this.atLimit.x = !0, this.view.x = this.bounds.x),
            this.view.right >= this.bounds.right && (this.atLimit.x = !0, this.view.x = this.bounds.right - this.width),
            this.view.y <= this.bounds.top && (this.atLimit.y = !0, this.view.y = this.bounds.top),
            this.view.bottom >= this.bounds.bottom && (this.atLimit.y = !0, this.view.y = this.bounds.bottom - this.height)
        },
        setPosition: function(a, b) {
            this.view.x = a,
            this.view.y = b,
            this.bounds && this.checkBounds()
        },
        setSize: function(a, b) {
            this.view.width = a,
            this.view.height = b
        },
        reset: function() {
            this.target = null,
            this.view.x = 0,
            this.view.y = 0
        }
    },
    c.Camera.prototype.constructor = c.Camera,
    Object.defineProperty(c.Camera.prototype, "x", {
        get: function() {
            return this.view.x
        },
        set: function(a) {
            this.view.x = a,
            this.bounds && this.checkBounds()
        }
    }),
    Object.defineProperty(c.Camera.prototype, "y", {
        get: function() {
            return this.view.y
        },
        set: function(a) {
            this.view.y = a,
            this.bounds && this.checkBounds()
        }
    }),
    Object.defineProperty(c.Camera.prototype, "position", {
        get: function() {
            return this._position.set(this.view.centerX, this.view.centerY),
            this._position
        },
        set: function(a) {
            "undefined" != typeof a.x && (this.view.x = a.x),
            "undefined" != typeof a.y && (this.view.y = a.y),
            this.bounds && this.checkBounds()
        }
    }),
    Object.defineProperty(c.Camera.prototype, "width", {
        get: function() {
            return this.view.width
        },
        set: function(a) {
            this.view.width = a
        }
    }),
    Object.defineProperty(c.Camera.prototype, "height", {
        get: function() {
            return this.view.height
        },
        set: function(a) {
            this.view.height = a
        }
    }),
    c.State = function() {
        this.game = null,
        this.key = "",
        this.add = null,
        this.make = null,
        this.camera = null,
        this.cache = null,
        this.input = null,
        this.load = null,
        this.math = null,
        this.sound = null,
        this.scale = null,
        this.stage = null,
        this.time = null,
        this.tweens = null,
        this.world = null,
        this.particles = null,
        this.physics = null,
        this.rnd = null
    },
    c.State.prototype = {
        init: function() {},
        preload: function() {},
        loadUpdate: function() {},
        loadRender: function() {},
        create: function() {},
        update: function() {},
        render: function() {},
        resize: function() {},
        paused: function() {},
        pauseUpdate: function() {},
        shutdown: function() {}
    },
    c.State.prototype.constructor = c.State,
    c.StateManager = function(a, b) {
        this.game = a,
        this.states = {},
        this._pendingState = null,
        "undefined" != typeof b && null !== b && (this._pendingState = b),
        this._clearWorld = !1,
        this._clearCache = !1,
        this._created = !1,
        this._args = [],
        this.current = "",
        this.onInitCallback = null,
        this.onPreloadCallback = null,
        this.onCreateCallback = null,
        this.onUpdateCallback = null,
        this.onRenderCallback = null,
        this.onResizeCallback = null,
        this.onPreRenderCallback = null,
        this.onLoadUpdateCallback = null,
        this.onLoadRenderCallback = null,
        this.onPausedCallback = null,
        this.onResumedCallback = null,
        this.onPauseUpdateCallback = null,
        this.onShutDownCallback = null
    },
    c.StateManager.prototype = {
        boot: function() {
            this.game.onPause.add(this.pause, this),
            this.game.onResume.add(this.resume, this),
            null !== this._pendingState && "string" != typeof this._pendingState && this.add("default", this._pendingState, !0)
        },
        add: function(a, b, d) {
            "undefined" == typeof d && (d = !1);
            var e;
            return b instanceof c.State ? e = b: "object" == typeof b ? (e = b, e.game = this.game) : "function" == typeof b && (e = new b(this.game)),
            this.states[a] = e,
            d && (this.game.isBooted ? this.start(a) : this._pendingState = a),
            e
        },
        remove: function(a) {
            this.current === a && (this.callbackContext = null, this.onInitCallback = null, this.onShutDownCallback = null, this.onPreloadCallback = null, this.onLoadRenderCallback = null, this.onLoadUpdateCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onPreRenderCallback = null, this.onRenderCallback = null, this.onResizeCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null),
            delete this.states[a]
        },
        start: function(a, b, c) {
            "undefined" == typeof b && (b = !0),
            "undefined" == typeof c && (c = !1),
            this.checkState(a) && (this._pendingState = a, this._clearWorld = b, this._clearCache = c, arguments.length > 3 && (this._args = Array.prototype.splice.call(arguments, 3)))
        },
        restart: function(a, b) {
            "undefined" == typeof a && (a = !0),
            "undefined" == typeof b && (b = !1),
            this._pendingState = this.current,
            this._clearWorld = a,
            this._clearCache = b,
            arguments.length > 2 && (this._args = Array.prototype.splice.call(arguments, 2))
        },
        dummy: function() {},
        preUpdate: function() {
            if (this._pendingState && this.game.isBooted) {
                if (this.clearCurrentState(), this.setCurrentState(this._pendingState), this.current !== this._pendingState) return;
                this._pendingState = null,
                this.onPreloadCallback ? (this.game.load.reset(!0), this.onPreloadCallback.call(this.callbackContext, this.game), 0 === this.game.load.totalQueuedFiles() && 0 === this.game.load.totalQueuedPacks() ? this.loadComplete() : this.game.load.start()) : this.loadComplete()
            }
        },
        clearCurrentState: function() {
            this.current && (this.onShutDownCallback && this.onShutDownCallback.call(this.callbackContext, this.game), this.game.tweens.removeAll(), this.game.camera.reset(), this.game.input.reset(!0), this.game.physics.clear(), this.game.time.removeAll(), this.game.scale.reset(this._clearWorld), this.game.debug && this.game.debug.reset(), this._clearWorld && (this.game.world.shutdown(), this._clearCache === !0 && this.game.cache.destroy()))
        },
        checkState: function(a) {
            if (this.states[a]) {
                var b = !1;
                return (this.states[a].preload || this.states[a].create || this.states[a].update || this.states[a].render) && (b = !0),
                b === !1 ? (console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions: preload, create, update or render"), !1) : !0
            }
            return console.warn("Phaser.StateManager - No state found with the key: " + a),
            !1
        },
        link: function(a) {
            this.states[a].game = this.game,
            this.states[a].add = this.game.add,
            this.states[a].make = this.game.make,
            this.states[a].camera = this.game.camera,
            this.states[a].cache = this.game.cache,
            this.states[a].input = this.game.input,
            this.states[a].load = this.game.load,
            this.states[a].math = this.game.math,
            this.states[a].sound = this.game.sound,
            this.states[a].scale = this.game.scale,
            this.states[a].state = this,
            this.states[a].stage = this.game.stage,
            this.states[a].time = this.game.time,
            this.states[a].tweens = this.game.tweens,
            this.states[a].world = this.game.world,
            this.states[a].particles = this.game.particles,
            this.states[a].rnd = this.game.rnd,
            this.states[a].physics = this.game.physics,
            this.states[a].key = a
        },
        unlink: function(a) {
            this.states[a] && (this.states[a].game = null, this.states[a].add = null, this.states[a].make = null, this.states[a].camera = null, this.states[a].cache = null, this.states[a].input = null, this.states[a].load = null, this.states[a].math = null, this.states[a].sound = null, this.states[a].scale = null, this.states[a].state = null, this.states[a].stage = null, this.states[a].time = null, this.states[a].tweens = null, this.states[a].world = null, this.states[a].particles = null, this.states[a].rnd = null, this.states[a].physics = null)
        },
        setCurrentState: function(a) {
            this.callbackContext = this.states[a],
            this.link(a),
            this.onInitCallback = this.states[a].init || this.dummy,
            this.onPreloadCallback = this.states[a].preload || null,
            this.onLoadRenderCallback = this.states[a].loadRender || null,
            this.onLoadUpdateCallback = this.states[a].loadUpdate || null,
            this.onCreateCallback = this.states[a].create || null,
            this.onUpdateCallback = this.states[a].update || null,
            this.onPreRenderCallback = this.states[a].preRender || null,
            this.onRenderCallback = this.states[a].render || null,
            this.onResizeCallback = this.states[a].resize || null,
            this.onPausedCallback = this.states[a].paused || null,
            this.onResumedCallback = this.states[a].resumed || null,
            this.onPauseUpdateCallback = this.states[a].pauseUpdate || null,
            this.onShutDownCallback = this.states[a].shutdown || this.dummy,
            "" !== this.current && this.game.physics.reset(),
            this.current = a,
            this._created = !1,
            this.onInitCallback.apply(this.callbackContext, this._args),
            a === this._pendingState && (this._args = []),
            this.game._kickstart = !0
        },
        getCurrentState: function() {
            return this.states[this.current]
        },
        loadComplete: function() {
            this._created === !1 && this.onCreateCallback ? (this._created = !0, this.onCreateCallback.call(this.callbackContext, this.game)) : this._created = !0
        },
        pause: function() {
            this._created && this.onPausedCallback && this.onPausedCallback.call(this.callbackContext, this.game)
        },
        resume: function() {
            this._created && this.onResumedCallback && this.onResumedCallback.call(this.callbackContext, this.game)
        },
        update: function() {
            this._created && this.onUpdateCallback ? this.onUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game)
        },
        pauseUpdate: function() {
            this._created && this.onPauseUpdateCallback ? this.onPauseUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game)
        },
        preRender: function(a) {
            this.onPreRenderCallback && this.onPreRenderCallback.call(this.callbackContext, this.game, a)
        },
        resize: function(a, b) {
            this.onResizeCallback && this.onResizeCallback.call(this.callbackContext, a, b)
        },
        render: function() {
            this._created && this.onRenderCallback ? this.game.renderType === c.CANVAS ? (this.game.context.save(), this.game.context.setTransform(1, 0, 0, 1, 0, 0), this.onRenderCallback.call(this.callbackContext, this.game), this.game.context.restore()) : this.onRenderCallback.call(this.callbackContext, this.game) : this.onLoadRenderCallback && this.onLoadRenderCallback.call(this.callbackContext, this.game)
        },
        destroy: function() {
            this.clearCurrentState(),
            this.callbackContext = null,
            this.onInitCallback = null,
            this.onShutDownCallback = null,
            this.onPreloadCallback = null,
            this.onLoadRenderCallback = null,
            this.onLoadUpdateCallback = null,
            this.onCreateCallback = null,
            this.onUpdateCallback = null,
            this.onRenderCallback = null,
            this.onPausedCallback = null,
            this.onResumedCallback = null,
            this.onPauseUpdateCallback = null,
            this.game = null,
            this.states = {},
            this._pendingState = null,
            this.current = ""
        }
    },
    c.StateManager.prototype.constructor = c.StateManager,
    c.Signal = function() {},
    c.Signal.prototype = {
        _bindings: null,
        _prevParams: null,
        memorize: !1,
        _shouldPropagate: !0,
        active: !0,
        _boundDispatch: !0,
        validateListener: function(a, b) {
            if ("function" != typeof a) throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}", b))
        },
        _registerListener: function(a, b, d, e) {
            var f, g = this._indexOfListener(a, d);
            if ( - 1 !== g) {
                if (f = this._bindings[g], f.isOnce() !== b) throw new Error("You cannot add" + (b ? "": "Once") + "() then add" + (b ? "Once": "") + "() the same listener without removing the relationship first.")
            } else f = new c.SignalBinding(this, a, b, d, e),
            this._addBinding(f);
            return this.memorize && this._prevParams && f.execute(this._prevParams),
            f
        },
        _addBinding: function(a) {
            this._bindings || (this._bindings = []);
            var b = this._bindings.length;
            do b--;
            while (this._bindings[b] && a._priority <= this._bindings[b]._priority);
            this._bindings.splice(b + 1, 0, a)
        },
        _indexOfListener: function(a, b) {
            if (!this._bindings) return - 1;
            "undefined" == typeof b && (b = null);
            for (var c, d = this._bindings.length; d--;) if (c = this._bindings[d], c._listener === a && c.context === b) return d;
            return - 1
        },
        has: function(a, b) {
            return - 1 !== this._indexOfListener(a, b)
        },
        add: function(a, b, c) {
            return this.validateListener(a, "add"),
            this._registerListener(a, !1, b, c)
        },
        addOnce: function(a, b, c) {
            return this.validateListener(a, "addOnce"),
            this._registerListener(a, !0, b, c)
        },
        remove: function(a, b) {
            this.validateListener(a, "remove");
            var c = this._indexOfListener(a, b);
            return - 1 !== c && (this._bindings[c]._destroy(), this._bindings.splice(c, 1)),
            a
        },
        removeAll: function(a) {
            if ("undefined" == typeof a && (a = null), this._bindings) {
                for (var b = this._bindings.length; b--;) a ? this._bindings[b].context === a && (this._bindings[b]._destroy(), this._bindings.splice(b, 1)) : this._bindings[b]._destroy();
                a || (this._bindings.length = 0)
            }
        },
        getNumListeners: function() {
            return this._bindings ? this._bindings.length: 0
        },
        halt: function() {
            this._shouldPropagate = !1
        },
        dispatch: function() {
            if (this.active && this._bindings) {
                var a, b = Array.prototype.slice.call(arguments),
                c = this._bindings.length;
                if (this.memorize && (this._prevParams = b), c) {
                    a = this._bindings.slice(),
                    this._shouldPropagate = !0;
                    do c--;
                    while (a[c] && this._shouldPropagate && a[c].execute(b) !== !1)
                }
            }
        },
        forget: function() {
            this._prevParams && (this._prevParams = null)
        },
        dispose: function() {
            this.removeAll(),
            this._bindings = null,
            this._prevParams && (this._prevParams = null)
        },
        toString: function() {
            return "[Phaser.Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
        }
    },
    Object.defineProperty(c.Signal.prototype, "boundDispatch", {
        get: function() {
            var a = this;
            return this._boundDispatch || (this._boundDispatch = function() {
                return a.dispatch.apply(a, arguments)
            })
        }
    }),
    c.Signal.prototype.constructor = c.Signal,
    c.SignalBinding = function(a, b, c, d, e) {
        this._listener = b,
        c && (this._isOnce = !0),
        null != d && (this.context = d),
        this._signal = a,
        e && (this._priority = e)
    },
    c.SignalBinding.prototype = {
        context: null,
        _isOnce: !1,
        _priority: 0,
        callCount: 0,
        active: !0,
        params: null,
        execute: function(a) {
            var b, c;
            return this.active && this._listener && (c = this.params ? this.params.concat(a) : a, b = this._listener.apply(this.context, c), this.callCount++, this._isOnce && this.detach()),
            b
        },
        detach: function() {
            return this.isBound() ? this._signal.remove(this._listener, this.context) : null
        },
        isBound: function() {
            return !! this._signal && !!this._listener
        },
        isOnce: function() {
            return this._isOnce
        },
        getListener: function() {
            return this._listener
        },
        getSignal: function() {
            return this._signal
        },
        _destroy: function() {
            delete this._signal,
            delete this._listener,
            delete this.context
        },
        toString: function() {
            return "[Phaser.SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
        }
    },
    c.SignalBinding.prototype.constructor = c.SignalBinding,
    c.Filter = function(a, b, d) {
        this.game = a,
        this.type = c.WEBGL_FILTER,
        this.passes = [this],
        this.shaders = [],
        this.dirty = !0,
        this.padding = 0,
        this.prevPoint = new c.Point;
        var e = new Date;
        if (this.uniforms = {
            resolution: {
                type: "2f",
                value: {
                    x: 256,
                    y: 256
                }
            },
            time: {
                type: "1f",
                value: 0
            },
            mouse: {
                type: "2f",
                value: {
                    x: 0,
                    y: 0
                }
            },
            date: {
                type: "4fv",
                value: [e.getFullYear(), e.getMonth(), e.getDate(), 60 * e.getHours() * 60 + 60 * e.getMinutes() + e.getSeconds()]
            },
            sampleRate: {
                type: "1f",
                value: 44100
            },
            iChannel0: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            },
            iChannel1: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            },
            iChannel2: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            },
            iChannel3: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            }
        },
        b) for (var f in b) this.uniforms[f] = b[f];
        this.fragmentSrc = d || []
    },
    c.Filter.prototype = {
        init: function() {},
        setResolution: function(a, b) {
            this.uniforms.resolution.value.x = a,
            this.uniforms.resolution.value.y = b
        },
        update: function(a) {
            if ("undefined" != typeof a) {
                var b = a.x / this.game.width,
                c = 1 - a.y / this.game.height; (b !== this.prevPoint.x || c !== this.prevPoint.y) && (this.uniforms.mouse.value.x = b.toFixed(2), this.uniforms.mouse.value.y = c.toFixed(2), this.prevPoint.set(b, c))
            }
            this.uniforms.time.value = this.game.time.totalElapsedSeconds()
        },
        destroy: function() {
            this.game = null
        }
    },
    c.Filter.prototype.constructor = c.Filter,
    Object.defineProperty(c.Filter.prototype, "width", {
        get: function() {
            return this.uniforms.resolution.value.x
        },
        set: function(a) {
            this.uniforms.resolution.value.x = a
        }
    }),
    Object.defineProperty(c.Filter.prototype, "height", {
        get: function() {
            return this.uniforms.resolution.value.y
        },
        set: function(a) {
            this.uniforms.resolution.value.y = a
        }
    }),
    c.Plugin = function(a, b) {
        "undefined" == typeof b && (b = null),
        this.game = a,
        this.parent = b,
        this.active = !1,
        this.visible = !1,
        this.hasPreUpdate = !1,
        this.hasUpdate = !1,
        this.hasPostUpdate = !1,
        this.hasRender = !1,
        this.hasPostRender = !1
    },
    c.Plugin.prototype = {
        preUpdate: function() {},
        update: function() {},
        render: function() {},
        postRender: function() {},
        destroy: function() {
            this.game = null,
            this.parent = null,
            this.active = !1,
            this.visible = !1
        }
    },
    c.Plugin.prototype.constructor = c.Plugin,
    c.PluginManager = function(a) {
        this.game = a,
        this.plugins = [],
        this._len = 0,
        this._i = 0
    },
    c.PluginManager.prototype = {
        add: function(a) {
            var b = Array.prototype.splice.call(arguments, 1),
            c = !1;
            return "function" == typeof a ? a = new a(this.game, this) : (a.game = this.game, a.parent = this),
            "function" == typeof a.preUpdate && (a.hasPreUpdate = !0, c = !0),
            "function" == typeof a.update && (a.hasUpdate = !0, c = !0),
            "function" == typeof a.postUpdate && (a.hasPostUpdate = !0, c = !0),
            "function" == typeof a.render && (a.hasRender = !0, c = !0),
            "function" == typeof a.postRender && (a.hasPostRender = !0, c = !0),
            c ? ((a.hasPreUpdate || a.hasUpdate || a.hasPostUpdate) && (a.active = !0), (a.hasRender || a.hasPostRender) && (a.visible = !0), this._len = this.plugins.push(a), "function" == typeof a.init && a.init.apply(a, b), a) : null
        },
        remove: function(a) {
            for (this._i = this._len; this._i--;) if (this.plugins[this._i] === a) return a.destroy(),
            this.plugins.splice(this._i, 1),
            void this._len--
        },
        removeAll: function() {
            for (this._i = this._len; this._i--;) this.plugins[this._i].destroy();
            this.plugins.length = 0,
            this._len = 0
        },
        preUpdate: function() {
            for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasPreUpdate && this.plugins[this._i].preUpdate()
        },
        update: function() {
            for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasUpdate && this.plugins[this._i].update()
        },
        postUpdate: function() {
            for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasPostUpdate && this.plugins[this._i].postUpdate()
        },
        render: function() {
            for (this._i = this._len; this._i--;) this.plugins[this._i].visible && this.plugins[this._i].hasRender && this.plugins[this._i].render()
        },
        postRender: function() {
            for (this._i = this._len; this._i--;) this.plugins[this._i].visible && this.plugins[this._i].hasPostRender && this.plugins[this._i].postRender()
        },
        destroy: function() {
            this.removeAll(),
            this.game = null
        }
    },
    c.PluginManager.prototype.constructor = c.PluginManager,
    c.Stage = function(a) {
        this.game = a,
        PIXI.Stage.call(this, 0),
        this.name = "_stage_root",
        this.disableVisibilityChange = !1,
        this.exists = !0,
        this.currentRenderOrderID = 0,
        this._hiddenVar = "hidden",
        this._onChange = null,
        this._backgroundColor = 0,
        a.config && this.parseConfig(a.config)
    },
    c.Stage.prototype = Object.create(PIXI.Stage.prototype),
    c.Stage.prototype.constructor = c.Stage,
    c.Stage.prototype.parseConfig = function(a) {
        a.disableVisibilityChange && (this.disableVisibilityChange = a.disableVisibilityChange),
        a.backgroundColor && (this.backgroundColor = a.backgroundColor)
    },
    c.Stage.prototype.boot = function() {
        c.DOM.getOffset(this.game.canvas, this.offset),
        c.Canvas.setUserSelect(this.game.canvas, "none"),
        c.Canvas.setTouchAction(this.game.canvas, "none"),
        this.checkVisibility()
    },
    c.Stage.prototype.preUpdate = function() {
        this.currentRenderOrderID = 0;
        for (var a = 0; a < this.children.length; a++) this.children[a].preUpdate()
    },
    c.Stage.prototype.update = function() {
        for (var a = this.children.length; a--;) this.children[a].update()
    },
    c.Stage.prototype.postUpdate = function() {
        if (this.game.world.camera.target) {
            this.game.world.camera.target.postUpdate(),
            this.game.world.camera.update();
            for (var a = this.children.length; a--;) this.children[a] !== this.game.world.camera.target && this.children[a].postUpdate()
        } else {
            this.game.world.camera.update();
            for (var a = this.children.length; a--;) this.children[a].postUpdate()
        }
    },
    c.Stage.prototype.updateTransform = function() {
        this.worldAlpha = 1;
        for (var a = 0; a < this.children.length; a++) this.children[a].updateTransform()
    },
    c.Stage.prototype.checkVisibility = function() {
        this._hiddenVar = void 0 !== document.webkitHidden ? "webkitvisibilitychange": void 0 !== document.mozHidden ? "mozvisibilitychange": void 0 !== document.msHidden ? "msvisibilitychange": void 0 !== document.hidden ? "visibilitychange": null;
        var a = this;
        this._onChange = function(b) {
            return a.visibilityChange(b)
        },
        this._hiddenVar && document.addEventListener(this._hiddenVar, this._onChange, !1),
        window.onblur = this._onChange,
        window.onfocus = this._onChange,
        window.onpagehide = this._onChange,
        window.onpageshow = this._onChange,
        this.game.device.cocoonJSApp && (CocoonJS.App.onSuspended.addEventListener(function() {
            c.Stage.prototype.visibilityChange.call(a, {
                type: "pause"
            })
        }), CocoonJS.App.onActivated.addEventListener(function() {
            c.Stage.prototype.visibilityChange.call(a, {
                type: "resume"
            })
        }))
    },
    c.Stage.prototype.visibilityChange = function(a) {
        return "pagehide" === a.type || "blur" === a.type || "pageshow" === a.type || "focus" === a.type ? void("pagehide" === a.type || "blur" === a.type ? this.game.focusLoss(a) : ("pageshow" === a.type || "focus" === a.type) && this.game.focusGain(a)) : void(this.disableVisibilityChange || (document.hidden || document.mozHidden || document.msHidden || document.webkitHidden || "pause" === a.type ? this.game.gamePaused(a) : this.game.gameResumed(a)))
    },
    c.Stage.prototype.setBackgroundColor = function(a) {
        var b = c.Color.valueToColor(a);
        this._backgroundColor = c.Color.getColor(b.r, b.g, b.b),
        this.backgroundColorSplit = [b.r / 255, b.g / 255, b.b / 255],
        this.backgroundColorString = c.Color.RGBtoString(b.r, b.g, b.b, 255, "#")
    },
    c.Stage.prototype.destroy = function() {
        this._hiddenVar && document.removeEventListener(this._hiddenVar, this._onChange, !1),
        window.onpagehide = null,
        window.onpageshow = null,
        window.onblur = null,
        window.onfocus = null
    },
    Object.defineProperty(c.Stage.prototype, "backgroundColor", {
        get: function() {
            return this._backgroundColor
        },
        set: function(a) {
            this.game.transparent || this.setBackgroundColor(a)
        }
    }),
    Object.defineProperty(c.Stage.prototype, "smoothed", {
        get: function() {
            return PIXI.scaleModes.DEFAULT === PIXI.scaleModes.LINEAR
        },
        set: function(a) {
            PIXI.scaleModes.DEFAULT = a ? PIXI.scaleModes.LINEAR: PIXI.scaleModes.NEAREST
        }
    }),
    c.Group = function(a, b, d, e, f, g) {
        "undefined" == typeof e && (e = !1),
        "undefined" == typeof f && (f = !1),
        "undefined" == typeof g && (g = c.Physics.ARCADE),
        this.game = a,
        "undefined" == typeof b && (b = a.world),
        this.name = d || "group",
        this.z = 0,
        PIXI.DisplayObjectContainer.call(this),
        e ? (this.game.stage.addChild(this), this.z = this.game.stage.children.length) : b && (b.addChild(this), this.z = b.children.length),
        this.type = c.GROUP,
        this.physicsType = c.GROUP,
        this.alive = !0,
        this.exists = !0,
        this.ignoreDestroy = !1,
        this.classType = c.Sprite,
        this.scale = new c.Point(1, 1),
        this.cursor = null,
        this.enableBody = f,
        this.enableBodyDebug = !1,
        this.physicsBodyType = g,
        this.onDestroy = new c.Signal,
        this.cursorIndex = 0,
        this.fixedToCamera = !1,
        this.cameraOffset = new c.Point,
        this._hash = [],
        this._sortProperty = "z"
    },
    c.Group.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
    c.Group.prototype.constructor = c.Group,
    c.Group.RETURN_NONE = 0,
    c.Group.RETURN_TOTAL = 1,
    c.Group.RETURN_CHILD = 2,
    c.Group.SORT_ASCENDING = -1,
    c.Group.SORT_DESCENDING = 1,
    c.Group.prototype.add = function(a, b) {
        return "undefined" == typeof b && (b = !1),
        a.parent !== this && (this.enableBody && this.game.physics.enable(a, this.physicsBodyType), this.addChild(a), this._hash.push(a), a.z = this.children.length, !b && a.events && a.events.onAddedToGroup$dispatch(a, this), null === this.cursor && (this.cursor = a)),
        a
    },
    c.Group.prototype.addMultiple = function(a, b) {
        if (Array.isArray(a)) for (var c = 0; c < a.length; c++) this.add(a[c], b);
        return a
    },
    c.Group.prototype.addAt = function(a, b, c) {
        return "undefined" == typeof c && (c = !1),
        a.parent !== this && (this.enableBody && this.game.physics.enable(a, this.physicsBodyType), this.addChildAt(a, b), this._hash.push(a), this.updateZ(), !c && a.events && a.events.onAddedToGroup$dispatch(a, this), null === this.cursor && (this.cursor = a)),
        a
    },
    c.Group.prototype.getAt = function(a) {
        return 0 > a || a >= this.children.length ? -1 : this.getChildAt(a)
    },
    c.Group.prototype.create = function(a, b, c, d, e) {
        "undefined" == typeof e && (e = !0);
        var f = new this.classType(this.game, a, b, c, d);
        return this.enableBody && this.game.physics.enable(f, this.physicsBodyType, this.enableBodyDebug),
        f.exists = e,
        f.visible = e,
        f.alive = e,
        this.addChild(f),
        this._hash.push(f),
        f.z = this.children.length,
        f.events && f.events.onAddedToGroup$dispatch(f, this),
        null === this.cursor && (this.cursor = f),
        f
    },
    c.Group.prototype.createMultiple = function(a, b, c, d) {
        "undefined" == typeof d && (d = !1);
        for (var e = 0; a > e; e++) this.create(0, 0, b, c, d)
    },
    c.Group.prototype.updateZ = function() {
        for (var a = this.children.length; a--;) this.children[a].z = a
    },
    c.Group.prototype.resetCursor = function(a) {
        return "undefined" == typeof a && (a = 0),
        a > this.children.length - 1 && (a = 0),
        this.cursor ? (this.cursorIndex = a, this.cursor = this.children[this.cursorIndex], this.cursor) : void 0
    },
    c.Group.prototype.next = function() {
        return this.cursor ? (this.cursorIndex >= this.children.length - 1 ? this.cursorIndex = 0 : this.cursorIndex++, this.cursor = this.children[this.cursorIndex], this.cursor) : void 0
    },
    c.Group.prototype.previous = function() {
        return this.cursor ? (0 === this.cursorIndex ? this.cursorIndex = this.children.length - 1 : this.cursorIndex--, this.cursor = this.children[this.cursorIndex], this.cursor) : void 0
    },
    c.Group.prototype.swap = function(a, b) {
        this.swapChildren(a, b),
        this.updateZ()
    },
    c.Group.prototype.bringToTop = function(a) {
        return a.parent === this && this.getIndex(a) < this.children.length && (this.remove(a, !1, !0), this.add(a, !0)),
        a
    },
    c.Group.prototype.sendToBack = function(a) {
        return a.parent === this && this.getIndex(a) > 0 && (this.remove(a, !1, !0), this.addAt(a, 0, !0)),
        a
    },
    c.Group.prototype.moveUp = function(a) {
        if (a.parent === this && this.getIndex(a) < this.children.length - 1) {
            var b = this.getIndex(a),
            c = this.getAt(b + 1);
            c && this.swap(a, c)
        }
        return a
    },
    c.Group.prototype.moveDown = function(a) {
        if (a.parent === this && this.getIndex(a) > 0) {
            var b = this.getIndex(a),
            c = this.getAt(b - 1);
            c && this.swap(a, c)
        }
        return a
    },
    c.Group.prototype.xy = function(a, b, c) {
        return 0 > a || a > this.children.length ? -1 : (this.getChildAt(a).x = b, void(this.getChildAt(a).y = c))
    },
    c.Group.prototype.reverse = function() {
        this.children.reverse(),
        this.updateZ()
    },
    c.Group.prototype.getIndex = function(a) {
        return this.children.indexOf(a)
    },
    c.Group.prototype.replace = function(a, b) {
        var d = this.getIndex(a);
        return - 1 !== d ? (b.parent && (b.parent instanceof c.Group ? b.parent.remove(b) : b.parent.removeChild(b)), this.remove(a), this.addAt(b, d), a) : void 0
    },
    c.Group.prototype.hasProperty = function(a, b) {
        var c = b.length;
        return 1 === c && b[0] in a ? !0 : 2 === c && b[0] in a && b[1] in a[b[0]] ? !0 : 3 === c && b[0] in a && b[1] in a[b[0]] && b[2] in a[b[0]][b[1]] ? !0 : 4 === c && b[0] in a && b[1] in a[b[0]] && b[2] in a[b[0]][b[1]] && b[3] in a[b[0]][b[1]][b[2]] ? !0 : !1
    },
    c.Group.prototype.setProperty = function(a, b, c, d, e) {
        if ("undefined" == typeof e && (e = !1), d = d || 0, !this.hasProperty(a, b) && (!e || d > 0)) return ! 1;
        var f = b.length;
        return 1 === f ? 0 === d ? a[b[0]] = c: 1 == d ? a[b[0]] += c: 2 == d ? a[b[0]] -= c: 3 == d ? a[b[0]] *= c: 4 == d && (a[b[0]] /= c) : 2 === f ? 0 === d ? a[b[0]][b[1]] = c: 1 == d ? a[b[0]][b[1]] += c: 2 == d ? a[b[0]][b[1]] -= c: 3 == d ? a[b[0]][b[1]] *= c: 4 == d && (a[b[0]][b[1]] /= c) : 3 === f ? 0 === d ? a[b[0]][b[1]][b[2]] = c: 1 == d ? a[b[0]][b[1]][b[2]] += c: 2 == d ? a[b[0]][b[1]][b[2]] -= c: 3 == d ? a[b[0]][b[1]][b[2]] *= c: 4 == d && (a[b[0]][b[1]][b[2]] /= c) : 4 === f && (0 === d ? a[b[0]][b[1]][b[2]][b[3]] = c: 1 == d ? a[b[0]][b[1]][b[2]][b[3]] += c: 2 == d ? a[b[0]][b[1]][b[2]][b[3]] -= c: 3 == d ? a[b[0]][b[1]][b[2]][b[3]] *= c: 4 == d && (a[b[0]][b[1]][b[2]][b[3]] /= c)),
        !0
    },
    c.Group.prototype.checkProperty = function(a, b, d, e) {
        return "undefined" == typeof e && (e = !1),
        !c.Utils.getProperty(a, b) && e ? !1 : c.Utils.getProperty(a, b) !== d ? !1 : !0
    },
    c.Group.prototype.set = function(a, b, c, d, e, f, g) {
        return "undefined" == typeof g && (g = !1),
        b = b.split("."),
        "undefined" == typeof d && (d = !1),
        "undefined" == typeof e && (e = !1),
        (d === !1 || d && a.alive) && (e === !1 || e && a.visible) ? this.setProperty(a, b, c, f, g) : void 0
    },
    c.Group.prototype.setAll = function(a, b, c, d, e, f) {
        "undefined" == typeof c && (c = !1),
        "undefined" == typeof d && (d = !1),
        "undefined" == typeof f && (f = !1),
        a = a.split("."),
        e = e || 0;
        for (var g = 0; g < this.children.length; g++)(!c || c && this.children[g].alive) && (!d || d && this.children[g].visible) && this.setProperty(this.children[g], a, b, e, f)
    },
    c.Group.prototype.setAllChildren = function(a, b, d, e, f, g) {
        "undefined" == typeof d && (d = !1),
        "undefined" == typeof e && (e = !1),
        "undefined" == typeof g && (g = !1),
        f = f || 0;
        for (var h = 0; h < this.children.length; h++)(!d || d && this.children[h].alive) && (!e || e && this.children[h].visible) && (this.children[h] instanceof c.Group ? this.children[h].setAllChildren(a, b, d, e, f, g) : this.setProperty(this.children[h], a.split("."), b, f, g))
    },
    c.Group.prototype.checkAll = function(a, b, c, d, e) {
        "undefined" == typeof c && (c = !1),
        "undefined" == typeof d && (d = !1),
        "undefined" == typeof e && (e = !1);
        for (var f = 0; f < this.children.length; f++) if ((!c || c && this.children[f].alive) && (!d || d && this.children[f].visible) && !this.checkProperty(this.children[f], a, b, e)) return ! 1;
        return ! 0
    },
    c.Group.prototype.addAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 1)
    },
    c.Group.prototype.subAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 2)
    },
    c.Group.prototype.multiplyAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 3)
    },
    c.Group.prototype.divideAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 4)
    },
    c.Group.prototype.callAllExists = function(a, b) {
        var c;
        if (arguments.length > 2) {
            c = [];
            for (var d = 2; d < arguments.length; d++) c.push(arguments[d])
        }
        for (var d = 0; d < this.children.length; d++) this.children[d].exists === b && this.children[d][a] && this.children[d][a].apply(this.children[d], c)
    },
    c.Group.prototype.callbackFromArray = function(a, b, c) {
        if (1 == c) {
            if (a[b[0]]) return a[b[0]]
        } else if (2 == c) {
            if (a[b[0]][b[1]]) return a[b[0]][b[1]]
        } else if (3 == c) {
            if (a[b[0]][b[1]][b[2]]) return a[b[0]][b[1]][b[2]]
        } else if (4 == c) {
            if (a[b[0]][b[1]][b[2]][b[3]]) return a[b[0]][b[1]][b[2]][b[3]]
        } else if (a[b]) return a[b];
        return ! 1
    },
    c.Group.prototype.callAll = function(a, b) {
        if ("undefined" != typeof a) {
            a = a.split(".");
            var c = a.length;
            if ("undefined" == typeof b || null === b || "" === b) b = null;
            else if ("string" == typeof b) {
                b = b.split(".");
                var d = b.length
            }
            var e;
            if (arguments.length > 2) {
                e = [];
                for (var f = 2; f < arguments.length; f++) e.push(arguments[f])
            }
            for (var g = null,
            h = null,
            f = 0; f < this.children.length; f++) g = this.callbackFromArray(this.children[f], a, c),
            b && g ? (h = this.callbackFromArray(this.children[f], b, d), g && g.apply(h, e)) : g && g.apply(this.children[f], e)
        }
    },
    c.Group.prototype.preUpdate = function() {
        if (!this.exists || !this.parent.exists) return this.renderOrderID = -1,
        !1;
        for (var a = this.children.length; a--;) this.children[a].preUpdate();
        return ! 0
    },
    c.Group.prototype.update = function() {
        for (var a = this.children.length; a--;) this.children[a].update()
    },
    c.Group.prototype.postUpdate = function() {
        this.fixedToCamera && (this.x = this.game.camera.view.x + this.cameraOffset.x, this.y = this.game.camera.view.y + this.cameraOffset.y);
        for (var a = this.children.length; a--;) this.children[a].postUpdate()
    },
    c.Group.prototype.filter = function(a, b) {
        for (var d = -1,
        e = this.children.length,
        f = []; ++d < e;) {
            var g = this.children[d]; (!b || b && g.exists) && a(g, d, this.children) && f.push(g)
        }
        return new c.ArraySet(f)
    },
    c.Group.prototype.forEach = function(a, b, c) {
        if ("undefined" == typeof c && (c = !1), arguments.length <= 3) for (var d = 0; d < this.children.length; d++)(!c || c && this.children[d].exists) && a.call(b, this.children[d]);
        else {
            for (var e = [null], d = 3; d < arguments.length; d++) e.push(arguments[d]);
            for (var d = 0; d < this.children.length; d++)(!c || c && this.children[d].exists) && (e[0] = this.children[d], a.apply(b, e))
        }
    },
    c.Group.prototype.forEachExists = function(a, b) {
        var d;
        if (arguments.length > 2) {
            d = [null];
            for (var e = 2; e < arguments.length; e++) d.push(arguments[e])
        }
        this.iterate("exists", !0, c.Group.RETURN_TOTAL, a, b, d)
    },
    c.Group.prototype.forEachAlive = function(a, b) {
        var d;
        if (arguments.length > 2) {
            d = [null];
            for (var e = 2; e < arguments.length; e++) d.push(arguments[e])
        }
        this.iterate("alive", !0, c.Group.RETURN_TOTAL, a, b, d)
    },
    c.Group.prototype.forEachDead = function(a, b) {
        var d;
        if (arguments.length > 2) {
            d = [null];
            for (var e = 2; e < arguments.length; e++) d.push(arguments[e])
        }
        this.iterate("alive", !1, c.Group.RETURN_TOTAL, a, b, d)
    },
    c.Group.prototype.sort = function(a, b) {
        this.children.length < 2 || ("undefined" == typeof a && (a = "z"), "undefined" == typeof b && (b = c.Group.SORT_ASCENDING), this._sortProperty = a, this.children.sort(b === c.Group.SORT_ASCENDING ? this.ascendingSortHandler.bind(this) : this.descendingSortHandler.bind(this)), this.updateZ())
    },
    c.Group.prototype.customSort = function(a, b) {
        this.children.length < 2 || (this.children.sort(a.bind(b)), this.updateZ())
    },
    c.Group.prototype.ascendingSortHandler = function(a, b) {
        return a[this._sortProperty] < b[this._sortProperty] ? -1 : a[this._sortProperty] > b[this._sortProperty] ? 1 : a.z < b.z ? -1 : 1
    },
    c.Group.prototype.descendingSortHandler = function(a, b) {
        return a[this._sortProperty] < b[this._sortProperty] ? 1 : a[this._sortProperty] > b[this._sortProperty] ? -1 : 0
    },
    c.Group.prototype.iterate = function(a, b, d, e, f, g) {
        if (d === c.Group.RETURN_TOTAL && 0 === this.children.length) return 0;
        for (var h = 0,
        i = 0; i < this.children.length; i++) if (this.children[i][a] === b && (h++, e && (g ? (g[0] = this.children[i], e.apply(f, g)) : e.call(f, this.children[i])), d === c.Group.RETURN_CHILD)) return this.children[i];
        return d === c.Group.RETURN_TOTAL ? h: null
    },
    c.Group.prototype.getFirstExists = function(a) {
        return "boolean" != typeof a && (a = !0),
        this.iterate("exists", a, c.Group.RETURN_CHILD)
    },
    c.Group.prototype.getFirstAlive = function() {
        return this.iterate("alive", !0, c.Group.RETURN_CHILD)
    },
    c.Group.prototype.getFirstDead = function() {
        return this.iterate("alive", !1, c.Group.RETURN_CHILD)
    },
    c.Group.prototype.getTop = function() {
        return this.children.length > 0 ? this.children[this.children.length - 1] : void 0
    },
    c.Group.prototype.getBottom = function() {
        return this.children.length > 0 ? this.children[0] : void 0
    },
    c.Group.prototype.countLiving = function() {
        return this.iterate("alive", !0, c.Group.RETURN_TOTAL)
    },
    c.Group.prototype.countDead = function() {
        return this.iterate("alive", !1, c.Group.RETURN_TOTAL)
    },
    c.Group.prototype.getRandom = function(a, b) {
        return 0 === this.children.length ? null: (a = a || 0, b = b || this.children.length, c.ArrayUtils.getRandomItem(this.children, a, b))
    },
    c.Group.prototype.remove = function(a, b, c) {
        if ("undefined" == typeof b && (b = !1), "undefined" == typeof c && (c = !1), 0 === this.children.length || -1 === this.children.indexOf(a)) return ! 1;
        c || !a.events || a.destroyPhase || a.events.onRemovedFromGroup$dispatch(a, this);
        var d = this.removeChild(a),
        e = this._hash.indexOf(d);
        return - 1 !== e && this._hash.splice(e, 1),
        this.updateZ(),
        this.cursor === a && this.next(),
        b && d && d.destroy(!0),
        !0
    },
    c.Group.prototype.removeAll = function(a, b) {
        if ("undefined" == typeof a && (a = !1), "undefined" == typeof b && (b = !1), 0 !== this.children.length) {
            do { ! b && this.children[0].events && this.children[0].events.onRemovedFromGroup$dispatch(this.children[0], this);
                var c = this.removeChild(this.children[0]), d = this._hash.indexOf(c); - 1 !== d && this._hash.splice(d, 1), a && c && c.destroy(!0)
            } while ( this . children . length > 0 );
            this._hash = [],
            this.cursor = null
        }
    },
    c.Group.prototype.removeBetween = function(a, b, c, d) {
        if ("undefined" == typeof b && (b = this.children.length - 1), "undefined" == typeof c && (c = !1), "undefined" == typeof d && (d = !1), 0 !== this.children.length) {
            if (a > b || 0 > a || b > this.children.length) return ! 1;
            for (var e = b; e >= a;) { ! d && this.children[e].events && this.children[e].events.onRemovedFromGroup$dispatch(this.children[e], this);
                var f = this.removeChild(this.children[e]),
                g = this._hash.indexOf(f); - 1 !== g && this._hash.splice(g, 1),
                c && f && f.destroy(!0),
                this.cursor === this.children[e] && (this.cursor = null),
                e--
            }
            this.updateZ()
        }
    },
    c.Group.prototype.destroy = function(a, b) {
        null === this.game || this.ignoreDestroy || ("undefined" == typeof a && (a = !0), "undefined" == typeof b && (b = !1), this.onDestroy.dispatch(this, a, b), this.removeAll(a), this.cursor = null, this.filters = null, b || (this.parent && this.parent.removeChild(this), this.game = null, this.exists = !1))
    },
    Object.defineProperty(c.Group.prototype, "total", {
        get: function() {
            return this.iterate("exists", !0, c.Group.RETURN_TOTAL)
        }
    }),
    Object.defineProperty(c.Group.prototype, "length", {
        get: function() {
            return this.children.length
        }
    }),
    Object.defineProperty(c.Group.prototype, "angle", {
        get: function() {
            return c.Math.radToDeg(this.rotation)
        },
        set: function(a) {
            this.rotation = c.Math.degToRad(a)
        }
    }),
    c.World = function(a) {
        c.Group.call(this, a, null, "__world", !1),
        this.bounds = new c.Rectangle(0, 0, a.width, a.height),
        this.camera = null,
        this._definedSize = !1,
        this._width = a.width,
        this._height = a.height
    },
    c.World.prototype = Object.create(c.Group.prototype),
    c.World.prototype.constructor = c.World,
    c.World.prototype.boot = function() {
        this.camera = new c.Camera(this.game, 0, 0, 0, this.game.width, this.game.height),
        this.camera.displayObject = this,
        this.camera.scale = this.scale,
        this.game.camera = this.camera,
        this.game.stage.addChild(this)
    },
    c.World.prototype.setBounds = function(a, b, c, d) {
        this._definedSize = !0,
        this._width = c,
        this._height = d,
        this.bounds.setTo(a, b, c, d),
        this.x = a,
        this.y = b,
        this.camera.bounds && this.camera.bounds.setTo(a, b, Math.max(c, this.game.width), Math.max(d, this.game.height)),
        this.game.physics.setBoundsToWorld()
    },
    c.World.prototype.resize = function(a, b) {
        this._definedSize && (a < this._width && (a = this._width), b < this._height && (b = this._height)),
        this.bounds.width = a,
        this.bounds.height = b,
        this.game.camera.setBoundsToWorld(),
        this.game.physics.setBoundsToWorld()
    },
    c.World.prototype.shutdown = function() {
        this.destroy(!0, !0)
    },
    c.World.prototype.wrap = function(a, b, c, d, e) {
        "undefined" == typeof b && (b = 0),
        "undefined" == typeof c && (c = !1),
        "undefined" == typeof d && (d = !0),
        "undefined" == typeof e && (e = !0),
        c ? (a.getBounds(), d && (a.x + a._currentBounds.width < this.bounds.x ? a.x = this.bounds.right: a.x > this.bounds.right && (a.x = this.bounds.left)), e && (a.y + a._currentBounds.height < this.bounds.top ? a.y = this.bounds.bottom: a.y > this.bounds.bottom && (a.y = this.bounds.top))) : (d && a.x + b < this.bounds.x ? a.x = this.bounds.right + b: d && a.x - b > this.bounds.right && (a.x = this.bounds.left - b), e && a.y + b < this.bounds.top ? a.y = this.bounds.bottom + b: e && a.y - b > this.bounds.bottom && (a.y = this.bounds.top - b))
    },
    Object.defineProperty(c.World.prototype, "width", {
        get: function() {
            return this.bounds.width
        },
        set: function(a) {
            a < this.game.width && (a = this.game.width),
            this.bounds.width = a,
            this._width = a,
            this._definedSize = !0
        }
    }),
    Object.defineProperty(c.World.prototype, "height", {
        get: function() {
            return this.bounds.height
        },
        set: function(a) {
            a < this.game.height && (a = this.game.height),
            this.bounds.height = a,
            this._height = a,
            this._definedSize = !0
        }
    }),
    Object.defineProperty(c.World.prototype, "centerX", {
        get: function() {
            return this.bounds.halfWidth
        }
    }),
    Object.defineProperty(c.World.prototype, "centerY", {
        get: function() {
            return this.bounds.halfHeight
        }
    }),
    Object.defineProperty(c.World.prototype, "randomX", {
        get: function() {
            return this.bounds.x < 0 ? this.game.rnd.integerInRange(this.bounds.x, this.bounds.width - Math.abs(this.bounds.x)) : this.game.rnd.integerInRange(this.bounds.x, this.bounds.width)
        }
    }),
    Object.defineProperty(c.World.prototype, "randomY", {
        get: function() {
            return this.bounds.y < 0 ? this.game.rnd.integerInRange(this.bounds.y, this.bounds.height - Math.abs(this.bounds.y)) : this.game.rnd.integerInRange(this.bounds.y, this.bounds.height)
        }
    }),
    c.FlexGrid = function(a, b, d) {
        this.game = a.game,
        this.manager = a,
        this.width = b,
        this.height = d,
        this.boundsCustom = new c.Rectangle(0, 0, b, d),
        this.boundsFluid = new c.Rectangle(0, 0, b, d),
        this.boundsFull = new c.Rectangle(0, 0, b, d),
        this.boundsNone = new c.Rectangle(0, 0, b, d),
        this.positionCustom = new c.Point(0, 0),
        this.positionFluid = new c.Point(0, 0),
        this.positionFull = new c.Point(0, 0),
        this.positionNone = new c.Point(0, 0),
        this.scaleCustom = new c.Point(1, 1),
        this.scaleFluid = new c.Point(1, 1),
        this.scaleFluidInversed = new c.Point(1, 1),
        this.scaleFull = new c.Point(1, 1),
        this.scaleNone = new c.Point(1, 1),
        this.customWidth = 0,
        this.customHeight = 0,
        this.customOffsetX = 0,
        this.customOffsetY = 0,
        this.ratioH = b / d,
        this.ratioV = d / b,
        this.multiplier = 0,
        this.layers = []
    },
    c.FlexGrid.prototype = {
        setSize: function(a, b) {
            this.width = a,
            this.height = b,
            this.ratioH = a / b,
            this.ratioV = b / a,
            this.scaleNone = new c.Point(1, 1),
            this.boundsNone.width = this.width,
            this.boundsNone.height = this.height,
            this.refresh()
        },
        createCustomLayer: function(a, b, d, e) {
            "undefined" == typeof e && (e = !0),
            this.customWidth = a,
            this.customHeight = b,
            this.boundsCustom.width = a,
            this.boundsCustom.height = b;
            var f = new c.FlexLayer(this, this.positionCustom, this.boundsCustom, this.scaleCustom);
            return e && this.game.world.add(f),
            this.layers.push(f),
            "undefined" != typeof d && null !== typeof d && f.addMultiple(d),
            f
        },
        createFluidLayer: function(a, b) {
            "undefined" == typeof b && (b = !0);
            var d = new c.FlexLayer(this, this.positionFluid, this.boundsFluid, this.scaleFluid);
            return b && this.game.world.add(d),
            this.layers.push(d),
            "undefined" != typeof a && null !== typeof a && d.addMultiple(a),
            d
        },
        createFullLayer: function(a) {
            var b = new c.FlexLayer(this, this.positionFull, this.boundsFull, this.scaleFluid);
            return this.game.world.add(b),
            this.layers.push(b),
            "undefined" != typeof a && b.addMultiple(a),
            b
        },
        createFixedLayer: function(a) {
            var b = new c.FlexLayer(this, this.positionNone, this.boundsNone, this.scaleNone);
            return this.game.world.add(b),
            this.layers.push(b),
            "undefined" != typeof a && b.addMultiple(a),
            b
        },
        reset: function() {
            for (var a = this.layers.length; a--;) this.layers[a].persist || (this.layers[a].position = null, this.layers[a].scale = null, this.layers.slice(a, 1))
        },
        onResize: function(a, b) {
            this.ratioH = a / b,
            this.ratioV = b / a,
            this.refresh(a, b)
        },
        refresh: function() {
            this.multiplier = Math.min(this.manager.height / this.height, this.manager.width / this.width),
            this.boundsFluid.width = Math.round(this.width * this.multiplier),
            this.boundsFluid.height = Math.round(this.height * this.multiplier),
            this.scaleFluid.set(this.boundsFluid.width / this.width, this.boundsFluid.height / this.height),
            this.scaleFluidInversed.set(this.width / this.boundsFluid.width, this.height / this.boundsFluid.height),
            this.scaleFull.set(this.boundsFull.width / this.width, this.boundsFull.height / this.height),
            this.boundsFull.width = Math.round(this.manager.width * this.scaleFluidInversed.x),
            this.boundsFull.height = Math.round(this.manager.height * this.scaleFluidInversed.y),
            this.boundsFluid.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY),
            this.boundsNone.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY),
            this.positionFluid.set(this.boundsFluid.x, this.boundsFluid.y),
            this.positionNone.set(this.boundsNone.x, this.boundsNone.y)
        },
        fitSprite: function(a) {
            this.manager.scaleSprite(a),
            a.x = this.manager.bounds.centerX,
            a.y = this.manager.bounds.centerY
        },
        debug: function() {
            this.game.debug.text(this.boundsFluid.width + " x " + this.boundsFluid.height, this.boundsFluid.x + 4, this.boundsFluid.y + 16),
            this.game.debug.geom(this.boundsFluid, "rgba(255,0,0,0.9", !1)
        }
    },
    c.FlexGrid.prototype.constructor = c.FlexGrid,
    c.FlexLayer = function(a, b, d, e) {
        c.Group.call(this, a.game, null, "__flexLayer" + a.game.rnd.uuid(), !1),
        this.manager = a.manager,
        this.grid = a,
        this.persist = !1,
        this.position = b,
        this.bounds = d,
        this.scale = e,
        this.topLeft = d.topLeft,
        this.topMiddle = new c.Point(d.halfWidth, 0),
        this.topRight = d.topRight,
        this.bottomLeft = d.bottomLeft,
        this.bottomMiddle = new c.Point(d.halfWidth, d.bottom),
        this.bottomRight = d.bottomRight
    },
    c.FlexLayer.prototype = Object.create(c.Group.prototype),
    c.FlexLayer.prototype.constructor = c.FlexLayer,
    c.FlexLayer.prototype.resize = function() {},
    c.FlexLayer.prototype.debug = function() {
        this.game.debug.text(this.bounds.width + " x " + this.bounds.height, this.bounds.x + 4, this.bounds.y + 16),
        this.game.debug.geom(this.bounds, "rgba(0,0,255,0.9", !1),
        this.game.debug.geom(this.topLeft, "rgba(255,255,255,0.9"),
        this.game.debug.geom(this.topMiddle, "rgba(255,255,255,0.9"),
        this.game.debug.geom(this.topRight, "rgba(255,255,255,0.9")
    },
    c.ScaleManager = function(a, b, d) {
        this.game = a,
        this.dom = c.DOM,
        this.grid = null,
        this.width = 0,
        this.height = 0,
        this.minWidth = null,
        this.maxWidth = null,
        this.minHeight = null,
        this.maxHeight = null,
        this.offset = new c.Point,
        this.forceLandscape = !1,
        this.forcePortrait = !1,
        this.incorrectOrientation = !1,
        this._pageAlignHorizontally = !1,
        this._pageAlignVertically = !1,
        this.maxIterations = 5,
        this.onOrientationChange = new c.Signal,
        this.enterLandscape = new c.Signal,
        this.enterPortrait = new c.Signal,
        this.enterIncorrectOrientation = new c.Signal,
        this.leaveIncorrectOrientation = new c.Signal,
        this.fullScreenTarget = null,
        this._createdFullScreenTarget = null,
        this.onFullScreenInit = new c.Signal,
        this.onFullScreenChange = new c.Signal,
        this.onFullScreenError = new c.Signal,
        this.enterFullScreen = new c.Signal,
        this.leaveFullScreen = new c.Signal,
        this.fullScreenFailed = this.onFullScreenError,
        this.screenOrientation = this.dom.getScreenOrientation(),
        this.scaleFactor = new c.Point(1, 1),
        this.scaleFactorInversed = new c.Point(1, 1),
        this.margin = {
            left: 0,
            top: 0,
            right: 0,
            bottom: 0,
            x: 0,
            y: 0
        },
        this.bounds = new c.Rectangle,
        this.aspectRatio = 0,
        this.sourceAspectRatio = 0,
        this.event = null,
        this.windowConstraints = {
            right: "layout",
            bottom: ""
        },
        this.compatibility = {
            supportsFullScreen: !1,
            orientationFallback: null,
            noMargins: !1,
            scrollTo: null,
            forceMinimumDocumentHeight: !1,
            canExpandParent: !0,
            clickTrampoline: ""
        },
        this._scaleMode = c.ScaleManager.NO_SCALE,
        this._fullScreenScaleMode = c.ScaleManager.NO_SCALE,
        this.parentIsWindow = !1,
        this.parentNode = null,
        this.parentScaleFactor = new c.Point(1, 1),
        this.trackParentInterval = 2e3,
        this.onSizeChange = new c.Signal,
        this.onResize = null,
        this.onResizeContext = null,
        this._fullScreenRestore = null,
        this._gameSize = new c.Rectangle,
        this._userScaleFactor = new c.Point(1, 1),
        this._userScaleTrim = new c.Point(0, 0),
        this._lastUpdate = 0,
        this._updateThrottle = 0,
        this._updateThrottleReset = 100,
        this._parentBounds = new c.Rectangle,
        this._tempBounds = new c.Rectangle,
        this._lastReportedCanvasSize = new c.Rectangle,
        this._lastReportedGameSize = new c.Rectangle,
        a.config && this.parseConfig(a.config),
        this.setupScale(b, d)
    },
    c.ScaleManager.EXACT_FIT = 0,
    c.ScaleManager.NO_SCALE = 1,
    c.ScaleManager.SHOW_ALL = 2,
    c.ScaleManager.RESIZE = 3,
    c.ScaleManager.USER_SCALE = 4,
    c.ScaleManager.prototype = {
        boot: function() {
            var a = this.compatibility;
            a.supportsFullScreen = this.game.device.fullscreen && !this.game.device.cocoonJS,
            this.game.device.iPad || this.game.device.webApp || this.game.device.desktop || (a.scrollTo = this.game.device.android && !this.game.device.chrome ? new c.Point(0, 1) : new c.Point(0, 0)),
            this.game.device.desktop ? (a.orientationFallback = "screen", a.clickTrampoline = "when-not-mouse") : (a.orientationFallback = "", a.clickTrampoline = "");
            var b = this;
            this._orientationChange = function(a) {
                return b.orientationChange(a)
            },
            this._windowResize = function(a) {
                return b.windowResize(a)
            },
            window.addEventListener("orientationchange", this._orientationChange, !1),
            window.addEventListener("resize", this._windowResize, !1),
            this.compatibility.supportsFullScreen && (this._fullScreenChange = function(a) {
                return b.fullScreenChange(a)
            },
            this._fullScreenError = function(a) {
                return b.fullScreenError(a)
            },
            document.addEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.addEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.addEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.addEventListener("fullscreenchange", this._fullScreenChange, !1), document.addEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.addEventListener("mozfullscreenerror", this._fullScreenError, !1), document.addEventListener("MSFullscreenError", this._fullScreenError, !1), document.addEventListener("fullscreenerror", this._fullScreenError, !1)),
            this.game.onResume.add(this._gameResumed, this),
            this.dom.getOffset(this.game.canvas, this.offset),
            this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height),
            this.setGameSize(this.game.width, this.game.height),
            this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback),
            this.grid = new c.FlexGrid(this, this.width, this.height)
        },
        parseConfig: function(a) {
            a.scaleMode && (this.scaleMode = a.scaleMode),
            a.fullScreenScaleMode && (this.fullScreenScaleMode = a.fullScreenScaleMode),
            a.fullScreenTarget && (this.fullScreenTarget = a.fullScreenTarget)
        },
        setupScale: function(a, b) {
            var d, e = new c.Rectangle;
            "" !== this.game.parent && ("string" == typeof this.game.parent ? d = document.getElementById(this.game.parent) : this.game.parent && 1 === this.game.parent.nodeType && (d = this.game.parent)),
            d ? (this.parentNode = d, this.parentIsWindow = !1, this.getParentBounds(this._parentBounds), e.width = this._parentBounds.width, e.height = this._parentBounds.height, this.offset.set(this._parentBounds.x, this._parentBounds.y)) : (this.parentNode = null, this.parentIsWindow = !0, e.width = this.dom.visualBounds.width, e.height = this.dom.visualBounds.height, this.offset.set(0, 0));
            var f = 0,
            g = 0;
            "number" == typeof a ? f = a: (this.parentScaleFactor.x = parseInt(a, 10) / 100, f = e.width * this.parentScaleFactor.x),
            "number" == typeof b ? g = b: (this.parentScaleFactor.y = parseInt(b, 10) / 100, g = e.height * this.parentScaleFactor.y),
            this._gameSize.setTo(0, 0, f, g),
            this.updateDimensions(f, g, !1)
        },
        _gameResumed: function() {
            this.queueUpdate(!0)
        },
        setGameSize: function(a, b) {
            this._gameSize.setTo(0, 0, a, b),
            this.currentScaleMode !== c.ScaleManager.RESIZE && this.updateDimensions(a, b, !0),
            this.queueUpdate(!0)
        },
        setUserScale: function(a, b, c, d) {
            this._userScaleFactor.setTo(a, b),
            this._userScaleTrim.setTo(0 | c, 0 | d),
            this.queueUpdate(!0)
        },
        setResizeCallback: function(a, b) {
            this.onResize = a,
            this.onResizeContext = b
        },
        signalSizeChange: function() {
            if (!c.Rectangle.sameDimensions(this, this._lastReportedCanvasSize) || !c.Rectangle.sameDimensions(this.game, this._lastReportedGameSize)) {
                var a = this.width,
                b = this.height;
                this._lastReportedCanvasSize.setTo(0, 0, a, b),
                this._lastReportedGameSize.setTo(0, 0, this.game.width, this.game.height),
                this.grid.onResize(a, b),
                this.onSizeChange.dispatch(this, a, b),
                this.currentScaleMode === c.ScaleManager.RESIZE && (this.game.state.resize(a, b), this.game.load.resize(a, b))
            }
        },
        setMinMax: function(a, b, c, d) {
            this.minWidth = a,
            this.minHeight = b,
            "undefined" != typeof c && (this.maxWidth = c),
            "undefined" != typeof d && (this.maxHeight = d)
        },
        preUpdate: function() {
            if (! (this.game.time.time < this._lastUpdate + this._updateThrottle)) {
                var a = this._updateThrottle;
                this._updateThrottleReset = a >= 400 ? 0 : 100,
                this.dom.getOffset(this.game.canvas, this.offset);
                var b = this._parentBounds.width,
                d = this._parentBounds.height,
                e = this.getParentBounds(this._parentBounds),
                f = e.width !== b || e.height !== d,
                g = this.updateOrientationState(); (f || g) && (this.onResize && this.onResize.call(this.onResizeContext, this, e), this.updateLayout(), this.signalSizeChange());
                var h = 2 * this._updateThrottle;
                this._updateThrottle < a && (h = Math.min(a, this._updateThrottleReset)),
                this._updateThrottle = c.Math.clamp(h, 25, this.trackParentInterval),
                this._lastUpdate = this.game.time.time
            }
        },
        pauseUpdate: function() {
            this.preUpdate(),
            this._updateThrottle = this.trackParentInterval
        },
        updateDimensions: function(a, b, c) {
            this.width = a * this.parentScaleFactor.x,
            this.height = b * this.parentScaleFactor.y,
            this.game.width = this.width,
            this.game.height = this.height,
            this.sourceAspectRatio = this.width / this.height,
            this.updateScalingAndBounds(),
            c && (this.game.renderer.resize(this.width, this.height), this.game.camera.setSize(this.width, this.height), this.game.world.resize(this.width, this.height))
        },
        updateScalingAndBounds: function() {
            this.scaleFactor.x = this.game.width / this.width,
            this.scaleFactor.y = this.game.height / this.height,
            this.scaleFactorInversed.x = this.width / this.game.width,
            this.scaleFactorInversed.y = this.height / this.game.height,
            this.aspectRatio = this.width / this.height,
            this.game.canvas && this.dom.getOffset(this.game.canvas, this.offset),
            this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height),
            this.game.input && this.game.input.scale && this.game.input.scale.setTo(this.scaleFactor.x, this.scaleFactor.y)
        },
        forceOrientation: function(a, b) {
            "undefined" == typeof b && (b = !1),
            this.forceLandscape = a,
            this.forcePortrait = b,
            this.queueUpdate(!0)
        },
        classifyOrientation: function(a) {
            return "portrait-primary" === a || "portrait-secondary" === a ? "portrait": "landscape-primary" === a || "landscape-secondary" === a ? "landscape": null
        },
        updateOrientationState: function() {
            var a = this.screenOrientation,
            b = this.incorrectOrientation;
            this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback),
            this.incorrectOrientation = this.forceLandscape && !this.isLandscape || this.forcePortrait && !this.isPortrait;
            var c = a !== this.screenOrientation,
            d = b !== this.incorrectOrientation;
            return c && (this.isLandscape ? this.enterLandscape.dispatch(this.orientation, !0, !1) : this.enterPortrait.dispatch(this.orientation, !1, !0)),
            d && (this.incorrectOrientation ? this.enterIncorrectOrientation.dispatch() : this.leaveIncorrectOrientation.dispatch()),
            (c || d) && this.onOrientationChange.dispatch(this, a, b),
            c || d
        },
        orientationChange: function(a) {
            this.event = a,
            this.queueUpdate(!0)
        },
        windowResize: function(a) {
            this.event = a,
            this.queueUpdate(!0)
        },
        scrollTop: function() {
            var a = this.compatibility.scrollTo;
            a && window.scrollTo(a.x, a.y)
        },
        refresh: function() {
            this.scrollTop(),
            this.queueUpdate(!0)
        },
        updateLayout: function() {
            var a = this.currentScaleMode;
            if (a === c.ScaleManager.RESIZE) return void this.reflowGame();
            if (this.scrollTop(), this.compatibility.forceMinimumDocumentHeight && (document.documentElement.style.minHeight = window.innerHeight + "px"), this.incorrectOrientation ? this.setMaximum() : a === c.ScaleManager.EXACT_FIT ? this.setExactFit() : a === c.ScaleManager.SHOW_ALL ? !this.isFullScreen && this.boundingParent && this.compatibility.canExpandParent ? (this.setShowAll(!0), this.resetCanvas(), this.setShowAll()) : this.setShowAll() : a === c.ScaleManager.NO_SCALE ? (this.width = this.game.width, this.height = this.game.height) : a === c.ScaleManager.USER_SCALE && (this.width = this.game.width * this._userScaleFactor.x - this._userScaleTrim.x, this.height = this.game.height * this._userScaleFactor.y - this._userScaleTrim.y), !this.compatibility.canExpandParent && (a === c.ScaleManager.SHOW_ALL || a === c.ScaleManager.USER_SCALE)) {
                var b = this.getParentBounds(this._tempBounds);
                this.width = Math.min(this.width, b.width),
                this.height = Math.min(this.height, b.height)
            }
            this.width = 0 | this.width,
            this.height = 0 | this.height,
            this.reflowCanvas()
        },
        getParentBounds: function(a) {
            var b = a || new c.Rectangle,
            d = this.boundingParent,
            e = this.dom.visualBounds,
            f = this.dom.layoutBounds;
            if (d) {
                var g = d.getBoundingClientRect();
                b.setTo(g.left, g.top, g.width, g.height);
                var h = this.windowConstraints;
                if (h.right) {
                    var i = "layout" === h.right ? f: e;
                    b.right = Math.min(b.right, i.width)
                }
                if (h.bottom) {
                    var i = "layout" === h.bottom ? f: e;
                    b.bottom = Math.min(b.bottom, i.height)
                }
            } else b.setTo(0, 0, e.width, e.height);
            return b.setTo(Math.round(b.x), Math.round(b.y), Math.round(b.width), Math.round(b.height)),
            b
        },
        alignCanvas: function(a, b) {
            var c = this.getParentBounds(this._tempBounds),
            d = this.game.canvas,
            e = this.margin;
            if (a) {
                e.left = e.right = 0;
                var f = d.getBoundingClientRect();
                if (this.width < c.width && !this.incorrectOrientation) {
                    var g = f.left - c.x,
                    h = c.width / 2 - this.width / 2;
                    h = Math.max(h, 0);
                    var i = h - g;
                    e.left = Math.round(i)
                }
                d.style.marginLeft = e.left + "px",
                0 !== e.left && (e.right = -(c.width - f.width - e.left), d.style.marginRight = e.right + "px")
            }
            if (b) {
                e.top = e.bottom = 0;
                var f = d.getBoundingClientRect();
                if (this.height < c.height && !this.incorrectOrientation) {
                    var g = f.top - c.y,
                    h = c.height / 2 - this.height / 2;
                    h = Math.max(h, 0);
                    var i = h - g;
                    e.top = Math.round(i)
                }
                d.style.marginTop = e.top + "px",
                0 !== e.top && (e.bottom = -(c.height - f.height - e.top), d.style.marginBottom = e.bottom + "px")
            }
            e.x = e.left,
            e.y = e.top
        },
        reflowGame: function() {
            this.resetCanvas("", "");
            var a = this.getParentBounds(this._tempBounds);
            this.updateDimensions(a.width, a.height, !0)
        },
        reflowCanvas: function() {
            this.incorrectOrientation || (this.width = c.Math.clamp(this.width, this.minWidth || 0, this.maxWidth || this.width), this.height = c.Math.clamp(this.height, this.minHeight || 0, this.maxHeight || this.height)),
            this.resetCanvas(),
            this.compatibility.noMargins || (this.isFullScreen && this._createdFullScreenTarget ? this.alignCanvas(!0, !0) : this.alignCanvas(this.pageAlignHorizontally, this.pageAlignVertically)),
            this.updateScalingAndBounds()
        },
        resetCanvas: function(a, b) {
            "undefined" == typeof a && (a = this.width + "px"),
            "undefined" == typeof b && (b = this.height + "px");
            var c = this.game.canvas;
            this.compatibility.noMargins || (c.style.marginLeft = "", c.style.marginTop = "", c.style.marginRight = "", c.style.marginBottom = ""),
            c.style.width = a,
            c.style.height = b
        },
        queueUpdate: function(a) {
            a && (this._parentBounds.width = 0, this._parentBounds.height = 0),
            this._updateThrottle = this._updateThrottleReset
        },
        reset: function(a) {
            a && this.grid.reset()
        },
        setMaximum: function() {
            this.width = this.dom.visualBounds.width,
            this.height = this.dom.visualBounds.height
        },
        setShowAll: function(a) {
            var b, c = this.getParentBounds(this._tempBounds),
            d = c.width,
            e = c.height;
            b = a ? Math.max(e / this.game.height, d / this.game.width) : Math.min(e / this.game.height, d / this.game.width),
            this.width = Math.round(this.game.width * b),
            this.height = Math.round(this.game.height * b)
        },
        setExactFit: function() {
            var a = this.getParentBounds(this._tempBounds);
            this.width = a.width,
            this.height = a.height,
            this.isFullScreen || (this.maxWidth && (this.width = Math.min(this.width, this.maxWidth)), this.maxHeight && (this.height = Math.min(this.height, this.maxHeight)))
        },
        createFullScreenTarget: function() {
            var a = document.createElement("div");
            return a.style.margin = "0",
            a.style.padding = "0",
            a.style.background = "#000",
            a
        },
        startFullScreen: function(a, b) {
            if (this.isFullScreen) return ! 1;
            if (!this.compatibility.supportsFullScreen) {
                var d = this;
                return void setTimeout(function() {
                    d.fullScreenError()
                },
                10)
            }
            if ("when-not-mouse" === this.compatibility.clickTrampoline) {
                var e = this.game.input;
                if (e.activePointer && e.activePointer !== e.mousePointer && (b || b !== !1)) return void e.activePointer.addClickTrampoline("startFullScreen", this.startFullScreen, this, [a, !1])
            }
            "undefined" != typeof a && this.game.renderType === c.CANVAS && (this.game.stage.smoothed = a);
            var f = this.fullScreenTarget;
            f || (this.cleanupCreatedTarget(), this._createdFullScreenTarget = this.createFullScreenTarget(), f = this._createdFullScreenTarget);
            var g = {
                targetElement: f
            };
            if (this.onFullScreenInit.dispatch(this, g), this._createdFullScreenTarget) {
                var h = this.game.canvas,
                i = h.parentNode;
                i.insertBefore(f, h),
                f.appendChild(h)
            }
            return this.game.device.fullscreenKeyboard ? f[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT) : f[this.game.device.requestFullscreen](),
            !0
        },
        stopFullScreen: function() {
            return this.isFullScreen && this.compatibility.supportsFullScreen ? (document[this.game.device.cancelFullscreen](), !0) : !1
        },
        cleanupCreatedTarget: function() {
            var a = this._createdFullScreenTarget;
            if (a && a.parentNode) {
                var b = a.parentNode;
                b.insertBefore(this.game.canvas, a),
                b.removeChild(a)
            }
            this._createdFullScreenTarget = null
        },
        prepScreenMode: function(a) {
            var b = !!this._createdFullScreenTarget,
            d = this._createdFullScreenTarget || this.fullScreenTarget;
            a ? (b || this.fullScreenScaleMode === c.ScaleManager.EXACT_FIT) && d !== this.game.canvas && (this._fullScreenRestore = {
                targetWidth: d.style.width,
                targetHeight: d.style.height
            },
            d.style.width = "100%", d.style.height = "100%") : (this._fullScreenRestore && (d.style.width = this._fullScreenRestore.targetWidth, d.style.height = this._fullScreenRestore.targetHeight, this._fullScreenRestore = null), this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.resetCanvas())
        },
        fullScreenChange: function(a) {
            this.event = a,
            this.isFullScreen ? (this.prepScreenMode(!0), this.updateLayout(), this.queueUpdate(!0), this.enterFullScreen.dispatch(this.width, this.height)) : (this.prepScreenMode(!1), this.cleanupCreatedTarget(), this.updateLayout(), this.queueUpdate(!0), this.leaveFullScreen.dispatch(this.width, this.height)),
            this.onFullScreenChange.dispatch(this)
        },
        fullScreenError: function(a) {
            this.event = a,
            this.cleanupCreatedTarget(),
            console.warn("Phaser.ScaleManager: requestFullscreen failed or device does not support the Fullscreen API"),
            this.onFullScreenError.dispatch(this)
        },
        scaleSprite: function(a, b, c, d) {
            if ("undefined" == typeof b && (b = this.width), "undefined" == typeof c && (c = this.height), "undefined" == typeof d && (d = !1), a.scale.set(1), a.width <= 0 || a.height <= 0 || 0 >= b || 0 >= c) return a;
            var e = b,
            f = a.height * b / a.width,
            g = a.width * c / a.height,
            h = c,
            i = g > b;
            return i = i ? d: !d,
            i ? (a.width = Math.floor(e), a.height = Math.floor(f)) : (a.width = Math.floor(g), a.height = Math.floor(h)),
            a
        },
        destroy: function() {
            this.game.onResume.remove(this._gameResumed, this),
            window.removeEventListener("orientationchange", this._orientationChange, !1),
            window.removeEventListener("resize", this._windowResize, !1),
            this.compatibility.supportsFullScreen && (document.removeEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.removeEventListener("fullscreenchange", this._fullScreenChange, !1), document.removeEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.removeEventListener("mozfullscreenerror", this._fullScreenError, !1), document.removeEventListener("MSFullscreenError", this._fullScreenError, !1), document.removeEventListener("fullscreenerror", this._fullScreenError, !1))
        }
    },
    c.ScaleManager.prototype.constructor = c.ScaleManager,
    c.ScaleManager.prototype.checkResize = c.ScaleManager.prototype.windowResize,
    c.ScaleManager.prototype.checkOrientation = c.ScaleManager.prototype.orientationChange,
    c.ScaleManager.prototype.setScreenSize = c.ScaleManager.prototype.updateLayout,
    c.ScaleManager.prototype.setSize = c.ScaleManager.prototype.reflowCanvas,
    c.ScaleManager.prototype.checkOrientationState = function() {
        var a = this.updateOrientationState();
        return a && this.refresh(),
        a
    },
    Object.defineProperty(c.ScaleManager.prototype, "boundingParent", {
        get: function() {
            if (this.parentIsWindow || this.isFullScreen && !this._createdFullScreenTarget) return null;
            var a = this.game.canvas && this.game.canvas.parentNode;
            return a || null
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "scaleMode", {
        get: function() {
            return this._scaleMode
        },
        set: function(a) {
            return a !== this._scaleMode && (this.isFullScreen || (this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.queueUpdate(!0)), this._scaleMode = a),
            this._scaleMode
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "fullScreenScaleMode", {
        get: function() {
            return this._fullScreenScaleMode
        },
        set: function(a) {
            return a !== this._fullScreenScaleMode && (this.isFullScreen ? (this.prepScreenMode(!1), this._fullScreenScaleMode = a, this.prepScreenMode(!0), this.queueUpdate(!0)) : this._fullScreenScaleMode = a),
            this._fullScreenScaleMode
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "currentScaleMode", {
        get: function() {
            return this.isFullScreen ? this._fullScreenScaleMode: this._scaleMode
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "pageAlignHorizontally", {
        get: function() {
            return this._pageAlignHorizontally
        },
        set: function(a) {
            a !== this._pageAlignHorizontally && (this._pageAlignHorizontally = a, this.queueUpdate(!0))
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "pageAlignVertically", {
        get: function() {
            return this._pageAlignVertically
        },
        set: function(a) {
            a !== this._pageAlignVertically && (this._pageAlignVertically = a, this.queueUpdate(!0))
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "isFullScreen", {
        get: function() {
            return !! (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "isPortrait", {
        get: function() {
            return "portrait" === this.classifyOrientation(this.screenOrientation)
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "isLandscape", {
        get: function() {
            return "landscape" === this.classifyOrientation(this.screenOrientation)
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "orientation", {
        get: function() {
            return "portrait" === this.classifyOrientation(this.screenOrientation) ? 0 : 90
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "isGamePortrait", {
        get: function() {
            return this.height > this.width
        }
    }),
    Object.defineProperty(c.ScaleManager.prototype, "isGameLandscape", {
        get: function() {
            return this.width > this.height
        }
    }),
    c.Game = function(a, b, d, e, f, g, h, i) {
        return this.id = c.GAMES.push(this) - 1,
        this.config = null,
        this.physicsConfig = i,
        this.parent = "",
        this.width = 800,
        this.height = 600,
        this.resolution = 1,
        this._width = 800,
        this._height = 600,
        this.transparent = !1,
        this.antialias = !0,
        this.preserveDrawingBuffer = !1,
        this.renderer = null,
        this.renderType = c.AUTO,
        this.state = null,
        this.isBooted = !1,
        this.isRunning = !1,
        this.raf = null,
        this.add = null,
        this.make = null,
        this.cache = null,
        this.input = null,
        this.load = null,
        this.math = null,
        this.net = null,
        this.scale = null,
        this.sound = null,
        this.stage = null,
        this.time = null,
        this.tweens = null,
        this.world = null,
        this.physics = null,
        this.plugins = null,
        this.rnd = null,
        this.device = c.Device,
        this.camera = null,
        this.canvas = null,
        this.context = null,
        this.debug = null,
        this.particles = null,
        this.lockRender = !1,
        this.stepping = !1,
        this.pendingStep = !1,
        this.stepCount = 0,
        this.onPause = null,
        this.onResume = null,
        this.onBlur = null,
        this.onFocus = null,
        this._paused = !1,
        this._codePaused = !1,
        this.currentUpdateID = 0,
        this.updatesThisFrame = 1,
        this._deltaTime = 0,
        this._lastCount = 0,
        this._spiraling = 0,
        this._kickstart = !0,
        this.fpsProblemNotifier = new c.Signal,
        this.forceSingleUpdate = !1,
        this._nextFpsNotification = 0,
        1 === arguments.length && "object" == typeof arguments[0] ? this.parseConfig(arguments[0]) : (this.config = {
            enableDebug: !0
        },
        "undefined" != typeof a && (this._width = a), "undefined" != typeof b && (this._height = b), "undefined" != typeof d && (this.renderType = d), "undefined" != typeof e && (this.parent = e), "undefined" != typeof g && (this.transparent = g), "undefined" != typeof h && (this.antialias = h), this.rnd = new c.RandomDataGenerator([(Date.now() * Math.random()).toString()]), this.state = new c.StateManager(this, f)),
        this.device.whenReady(this.boot, this),
        this
    },
    c.Game.prototype = {
        parseConfig: function(a) {
            this.config = a,
            "undefined" == typeof a.enableDebug && (this.config.enableDebug = !0),
            a.width && (this._width = a.width),
            a.height && (this._height = a.height),
            a.renderer && (this.renderType = a.renderer),
            a.parent && (this.parent = a.parent),
            a.transparent && (this.transparent = a.transparent),
            a.antialias && (this.antialias = a.antialias),
            a.resolution && (this.resolution = a.resolution),
            a.preserveDrawingBuffer && (this.preserveDrawingBuffer = a.preserveDrawingBuffer),
            a.physicsConfig && (this.physicsConfig = a.physicsConfig);
            var b = [(Date.now() * Math.random()).toString()];
            a.seed && (b = a.seed),
            this.rnd = new c.RandomDataGenerator(b);
            var d = null;
            a.state && (d = a.state),
            this.state = new c.StateManager(this, d)
        },
        boot: function() {
            this.isBooted || (this.onPause = new c.Signal, this.onResume = new c.Signal, this.onBlur = new c.Signal, this.onFocus = new c.Signal, this.isBooted = !0, this.math = c.Math, this.scale = new c.ScaleManager(this, this._width, this._height), this.stage = new c.Stage(this), this.setUpRenderer(), this.world = new c.World(this), this.add = new c.GameObjectFactory(this), this.make = new c.GameObjectCreator(this), this.cache = new c.Cache(this), this.load = new c.Loader(this), this.time = new c.Time(this), this.tweens = new c.TweenManager(this), this.input = new c.Input(this), this.sound = new c.SoundManager(this), this.physics = new c.Physics(this, this.physicsConfig), this.particles = new c.Particles(this), this.plugins = new c.PluginManager(this), this.net = new c.Net(this), this.time.boot(), this.stage.boot(), this.world.boot(), this.scale.boot(), this.input.boot(), this.sound.boot(), this.state.boot(), this.config.enableDebug ? (this.debug = new c.Utils.Debug(this), this.debug.boot()) : this.debug = {
                preUpdate: function() {},
                update: function() {},
                reset: function() {}
            },
            this.showDebugHeader(), this.isRunning = !0, this.raf = this.config && this.config.forceSetTimeOut ? new c.RequestAnimationFrame(this, this.config.forceSetTimeOut) : new c.RequestAnimationFrame(this, !1), this._kickstart = !0, window.focus && (!window.PhaserGlobal || window.PhaserGlobal && !window.PhaserGlobal.stopFocus) && window.focus(), this.raf.start())
        },
        showDebugHeader: function() {
            if (!window.PhaserGlobal || !window.PhaserGlobal.hideBanner) {
                var a = c.VERSION,
                b = "Canvas",
                d = "HTML Audio",
                e = 1;
                if (this.renderType === c.WEBGL ? (b = "WebGL", e++) : this.renderType == c.HEADLESS && (b = "Headless"), this.device.webAudio && (d = "WebAudio", e++), this.device.chrome) {
                    for (var f = ["%c %c %c Phaser v" + a + " | Pixi.js " + PIXI.VERSION + " | " + b + " | " + d + "  %c %c %c http://phaser.io %c♥%c♥%c♥", "background: #9854d8", "background: #6c2ca7", "color: #ffffff; background: #450f78;", "background: #6c2ca7", "background: #9854d8", "background: #ffffff"], g = 0; 3 > g; g++) f.push(e > g ? "color: #ff2424; background: #fff": "color: #959595; background: #fff");
                    console.log.apply(console, f)
                } else window.console && console.log("Phaser v" + a + " | Pixi.js " + PIXI.VERSION + " | " + b + " | " + d + " | http://phaser.io")
            }
        },
        setUpRenderer: function() {
            if (this.canvas = this.config.canvasID ? c.Canvas.create(this.width, this.height, this.config.canvasID) : c.Canvas.create(this.width, this.height), this.config.canvasStyle ? this.canvas.style = this.config.canvasStyle: this.canvas.style["-webkit-full-screen"] = "width: 100%; height: 100%", this.device.cocoonJS && (this.canvas.screencanvas = this.renderType === c.CANVAS ? !0 : !1), this.renderType === c.HEADLESS || this.renderType === c.CANVAS || this.renderType === c.AUTO && this.device.webGL === !1) {
                if (!this.device.canvas) throw new Error("Phaser.Game - cannot create Canvas or WebGL context, aborting.");
                this.renderType === c.AUTO && (this.renderType = c.CANVAS),
                this.renderer = new PIXI.CanvasRenderer(this.width, this.height, {
                    view: this.canvas,
                    transparent: this.transparent,
                    resolution: this.resolution,
                    clearBeforeRender: !0
                }),
                this.context = this.renderer.context
            } else this.renderType = c.WEBGL,
            this.renderer = new PIXI.WebGLRenderer(this.width, this.height, {
                view: this.canvas,
                transparent: this.transparent,
                resolution: this.resolution,
                antialias: this.antialias,
                preserveDrawingBuffer: this.preserveDrawingBuffer
            }),
            this.context = null;
            this.renderType !== c.HEADLESS && (this.stage.smoothed = this.antialias, c.Canvas.addToDOM(this.canvas, this.parent, !1), c.Canvas.setTouchAction(this.canvas))
        },
        update: function(a) {
            if (this.time.update(a), this._kickstart) return this.updateLogic(1 / this.time.desiredFps),
            this.stage.updateTransform(),
            this.updateRender(this.time.slowMotion * this.time.desiredFps),
            void(this._kickstart = !1);
            if (this._spiraling > 1 && !this.forceSingleUpdate) this.time.time > this._nextFpsNotification && (this._nextFpsNotification = this.time.time + 1e4, this.fpsProblemNotifier.dispatch()),
            this._deltaTime = 0,
            this._spiraling = 0,
            this.updateRender(this.time.slowMotion * this.time.desiredFps);
            else {
                var b = 1e3 * this.time.slowMotion / this.time.desiredFps;
                this._deltaTime += Math.max(Math.min(3 * b, this.time.elapsed), 0);
                var c = 0;
                for (this.updatesThisFrame = Math.floor(this._deltaTime / b), this.forceSingleUpdate && (this.updatesThisFrame = Math.min(1, this.updatesThisFrame)); this._deltaTime >= b && (this._deltaTime -= b, this.currentUpdateID = c, this.updateLogic(1 / this.time.desiredFps), this.stage.updateTransform(), c++, !this.forceSingleUpdate || 1 !== c););
                c > this._lastCount ? this._spiraling++:c < this._lastCount && (this._spiraling = 0),
                this._lastCount = c,
                this.updateRender(this._deltaTime / b)
            }
        },
        updateLogic: function(a) {
            this._paused || this.pendingStep ? (this.scale.pauseUpdate(), this.state.pauseUpdate(), this.debug.preUpdate()) : (this.stepping && (this.pendingStep = !0), this.scale.preUpdate(), this.debug.preUpdate(), this.world.camera.preUpdate(), this.physics.preUpdate(), this.state.preUpdate(a), this.plugins.preUpdate(a), this.stage.preUpdate(), this.state.update(), this.stage.update(), this.tweens.update(a), this.sound.update(), this.input.update(), this.physics.update(), this.particles.update(), this.plugins.update(), this.stage.postUpdate(), this.plugins.postUpdate())
        },
        updateRender: function(a) {
            this.lockRender || (this.state.preRender(a), this.renderer.render(this.stage), this.plugins.render(a), this.state.render(a), this.plugins.postRender(a))
        },
        enableStep: function() {
            this.stepping = !0,
            this.pendingStep = !1,
            this.stepCount = 0
        },
        disableStep: function() {
            this.stepping = !1,
            this.pendingStep = !1
        },
        step: function() {
            this.pendingStep = !1,
            this.stepCount++
        },
        destroy: function() {
            this.raf.stop(),
            this.state.destroy(),
            this.sound.destroy(),
            this.scale.destroy(),
            this.stage.destroy(),
            this.input.destroy(),
            this.physics.destroy(),
            this.state = null,
            this.cache = null,
            this.input = null,
            this.load = null,
            this.sound = null,
            this.stage = null,
            this.time = null,
            this.world = null,
            this.isBooted = !1,
            this.renderer.destroy(!1),
            c.Canvas.removeFromDOM(this.canvas),
            c.GAMES[this.id] = null
        },
        gamePaused: function(a) {
            this._paused || (this._paused = !0, this.time.gamePaused(), this.sound.setMute(), this.onPause.dispatch(a))
        },
        gameResumed: function(a) {
            this._paused && !this._codePaused && (this._paused = !1, this.time.gameResumed(), this.input.reset(), this.sound.unsetMute(), this.onResume.dispatch(a))
        },
        focusLoss: function(a) {
            this.onBlur.dispatch(a),
            this.stage.disableVisibilityChange || this.gamePaused(a)
        },
        focusGain: function(a) {
            this.onFocus.dispatch(a),
            this.stage.disableVisibilityChange || this.gameResumed(a)
        }
    },
    c.Game.prototype.constructor = c.Game,
    Object.defineProperty(c.Game.prototype, "paused", {
        get: function() {
            return this._paused
        },
        set: function(a) {
            a === !0 ? (this._paused === !1 && (this._paused = !0, this.sound.setMute(), this.time.gamePaused(), this.onPause.dispatch(this)), this._codePaused = !0) : (this._paused && (this._paused = !1, this.input.reset(), this.sound.unsetMute(), this.time.gameResumed(), this.onResume.dispatch(this)), this._codePaused = !1)
        }
    }),
    c.Input = function(a) {
        this.game = a,
        this.hitCanvas = null,
        this.hitContext = null,
        this.moveCallbacks = [],
        this.moveCallback = null,
        this.moveCallbackContext = this,
        this.pollRate = 0,
        this.enabled = !0,
        this.multiInputOverride = c.Input.MOUSE_TOUCH_COMBINE,
        this.position = null,
        this.speed = null,
        this.circle = null,
        this.scale = null,
        this.maxPointers = -1,
        this.currentPointers = 0,
        this.tapRate = 200,
        this.doubleTapRate = 300,
        this.holdRate = 2e3,
        this.justPressedRate = 200,
        this.justReleasedRate = 200,
        this.recordPointerHistory = !1,
        this.recordRate = 100,
        this.recordLimit = 100,
        this.pointer1 = null,
        this.pointer2 = null,
        this.pointer3 = null,
        this.pointer4 = null,
        this.pointer5 = null,
        this.pointer6 = null,
        this.pointer7 = null,
        this.pointer8 = null,
        this.pointer9 = null,
        this.pointer10 = null,
        this.pointers = [],
        this.activePointer = null,
        this.mousePointer = null,
        this.mouse = null,
        this.keyboard = null,
        this.touch = null,
        this.mspointer = null,
        this.gamepad = null,
        this.resetLocked = !1,
        this.onDown = null,
        this.onUp = null,
        this.onTap = null,
        this.onHold = null,
        this.minPriorityID = 0,
        this.interactiveItems = new c.ArraySet,
        this._localPoint = new c.Point,
        this._pollCounter = 0,
        this._oldPosition = null,
        this._x = 0,
        this._y = 0
    },
    c.Input.MOUSE_OVERRIDES_TOUCH = 0,
    c.Input.TOUCH_OVERRIDES_MOUSE = 1,
    c.Input.MOUSE_TOUCH_COMBINE = 2,
    c.Input.MAX_POINTERS = 10,
    c.Input.prototype = {
        boot: function() {
            this.mousePointer = new c.Pointer(this.game, 0),
            this.addPointer(),
            this.addPointer(),
            this.mouse = new c.Mouse(this.game),
            this.touch = new c.Touch(this.game),
            this.mspointer = new c.MSPointer(this.game),
            c.Keyboard && (this.keyboard = new c.Keyboard(this.game)),
            c.Gamepad && (this.gamepad = new c.Gamepad(this.game)),
            this.onDown = new c.Signal,
            this.onUp = new c.Signal,
            this.onTap = new c.Signal,
            this.onHold = new c.Signal,
            this.scale = new c.Point(1, 1),
            this.speed = new c.Point,
            this.position = new c.Point,
            this._oldPosition = new c.Point,
            this.circle = new c.Circle(0, 0, 44),
            this.activePointer = this.mousePointer,
            this.currentPointers = 0,
            this.hitCanvas = document.createElement("canvas"),
            this.hitCanvas.width = 1,
            this.hitCanvas.height = 1,
            this.hitContext = this.hitCanvas.getContext("2d"),
            this.mouse.start(),
            this.touch.start(),
            this.mspointer.start(),
            this.mousePointer.active = !0,
            this.keyboard && this.keyboard.start();
            var a = this;
            this._onClickTrampoline = function(b) {
                a.onClickTrampoline(b)
            },
            this.game.canvas.addEventListener("click", this._onClickTrampoline, !1)
        },
        destroy: function() {
            this.mouse.stop(),
            this.touch.stop(),
            this.mspointer.stop(),
            this.keyboard && this.keyboard.stop(),
            this.gamepad && this.gamepad.stop(),
            this.moveCallbacks = [],
            this.game.canvas.removeEventListener("click", this._onClickTrampoline)
        },
        addMoveCallback: function(a, b) {
            return this.moveCallbacks.push({
                callback: a,
                context: b
            }) - 1
        },
        deleteMoveCallback: function(a) {
            this.moveCallbacks[a] && this.moveCallbacks.splice(a, 1)
        },
        addPointer: function() {
            if (this.pointers.length >= c.Input.MAX_POINTERS) return console.warn("Phaser.Input.addPointer: only " + c.Input.MAX_POINTERS + " pointer allowed"),
            null;
            var a = this.pointers.length + 1,
            b = new c.Pointer(this.game, a);
            return this.pointers.push(b),
            this["pointer" + a] = b,
            b
        },
        update: function() {
            if (this.keyboard && this.keyboard.update(), this.pollRate > 0 && this._pollCounter < this.pollRate) return void this._pollCounter++;
            this.speed.x = this.position.x - this._oldPosition.x,
            this.speed.y = this.position.y - this._oldPosition.y,
            this._oldPosition.copyFrom(this.position),
            this.mousePointer.update(),
            this.gamepad && this.gamepad.active && this.gamepad.update();
            for (var a = 0; a < this.pointers.length; a++) this.pointers[a].update();
            this._pollCounter = 0
        },
        reset: function(a) {
            if (this.game.isBooted && !this.resetLocked) {
                "undefined" == typeof a && (a = !1),
                this.mousePointer.reset(),
                this.keyboard && this.keyboard.reset(a),
                this.gamepad && this.gamepad.reset();
                for (var b = 0; b < this.pointers.length; b++) this.pointers[b].reset();
                this.currentPointers = 0,
                "none" !== this.game.canvas.style.cursor && (this.game.canvas.style.cursor = "inherit"),
                a && (this.onDown.dispose(), this.onUp.dispose(), this.onTap.dispose(), this.onHold.dispose(), this.onDown = new c.Signal, this.onUp = new c.Signal, this.onTap = new c.Signal, this.onHold = new c.Signal, this.moveCallbacks = []),
                this._pollCounter = 0
            }
        },
        resetSpeed: function(a, b) {
            this._oldPosition.setTo(a, b),
            this.speed.setTo(0, 0)
        },
        startPointer: function(a) {
            if (this.maxPointers >= 0 && this.countActivePointers(this.maxPointers) >= this.maxPointers) return null;
            if (!this.pointer1.active) return this.pointer1.start(a);
            if (!this.pointer2.active) return this.pointer2.start(a);
            for (var b = 2; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (!c.active) return c.start(a)
            }
            return null
        },
        updatePointer: function(a) {
            if (this.pointer1.active && this.pointer1.identifier === a.identifier) return this.pointer1.move(a);
            if (this.pointer2.active && this.pointer2.identifier === a.identifier) return this.pointer2.move(a);
            for (var b = 2; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.active && c.identifier === a.identifier) return c.move(a)
            }
            return null
        },
        stopPointer: function(a) {
            if (this.pointer1.active && this.pointer1.identifier === a.identifier) return this.pointer1.stop(a);
            if (this.pointer2.active && this.pointer2.identifier === a.identifier) return this.pointer2.stop(a);
            for (var b = 2; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.active && c.identifier === a.identifier) return c.stop(a)
            }
            return null
        },
        countActivePointers: function(a) {
            "undefined" == typeof a && (a = this.pointers.length);
            for (var b = a,
            c = 0; c < this.pointers.length && b > 0; c++) {
                var d = this.pointers[c];
                d.active && b--
            }
            return this.currentPointers = a - b,
            a - b
        },
        getPointer: function(a) {
            "undefined" == typeof a && (a = !1);
            for (var b = 0; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.active === a) return c
            }
            return null
        },
        getPointerFromIdentifier: function(a) {
            for (var b = 0; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.identifier === a) return c
            }
            return null
        },
        getPointerFromId: function(a) {
            for (var b = 0; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.pointerId === a) return c
            }
            return null
        },
        getLocalPosition: function(a, b, d) {
            "undefined" == typeof d && (d = new c.Point);
            var e = a.worldTransform,
            f = 1 / (e.a * e.d + e.c * -e.b);
            return d.setTo(e.d * f * b.x + -e.c * f * b.y + (e.ty * e.c - e.tx * e.d) * f, e.a * f * b.y + -e.b * f * b.x + ( - e.ty * e.a + e.tx * e.b) * f)
        },
        hitTest: function(a, b, d) {
            if (!a.worldVisible) return ! 1;
            if (this.getLocalPosition(a, b, this._localPoint), d.copyFrom(this._localPoint), a.hitArea && a.hitArea.contains) return a.hitArea.contains(this._localPoint.x, this._localPoint.y);
            if (a instanceof c.TileSprite) {
                var e = a.width,
                f = a.height,
                g = -e * a.anchor.x;
                if (this._localPoint.x >= g && this._localPoint.x < g + e) {
                    var h = -f * a.anchor.y;
                    if (this._localPoint.y >= h && this._localPoint.y < h + f) return ! 0
                }
            } else if (a instanceof PIXI.Sprite) {
                var e = a.texture.frame.width,
                f = a.texture.frame.height,
                g = -e * a.anchor.x;
                if (this._localPoint.x >= g && this._localPoint.x < g + e) {
                    var h = -f * a.anchor.y;
                    if (this._localPoint.y >= h && this._localPoint.y < h + f) return ! 0
                }
            } else if (a instanceof c.Graphics) for (var i = 0; i < a.graphicsData.length; i++) {
                var j = a.graphicsData[i];
                if (j.fill && j.shape && j.shape.contains(this._localPoint.x, this._localPoint.y)) return ! 0
            }
            for (var i = 0,
            k = a.children.length; k > i; i++) if (this.hitTest(a.children[i], b, d)) return ! 0;
            return ! 1
        },
        onClickTrampoline: function() {
            this.activePointer.processClickTrampolines()
        }
    },
    c.Input.prototype.constructor = c.Input,
    Object.defineProperty(c.Input.prototype, "x", {
        get: function() {
            return this._x
        },
        set: function(a) {
            this._x = Math.floor(a)
        }
    }),
    Object.defineProperty(c.Input.prototype, "y", {
        get: function() {
            return this._y
        },
        set: function(a) {
            this._y = Math.floor(a)
        }
    }),
    Object.defineProperty(c.Input.prototype, "pollLocked", {
        get: function() {
            return this.pollRate > 0 && this._pollCounter < this.pollRate
        }
    }),
    Object.defineProperty(c.Input.prototype, "totalInactivePointers", {
        get: function() {
            return this.pointers.length - this.countActivePointers()
        }
    }),
    Object.defineProperty(c.Input.prototype, "totalActivePointers", {
        get: function() {
            return this.countActivePointers()
        }
    }),
    Object.defineProperty(c.Input.prototype, "worldX", {
        get: function() {
            return this.game.camera.view.x + this.x
        }
    }),
    Object.defineProperty(c.Input.prototype, "worldY", {
        get: function() {
            return this.game.camera.view.y + this.y
        }
    }),
    Object.defineProperty(c.Input.prototype, "disabled", {
        get: function() {
            return ! this.enabled
        },
        set: function(a) {
            this.enabled = !a
        }
    }),
    c.Mouse = function(a) {
        this.game = a,
        this.callbackContext = this.game,
        this.mouseDownCallback = null,
        this.mouseMoveCallback = null,
        this.mouseUpCallback = null,
        this.mouseOutCallback = null,
        this.mouseOverCallback = null,
        this.mouseWheelCallback = null,
        this.capture = !1,
        this.button = -1,
        this.wheelDelta = 0,
        this.enabled = !0,
        this.locked = !1,
        this.stopOnGameOut = !1,
        this.pointerLock = new c.Signal,
        this.event = null,
        this._onMouseDown = null,
        this._onMouseMove = null,
        this._onMouseUp = null,
        this._onMouseOut = null,
        this._onMouseOver = null,
        this._onMouseWheel = null,
        this._wheelEvent = null
    },
    c.Mouse.NO_BUTTON = -1,
    c.Mouse.LEFT_BUTTON = 0,
    c.Mouse.MIDDLE_BUTTON = 1,
    c.Mouse.RIGHT_BUTTON = 2,
    c.Mouse.WHEEL_UP = 1,
    c.Mouse.WHEEL_DOWN = -1,
    c.Mouse.prototype = {
        start: function() {
            if ((!this.game.device.android || this.game.device.chrome !== !1) && null === this._onMouseDown) {
                var b = this;
                this._onMouseDown = function(a) {
                    return b.onMouseDown(a)
                },
                this._onMouseMove = function(a) {
                    return b.onMouseMove(a)
                },
                this._onMouseUp = function(a) {
                    return b.onMouseUp(a)
                },
                this._onMouseUpGlobal = function(a) {
                    return b.onMouseUpGlobal(a)
                },
                this._onMouseOut = function(a) {
                    return b.onMouseOut(a)
                },
                this._onMouseOver = function(a) {
                    return b.onMouseOver(a)
                },
                this._onMouseWheel = function(a) {
                    return b.onMouseWheel(a)
                },
                this.game.canvas.addEventListener("mousedown", this._onMouseDown, !0),
                this.game.canvas.addEventListener("mousemove", this._onMouseMove, !0),
                this.game.canvas.addEventListener("mouseup", this._onMouseUp, !0),
                this.game.device.cocoonJS || (window.addEventListener("mouseup", this._onMouseUpGlobal, !0), this.game.canvas.addEventListener("mouseover", this._onMouseOver, !0), this.game.canvas.addEventListener("mouseout", this._onMouseOut, !0));
                var c = this.game.device.wheelEvent;
                c && (this.game.canvas.addEventListener(c, this._onMouseWheel, !0), "mousewheel" === c ? this._wheelEvent = new a( - 1 / 40, 1) : "DOMMouseScroll" === c && (this._wheelEvent = new a(1, 1)))
            }
        },
        onMouseDown: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.button = a.button,
            this.mouseDownCallback && this.mouseDownCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && (a.identifier = 0, this.game.input.mousePointer.start(a))
        },
        onMouseMove: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.mouseMoveCallback && this.mouseMoveCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && (a.identifier = 0, this.game.input.mousePointer.move(a))
        },
        onMouseUp: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.button = c.Mouse.NO_BUTTON,
            this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && (a.identifier = 0, this.game.input.mousePointer.stop(a))
        },
        onMouseUpGlobal: function(a) {
            this.game.input.mousePointer.withinGame || (this.button = c.Mouse.NO_BUTTON, this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, a), a.identifier = 0, this.game.input.mousePointer.stop(a))
        },
        onMouseOut: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.game.input.mousePointer.withinGame = !1,
            this.mouseOutCallback && this.mouseOutCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && this.stopOnGameOut && (a.identifier = 0, this.game.input.mousePointer.stop(a))
        },
        onMouseWheel: function(a) {
            this._wheelEvent && (a = this._wheelEvent.bindEvent(a)),
            this.event = a,
            this.capture && a.preventDefault(),
            this.wheelDelta = c.Math.clamp( - a.deltaY, -1, 1),
            this.mouseWheelCallback && this.mouseWheelCallback.call(this.callbackContext, a)
        },
        onMouseOver: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.game.input.mousePointer.withinGame = !0,
            this.mouseOverCallback && this.mouseOverCallback.call(this.callbackContext, a),
            !this.game.input.enabled || !this.enabled
        },
        requestPointerLock: function() {
            if (this.game.device.pointerLock) {
                var a = this.game.canvas;
                a.requestPointerLock = a.requestPointerLock || a.mozRequestPointerLock || a.webkitRequestPointerLock,
                a.requestPointerLock();
                var b = this;
                this._pointerLockChange = function(a) {
                    return b.pointerLockChange(a)
                },
                document.addEventListener("pointerlockchange", this._pointerLockChange, !0),
                document.addEventListener("mozpointerlockchange", this._pointerLockChange, !0),
                document.addEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
            }
        },
        pointerLockChange: function(a) {
            var b = this.game.canvas;
            document.pointerLockElement === b || document.mozPointerLockElement === b || document.webkitPointerLockElement === b ? (this.locked = !0, this.pointerLock.dispatch(!0, a)) : (this.locked = !1, this.pointerLock.dispatch(!1, a))
        },
        releasePointerLock: function() {
            document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock,
            document.exitPointerLock(),
            document.removeEventListener("pointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
        },
        stop: function() {
            this.game.canvas.removeEventListener("mousedown", this._onMouseDown, !0),
            this.game.canvas.removeEventListener("mousemove", this._onMouseMove, !0),
            this.game.canvas.removeEventListener("mouseup", this._onMouseUp, !0),
            this.game.canvas.removeEventListener("mouseover", this._onMouseOver, !0),
            this.game.canvas.removeEventListener("mouseout", this._onMouseOut, !0);
            var a = this.game.device.wheelEvent;
            a && this.game.canvas.removeEventListener(a, this._onMouseWheel, !0),
            window.removeEventListener("mouseup", this._onMouseUpGlobal, !0),
            document.removeEventListener("pointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
        }
    },
    c.Mouse.prototype.constructor = c.Mouse,
    Object.defineProperty(c.Mouse.prototype, "disabled", {
        get: function() {
            return ! this.enabled
        },
        set: function(a) {
            this.enabled = !a
        }
    }),
    a.prototype = {},
    a.prototype.constructor = a,
    a.prototype.bindEvent = function(b) {
        if (!a._stubsGenerated && b) {
            var c = function(a) {
                return function() {
                    var b = this.originalEvent[a];
                    return "function" != typeof b ? b: b.bind(this.originalEvent)
                }
            };
            for (var d in b) d in a.prototype || Object.defineProperty(a.prototype, d, {
                get: c(d)
            });
            a._stubsGenerated = !0
        }
        return this.originalEvent = b,
        this
    },
    Object.defineProperties(a.prototype, {
        type: {
            value: "wheel"
        },
        deltaMode: {
            get: function() {
                return this._deltaMode
            }
        },
        deltaY: {
            get: function() {
                return this._scaleFactor * (this.originalEvent.wheelDelta || this.originalEvent.detail) || 0
            }
        },
        deltaX: {
            get: function() {
                return this._scaleFactor * this.originalEvent.wheelDeltaX || 0
            }
        },
        deltaZ: {
            value: 0
        }
    }),
    c.MSPointer = function(a) {
        this.game = a,
        this.callbackContext = this.game,
        this.pointerDownCallback = null,
        this.pointerMoveCallback = null,
        this.pointerUpCallback = null,
        this.capture = !0,
        this.button = -1,
        this.event = null,
        this.enabled = !0,
        this._onMSPointerDown = null,
        this._onMSPointerMove = null,
        this._onMSPointerUp = null
    },
    c.MSPointer.prototype = {
        start: function() {
            if (null === this._onMSPointerDown) {
                var a = this;
                this.game.device.mspointer && (this._onMSPointerDown = function(b) {
                    return a.onPointerDown(b)
                },
                this._onMSPointerMove = function(b) {
                    return a.onPointerMove(b)
                },
                this._onMSPointerUp = function(b) {
                    return a.onPointerUp(b)
                },
                this.game.canvas.addEventListener("MSPointerDown", this._onMSPointerDown, !1), this.game.canvas.addEventListener("MSPointerMove", this._onMSPointerMove, !1), this.game.canvas.addEventListener("MSPointerUp", this._onMSPointerUp, !1), this.game.canvas.addEventListener("pointerDown", this._onMSPointerDown, !1), this.game.canvas.addEventListener("pointerMove", this._onMSPointerMove, !1), this.game.canvas.addEventListener("pointerUp", this._onMSPointerUp, !1), this.game.canvas.style["-ms-content-zooming"] = "none", this.game.canvas.style["-ms-touch-action"] = "none")
            }
        },
        onPointerDown: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.button = a.button,
            this.pointerDownCallback && this.pointerDownCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && (a.identifier = a.pointerId, this.game.input.startPointer(a))
        },
        onPointerMove: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.pointerMoveCallback && this.pointerMoveCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && (a.identifier = a.pointerId, this.game.input.updatePointer(a))
        },
        onPointerUp: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.button = c.Mouse.NO_BUTTON,
            this.pointerUpCallback && this.pointerUpCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && (a.identifier = a.pointerId, this.game.input.stopPointer(a))
        },
        stop: function() {
            this.game.canvas.removeEventListener("MSPointerDown", this._onMSPointerDown),
            this.game.canvas.removeEventListener("MSPointerMove", this._onMSPointerMove),
            this.game.canvas.removeEventListener("MSPointerUp", this._onMSPointerUp),
            this.game.canvas.removeEventListener("pointerDown", this._onMSPointerDown),
            this.game.canvas.removeEventListener("pointerMove", this._onMSPointerMove),
            this.game.canvas.removeEventListener("pointerUp", this._onMSPointerUp)
        }
    },
    c.MSPointer.prototype.constructor = c.MSPointer,
    Object.defineProperty(c.MSPointer.prototype, "disabled", {
        get: function() {
            return ! this.enabled
        },
        set: function(a) {
            this.enabled = !a
        }
    }),
    c.Pointer = function(a, b) {
        this.game = a,
        this.id = b,
        this.type = c.POINTER,
        this.exists = !0,
        this.identifier = 0,
        this.pointerId = null,
        this.target = null,
        this.button = null,
        this._holdSent = !1,
        this._history = [],
        this._nextDrop = 0,
        this._stateReset = !1,
        this.withinGame = !1,
        this.clientX = -1,
        this.clientY = -1,
        this.pageX = -1,
        this.pageY = -1,
        this.screenX = -1,
        this.screenY = -1,
        this.rawMovementX = 0,
        this.rawMovementY = 0,
        this.movementX = 0,
        this.movementY = 0,
        this.x = -1,
        this.y = -1,
        this.isMouse = !1,
        this.isDown = !1,
        this.isUp = !0,
        this.timeDown = 0,
        this.timeUp = 0,
        this.previousTapTime = 0,
        this.totalTouches = 0,
        this.msSinceLastClick = Number.MAX_VALUE,
        this.targetObject = null,
        this.active = !1,
        this.dirty = !1,
        this.position = new c.Point,
        this.positionDown = new c.Point,
        this.positionUp = new c.Point,
        this.circle = new c.Circle(0, 0, 44),
        0 === b && (this.isMouse = !0),
        this._clickTrampolines = null,
        this._trampolineTargetObject = null
    },
    c.Pointer.prototype = {
        start: function(a) {
            return a.pointerId && (this.pointerId = a.pointerId),
            this.identifier = a.identifier,
            this.target = a.target,
            "undefined" != typeof a.button && (this.button = a.button),
            this._history = [],
            this.active = !0,
            this.withinGame = !0,
            this.isDown = !0,
            this.isUp = !1,
            this.dirty = !1,
            this._clickTrampolines = null,
            this._trampolineTargetObject = null,
            this.msSinceLastClick = this.game.time.time - this.timeDown,
            this.timeDown = this.game.time.time,
            this._holdSent = !1,
            this.move(a, !0),
            this.positionDown.setTo(this.x, this.y),
            (this.game.input.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || this.game.input.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || this.game.input.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === this.game.input.currentPointers) && (this.game.input.x = this.x, this.game.input.y = this.y, this.game.input.position.setTo(this.x, this.y), this.game.input.onDown.dispatch(this, a), this.game.input.resetSpeed(this.x, this.y)),
            this._stateReset = !1,
            this.totalTouches++,
            this.isMouse || this.game.input.currentPointers++,
            null !== this.targetObject && this.targetObject._touchedHandler(this),
            this
        },
        update: function() {
            this.active && (this.dirty && (this.game.input.interactiveItems.total > 0 && this.processInteractiveObjects(!1), this.dirty = !1), this._holdSent === !1 && this.duration >= this.game.input.holdRate && ((this.game.input.multiInputOverride == c.Input.MOUSE_OVERRIDES_TOUCH || this.game.input.multiInputOverride == c.Input.MOUSE_TOUCH_COMBINE || this.game.input.multiInputOverride == c.Input.TOUCH_OVERRIDES_MOUSE && 0 === this.game.input.currentPointers) && this.game.input.onHold.dispatch(this), this._holdSent = !0), this.game.input.recordPointerHistory && this.game.time.time >= this._nextDrop && (this._nextDrop = this.game.time.time + this.game.input.recordRate, this._history.push({
                x: this.position.x,
                y: this.position.y
            }), this._history.length > this.game.input.recordLimit && this._history.shift()))
        },
        move: function(a, b) {
            if (!this.game.input.pollLocked) {
                if ("undefined" == typeof b && (b = !1), "undefined" != typeof a.button && (this.button = a.button), this.clientX = a.clientX, this.clientY = a.clientY, this.pageX = a.pageX, this.pageY = a.pageY, this.screenX = a.screenX, this.screenY = a.screenY, this.isMouse && this.game.input.mouse.locked && !b && (this.rawMovementX = a.movementX || a.mozMovementX || a.webkitMovementX || 0, this.rawMovementY = a.movementY || a.mozMovementY || a.webkitMovementY || 0, this.movementX += this.rawMovementX, this.movementY += this.rawMovementY), this.x = (this.pageX - this.game.scale.offset.x) * this.game.input.scale.x, this.y = (this.pageY - this.game.scale.offset.y) * this.game.input.scale.y, this.position.setTo(this.x, this.y), this.circle.x = this.x, this.circle.y = this.y, (this.game.input.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || this.game.input.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || this.game.input.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === this.game.input.currentPointers) && (this.game.input.activePointer = this, this.game.input.x = this.x, this.game.input.y = this.y, this.game.input.position.setTo(this.game.input.x, this.game.input.y), this.game.input.circle.x = this.game.input.x, this.game.input.circle.y = this.game.input.y), this.withinGame = this.game.scale.bounds.contains(this.pageX, this.pageY), this.game.paused) return this;
                for (var d = this.game.input.moveCallbacks.length; d--;) this.game.input.moveCallbacks[d].callback.call(this.game.input.moveCallbacks[d].context, this, this.x, this.y, b);
                return null !== this.targetObject && this.targetObject.isDragged === !0 ? this.targetObject.update(this) === !1 && (this.targetObject = null) : this.game.input.interactiveItems.total > 0 && this.processInteractiveObjects(b),
                this
            }
        },
        processInteractiveObjects: function(a) {
            for (var b = Number.MAX_VALUE,
            c = -1,
            d = null,
            e = this.game.input.interactiveItems.first; e;) e.checked = !1,
            e.validForInput(c, b, !1) && (e.checked = !0, (a && e.checkPointerDown(this, !0) || !a && e.checkPointerOver(this, !0)) && (b = e.sprite.renderOrderID, c = e.priorityID, d = e)),
            e = this.game.input.interactiveItems.next;
            for (var e = this.game.input.interactiveItems.first; e;) ! e.checked && e.validForInput(c, b, !0) && (a && e.checkPointerDown(this, !1) || !a && e.checkPointerOver(this, !1)) && (b = e.sprite.renderOrderID, c = e.priorityID, d = e),
            e = this.game.input.interactiveItems.next;
            return null === d ? this.targetObject && (this.targetObject._pointerOutHandler(this), this.targetObject = null) : null === this.targetObject ? (this.targetObject = d, d._pointerOverHandler(this)) : this.targetObject === d ? d.update(this) === !1 && (this.targetObject = null) : (this.targetObject._pointerOutHandler(this), this.targetObject = d, this.targetObject._pointerOverHandler(this)),
            null !== this.targetObject
        },
        leave: function(a) {
            this.withinGame = !1,
            this.move(a, !1)
        },
        stop: function(a) {
            return this._stateReset && this.withinGame ? void a.preventDefault() : (this.timeUp = this.game.time.time, (this.game.input.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || this.game.input.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || this.game.input.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === this.game.input.currentPointers) && (this.game.input.onUp.dispatch(this, a), this.duration >= 0 && this.duration <= this.game.input.tapRate && (this.timeUp - this.previousTapTime < this.game.input.doubleTapRate ? this.game.input.onTap.dispatch(this, !0) : this.game.input.onTap.dispatch(this, !1), this.previousTapTime = this.timeUp)), this.id > 0 && (this.active = !1), this.withinGame = !1, this.isDown = !1, this.isUp = !0, this.pointerId = null, this.identifier = null, this.positionUp.setTo(this.x, this.y), this.isMouse === !1 && this.game.input.currentPointers--, this.game.input.interactiveItems.callAll("_releasedHandler", this), this._clickTrampolines && (this._trampolineTargetObject = this.targetObject), this.targetObject = null, this)
        },
        justPressed: function(a) {
            return a = a || this.game.input.justPressedRate,
            this.isDown === !0 && this.timeDown + a > this.game.time.time
        },
        justReleased: function(a) {
            return a = a || this.game.input.justReleasedRate,
            this.isUp === !0 && this.timeUp + a > this.game.time.time
        },
        addClickTrampoline: function(a, b, c, d) {
            if (this.isDown) {
                for (var e = this._clickTrampolines = this._clickTrampolines || [], f = 0; f < e.length; f++) if (e[f].name === a) {
                    e.splice(f, 1);
                    break
                }
                e.push({
                    name: a,
                    targetObject: this.targetObject,
                    callback: b,
                    callbackContext: c,
                    callbackArgs: d
                })
            }
        },
        processClickTrampolines: function() {
            var a = this._clickTrampolines;
            if (a) {
                for (var b = 0; b < a.length; b++) {
                    var c = a[b];
                    c.targetObject === this._trampolineTargetObject && c.callback.apply(c.callbackContext, c.callbackArgs)
                }
                this._clickTrampolines = null,
                this._trampolineTargetObject = null
            }
        },
        reset: function() {
            this.isMouse === !1 && (this.active = !1),
            this.pointerId = null,
            this.identifier = null,
            this.dirty = !1,
            this.isDown = !1,
            this.isUp = !0,
            this.totalTouches = 0,
            this._holdSent = !1,
            this._history.length = 0,
            this._stateReset = !0,
            this.targetObject && this.targetObject._releasedHandler(this),
            this.targetObject = null
        },
        resetMovement: function() {
            this.movementX = 0,
            this.movementY = 0
        }
    },
    c.Pointer.prototype.constructor = c.Pointer,
    Object.defineProperty(c.Pointer.prototype, "duration", {
        get: function() {
            return this.isUp ? -1 : this.game.time.time - this.timeDown
        }
    }),
    Object.defineProperty(c.Pointer.prototype, "worldX", {
        get: function() {
            return this.game.world.camera.x + this.x
        }
    }),
    Object.defineProperty(c.Pointer.prototype, "worldY", {
        get: function() {
            return this.game.world.camera.y + this.y
        }
    }),
    c.Touch = function(a) {
        this.game = a,
        this.enabled = !0,
        this.callbackContext = this.game,
        this.touchStartCallback = null,
        this.touchMoveCallback = null,
        this.touchEndCallback = null,
        this.touchEnterCallback = null,
        this.touchLeaveCallback = null,
        this.touchCancelCallback = null,
        this.preventDefault = !0,
        this.event = null,
        this._onTouchStart = null,
        this._onTouchMove = null,
        this._onTouchEnd = null,
        this._onTouchEnter = null,
        this._onTouchLeave = null,
        this._onTouchCancel = null,
        this._onTouchMove = null
    },
    c.Touch.prototype = {
        start: function() {
            if (null === this._onTouchStart) {
                var a = this;
                this.game.device.touch && (this._onTouchStart = function(b) {
                    return a.onTouchStart(b)
                },
                this._onTouchMove = function(b) {
                    return a.onTouchMove(b)
                },
                this._onTouchEnd = function(b) {
                    return a.onTouchEnd(b)
                },
                this._onTouchEnter = function(b) {
                    return a.onTouchEnter(b)
                },
                this._onTouchLeave = function(b) {
                    return a.onTouchLeave(b)
                },
                this._onTouchCancel = function(b) {
                    return a.onTouchCancel(b)
                },
                this.game.canvas.addEventListener("touchstart", this._onTouchStart, !1), this.game.canvas.addEventListener("touchmove", this._onTouchMove, !1), this.game.canvas.addEventListener("touchend", this._onTouchEnd, !1), this.game.canvas.addEventListener("touchcancel", this._onTouchCancel, !1), this.game.device.cocoonJS || (this.game.canvas.addEventListener("touchenter", this._onTouchEnter, !1), this.game.canvas.addEventListener("touchleave", this._onTouchLeave, !1)))
            }
        },
        consumeDocumentTouches: function() {
            this._documentTouchMove = function(a) {
                a.preventDefault()
            },
            document.addEventListener("touchmove", this._documentTouchMove, !1)
        },
        onTouchStart: function(a) {
            if (this.event = a, this.touchStartCallback && this.touchStartCallback.call(this.callbackContext, a), this.game.input.enabled && this.enabled) {
                this.preventDefault && a.preventDefault();
                for (var b = 0; b < a.changedTouches.length; b++) this.game.input.startPointer(a.changedTouches[b])
            }
        },
        onTouchCancel: function(a) {
            if (this.event = a, this.touchCancelCallback && this.touchCancelCallback.call(this.callbackContext, a), this.game.input.enabled && this.enabled) {
                this.preventDefault && a.preventDefault();
                for (var b = 0; b < a.changedTouches.length; b++) this.game.input.stopPointer(a.changedTouches[b])
            }
        },
        onTouchEnter: function(a) {
            this.event = a,
            this.touchEnterCallback && this.touchEnterCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && this.preventDefault && a.preventDefault()
        },
        onTouchLeave: function(a) {
            this.event = a,
            this.touchLeaveCallback && this.touchLeaveCallback.call(this.callbackContext, a),
            this.preventDefault && a.preventDefault()
        },
        onTouchMove: function(a) {
            this.event = a,
            this.touchMoveCallback && this.touchMoveCallback.call(this.callbackContext, a),
            this.preventDefault && a.preventDefault();
            for (var b = 0; b < a.changedTouches.length; b++) this.game.input.updatePointer(a.changedTouches[b])
        },
        onTouchEnd: function(a) {
            this.event = a,
            this.touchEndCallback && this.touchEndCallback.call(this.callbackContext, a),
            this.preventDefault && a.preventDefault();
            for (var b = 0; b < a.changedTouches.length; b++) this.game.input.stopPointer(a.changedTouches[b])
        },
        stop: function() {
            this.game.device.touch && (this.game.canvas.removeEventListener("touchstart", this._onTouchStart), this.game.canvas.removeEventListener("touchmove", this._onTouchMove), this.game.canvas.removeEventListener("touchend", this._onTouchEnd), this.game.canvas.removeEventListener("touchenter", this._onTouchEnter), this.game.canvas.removeEventListener("touchleave", this._onTouchLeave), this.game.canvas.removeEventListener("touchcancel", this._onTouchCancel))
        }
    },
    c.Touch.prototype.constructor = c.Touch,
    Object.defineProperty(c.Touch.prototype, "disabled", {
        get: function() {
            return ! this.enabled
        },
        set: function(a) {
            this.enabled = !a
        }
    }),
    c.InputHandler = function(a) {
        this.sprite = a,
        this.game = a.game,
        this.enabled = !1,
        this.checked = !1,
        this.priorityID = 0,
        this.useHandCursor = !1,
        this._setHandCursor = !1,
        this.isDragged = !1,
        this.allowHorizontalDrag = !0,
        this.allowVerticalDrag = !0,
        this.bringToTop = !1,
        this.snapOffset = null,
        this.snapOnDrag = !1,
        this.snapOnRelease = !1,
        this.snapX = 0,
        this.snapY = 0,
        this.snapOffsetX = 0,
        this.snapOffsetY = 0,
        this.pixelPerfectOver = !1,
        this.pixelPerfectClick = !1,
        this.pixelPerfectAlpha = 255,
        this.draggable = !1,
        this.boundsRect = null,
        this.boundsSprite = null,
        this.consumePointerEvent = !1,
        this.scaleLayer = !1,
        this.dragOffset = new c.Point,
        this.dragFromCenter = !1,
        this.dragStartPoint = new c.Point,
        this._dragPoint = new c.Point,
        this._dragPhase = !1,
        this._wasEnabled = !1,
        this._tempPoint = new c.Point,
        this._pointerData = [],
        this._pointerData.push({
            id: 0,
            x: 0,
            y: 0,
            isDown: !1,
            isUp: !1,
            isOver: !1,
            isOut: !1,
            timeOver: 0,
            timeOut: 0,
            timeDown: 0,
            timeUp: 0,
            downDuration: 0,
            isDragged: !1
        })
    },
    c.InputHandler.prototype = {
        start: function(a, b) {
            if (a = a || 0, "undefined" == typeof b && (b = !1), this.enabled === !1) {
                this.game.input.interactiveItems.add(this),
                this.useHandCursor = b,
                this.priorityID = a;
                for (var d = 0; 10 > d; d++) this._pointerData[d] = {
                    id: d,
                    x: 0,
                    y: 0,
                    isDown: !1,
                    isUp: !1,
                    isOver: !1,
                    isOut: !1,
                    timeOver: 0,
                    timeOut: 0,
                    timeDown: 0,
                    timeUp: 0,
                    downDuration: 0,
                    isDragged: !1
                };
                this.snapOffset = new c.Point,
                this.enabled = !0,
                this._wasEnabled = !0
            }
            return this.sprite.events.onAddedToGroup.add(this.addedToGroup, this),
            this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup, this),
            this.flagged = !1,
            this.sprite
        },
        addedToGroup: function() {
            this._dragPhase || this._wasEnabled && !this.enabled && this.start()
        },
        removedFromGroup: function() {
            this._dragPhase || (this.enabled ? (this._wasEnabled = !0, this.stop()) : this._wasEnabled = !1)
        },
        reset: function() {
            this.enabled = !1,
            this.flagged = !1;
            for (var a = 0; 10 > a; a++) this._pointerData[a] = {
                id: a,
                x: 0,
                y: 0,
                isDown: !1,
                isUp: !1,
                isOver: !1,
                isOut: !1,
                timeOver: 0,
                timeOut: 0,
                timeDown: 0,
                timeUp: 0,
                downDuration: 0,
                isDragged: !1
            }
        },
        stop: function() {
            this.enabled !== !1 && (this.enabled = !1, this.game.input.interactiveItems.remove(this))
        },
        destroy: function() {
            this.sprite && (this._setHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), this.enabled = !1, this.game.input.interactiveItems.remove(this), this._pointerData.length = 0, this.boundsRect = null, this.boundsSprite = null, this.sprite = null)
        },
        validForInput: function(a, b, c) {
            return "undefined" == typeof c && (c = !0),
            0 === this.sprite.scale.x || 0 === this.sprite.scale.y || this.priorityID < this.game.input.minPriorityID ? !1 : (c || !this.pixelPerfectClick && !this.pixelPerfectOver) && (this.priorityID > a || this.priorityID === a && this.sprite.renderOrderID < b) ? !0 : !1
        },
        isPixelPerfect: function() {
            return this.pixelPerfectClick || this.pixelPerfectOver
        },
        pointerX: function(a) {
            return a = a || 0,
            this._pointerData[a].x
        },
        pointerY: function(a) {
            return a = a || 0,
            this._pointerData[a].y
        },
        pointerDown: function(a) {
            return a = a || 0,
            this._pointerData[a].isDown
        },
        pointerUp: function(a) {
            return a = a || 0,
            this._pointerData[a].isUp
        },
        pointerTimeDown: function(a) {
            return a = a || 0,
            this._pointerData[a].timeDown
        },
        pointerTimeUp: function(a) {
            return a = a || 0,
            this._pointerData[a].timeUp
        },
        pointerOver: function(a) {
            if (this.enabled) {
                if ("undefined" != typeof a) return this._pointerData[a].isOver;
                for (var b = 0; 10 > b; b++) if (this._pointerData[b].isOver) return ! 0
            }
            return ! 1
        },
        pointerOut: function(a) {
            if (this.enabled) {
                if ("undefined" != typeof a) return this._pointerData[a].isOut;
                for (var b = 0; 10 > b; b++) if (this._pointerData[b].isOut) return ! 0
            }
            return ! 1
        },
        pointerTimeOver: function(a) {
            return a = a || 0,
            this._pointerData[a].timeOver
        },
        pointerTimeOut: function(a) {
            return a = a || 0,
            this._pointerData[a].timeOut
        },
        pointerDragged: function(a) {
            return a = a || 0,
            this._pointerData[a].isDragged
        },
        checkPointerDown: function(a, b) {
            return a.isDown && this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && this.game.input.hitTest(this.sprite, a, this._tempPoint) ? ("undefined" == typeof b && (b = !1), !b && this.pixelPerfectClick ? this.checkPixel(this._tempPoint.x, this._tempPoint.y) : !0) : !1
        },
        checkPointerOver: function(a, b) {
            return this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && this.game.input.hitTest(this.sprite, a, this._tempPoint) ? ("undefined" == typeof b && (b = !1), !b && this.pixelPerfectOver ? this.checkPixel(this._tempPoint.x, this._tempPoint.y) : !0) : !1
        },
        checkPixel: function(a, b, c) {
            if (this.sprite.texture.baseTexture.source) {
                if (null === a && null === b) {
                    this.game.input.getLocalPosition(this.sprite, c, this._tempPoint);
                    var a = this._tempPoint.x,
                    b = this._tempPoint.y
                }
                if (0 !== this.sprite.anchor.x && (a -= -this.sprite.texture.frame.width * this.sprite.anchor.x), 0 !== this.sprite.anchor.y && (b -= -this.sprite.texture.frame.height * this.sprite.anchor.y), a += this.sprite.texture.frame.x, b += this.sprite.texture.frame.y, this.sprite.texture.trim && (a -= this.sprite.texture.trim.x, b -= this.sprite.texture.trim.y, a < this.sprite.texture.crop.x || a > this.sprite.texture.crop.right || b < this.sprite.texture.crop.y || b > this.sprite.texture.crop.bottom)) return this._dx = a,
                this._dy = b,
                !1;
                this._dx = a,
                this._dy = b,
                this.game.input.hitContext.clearRect(0, 0, 1, 1),
                this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source, a, b, 1, 1, 0, 0, 1, 1);
                var d = this.game.input.hitContext.getImageData(0, 0, 1, 1);
                if (d.data[3] >= this.pixelPerfectAlpha) return ! 0
            }
            return ! 1
        },
        update: function(a) {
            return null !== this.sprite && void 0 !== this.sprite.parent ? this.enabled && this.sprite.visible && this.sprite.parent.visible ? this.draggable && this._draggedPointerID === a.id ? this.updateDrag(a) : this._pointerData[a.id].isOver ? this.checkPointerOver(a) ? (this._pointerData[a.id].x = a.x - this.sprite.x, this._pointerData[a.id].y = a.y - this.sprite.y, !0) : (this._pointerOutHandler(a), !1) : void 0 : (this._pointerOutHandler(a), !1) : void 0
        },
        _pointerOverHandler: function(a) {
            null !== this.sprite && (this._pointerData[a.id].isOver === !1 || a.dirty) && (this._pointerData[a.id].isOver = !0, this._pointerData[a.id].isOut = !1, this._pointerData[a.id].timeOver = this.game.time.time, this._pointerData[a.id].x = a.x - this.sprite.x, this._pointerData[a.id].y = a.y - this.sprite.y, this.useHandCursor && this._pointerData[a.id].isDragged === !1 && (this.game.canvas.style.cursor = "pointer", this._setHandCursor = !0), this.sprite && this.sprite.events && this.sprite.events.onInputOver$dispatch(this.sprite, a))
        },
        _pointerOutHandler: function(a) {
            null !== this.sprite && (this._pointerData[a.id].isOver = !1, this._pointerData[a.id].isOut = !0, this._pointerData[a.id].timeOut = this.game.time.time, this.useHandCursor && this._pointerData[a.id].isDragged === !1 && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), this.sprite && this.sprite.events && this.sprite.events.onInputOut$dispatch(this.sprite, a));
        },
        _touchedHandler: function(a) {
            if (null !== this.sprite) {
                if (this._pointerData[a.id].isDown === !1 && this._pointerData[a.id].isOver === !0) {
                    if (this.pixelPerfectClick && !this.checkPixel(null, null, a)) return;
                    this._pointerData[a.id].isDown = !0,
                    this._pointerData[a.id].isUp = !1,
                    this._pointerData[a.id].timeDown = this.game.time.time,
                    this.sprite && this.sprite.events && this.sprite.events.onInputDown$dispatch(this.sprite, a),
                    a.dirty = !0,
                    this.draggable && this.isDragged === !1 && this.startDrag(a),
                    this.bringToTop && this.sprite.bringToTop()
                }
                return this.consumePointerEvent
            }
        },
        _releasedHandler: function(a) {
            null !== this.sprite && this._pointerData[a.id].isDown && a.isUp && (this._pointerData[a.id].isDown = !1, this._pointerData[a.id].isUp = !0, this._pointerData[a.id].timeUp = this.game.time.time, this._pointerData[a.id].downDuration = this._pointerData[a.id].timeUp - this._pointerData[a.id].timeDown, this.checkPointerOver(a) ? this.sprite && this.sprite.events && this.sprite.events.onInputUp$dispatch(this.sprite, a, !0) : (this.sprite && this.sprite.events && this.sprite.events.onInputUp$dispatch(this.sprite, a, !1), this.useHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1)), a.dirty = !0, this.draggable && this.isDragged && this._draggedPointerID === a.id && this.stopDrag(a))
        },
        updateDrag: function(a) {
            if (a.isUp) return this.stopDrag(a),
            !1;
            var b = this.globalToLocalX(a.x) + this._dragPoint.x + this.dragOffset.x,
            c = this.globalToLocalY(a.y) + this._dragPoint.y + this.dragOffset.y;
            return this.sprite.fixedToCamera ? (this.allowHorizontalDrag && (this.sprite.cameraOffset.x = b), this.allowVerticalDrag && (this.sprite.cameraOffset.y = c), this.boundsRect && this.checkBoundsRect(), this.boundsSprite && this.checkBoundsSprite(), this.snapOnDrag && (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY)) : (this.allowHorizontalDrag && (this.sprite.x = b), this.allowVerticalDrag && (this.sprite.y = c), this.boundsRect && this.checkBoundsRect(), this.boundsSprite && this.checkBoundsSprite(), this.snapOnDrag && (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY)),
            !0
        },
        justOver: function(a, b) {
            return a = a || 0,
            b = b || 500,
            this._pointerData[a].isOver && this.overDuration(a) < b
        },
        justOut: function(a, b) {
            return a = a || 0,
            b = b || 500,
            this._pointerData[a].isOut && this.game.time.time - this._pointerData[a].timeOut < b
        },
        justPressed: function(a, b) {
            return a = a || 0,
            b = b || 500,
            this._pointerData[a].isDown && this.downDuration(a) < b
        },
        justReleased: function(a, b) {
            return a = a || 0,
            b = b || 500,
            this._pointerData[a].isUp && this.game.time.time - this._pointerData[a].timeUp < b
        },
        overDuration: function(a) {
            return a = a || 0,
            this._pointerData[a].isOver ? this.game.time.time - this._pointerData[a].timeOver: -1
        },
        downDuration: function(a) {
            return a = a || 0,
            this._pointerData[a].isDown ? this.game.time.time - this._pointerData[a].timeDown: -1
        },
        enableDrag: function(a, b, d, e, f, g) {
            "undefined" == typeof a && (a = !1),
            "undefined" == typeof b && (b = !1),
            "undefined" == typeof d && (d = !1),
            "undefined" == typeof e && (e = 255),
            "undefined" == typeof f && (f = null),
            "undefined" == typeof g && (g = null),
            this._dragPoint = new c.Point,
            this.draggable = !0,
            this.bringToTop = b,
            this.dragOffset = new c.Point,
            this.dragFromCenter = a,
            this.pixelPerfectClick = d,
            this.pixelPerfectAlpha = e,
            f && (this.boundsRect = f),
            g && (this.boundsSprite = g)
        },
        disableDrag: function() {
            if (this._pointerData) for (var a = 0; 10 > a; a++) this._pointerData[a].isDragged = !1;
            this.draggable = !1,
            this.isDragged = !1,
            this._draggedPointerID = -1
        },
        startDrag: function(a) {
            var b = this.sprite.x,
            c = this.sprite.y;
            if (this.isDragged = !0, this._draggedPointerID = a.id, this._pointerData[a.id].isDragged = !0, this.sprite.fixedToCamera) this.dragFromCenter ? (this.sprite.centerOn(a.x, a.y), this._dragPoint.setTo(this.sprite.cameraOffset.x - a.x, this.sprite.cameraOffset.y - a.y)) : this._dragPoint.setTo(this.sprite.cameraOffset.x - a.x, this.sprite.cameraOffset.y - a.y);
            else {
                if (this.dragFromCenter) {
                    var d = this.sprite.getBounds();
                    this.sprite.x = this.globalToLocalX(a.x) + (this.sprite.x - d.centerX),
                    this.sprite.y = this.globalToLocalY(a.y) + (this.sprite.y - d.centerY)
                }
                this._dragPoint.setTo(this.sprite.x - this.globalToLocalX(a.x), this.sprite.y - this.globalToLocalY(a.y))
            }
            this.updateDrag(a),
            this.bringToTop && (this._dragPhase = !0, this.sprite.bringToTop()),
            this.dragStartPoint.set(b, c),
            this.sprite.events.onDragStart$dispatch(this.sprite, a, b, c)
        },
        globalToLocalX: function(a) {
            return this.scaleLayer && (a -= this.game.scale.grid.boundsFluid.x, a *= this.game.scale.grid.scaleFluidInversed.x),
            a
        },
        globalToLocalY: function(a) {
            return this.scaleLayer && (a -= this.game.scale.grid.boundsFluid.y, a *= this.game.scale.grid.scaleFluidInversed.y),
            a
        },
        stopDrag: function(a) {
            this.isDragged = !1,
            this._draggedPointerID = -1,
            this._pointerData[a.id].isDragged = !1,
            this._dragPhase = !1,
            this.snapOnRelease && (this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY) : (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY)),
            this.sprite.events.onDragStop$dispatch(this.sprite, a),
            this.checkPointerOver(a) === !1 && this._pointerOutHandler(a)
        },
        setDragLock: function(a, b) {
            "undefined" == typeof a && (a = !0),
            "undefined" == typeof b && (b = !0),
            this.allowHorizontalDrag = a,
            this.allowVerticalDrag = b
        },
        enableSnap: function(a, b, c, d, e, f) {
            "undefined" == typeof c && (c = !0),
            "undefined" == typeof d && (d = !1),
            "undefined" == typeof e && (e = 0),
            "undefined" == typeof f && (f = 0),
            this.snapX = a,
            this.snapY = b,
            this.snapOffsetX = e,
            this.snapOffsetY = f,
            this.snapOnDrag = c,
            this.snapOnRelease = d
        },
        disableSnap: function() {
            this.snapOnDrag = !1,
            this.snapOnRelease = !1
        },
        checkBoundsRect: function() {
            this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsRect.left ? this.sprite.cameraOffset.x = this.boundsRect.left: this.sprite.cameraOffset.x + this.sprite.width > this.boundsRect.right && (this.sprite.cameraOffset.x = this.boundsRect.right - this.sprite.width), this.sprite.cameraOffset.y < this.boundsRect.top ? this.sprite.cameraOffset.y = this.boundsRect.top: this.sprite.cameraOffset.y + this.sprite.height > this.boundsRect.bottom && (this.sprite.cameraOffset.y = this.boundsRect.bottom - this.sprite.height)) : (this.sprite.left < this.boundsRect.left ? this.sprite.x = this.boundsRect.x + this.sprite.offsetX: this.sprite.right > this.boundsRect.right && (this.sprite.x = this.boundsRect.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsRect.top ? this.sprite.y = this.boundsRect.top + this.sprite.offsetY: this.sprite.bottom > this.boundsRect.bottom && (this.sprite.y = this.boundsRect.bottom - (this.sprite.height - this.sprite.offsetY)))
        },
        checkBoundsSprite: function() {
            this.sprite.fixedToCamera && this.boundsSprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsSprite.cameraOffset.x ? this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x: this.sprite.cameraOffset.x + this.sprite.width > this.boundsSprite.cameraOffset.x + this.boundsSprite.width && (this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x + this.boundsSprite.width - this.sprite.width), this.sprite.cameraOffset.y < this.boundsSprite.cameraOffset.y ? this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y: this.sprite.cameraOffset.y + this.sprite.height > this.boundsSprite.cameraOffset.y + this.boundsSprite.height && (this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y + this.boundsSprite.height - this.sprite.height)) : (this.sprite.left < this.boundsSprite.left ? this.sprite.x = this.boundsSprite.left + this.sprite.offsetX: this.sprite.right > this.boundsSprite.right && (this.sprite.x = this.boundsSprite.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsSprite.top ? this.sprite.y = this.boundsSprite.top + this.sprite.offsetY: this.sprite.bottom > this.boundsSprite.bottom && (this.sprite.y = this.boundsSprite.bottom - (this.sprite.height - this.sprite.offsetY)))
        }
    },
    c.InputHandler.prototype.constructor = c.InputHandler,
    c.Gamepad = function(a) {
        this.game = a,
        this._gamepadIndexMap = {},
        this._rawPads = [],
        this._active = !1,
        this.enabled = !0,
        this._gamepadSupportAvailable = !!navigator.webkitGetGamepads || !!navigator.webkitGamepads || -1 != navigator.userAgent.indexOf("Firefox/") || !!navigator.getGamepads,
        this._prevRawGamepadTypes = [],
        this._prevTimestamps = [],
        this.callbackContext = this,
        this.onConnectCallback = null,
        this.onDisconnectCallback = null,
        this.onDownCallback = null,
        this.onUpCallback = null,
        this.onAxisCallback = null,
        this.onFloatCallback = null,
        this._ongamepadconnected = null,
        this._gamepaddisconnected = null,
        this._gamepads = [new c.SinglePad(a, this), new c.SinglePad(a, this), new c.SinglePad(a, this), new c.SinglePad(a, this)]
    },
    c.Gamepad.prototype = {
        addCallbacks: function(a, b) {
            "undefined" != typeof b && (this.onConnectCallback = "function" == typeof b.onConnect ? b.onConnect: this.onConnectCallback, this.onDisconnectCallback = "function" == typeof b.onDisconnect ? b.onDisconnect: this.onDisconnectCallback, this.onDownCallback = "function" == typeof b.onDown ? b.onDown: this.onDownCallback, this.onUpCallback = "function" == typeof b.onUp ? b.onUp: this.onUpCallback, this.onAxisCallback = "function" == typeof b.onAxis ? b.onAxis: this.onAxisCallback, this.onFloatCallback = "function" == typeof b.onFloat ? b.onFloat: this.onFloatCallback, this.callbackContext = a)
        },
        start: function() {
            if (!this._active) {
                this._active = !0;
                var a = this;
                this._onGamepadConnected = function(b) {
                    return a.onGamepadConnected(b)
                },
                this._onGamepadDisconnected = function(b) {
                    return a.onGamepadDisconnected(b)
                },
                window.addEventListener("gamepadconnected", this._onGamepadConnected, !1),
                window.addEventListener("gamepaddisconnected", this._onGamepadDisconnected, !1)
            }
        },
        onGamepadConnected: function(a) {
            var b = a.gamepad;
            this._rawPads.push(b),
            this._gamepads[b.index].connect(b)
        },
        onGamepadDisconnected: function(a) {
            var b = a.gamepad;
            for (var c in this._rawPads) this._rawPads[c].index === b.index && this._rawPads.splice(c, 1);
            this._gamepads[b.index].disconnect()
        },
        update: function() {
            this._pollGamepads(),
            this.pad1.pollStatus(),
            this.pad2.pollStatus(),
            this.pad3.pollStatus(),
            this.pad4.pollStatus()
        },
        _pollGamepads: function() {
            if (navigator.getGamepads) var a = navigator.getGamepads();
            else if (navigator.webkitGetGamepads) var a = navigator.webkitGetGamepads();
            else if (navigator.webkitGamepads) var a = navigator.webkitGamepads();
            if (a) {
                this._rawPads = [];
                for (var b = !1,
                c = 0; c < a.length && (typeof a[c] !== this._prevRawGamepadTypes[c] && (b = !0, this._prevRawGamepadTypes[c] = typeof a[c]), a[c] && this._rawPads.push(a[c]), 3 !== c); c++);
                if (b) {
                    for (var d, e = {
                        rawIndices: {},
                        padIndices: {}
                    },
                    f = 0; f < this._gamepads.length; f++) if (d = this._gamepads[f], d.connected) for (var g = 0; g < this._rawPads.length; g++) this._rawPads[g].index === d.index && (e.rawIndices[d.index] = !0, e.padIndices[f] = !0);
                    for (var h = 0; h < this._gamepads.length; h++) if (d = this._gamepads[h], !e.padIndices[h]) {
                        this._rawPads.length < 1 && d.disconnect();
                        for (var i = 0; i < this._rawPads.length && !e.padIndices[h]; i++) {
                            var j = this._rawPads[i];
                            if (j) {
                                if (e.rawIndices[j.index]) {
                                    d.disconnect();
                                    continue
                                }
                                d.connect(j),
                                e.rawIndices[j.index] = !0,
                                e.padIndices[h] = !0
                            } else d.disconnect()
                        }
                    }
                }
            }
        },
        setDeadZones: function(a) {
            for (var b = 0; b < this._gamepads.length; b++) this._gamepads[b].deadZone = a
        },
        stop: function() {
            this._active = !1,
            window.removeEventListener("gamepadconnected", this._onGamepadConnected),
            window.removeEventListener("gamepaddisconnected", this._onGamepadDisconnected)
        },
        reset: function() {
            this.update();
            for (var a = 0; a < this._gamepads.length; a++) this._gamepads[a].reset()
        },
        justPressed: function(a, b) {
            for (var c = 0; c < this._gamepads.length; c++) if (this._gamepads[c].justPressed(a, b) === !0) return ! 0;
            return ! 1
        },
        justReleased: function(a, b) {
            for (var c = 0; c < this._gamepads.length; c++) if (this._gamepads[c].justReleased(a, b) === !0) return ! 0;
            return ! 1
        },
        isDown: function(a) {
            for (var b = 0; b < this._gamepads.length; b++) if (this._gamepads[b].isDown(a) === !0) return ! 0;
            return ! 1
        },
        destroy: function() {
            this.stop();
            for (var a = 0; a < this._gamepads.length; a++) this._gamepads[a].destroy()
        }
    },
    c.Gamepad.prototype.constructor = c.Gamepad,
    Object.defineProperty(c.Gamepad.prototype, "disabled", {
        get: function() {
            return ! this.enabled
        },
        set: function(a) {
            this.enabled = !a
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "active", {
        get: function() {
            return this._active
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "supported", {
        get: function() {
            return this._gamepadSupportAvailable
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "padsConnected", {
        get: function() {
            return this._rawPads.length
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad1", {
        get: function() {
            return this._gamepads[0]
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad2", {
        get: function() {
            return this._gamepads[1]
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad3", {
        get: function() {
            return this._gamepads[2]
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad4", {
        get: function() {
            return this._gamepads[3]
        }
    }),
    c.Gamepad.BUTTON_0 = 0,
    c.Gamepad.BUTTON_1 = 1,
    c.Gamepad.BUTTON_2 = 2,
    c.Gamepad.BUTTON_3 = 3,
    c.Gamepad.BUTTON_4 = 4,
    c.Gamepad.BUTTON_5 = 5,
    c.Gamepad.BUTTON_6 = 6,
    c.Gamepad.BUTTON_7 = 7,
    c.Gamepad.BUTTON_8 = 8,
    c.Gamepad.BUTTON_9 = 9,
    c.Gamepad.BUTTON_10 = 10,
    c.Gamepad.BUTTON_11 = 11,
    c.Gamepad.BUTTON_12 = 12,
    c.Gamepad.BUTTON_13 = 13,
    c.Gamepad.BUTTON_14 = 14,
    c.Gamepad.BUTTON_15 = 15,
    c.Gamepad.AXIS_0 = 0,
    c.Gamepad.AXIS_1 = 1,
    c.Gamepad.AXIS_2 = 2,
    c.Gamepad.AXIS_3 = 3,
    c.Gamepad.AXIS_4 = 4,
    c.Gamepad.AXIS_5 = 5,
    c.Gamepad.AXIS_6 = 6,
    c.Gamepad.AXIS_7 = 7,
    c.Gamepad.AXIS_8 = 8,
    c.Gamepad.AXIS_9 = 9,
    c.Gamepad.XBOX360_A = 0,
    c.Gamepad.XBOX360_B = 1,
    c.Gamepad.XBOX360_X = 2,
    c.Gamepad.XBOX360_Y = 3,
    c.Gamepad.XBOX360_LEFT_BUMPER = 4,
    c.Gamepad.XBOX360_RIGHT_BUMPER = 5,
    c.Gamepad.XBOX360_LEFT_TRIGGER = 6,
    c.Gamepad.XBOX360_RIGHT_TRIGGER = 7,
    c.Gamepad.XBOX360_BACK = 8,
    c.Gamepad.XBOX360_START = 9,
    c.Gamepad.XBOX360_STICK_LEFT_BUTTON = 10,
    c.Gamepad.XBOX360_STICK_RIGHT_BUTTON = 11,
    c.Gamepad.XBOX360_DPAD_LEFT = 14,
    c.Gamepad.XBOX360_DPAD_RIGHT = 15,
    c.Gamepad.XBOX360_DPAD_UP = 12,
    c.Gamepad.XBOX360_DPAD_DOWN = 13,
    c.Gamepad.XBOX360_STICK_LEFT_X = 0,
    c.Gamepad.XBOX360_STICK_LEFT_Y = 1,
    c.Gamepad.XBOX360_STICK_RIGHT_X = 2,
    c.Gamepad.XBOX360_STICK_RIGHT_Y = 3,
    c.Gamepad.PS3XC_X = 0,
    c.Gamepad.PS3XC_CIRCLE = 1,
    c.Gamepad.PS3XC_SQUARE = 2,
    c.Gamepad.PS3XC_TRIANGLE = 3,
    c.Gamepad.PS3XC_L1 = 4,
    c.Gamepad.PS3XC_R1 = 5,
    c.Gamepad.PS3XC_L2 = 6,
    c.Gamepad.PS3XC_R2 = 7,
    c.Gamepad.PS3XC_SELECT = 8,
    c.Gamepad.PS3XC_START = 9,
    c.Gamepad.PS3XC_STICK_LEFT_BUTTON = 10,
    c.Gamepad.PS3XC_STICK_RIGHT_BUTTON = 11,
    c.Gamepad.PS3XC_DPAD_UP = 12,
    c.Gamepad.PS3XC_DPAD_DOWN = 13,
    c.Gamepad.PS3XC_DPAD_LEFT = 14,
    c.Gamepad.PS3XC_DPAD_RIGHT = 15,
    c.Gamepad.PS3XC_STICK_LEFT_X = 0,
    c.Gamepad.PS3XC_STICK_LEFT_Y = 1,
    c.Gamepad.PS3XC_STICK_RIGHT_X = 2,
    c.Gamepad.PS3XC_STICK_RIGHT_Y = 3,
    c.SinglePad = function(a, b) {
        this.game = a,
        this.index = null,
        this.connected = !1,
        this.callbackContext = this,
        this.onConnectCallback = null,
        this.onDisconnectCallback = null,
        this.onDownCallback = null,
        this.onUpCallback = null,
        this.onAxisCallback = null,
        this.onFloatCallback = null,
        this.deadZone = .26,
        this._padParent = b,
        this._rawPad = null,
        this._prevTimestamp = null,
        this._buttons = [],
        this._buttonsLen = 0,
        this._axes = [],
        this._axesLen = 0
    },
    c.SinglePad.prototype = {
        addCallbacks: function(a, b) {
            "undefined" != typeof b && (this.onConnectCallback = "function" == typeof b.onConnect ? b.onConnect: this.onConnectCallback, this.onDisconnectCallback = "function" == typeof b.onDisconnect ? b.onDisconnect: this.onDisconnectCallback, this.onDownCallback = "function" == typeof b.onDown ? b.onDown: this.onDownCallback, this.onUpCallback = "function" == typeof b.onUp ? b.onUp: this.onUpCallback, this.onAxisCallback = "function" == typeof b.onAxis ? b.onAxis: this.onAxisCallback, this.onFloatCallback = "function" == typeof b.onFloat ? b.onFloat: this.onFloatCallback)
        },
        getButton: function(a) {
            return this._buttons[a] ? this._buttons[a] : null
        },
        pollStatus: function() {
            if (this.connected && this.game.input.enabled && this.game.input.gamepad.enabled && (!this._rawPad.timestamp || this._rawPad.timestamp !== this._prevTimestamp)) {
                for (var a = 0; a < this._buttonsLen; a++) {
                    var b = isNaN(this._rawPad.buttons[a]) ? this._rawPad.buttons[a].value: this._rawPad.buttons[a];
                    b !== this._buttons[a].value && (1 === b ? this.processButtonDown(a, b) : 0 === b ? this.processButtonUp(a, b) : this.processButtonFloat(a, b))
                }
                for (var c = 0; c < this._axesLen; c++) {
                    var d = this._rawPad.axes[c];
                    d > 0 && d > this.deadZone || 0 > d && d < -this.deadZone ? this.processAxisChange(c, d) : this.processAxisChange(c, 0)
                }
                this._prevTimestamp = this._rawPad.timestamp
            }
        },
        connect: function(a) {
            var b = !this.connected;
            this.connected = !0,
            this.index = a.index,
            this._rawPad = a,
            this._buttons = [],
            this._buttonsLen = a.buttons.length,
            this._axes = [],
            this._axesLen = a.axes.length;
            for (var d = 0; d < this._axesLen; d++) this._axes[d] = a.axes[d];
            for (var e in a.buttons) e = parseInt(e, 10),
            this._buttons[e] = new c.GamepadButton(this, e);
            b && this._padParent.onConnectCallback && this._padParent.onConnectCallback.call(this._padParent.callbackContext, this.index),
            b && this.onConnectCallback && this.onConnectCallback.call(this.callbackContext)
        },
        disconnect: function() {
            var a = this.connected,
            b = this.index;
            this.connected = !1,
            this.index = null,
            this._rawPad = void 0;
            for (var c = 0; c < this._buttonsLen; c++) this._buttons[c].destroy();
            this._buttons = [],
            this._buttonsLen = 0,
            this._axes = [],
            this._axesLen = 0,
            a && this._padParent.onDisconnectCallback && this._padParent.onDisconnectCallback.call(this._padParent.callbackContext, b),
            a && this.onDisconnectCallback && this.onDisconnectCallback.call(this.callbackContext)
        },
        destroy: function() {
            this._rawPad = void 0;
            for (var a = 0; a < this._buttonsLen; a++) this._buttons[a].destroy();
            this._buttons = [],
            this._buttonsLen = 0,
            this._axes = [],
            this._axesLen = 0,
            this.onConnectCallback = null,
            this.onDisconnectCallback = null,
            this.onDownCallback = null,
            this.onUpCallback = null,
            this.onAxisCallback = null,
            this.onFloatCallback = null
        },
        processAxisChange: function(a, b) {
            this._axes[a] !== b && (this._axes[a] = b, this._padParent.onAxisCallback && this._padParent.onAxisCallback.call(this._padParent.callbackContext, this, a, b), this.onAxisCallback && this.onAxisCallback.call(this.callbackContext, this, a, b))
        },
        processButtonDown: function(a, b) {
            this._padParent.onDownCallback && this._padParent.onDownCallback.call(this._padParent.callbackContext, a, b, this.index),
            this.onDownCallback && this.onDownCallback.call(this.callbackContext, a, b),
            this._buttons[a] && this._buttons[a].processButtonDown(b)
        },
        processButtonUp: function(a, b) {
            this._padParent.onUpCallback && this._padParent.onUpCallback.call(this._padParent.callbackContext, a, b, this.index),
            this.onUpCallback && this.onUpCallback.call(this.callbackContext, a, b),
            this._buttons[a] && this._buttons[a].processButtonUp(b)
        },
        processButtonFloat: function(a, b) {
            this._padParent.onFloatCallback && this._padParent.onFloatCallback.call(this._padParent.callbackContext, a, b, this.index),
            this.onFloatCallback && this.onFloatCallback.call(this.callbackContext, a, b),
            this._buttons[a] && this._buttons[a].processButtonFloat(b)
        },
        axis: function(a) {
            return this._axes[a] ? this._axes[a] : !1
        },
        isDown: function(a) {
            return this._buttons[a] ? this._buttons[a].isDown: !1
        },
        isUp: function(a) {
            return this._buttons[a] ? this._buttons[a].isUp: !1
        },
        justReleased: function(a, b) {
            return this._buttons[a] ? this._buttons[a].justReleased(b) : void 0
        },
        justPressed: function(a, b) {
            return this._buttons[a] ? this._buttons[a].justPressed(b) : void 0
        },
        buttonValue: function(a) {
            return this._buttons[a] ? this._buttons[a].value: null
        },
        reset: function() {
            for (var a = 0; a < this._axes.length; a++) this._axes[a] = 0
        }
    },
    c.SinglePad.prototype.constructor = c.SinglePad,
    c.GamepadButton = function(a, b) {
        this.pad = a,
        this.game = a.game,
        this.isDown = !1,
        this.isUp = !0,
        this.timeDown = 0,
        this.duration = 0,
        this.timeUp = 0,
        this.repeats = 0,
        this.value = 0,
        this.buttonCode = b,
        this.onDown = new c.Signal,
        this.onUp = new c.Signal,
        this.onFloat = new c.Signal
    },
    c.GamepadButton.prototype = {
        processButtonDown: function(a) {
            this.isDown = !0,
            this.isUp = !1,
            this.timeDown = this.game.time.time,
            this.duration = 0,
            this.repeats = 0,
            this.value = a,
            this.onDown.dispatch(this, a)
        },
        processButtonUp: function(a) {
            this.isDown = !1,
            this.isUp = !0,
            this.timeUp = this.game.time.time,
            this.value = a,
            this.onUp.dispatch(this, a)
        },
        processButtonFloat: function(a) {
            this.value = a,
            this.onFloat.dispatch(this, a)
        },
        justPressed: function(a) {
            return a = a || 250,
            this.isDown === !0 && this.timeDown + a > this.game.time.time
        },
        justReleased: function(a) {
            return a = a || 250,
            this.isUp === !0 && this.timeUp + a > this.game.time.time
        },
        reset: function() {
            this.isDown = !1,
            this.isUp = !0,
            this.timeDown = this.game.time.time,
            this.duration = 0,
            this.repeats = 0
        },
        destroy: function() {
            this.onDown.dispose(),
            this.onUp.dispose(),
            this.onFloat.dispose(),
            this.pad = null,
            this.game = null
        }
    },
    c.GamepadButton.prototype.constructor = c.GamepadButton,
    c.Key = function(a, b) {
        this.game = a,
        this._enabled = !0,
        this.event = null,
        this.isDown = !1,
        this.isUp = !0,
        this.altKey = !1,
        this.ctrlKey = !1,
        this.shiftKey = !1,
        this.timeDown = 0,
        this.duration = 0,
        this.timeUp = -2500,
        this.repeats = 0,
        this.keyCode = b,
        this.onDown = new c.Signal,
        this.onHoldCallback = null,
        this.onHoldContext = null,
        this.onUp = new c.Signal,
        this._justDown = !1,
        this._justUp = !1
    },
    c.Key.prototype = {
        update: function() {
            this._enabled && this.isDown && (this.duration = this.game.time.time - this.timeDown, this.repeats++, this.onHoldCallback && this.onHoldCallback.call(this.onHoldContext, this))
        },
        processKeyDown: function(a) {
            this._enabled && (this.event = a, this.isDown || (this.altKey = a.altKey, this.ctrlKey = a.ctrlKey, this.shiftKey = a.shiftKey, this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.duration = 0, this.repeats = 0, this._justDown = !0, this.onDown.dispatch(this)))
        },
        processKeyUp: function(a) {
            this._enabled && (this.event = a, this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.duration = this.game.time.time - this.timeDown, this._justUp = !0, this.onUp.dispatch(this)))
        },
        reset: function(a) {
            "undefined" == typeof a && (a = !0),
            this.isDown = !1,
            this.isUp = !0,
            this.timeUp = this.game.time.time,
            this.duration = 0,
            this._enabled = !0,
            this._justDown = !1,
            this._justUp = !1,
            a && (this.onDown.removeAll(), this.onUp.removeAll(), this.onHoldCallback = null, this.onHoldContext = null)
        },
        downDuration: function(a) {
            return "undefined" == typeof a && (a = 50),
            this.isDown && this.duration < a
        },
        upDuration: function(a) {
            return "undefined" == typeof a && (a = 50),
            !this.isDown && this.game.time.time - this.timeUp < a
        }
    },
    Object.defineProperty(c.Key.prototype, "justDown", {
        get: function() {
            var a = this._justDown;
            return this._justDown = !1,
            a
        }
    }),
    Object.defineProperty(c.Key.prototype, "justUp", {
        get: function() {
            var a = this._justUp;
            return this._justUp = !1,
            a
        }
    }),
    Object.defineProperty(c.Key.prototype, "enabled", {
        get: function() {
            return this._enabled
        },
        set: function(a) {
            a = !!a,
            a !== this._enabled && (a || this.reset(!1), this._enabled = a)
        }
    }),
    c.Key.prototype.constructor = c.Key,
    c.Keyboard = function(a) {
        this.game = a,
        this.enabled = !0,
        this.event = null,
        this.pressEvent = null,
        this.callbackContext = this,
        this.onDownCallback = null,
        this.onPressCallback = null,
        this.onUpCallback = null,
        this._keys = [],
        this._capture = [],
        this._onKeyDown = null,
        this._onKeyPress = null,
        this._onKeyUp = null,
        this._i = 0,
        this._k = 0
    },
    c.Keyboard.prototype = {
        addCallbacks: function(a, b, c, d) {
            this.callbackContext = a,
            "undefined" != typeof b && (this.onDownCallback = b),
            "undefined" != typeof c && (this.onUpCallback = c),
            "undefined" != typeof d && (this.onPressCallback = d)
        },
        addKey: function(a) {
            return this._keys[a] || (this._keys[a] = new c.Key(this.game, a), this.addKeyCapture(a)),
            this._keys[a]
        },
        removeKey: function(a) {
            this._keys[a] && (this._keys[a] = null, this.removeKeyCapture(a))
        },
        createCursorKeys: function() {
            return {
                up: this.addKey(c.Keyboard.UP),
                down: this.addKey(c.Keyboard.DOWN),
                left: this.addKey(c.Keyboard.LEFT),
                right: this.addKey(c.Keyboard.RIGHT)
            }
        },
        start: function() {
            if (!this.game.device.cocoonJS && null === this._onKeyDown) {
                var a = this;
                this._onKeyDown = function(b) {
                    return a.processKeyDown(b)
                },
                this._onKeyUp = function(b) {
                    return a.processKeyUp(b)
                },
                this._onKeyPress = function(b) {
                    return a.processKeyPress(b)
                },
                window.addEventListener("keydown", this._onKeyDown, !1),
                window.addEventListener("keyup", this._onKeyUp, !1),
                window.addEventListener("keypress", this._onKeyPress, !1)
            }
        },
        stop: function() {
            window.removeEventListener("keydown", this._onKeyDown),
            window.removeEventListener("keyup", this._onKeyUp),
            window.removeEventListener("keypress", this._onKeyPress),
            this._onKeyDown = null,
            this._onKeyUp = null,
            this._onKeyPress = null
        },
        destroy: function() {
            this.stop(),
            this.clearCaptures(),
            this._keys.length = 0,
            this._i = 0
        },
        addKeyCapture: function(a) {
            if ("object" == typeof a) for (var b in a) this._capture[a[b]] = !0;
            else this._capture[a] = !0
        },
        removeKeyCapture: function(a) {
            delete this._capture[a]
        },
        clearCaptures: function() {
            this._capture = {}
        },
        update: function() {
            for (this._i = this._keys.length; this._i--;) this._keys[this._i] && this._keys[this._i].update()
        },
        processKeyDown: function(a) {
            this.event = a,
            this.game.input.enabled && this.enabled && (this._capture[a.keyCode] && a.preventDefault(), this._keys[a.keyCode] || (this._keys[a.keyCode] = new c.Key(this.game, a.keyCode)), this._keys[a.keyCode].processKeyDown(a), this._k = a.keyCode, this.onDownCallback && this.onDownCallback.call(this.callbackContext, a))
        },
        processKeyPress: function(a) {
            this.pressEvent = a,
            this.game.input.enabled && this.enabled && this.onPressCallback && this.onPressCallback.call(this.callbackContext, String.fromCharCode(a.charCode), a)
        },
        processKeyUp: function(a) {
            this.event = a,
            this.game.input.enabled && this.enabled && (this._capture[a.keyCode] && a.preventDefault(), this._keys[a.keyCode] || (this._keys[a.keyCode] = new c.Key(this.game, a.keyCode)), this._keys[a.keyCode].processKeyUp(a), this.onUpCallback && this.onUpCallback.call(this.callbackContext, a))
        },
        reset: function(a) {
            "undefined" == typeof a && (a = !0),
            this.event = null;
            for (var b = this._keys.length; b--;) this._keys[b] && this._keys[b].reset(a)
        },
        downDuration: function(a, b) {
            return this._keys[a] ? this._keys[a].downDuration(b) : null
        },
        upDuration: function(a, b) {
            return this._keys[a] ? this._keys[a].upDuration(b) : null
        },
        isDown: function(a) {
            return this._keys[a] ? this._keys[a].isDown: null
        }
    },
    Object.defineProperty(c.Keyboard.prototype, "disabled", {
        get: function() {
            return ! this.enabled
        },
        set: function(a) {
            this.enabled = !a
        }
    }),
    Object.defineProperty(c.Keyboard.prototype, "lastChar", {
        get: function() {
            return 32 === this.event.charCode ? "": String.fromCharCode(this.pressEvent.charCode)
        }
    }),
    Object.defineProperty(c.Keyboard.prototype, "lastKey", {
        get: function() {
            return this._keys[this._k]
        }
    }),
    c.Keyboard.prototype.constructor = c.Keyboard,
    c.Keyboard.A = "A".charCodeAt(0),
    c.Keyboard.B = "B".charCodeAt(0),
    c.Keyboard.C = "C".charCodeAt(0),
    c.Keyboard.D = "D".charCodeAt(0),
    c.Keyboard.E = "E".charCodeAt(0),
    c.Keyboard.F = "F".charCodeAt(0),
    c.Keyboard.G = "G".charCodeAt(0),
    c.Keyboard.H = "H".charCodeAt(0),
    c.Keyboard.I = "I".charCodeAt(0),
    c.Keyboard.J = "J".charCodeAt(0),
    c.Keyboard.K = "K".charCodeAt(0),
    c.Keyboard.L = "L".charCodeAt(0),
    c.Keyboard.M = "M".charCodeAt(0),
    c.Keyboard.N = "N".charCodeAt(0),
    c.Keyboard.O = "O".charCodeAt(0),
    c.Keyboard.P = "P".charCodeAt(0),
    c.Keyboard.Q = "Q".charCodeAt(0),
    c.Keyboard.R = "R".charCodeAt(0),
    c.Keyboard.S = "S".charCodeAt(0),
    c.Keyboard.T = "T".charCodeAt(0),
    c.Keyboard.U = "U".charCodeAt(0),
    c.Keyboard.V = "V".charCodeAt(0),
    c.Keyboard.W = "W".charCodeAt(0),
    c.Keyboard.X = "X".charCodeAt(0),
    c.Keyboard.Y = "Y".charCodeAt(0),
    c.Keyboard.Z = "Z".charCodeAt(0),
    c.Keyboard.ZERO = "0".charCodeAt(0),
    c.Keyboard.ONE = "1".charCodeAt(0),
    c.Keyboard.TWO = "2".charCodeAt(0),
    c.Keyboard.THREE = "3".charCodeAt(0),
    c.Keyboard.FOUR = "4".charCodeAt(0),
    c.Keyboard.FIVE = "5".charCodeAt(0),
    c.Keyboard.SIX = "6".charCodeAt(0),
    c.Keyboard.SEVEN = "7".charCodeAt(0),
    c.Keyboard.EIGHT = "8".charCodeAt(0),
    c.Keyboard.NINE = "9".charCodeAt(0),
    c.Keyboard.NUMPAD_0 = 96,
    c.Keyboard.NUMPAD_1 = 97,
    c.Keyboard.NUMPAD_2 = 98,
    c.Keyboard.NUMPAD_3 = 99,
    c.Keyboard.NUMPAD_4 = 100,
    c.Keyboard.NUMPAD_5 = 101,
    c.Keyboard.NUMPAD_6 = 102,
    c.Keyboard.NUMPAD_7 = 103,
    c.Keyboard.NUMPAD_8 = 104,
    c.Keyboard.NUMPAD_9 = 105,
    c.Keyboard.NUMPAD_MULTIPLY = 106,
    c.Keyboard.NUMPAD_ADD = 107,
    c.Keyboard.NUMPAD_ENTER = 108,
    c.Keyboard.NUMPAD_SUBTRACT = 109,
    c.Keyboard.NUMPAD_DECIMAL = 110,
    c.Keyboard.NUMPAD_DIVIDE = 111,
    c.Keyboard.F1 = 112,
    c.Keyboard.F2 = 113,
    c.Keyboard.F3 = 114,
    c.Keyboard.F4 = 115,
    c.Keyboard.F5 = 116,
    c.Keyboard.F6 = 117,
    c.Keyboard.F7 = 118,
    c.Keyboard.F8 = 119,
    c.Keyboard.F9 = 120,
    c.Keyboard.F10 = 121,
    c.Keyboard.F11 = 122,
    c.Keyboard.F12 = 123,
    c.Keyboard.F13 = 124,
    c.Keyboard.F14 = 125,
    c.Keyboard.F15 = 126,
    c.Keyboard.COLON = 186,
    c.Keyboard.EQUALS = 187,
    c.Keyboard.UNDERSCORE = 189,
    c.Keyboard.QUESTION_MARK = 191,
    c.Keyboard.TILDE = 192,
    c.Keyboard.OPEN_BRACKET = 219,
    c.Keyboard.BACKWARD_SLASH = 220,
    c.Keyboard.CLOSED_BRACKET = 221,
    c.Keyboard.QUOTES = 222,
    c.Keyboard.BACKSPACE = 8,
    c.Keyboard.TAB = 9,
    c.Keyboard.CLEAR = 12,
    c.Keyboard.ENTER = 13,
    c.Keyboard.SHIFT = 16,
    c.Keyboard.CONTROL = 17,
    c.Keyboard.ALT = 18,
    c.Keyboard.CAPS_LOCK = 20,
    c.Keyboard.ESC = 27,
    c.Keyboard.SPACEBAR = 32,
    c.Keyboard.PAGE_UP = 33,
    c.Keyboard.PAGE_DOWN = 34,
    c.Keyboard.END = 35,
    c.Keyboard.HOME = 36,
    c.Keyboard.LEFT = 37,
    c.Keyboard.UP = 38,
    c.Keyboard.RIGHT = 39,
    c.Keyboard.DOWN = 40,
    c.Keyboard.INSERT = 45,
    c.Keyboard.DELETE = 46,
    c.Keyboard.HELP = 47,
    c.Keyboard.NUM_LOCK = 144,
    c.Keyboard.PLUS = 43,
    c.Keyboard.MINUS = 45,
    c.Component = function() {},
    c.Component.Angle = function() {},
    c.Component.Angle.prototype = {
        angle: {
            get: function() {
                return c.Math.wrapAngle(c.Math.radToDeg(this.rotation))
            },
            set: function(a) {
                this.rotation = c.Math.degToRad(c.Math.wrapAngle(a))
            }
        }
    },
    c.Component.Animation = function() {},
    c.Component.Animation.prototype = {
        play: function(a, b, c, d) {
            return this.animations ? this.animations.play(a, b, c, d) : void 0
        }
    },
    c.Component.AutoCull = function() {},
    c.Component.AutoCull.prototype = {
        autoCull: !1,
        inCamera: {
            get: function() {
                return this.autoCull || this.checkWorldBounds || (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y),
                this.game.world.camera.view.intersects(this._bounds)
            }
        }
    },
    c.Component.Bounds = function() {},
    c.Component.Bounds.prototype = {
        offsetX: {
            get: function() {
                return this.anchor.x * this.width
            }
        },
        offsetY: {
            get: function() {
                return this.anchor.y * this.height
            }
        },
        left: {
            get: function() {
                return this.x - this.offsetX
            }
        },
        right: {
            get: function() {
                return this.x + this.width - this.offsetX
            }
        },
        top: {
            get: function() {
                return this.y - this.offsetY
            }
        },
        bottom: {
            get: function() {
                return this.y + this.height - this.offsetY
            }
        }
    },
    c.Component.BringToTop = function() {},
    c.Component.BringToTop.prototype.bringToTop = function() {
        return this.parent && this.parent.bringToTop(this),
        this
    },
    c.Component.BringToTop.prototype.sendToBack = function() {
        return this.parent && this.parent.sendToBack(this),
        this
    },
    c.Component.BringToTop.prototype.moveUp = function() {
        return this.parent && this.parent.moveUp(this),
        this
    },
    c.Component.BringToTop.prototype.moveDown = function() {
        return this.parent && this.parent.moveDown(this),
        this
    },
    c.Component.Core = function() {},
    c.Component.Core.install = function(a) {
        c.Utils.mixinPrototype(this, c.Component.Core.prototype),
        this.components = {};
        for (var b = 0; b < a.length; b++) {
            var d = a[b],
            e = !1;
            "Destroy" === d && (e = !0),
            c.Utils.mixinPrototype(this, c.Component[d].prototype, e),
            this.components[d] = !0
        }
    },
    c.Component.Core.init = function(a, b, d, e, f) {
        this.game = a,
        this.key = e,
        this.position.set(b, d),
        this.world = new c.Point(b, d),
        this.previousPosition = new c.Point(b, d),
        this.events = new c.Events(this),
        this._bounds = new c.Rectangle,
        this.components.PhysicsBody && (this.body = this.body),
        this.components.Animation && (this.animations = new c.AnimationManager(this)),
        this.components.LoadTexture && null !== e && this.loadTexture(e, f),
        this.components.FixedToCamera && (this.cameraOffset = new c.Point(b, d))
    },
    c.Component.Core.preUpdate = function() {
        if (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !this.exists || !this.parent.exists) return this.renderOrderID = -1,
        !1;
        this.world.setTo(this.game.camera.x + this.worldTransform.tx, this.game.camera.y + this.worldTransform.ty),
        this.visible && (this.renderOrderID = this.game.stage.currentRenderOrderID++),
        this.animations && this.animations.update(),
        this.body && this.body.preUpdate();
        for (var a = 0; a < this.children.length; a++) this.children[a].preUpdate();
        return ! 0
    },
    c.Component.Core.prototype = {
        game: null,
        name: "",
        components: {},
        z: 0,
        events: void 0,
        animations: void 0,
        key: "",
        world: null,
        debug: !1,
        previousPosition: null,
        previousRotation: 0,
        renderOrderID: 0,
        fresh: !0,
        _bounds: null,
        _exists: !0,
        exists: {
            get: function() {
                return this._exists
            },
            set: function(a) {
                a ? (this._exists = !0, this.body && this.body.type === c.Physics.P2JS && this.body.addToWorld(), this.visible = !0) : (this._exists = !1, this.body && this.body.type === c.Physics.P2JS && this.body.removeFromWorld(), this.visible = !1)
            }
        },
        update: function() {},
        postUpdate: function() {
            this.key instanceof c.BitmapData && this.key.render(),
            this.components.PhysicsBody && c.Component.PhysicsBody.postUpdate.call(this),
            this.components.FixedToCamera && c.Component.FixedToCamera.postUpdate.call(this);
            for (var a = 0; a < this.children.length; a++) this.children[a].postUpdate()
        }
    },
    c.Component.Crop = function() {},
    c.Component.Crop.prototype = {
        cropRect: null,
        _crop: null,
        crop: function(a, b) {
            "undefined" == typeof b && (b = !1),
            a ? (b && null !== this.cropRect ? this.cropRect.setTo(a.x, a.y, a.width, a.height) : this.cropRect = b && null === this.cropRect ? new c.Rectangle(a.x, a.y, a.width, a.height) : a, this.updateCrop()) : (this._crop = null, this.cropRect = null, this.resetFrame())
        },
        updateCrop: function() {
            if (this.cropRect) {
                this._crop = c.Rectangle.clone(this.cropRect, this._crop),
                this._crop.x += this._frame.x,
                this._crop.y += this._frame.y;
                var a = Math.max(this._frame.x, this._crop.x),
                b = Math.max(this._frame.y, this._crop.y),
                d = Math.min(this._frame.right, this._crop.right) - a,
                e = Math.min(this._frame.bottom, this._crop.bottom) - b;
                this.texture.crop.x = a,
                this.texture.crop.y = b,
                this.texture.crop.width = d,
                this.texture.crop.height = e,
                this.texture.frame.width = Math.min(d, this.cropRect.width),
                this.texture.frame.height = Math.min(e, this.cropRect.height),
                this.texture.width = this.texture.frame.width,
                this.texture.height = this.texture.frame.height,
                this.texture._updateUvs()
            }
        }
    },
    c.Component.Delta = function() {},
    c.Component.Delta.prototype = {
        deltaX: {
            get: function() {
                return this.world.x - this.previousPosition.x
            }
        },
        deltaY: {
            get: function() {
                return this.world.y - this.previousPosition.y
            }
        },
        deltaZ: {
            get: function() {
                return this.rotation - this.previousRotation
            }
        }
    },
    c.Component.Destroy = function() {},
    c.Component.Destroy.prototype = {
        destroyPhase: !1,
        destroy: function(a) {
            if (null !== this.game && !this.destroyPhase) {
                "undefined" == typeof a && (a = !0),
                this.destroyPhase = !0,
                this.events && this.events.onDestroy$dispatch(this),
                this.parent && (this.parent instanceof c.Group ? this.parent.remove(this) : this.parent.removeChild(this)),
                this.input && this.input.destroy(),
                this.animations && this.animations.destroy(),
                this.body && this.body.destroy(),
                this.events && this.events.destroy();
                var b = this.children.length;
                if (a) for (; b--;) this.children[b].destroy(a);
                else for (; b--;) this.removeChild(this.children[b]);
                this._crop && (this._crop = null),
                this._frame && (this._frame = null),
                this.alive = !1,
                this.exists = !1,
                this.visible = !1,
                this.filters = null,
                this.mask = null,
                this.game = null,
                this.renderable = !1,
                this.transformCallback = null,
                this.transformCallbackContext = null,
                this.hitArea = null,
                this.parent = null,
                this.stage = null,
                this.worldTransform = null,
                this.filterArea = null,
                this._bounds = null,
                this._currentBounds = null,
                this._mask = null,
                this._destroyCachedSprite(),
                this.destroyPhase = !1
            }
        }
    },
    c.Events = function(a) {
        this.parent = a
    },
    c.Events.prototype = {
        destroy: function() {
            this._parent = null,
            this._onDestroy && this._onDestroy.dispose(),
            this._onAddedToGroup && this._onAddedToGroup.dispose(),
            this._onRemovedFromGroup && this._onRemovedFromGroup.dispose(),
            this._onRemovedFromWorld && this._onRemovedFromWorld.dispose(),
            this._onKilled && this._onKilled.dispose(),
            this._onRevived && this._onRevived.dispose(),
            this._onEnterBounds && this._onEnterBounds.dispose(),
            this._onOutOfBounds && this._onOutOfBounds.dispose(),
            this._onInputOver && this._onInputOver.dispose(),
            this._onInputOut && this._onInputOut.dispose(),
            this._onInputDown && this._onInputDown.dispose(),
            this._onInputUp && this._onInputUp.dispose(),
            this._onDragStart && this._onDragStart.dispose(),
            this._onDragStop && this._onDragStop.dispose(),
            this._onAnimationStart && this._onAnimationStart.dispose(),
            this._onAnimationComplete && this._onAnimationComplete.dispose(),
            this._onAnimationLoop && this._onAnimationLoop.dispose()
        },
        onAddedToGroup: null,
        onRemovedFromGroup: null,
        onRemovedFromWorld: null,
        onDestroy: null,
        onKilled: null,
        onRevived: null,
        onOutOfBounds: null,
        onEnterBounds: null,
        onInputOver: null,
        onInputOut: null,
        onInputDown: null,
        onInputUp: null,
        onDragStart: null,
        onDragStop: null,
        onAnimationStart: null,
        onAnimationComplete: null,
        onAnimationLoop: null
    },
    c.Events.prototype.constructor = c.Events;
    for (var e in c.Events.prototype) c.Events.prototype.hasOwnProperty(e) && 0 === e.indexOf("on") && null === c.Events.prototype[e] && !
    function(a, b) {
        "use strict";
        Object.defineProperty(c.Events.prototype, a, {
            get: function() {
                return this[b] || (this[b] = new c.Signal)
            }
        }),
        c.Events.prototype[a + "$dispatch"] = function() {
            return this[b] ? this[b].dispatch.apply(this[b], arguments) : null
        }
    } (e, "_" + e);
    c.Component.FixedToCamera = function() {},
    c.Component.FixedToCamera.postUpdate = function() {
        this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y)
    },
    c.Component.FixedToCamera.prototype = {
        _fixedToCamera: !1,
        fixedToCamera: {
            get: function() {
                return this._fixedToCamera
            },
            set: function(a) {
                a ? (this._fixedToCamera = !0, this.cameraOffset.set(this.x, this.y)) : this._fixedToCamera = !1
            }
        },
        cameraOffset: new c.Point
    },
    c.Component.Health = function() {},
    c.Component.Health.prototype = {
        health: 1,
        damage: function(a) {
            return this.alive && (this.health -= a, this.health <= 0 && this.kill()),
            this
        }
    },
    c.Component.InCamera = function() {},
    c.Component.InCamera.prototype = {
        inCamera: {
            get: function() {
                return this.game.world.camera.view.intersects(this._bounds)
            }
        }
    },
    c.Component.InputEnabled = function() {},
    c.Component.InputEnabled.prototype = {
        input: null,
        inputEnabled: {
            get: function() {
                return this.input && this.input.enabled
            },
            set: function(a) {
                a ? null === this.input ? (this.input = new c.InputHandler(this), this.input.start()) : this.input && !this.input.enabled && this.input.start() : this.input && this.input.enabled && this.input.stop()
            }
        }
    },
    c.Component.InWorld = function() {},
    c.Component.InWorld.preUpdate = function() {
        if ((this.autoCull || this.checkWorldBounds) && (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y, this.autoCull && (this.game.world.camera.view.intersects(this._bounds) ? (this.renderable = !0, this.game.world.camera.totalInView++) : this.renderable = !1), this.checkWorldBounds)) if (this._outOfBoundsFired && this.game.world.bounds.intersects(this._bounds)) this._outOfBoundsFired = !1,
        this.events.onEnterBounds$dispatch(this);
        else if (!this._outOfBoundsFired && !this.game.world.bounds.intersects(this._bounds) && (this._outOfBoundsFired = !0, this.events.onOutOfBounds$dispatch(this), this.outOfBoundsKill)) return this.kill(),
        !1;
        return ! 0
    },
    c.Component.InWorld.prototype = {
        checkWorldBounds: !1,
        outOfBoundsKill: !1,
        _outOfBoundsFired: !1,
        inWorld: {
            get: function() {
                return this.game.world.bounds.intersects(this.getBounds())
            }
        }
    },
    c.Component.LifeSpan = function() {},
    c.Component.LifeSpan.preUpdate = function() {
        return this.lifespan > 0 && (this.lifespan -= this.game.time.physicsElapsedMS, this.lifespan <= 0) ? (this.kill(), !1) : !0
    },
    c.Component.LifeSpan.prototype = {
        alive: !0,
        lifespan: 0,
        revive: function(a) {
            return "undefined" == typeof a && (a = 1),
            this.alive = !0,
            this.exists = !0,
            this.visible = !0,
            "number" == typeof this.health && (this.health = a),
            this.events && this.events.onRevived$dispatch(this),
            this
        },
        kill: function() {
            return this.alive = !1,
            this.exists = !1,
            this.visible = !1,
            this.events && this.events.onKilled$dispatch(this),
            this
        }
    },
    c.Component.LoadTexture = function() {},
    c.Component.LoadTexture.prototype = {
        _frame: null,
        loadTexture: function(a, b, d) {
            b = b || 0,
            (d || "undefined" == typeof d) && this.animations && this.animations.stop(),
            this.key = a;
            var e = !0,
            f = !this.texture.baseTexture.scaleMode,
            g = !1;
            c.RenderTexture && a instanceof c.RenderTexture ? (this.key = a.key, this.setTexture(a), g = !0) : c.BitmapData && a instanceof c.BitmapData ? (this.setTexture(a.texture), this.game.cache.getFrameData(a.key, c.Cache.BITMAPDATA) && (e = !this.animations.loadFrameData(this.game.cache.getFrameData(a.key, c.Cache.BITMAPDATA), b))) : a instanceof PIXI.Texture ? this.setTexture(a) : null === a || "undefined" == typeof a ? (this.key = "__default", this.setTexture(PIXI.TextureCache[this.key])) : "string" != typeof a || this.game.cache.checkImageKey(a) ? (this.setTexture(new PIXI.Texture(PIXI.BaseTextureCache[a])), e = !this.animations.loadFrameData(this.game.cache.getFrameData(a), b)) : (console.warn("Texture with key '" + a + "' not found."), this.key = "__missing", this.setTexture(PIXI.TextureCache[this.key])),
            g || this.texture.baseTexture.dirty(),
            e && (this._frame = c.Rectangle.clone(this.texture.frame)),
            f || (this.texture.baseTexture.scaleMode = 1)
        },
        setFrame: function(a) {
            this._frame = a,
            this.texture.frame.x = a.x,
            this.texture.frame.y = a.y,
            this.texture.frame.width = a.width,
            this.texture.frame.height = a.height,
            this.texture.crop.x = a.x,
            this.texture.crop.y = a.y,
            this.texture.crop.width = a.width,
            this.texture.crop.height = a.height,
            a.trimmed ? (this.texture.trim ? (this.texture.trim.x = a.spriteSourceSizeX, this.texture.trim.y = a.spriteSourceSizeY, this.texture.trim.width = a.sourceSizeW, this.texture.trim.height = a.sourceSizeH) : this.texture.trim = {
                x: a.spriteSourceSizeX,
                y: a.spriteSourceSizeY,
                width: a.sourceSizeW,
                height: a.sourceSizeH
            },
            this.texture.width = a.sourceSizeW, this.texture.height = a.sourceSizeH, this.texture.frame.width = a.sourceSizeW, this.texture.frame.height = a.sourceSizeH) : !a.trimmed && this.texture.trim && (this.texture.trim = null),
            this.cropRect && this.updateCrop(),
            16777215 !== this.tint && (this.cachedTint = -1),
            this.texture._updateUvs()
        },
        resetFrame: function() {
            this._frame && this.setFrame(this._frame)
        },
        frame: {
            get: function() {
                return this.animations.frame
            },
            set: function(a) {
                this.animations.frame = a
            }
        },
        frameName: {
            get: function() {
                return this.animations.frameName
            },
            set: function(a) {
                this.animations.frameName = a
            }
        }
    },
    c.Component.Overlap = function() {},
    c.Component.Overlap.prototype = {
        overlap: function(a) {
            return c.Rectangle.intersects(this.getBounds(), a.getBounds())
        }
    },
    c.Component.PhysicsBody = function() {},
    c.Component.PhysicsBody.preUpdate = function() {
        return this.fresh && this.exists ? (this.world.setTo(this.parent.position.x + this.position.x, this.parent.position.y + this.position.y), this.worldTransform.tx = this.world.x, this.worldTransform.ty = this.world.y, this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, this.body && this.body.preUpdate(), this.fresh = !1, !1) : (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, this._exists && this.parent.exists ? !0 : (this.renderOrderID = -1, !1))
    },
    c.Component.PhysicsBody.postUpdate = function() {
        this.exists && this.body && this.body.postUpdate()
    },
    c.Component.PhysicsBody.prototype = {
        body: null,
        x: {
            get: function() {
                return this.position.x
            },
            set: function(a) {
                this.position.x = a,
                this.body && !this.body.dirty && (this.body._reset = !0)
            }
        },
        y: {
            get: function() {
                return this.position.y
            },
            set: function(a) {
                this.position.y = a,
                this.body && !this.body.dirty && (this.body._reset = !0)
            }
        }
    },
    c.Component.Reset = function() {},
    c.Component.Reset.prototype.reset = function(a, b, c) {
        return "undefined" == typeof c && (c = 1),
        this.world.set(a, b),
        this.position.set(a, b),
        this.fresh = !0,
        this.exists = !0,
        this.visible = !0,
        this.renderable = !0,
        this.components.InWorld && (this._outOfBoundsFired = !1),
        this.components.LifeSpan && (this.alive = !0, this.health = c),
        this.components.PhysicsBody && this.body && this.body.reset(a, b, !1, !1),
        this
    },
    c.Component.ScaleMinMax = function() {},
    c.Component.ScaleMinMax.prototype = {
        transformCallback: this.checkTransform,
        transformCallbackContext: this,
        scaleMin: null,
        scaleMax: null,
        checkTransform: function(a) {
            this.scaleMin && (a.a < this.scaleMin.x && (a.a = this.scaleMin.x), a.d < this.scaleMin.y && (a.d = this.scaleMin.y)),
            this.scaleMax && (a.a > this.scaleMax.x && (a.a = this.scaleMax.x), a.d > this.scaleMax.y && (a.d = this.scaleMax.y))
        },
        setScaleMinMax: function(a, b, d, e) {
            "undefined" == typeof b ? b = d = e = a: "undefined" == typeof d && (d = e = b, b = a),
            null === a ? this.scaleMin = null: this.scaleMin ? this.scaleMin.set(a, b) : this.scaleMin = new c.Point(a, b),
            null === d ? this.scaleMax = null: this.scaleMax ? this.scaleMax.set(d, e) : this.scaleMax = new c.Point(d, e)
        }
    },
    c.Component.Smoothed = function() {},
    c.Component.Smoothed.prototype = {
        smoothed: {
            get: function() {
                return ! this.texture.baseTexture.scaleMode
            },
            set: function(a) {
                a ? this.texture && (this.texture.baseTexture.scaleMode = 0) : this.texture && (this.texture.baseTexture.scaleMode = 1)
            }
        }
    },
    c.GameObjectFactory = function(a) {
        this.game = a,
        this.world = this.game.world
    },
    c.GameObjectFactory.prototype = {
        existing: function(a) {
            return this.world.add(a)
        },
        image: function(a, b, d, e, f) {
            return "undefined" == typeof f && (f = this.world),
            f.add(new c.Image(this.game, a, b, d, e))
        },
        sprite: function(a, b, c, d, e) {
            return "undefined" == typeof e && (e = this.world),
            e.create(a, b, c, d)
        },
        tween: function(a) {
            return this.game.tweens.create(a)
        },
        group: function(a, b, d, e, f) {
            return new c.Group(this.game, a, b, d, e, f)
        },
        physicsGroup: function(a, b, d, e) {
            return new c.Group(this.game, b, d, e, !0, a)
        },
        spriteBatch: function(a, b, d) {
            return "undefined" == typeof a && (a = null),
            "undefined" == typeof b && (b = "group"),
            "undefined" == typeof d && (d = !1),
            new c.SpriteBatch(this.game, a, b, d)
        },
        audio: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        sound: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        audioSprite: function(a) {
            return this.game.sound.addSprite(a)
        },
        tileSprite: function(a, b, d, e, f, g, h) {
            return "undefined" == typeof h && (h = this.world),
            h.add(new c.TileSprite(this.game, a, b, d, e, f, g))
        },
        rope: function(a, b, d, e, f, g) {
            return "undefined" == typeof g && (g = this.world),
            g.add(new c.Rope(this.game, a, b, d, e, f))
        },
        text: function(a, b, d, e, f) {
            return "undefined" == typeof f && (f = this.world),
            f.add(new c.Text(this.game, a, b, d, e))
        },
        button: function(a, b, d, e, f, g, h, i, j, k) {
            return "undefined" == typeof k && (k = this.world),
            k.add(new c.Button(this.game, a, b, d, e, f, g, h, i, j))
        },
        graphics: function(a, b, d) {
            return "undefined" == typeof d && (d = this.world),
            d.add(new c.Graphics(this.game, a, b))
        },
        emitter: function(a, b, d) {
            return this.game.particles.add(new c.Particles.Arcade.Emitter(this.game, a, b, d))
        },
        retroFont: function(a, b, d, e, f, g, h, i, j) {
            return new c.RetroFont(this.game, a, b, d, e, f, g, h, i, j)
        },
        bitmapText: function(a, b, d, e, f, g) {
            return "undefined" == typeof g && (g = this.world),
            g.add(new c.BitmapText(this.game, a, b, d, e, f))
        },
        tilemap: function(a, b, d, e, f) {
            return new c.Tilemap(this.game, a, b, d, e, f)
        },
        renderTexture: function(a, b, d, e) { ("undefined" == typeof d || "" === d) && (d = this.game.rnd.uuid()),
            "undefined" == typeof e && (e = !1);
            var f = new c.RenderTexture(this.game, a, b, d);
            return e && this.game.cache.addRenderTexture(d, f),
            f
        },
        bitmapData: function(a, b, d, e) {
            "undefined" == typeof e && (e = !1),
            ("undefined" == typeof d || "" === d) && (d = this.game.rnd.uuid());
            var f = new c.BitmapData(this.game, d, a, b);
            return e && this.game.cache.addBitmapData(d, f),
            f
        },
        filter: function(a) {
            var b = Array.prototype.splice.call(arguments, 1),
            a = new c.Filter[a](this.game);
            return a.init.apply(a, b),
            a
        },
        plugin: function(a) {
            return this.game.plugins.add(a)
        }
    },
    c.GameObjectFactory.prototype.constructor = c.GameObjectFactory,
    c.GameObjectCreator = function(a) {
        this.game = a,
        this.world = this.game.world
    },
    c.GameObjectCreator.prototype = {
        image: function(a, b, d, e) {
            return new c.Image(this.game, a, b, d, e)
        },
        sprite: function(a, b, d, e) {
            return new c.Sprite(this.game, a, b, d, e)
        },
        tween: function(a) {
            return new c.Tween(a, this.game, this.game.tweens)
        },
        group: function(a, b, d, e, f) {
            return new c.Group(this.game, null, b, d, e, f)
        },
        spriteBatch: function(a, b, d) {
            return "undefined" == typeof b && (b = "group"),
            "undefined" == typeof d && (d = !1),
            new c.SpriteBatch(this.game, a, b, d)
        },
        audio: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        audioSprite: function(a) {
            return this.game.sound.addSprite(a)
        },
        sound: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        tileSprite: function(a, b, d, e, f, g) {
            return new c.TileSprite(this.game, a, b, d, e, f, g)
        },
        rope: function(a, b, d, e, f) {
            return new c.Rope(this.game, a, b, d, e, f)
        },
        text: function(a, b, d, e) {
            return new c.Text(this.game, a, b, d, e)
        },
        button: function(a, b, d, e, f, g, h, i, j) {
            return new c.Button(this.game, a, b, d, e, f, g, h, i, j)
        },
        graphics: function(a, b) {
            return new c.Graphics(this.game, a, b)
        },
        emitter: function(a, b, d) {
            return new c.Particles.Arcade.Emitter(this.game, a, b, d)
        },
        retroFont: function(a, b, d, e, f, g, h, i, j) {
            return new c.RetroFont(this.game, a, b, d, e, f, g, h, i, j)
        },
        bitmapText: function(a, b, d, e, f) {
            return new c.BitmapText(this.game, a, b, d, e, f)
        },
        tilemap: function(a, b, d, e, f) {
            return new c.Tilemap(this.game, a, b, d, e, f)
        },
        renderTexture: function(a, b, d, e) { ("undefined" == typeof d || "" === d) && (d = this.game.rnd.uuid()),
            "undefined" == typeof e && (e = !1);
            var f = new c.RenderTexture(this.game, a, b, d);
            return e && this.game.cache.addRenderTexture(d, f),
            f
        },
        bitmapData: function(a, b, d, e) {
            "undefined" == typeof e && (e = !1),
            ("undefined" == typeof d || "" === d) && (d = this.game.rnd.uuid());
            var f = new c.BitmapData(this.game, d, a, b);
            return e && this.game.cache.addBitmapData(d, f),
            f
        },
        filter: function(a) {
            var b = Array.prototype.splice.call(arguments, 1),
            a = new c.Filter[a](this.game);
            return a.init.apply(a, b),
            a
        }
    },
    c.GameObjectCreator.prototype.constructor = c.GameObjectCreator,
    c.Sprite = function(a, b, d, e, f) {
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        this.type = c.SPRITE,
        this.physicsType = c.SPRITE,
        PIXI.Sprite.call(this, PIXI.TextureCache.__default),
        c.Component.Core.init.call(this, a, b, d, e, f)
    },
    c.Sprite.prototype = Object.create(PIXI.Sprite.prototype),
    c.Sprite.prototype.constructor = c.Sprite,
    c.Component.Core.install.call(c.Sprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]),
    c.Sprite.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Sprite.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Sprite.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Sprite.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Sprite.prototype.preUpdate = function() {
        return this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.Image = function(a, b, d, e, f) {
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        this.type = c.IMAGE,
        PIXI.Sprite.call(this, PIXI.TextureCache.__default),
        c.Component.Core.init.call(this, a, b, d, e, f)
    },
    c.Image.prototype = Object.create(PIXI.Sprite.prototype),
    c.Image.prototype.constructor = c.Image,
    c.Component.Core.install.call(c.Image.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Destroy", "FixedToCamera", "InputEnabled", "LifeSpan", "LoadTexture", "Overlap", "Reset", "Smoothed"]),
    c.Image.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Image.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Image.prototype.preUpdate = function() {
        return this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.TileSprite = function(a, b, d, e, f, g, h) {
        b = b || 0,
        d = d || 0,
        e = e || 256,
        f = f || 256,
        g = g || null,
        h = h || null,
        this.type = c.TILESPRITE,
        this._scroll = new c.Point,
        PIXI.TilingSprite.call(this, PIXI.TextureCache.__default, e, f),
        c.Component.Core.init.call(this, a, b, d, g, h)
    },
    c.TileSprite.prototype = Object.create(PIXI.TilingSprite.prototype),
    c.TileSprite.prototype.constructor = c.TileSprite,
    c.Component.Core.install.call(c.TileSprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "Smoothed"]),
    c.TileSprite.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.TileSprite.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.TileSprite.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.TileSprite.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.TileSprite.prototype.preUpdate = function() {
        return 0 !== this._scroll.x && (this.tilePosition.x += this._scroll.x * this.game.time.physicsElapsed),
        0 !== this._scroll.y && (this.tilePosition.y += this._scroll.y * this.game.time.physicsElapsed),
        this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.TileSprite.prototype.autoScroll = function(a, b) {
        this._scroll.set(a, b)
    },
    c.TileSprite.prototype.stopScroll = function() {
        this._scroll.set(0, 0)
    },
    c.TileSprite.prototype.destroy = function(a) {
        c.Component.Destroy.prototype.destroy.call(this, a),
        PIXI.TilingSprite.prototype.destroy.call(this)
    },
    c.TileSprite.prototype.reset = function(a, b) {
        return c.Component.Reset.prototype.reset.call(this, a, b),
        this.tilePosition.x = 0,
        this.tilePosition.y = 0,
        this
    },
    c.Rope = function(a, b, d, e, f, g) {
        this.points = [],
        this.points = g,
        this._hasUpdateAnimation = !1,
        this._updateAnimationCallback = null,
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        this.type = c.ROPE,
        this._scroll = new c.Point,
        PIXI.Rope.call(this, e, this.points),
        c.Component.Core.init.call(this, a, b, d, e, f)
    },
    c.Rope.prototype = Object.create(PIXI.Rope.prototype),
    c.Rope.prototype.constructor = c.Rope,
    c.Component.Core.install.call(c.Rope.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]),
    c.Rope.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Rope.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Rope.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Rope.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Rope.prototype.preUpdate = function() {
        return 0 !== this._scroll.x && (this.tilePosition.x += this._scroll.x * this.game.time.physicsElapsed),
        0 !== this._scroll.y && (this.tilePosition.y += this._scroll.y * this.game.time.physicsElapsed),
        this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.Rope.prototype.update = function() {
        this._hasUpdateAnimation && this.updateAnimation.call(this)
    },
    c.Rope.prototype.reset = function(a, b) {
        return c.Component.Reset.prototype.reset.call(this, a, b),
        this.tilePosition.x = 0,
        this.tilePosition.y = 0,
        this
    },
    Object.defineProperty(c.Rope.prototype, "updateAnimation", {
        get: function() {
            return this._updateAnimation
        },
        set: function(a) {
            a && "function" == typeof a ? (this._hasUpdateAnimation = !0, this._updateAnimation = a) : (this._hasUpdateAnimation = !1, this._updateAnimation = null)
        }
    }),
    Object.defineProperty(c.Rope.prototype, "segments", {
        get: function() {
            for (var a, b, d, e, f, g, h, i, j = [], k = 0; k < this.points.length; k++) a = 4 * k,
            b = this.verticies[a],
            d = this.verticies[a + 1],
            e = this.verticies[a + 4],
            f = this.verticies[a + 3],
            g = c.Math.difference(b, e),
            h = c.Math.difference(d, f),
            b += this.world.x,
            d += this.world.y,
            i = new c.Rectangle(b, d, g, h),
            j.push(i);
            return j
        }
    }),
    c.Button = function(a, b, d, e, f, g, h, i, j, k) {
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        g = g || this,
        c.Image.call(this, a, b, d, e, i),
        this.type = c.BUTTON,
        this.physicsType = c.SPRITE,
        this._onOverFrame = null,
        this._onOutFrame = null,
        this._onDownFrame = null,
        this._onUpFrame = null,
        this.onOverSound = null,
        this.onOutSound = null,
        this.onDownSound = null,
        this.onUpSound = null,
        this.onOverSoundMarker = "",
        this.onOutSoundMarker = "",
        this.onDownSoundMarker = "",
        this.onUpSoundMarker = "",
        this.onInputOver = new c.Signal,
        this.onInputOut = new c.Signal,
        this.onInputDown = new c.Signal,
        this.onInputUp = new c.Signal,
        this.onOverMouseOnly = !1,
        this.freezeFrames = !1,
        this.forceOut = !1,
        this.inputEnabled = !0,
        this.input.start(0, !0),
        this.setFrames(h, i, j, k),
        null !== f && this.onInputUp.add(f, g),
        this.events.onInputOver.add(this.onInputOverHandler, this),
        this.events.onInputOut.add(this.onInputOutHandler, this),
        this.events.onInputDown.add(this.onInputDownHandler, this),
        this.events.onInputUp.add(this.onInputUpHandler, this),
        this.events.onRemovedFromWorld.add(this.removedFromWorld, this)
    },
    c.Button.prototype = Object.create(c.Image.prototype),
    c.Button.prototype.constructor = c.Button;
    var f = "Over",
    g = "Out",
    h = "Down",
    i = "Up";
    c.Button.prototype.clearFrames = function() {
        this.setFrames(null, null, null, null)
    },
    c.Button.prototype.removedFromWorld = function() {
        this.inputEnabled = !1
    },
    c.Button.prototype.setStateFrame = function(a, b, c) {
        var d = "_on" + a + "Frame";
        null != b ? (this[d] = b, c && this.changeStateFrame(a)) : this[d] = null
    },
    c.Button.prototype.changeStateFrame = function(a) {
        if (this.freezeFrames) return ! 1;
        var b = "_on" + a + "Frame",
        c = this[b];
        return "string" == typeof c ? (this.frameName = c, !0) : "number" == typeof c ? (this.frame = c, !0) : !1
    },
    c.Button.prototype.setFrames = function(a, b, c, d) {
        this.setStateFrame(f, a, this.input.pointerOver()),
        this.setStateFrame(g, b, !this.input.pointerOver()),
        this.setStateFrame(h, c, this.input.pointerDown()),
        this.setStateFrame(i, d, this.input.pointerUp())
    },
    c.Button.prototype.setStateSound = function(a, b, d) {
        var e = "on" + a + "Sound",
        f = "on" + a + "SoundMarker";
        b instanceof c.Sound || b instanceof c.AudioSprite ? (this[e] = b, this[f] = "string" == typeof d ? d: "") : (this[e] = null, this[f] = "")
    },
    c.Button.prototype.playStateSound = function(a) {
        var b = "on" + a + "Sound",
        c = this[b];
        if (c) {
            var d = "on" + a + "SoundMarker",
            e = this[d];
            return c.play(e),
            !0
        }
        return ! 1
    },
    c.Button.prototype.setSounds = function(a, b, c, d, e, j, k, l) {
        this.setStateSound(f, a, b),
        this.setStateSound(g, e, j),
        this.setStateSound(h, c, d),
        this.setStateSound(i, k, l)
    },
    c.Button.prototype.setOverSound = function(a, b) {
        this.setStateSound(f, a, b)
    },
    c.Button.prototype.setOutSound = function(a, b) {
        this.setStateSound(g, a, b)
    },
    c.Button.prototype.setDownSound = function(a, b) {
        this.setStateSound(h, a, b)
    },
    c.Button.prototype.setUpSound = function(a, b) {
        this.setStateSound(i, a, b)
    },
    c.Button.prototype.onInputOverHandler = function(a, b) {
        b.justReleased() || (this.changeStateFrame(f), (!this.onOverMouseOnly || b.isMouse) && (this.playStateSound(f), this.onInputOver && this.onInputOver.dispatch(this, b)))
    },
    c.Button.prototype.onInputOutHandler = function(a, b) {
        this.changeStateFrame(g),
        this.playStateSound(g),
        this.onInputOut && this.onInputOut.dispatch(this, b)
    },
    c.Button.prototype.onInputDownHandler = function(a, b) {
        this.changeStateFrame(h),
        this.playStateSound(h),
        this.onInputDown && this.onInputDown.dispatch(this, b)
    },
    c.Button.prototype.onInputUpHandler = function(a, b, c) {
        if (this.playStateSound(i), this.onInputUp && this.onInputUp.dispatch(this, b, c), !this.freezeFrames) if (this.forceOut) this.changeStateFrame(g);
        else {
            var d = this.changeStateFrame(i);
            d || this.changeStateFrame(c ? f: g)
        }
    },
    c.SpriteBatch = function(a, b, d, e) { ("undefined" == typeof b || null === b) && (b = a.world),
        PIXI.SpriteBatch.call(this),
        c.Group.call(this, a, b, d, e),
        this.type = c.SPRITEBATCH
    },
    c.SpriteBatch.prototype = c.Utils.extend(!0, c.SpriteBatch.prototype, c.Group.prototype, PIXI.SpriteBatch.prototype),
    c.SpriteBatch.prototype.constructor = c.SpriteBatch,
    c.Particle = function(a, b, d, e, f) {
        c.Sprite.call(this, a, b, d, e, f),
        this.autoScale = !1,
        this.scaleData = null,
        this._s = 0,
        this.autoAlpha = !1,
        this.alphaData = null,
        this._a = 0
    },
    c.Particle.prototype = Object.create(c.Sprite.prototype),
    c.Particle.prototype.constructor = c.Particle,
    c.Particle.prototype.update = function() {
        this.autoScale && (this._s--, this._s ? this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y) : this.autoScale = !1),
        this.autoAlpha && (this._a--, this._a ? this.alpha = this.alphaData[this._a].v: this.autoAlpha = !1)
    },
    c.Particle.prototype.onEmit = function() {},
    c.Particle.prototype.setAlphaData = function(a) {
        this.alphaData = a,
        this._a = a.length - 1,
        this.alpha = this.alphaData[this._a].v,
        this.autoAlpha = !0
    },
    c.Particle.prototype.setScaleData = function(a) {
        this.scaleData = a,
        this._s = a.length - 1,
        this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y),
        this.autoScale = !0
    },
    c.Particle.prototype.reset = function(a, b, d) {
        return c.Component.Reset.prototype.reset.call(this, a, b, d),
        this.alpha = 1,
        this.scale.set(1),
        this.autoScale = !1,
        this.autoAlpha = !1,
        this
    },
    c.BitmapData = function(a, b, d, e) {
        "undefined" == typeof d && (d = 256),
        "undefined" == typeof e && (e = 256),
        this.game = a,
        this.key = b,
        this.width = d,
        this.height = e,
        this.canvas = c.Canvas.create(d, e, "", !0),
        this.context = this.canvas.getContext("2d", {
            alpha: !0
        }),
        this.ctx = this.context,
        this.imageData = this.context.getImageData(0, 0, d, e),
        this.data = this.imageData.data,
        this.pixels = null,
        this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data,
        this.baseTexture = new PIXI.BaseTexture(this.canvas),
        this.texture = new PIXI.Texture(this.baseTexture),
        this.textureFrame = new c.Frame(0, 0, 0, d, e, "bitmapData", a.rnd.uuid()),
        this.texture.frame = this.textureFrame,
        this.type = c.BITMAPDATA,
        this.disableTextureUpload = !1,
        this.dirty = !1,
        this.cls = this.clear,
        this._image = null,
        this._pos = new c.Point,
        this._size = new c.Point,
        this._scale = new c.Point,
        this._rotate = 0,
        this._alpha = {
            prev: 1,
            current: 1
        },
        this._anchor = new c.Point,
        this._tempR = 0,
        this._tempG = 0,
        this._tempB = 0,
        this._circle = new c.Circle
    },
    c.BitmapData.prototype = {
        add: function(a) {
            if (Array.isArray(a)) for (var b = 0; b < a.length; b++) a[b].loadTexture && a[b].loadTexture(this);
            else a.loadTexture(this);
            return this
        },
        load: function(a) {
            return "string" == typeof a && (a = this.game.cache.getImage(a)),
            a ? (this.resize(a.width, a.height), this.cls(), this.draw(a), this.update(), this) : void 0
        },
        clear: function() {
            return this.context.clearRect(0, 0, this.width, this.height),
            this.dirty = !0,
            this
        },
        fill: function(a, b, c, d) {
            return "undefined" == typeof d && (d = 1),
            this.context.fillStyle = "rgba(" + a + "," + b + "," + c + "," + d + ")",
            this.context.fillRect(0, 0, this.width, this.height),
            this.dirty = !0,
            this
        },
        resize: function(a, b) {
            return (a !== this.width || b !== this.height) && (this.width = a, this.height = b, this.canvas.width = a, this.canvas.height = b, this.baseTexture.width = a, this.baseTexture.height = b, this.textureFrame.width = a, this.textureFrame.height = b, this.texture.width = a, this.texture.height = b, this.texture.crop.width = a, this.texture.crop.height = b, this.update(), this.dirty = !0),
            this
        },
        update: function(a, b, c, d) {
            return "undefined" == typeof a && (a = 0),
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = this.width),
            "undefined" == typeof d && (d = this.height),
            this.imageData = this.context.getImageData(a, b, c, d),
            this.data = this.imageData.data,
            this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data,
            this
        },
        processPixelRGB: function(a, b, d, e, f, g) {
            "undefined" == typeof d && (d = 0),
            "undefined" == typeof e && (e = 0),
            "undefined" == typeof f && (f = this.width),
            "undefined" == typeof g && (g = this.height);
            for (var h = d + f,
            i = e + g,
            j = c.Color.createColor(), k = {
                r: 0,
                g: 0,
                b: 0,
                a: 0
            },
            l = !1, m = e; i > m; m++) for (var n = d; h > n; n++) c.Color.unpackPixel(this.getPixel32(n, m), j),
            k = a.call(b, j, n, m),
            k !== !1 && null !== k && void 0 !== k && (this.setPixel32(n, m, k.r, k.g, k.b, k.a, !1), l = !0);
            return l && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0),
            this
        },
        processPixel: function(a, b, c, d, e, f) {
            "undefined" == typeof c && (c = 0),
            "undefined" == typeof d && (d = 0),
            "undefined" == typeof e && (e = this.width),
            "undefined" == typeof f && (f = this.height);
            for (var g = c + e,
            h = d + f,
            i = 0,
            j = 0,
            k = !1,
            l = d; h > l; l++) for (var m = c; g > m; m++) i = this.getPixel32(m, l),
            j = a.call(b, i, m, l),
            j !== i && (this.pixels[l * this.width + m] = j, k = !0);
            return k && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0),
            this
        },
        replaceRGB: function(a, b, d, e, f, g, h, i, j) {
            var k = 0,
            l = 0,
            m = this.width,
            n = this.height,
            o = c.Color.packPixel(a, b, d, e);
            void 0 !== j && j instanceof c.Rectangle && (k = j.x, l = j.y, m = j.width, n = j.height);
            for (var p = 0; n > p; p++) for (var q = 0; m > q; q++) this.getPixel32(k + q, l + p) === o && this.setPixel32(k + q, l + p, f, g, h, i, !1);
            return this.context.putImageData(this.imageData, 0, 0),
            this.dirty = !0,
            this
        },
        setHSL: function(a, b, d, e) {
            if (("undefined" == typeof a || null === a) && (a = !1), ("undefined" == typeof b || null === b) && (b = !1), ("undefined" == typeof d || null === d) && (d = !1), a || b || d) {
                "undefined" == typeof e && (e = new c.Rectangle(0, 0, this.width, this.height));
                for (var f = c.Color.createColor(), g = e.y; g < e.bottom; g++) for (var h = e.x; h < e.right; h++) c.Color.unpackPixel(this.getPixel32(h, g), f, !0),
                a && (f.h = a),
                b && (f.s = b),
                d && (f.l = d),
                c.Color.HSLtoRGB(f.h, f.s, f.l, f),
                this.setPixel32(h, g, f.r, f.g, f.b, f.a, !1);
                return this.context.putImageData(this.imageData, 0, 0),
                this.dirty = !0,
                this
            }
        },
        shiftHSL: function(a, b, d, e) {
            if (("undefined" == typeof a || null === a) && (a = !1), ("undefined" == typeof b || null === b) && (b = !1), ("undefined" == typeof d || null === d) && (d = !1), a || b || d) {
                "undefined" == typeof e && (e = new c.Rectangle(0, 0, this.width, this.height));
                for (var f = c.Color.createColor(), g = e.y; g < e.bottom; g++) for (var h = e.x; h < e.right; h++) c.Color.unpackPixel(this.getPixel32(h, g), f, !0),
                a && (f.h = this.game.math.wrap(f.h + a, 0, 1)),
                b && (f.s = this.game.math.limitValue(f.s + b, 0, 1)),
                d && (f.l = this.game.math.limitValue(f.l + d, 0, 1)),
                c.Color.HSLtoRGB(f.h, f.s, f.l, f),
                this.setPixel32(h, g, f.r, f.g, f.b, f.a, !1);
                return this.context.putImageData(this.imageData, 0, 0),
                this.dirty = !0,
                this
            }
        },
        setPixel32: function(a, b, d, e, f, g, h) {
            return "undefined" == typeof h && (h = !0),
            a >= 0 && a <= this.width && b >= 0 && b <= this.height && (this.pixels[b * this.width + a] = c.Device.LITTLE_ENDIAN ? g << 24 | f << 16 | e << 8 | d: d << 24 | e << 16 | f << 8 | g, h && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0)),
            this
        },
        setPixel: function(a, b, c, d, e, f) {
            return this.setPixel32(a, b, c, d, e, 255, f)
        },
        getPixel: function(a, b, d) {
            d || (d = c.Color.createColor());
            var e = ~~ (a + b * this.width);
            return e *= 4,
            d.r = this.data[e],
            d.g = this.data[++e],
            d.b = this.data[++e],
            d.a = this.data[++e],
            d
        },
        getPixel32: function(a, b) {
            return a >= 0 && a <= this.width && b >= 0 && b <= this.height ? this.pixels[b * this.width + a] : void 0
        },
        getPixelRGB: function(a, b, d, e, f) {
            return c.Color.unpackPixel(this.getPixel32(a, b), d, e, f)
        },
        getPixels: function(a) {
            return this.context.getImageData(a.x, a.y, a.width, a.height);
        },
        getFirstPixel: function(a) {
            "undefined" == typeof a && (a = 0);
            var b = c.Color.createColor(),
            d = 0,
            e = 0,
            f = 1,
            g = !1;
            1 === a ? (f = -1, e = this.height) : 3 === a && (f = -1, d = this.width);
            do c.Color.unpackPixel(this.getPixel32(d, e), b),
            0 === a || 1 === a ? (d++, d === this.width && (d = 0, e += f, (e >= this.height || 0 >= e) && (g = !0))) : (2 === a || 3 === a) && (e++, e === this.height && (e = 0, d += f, (d >= this.width || 0 >= d) && (g = !0)));
            while (0 === b.a && !g);
            return b.x = d,
            b.y = e,
            b
        },
        getBounds: function(a) {
            return "undefined" == typeof a && (a = new c.Rectangle),
            a.x = this.getFirstPixel(2).x,
            a.x === this.width ? a.setTo(0, 0, 0, 0) : (a.y = this.getFirstPixel(0).y, a.width = this.getFirstPixel(3).x - a.x + 1, a.height = this.getFirstPixel(1).y - a.y + 1, a)
        },
        addToWorld: function(a, b, c, d, e, f) {
            e = e || 1,
            f = f || 1;
            var g = this.game.add.image(a, b, this);
            return g.anchor.set(c, d),
            g.scale.set(e, f),
            g
        },
        copy: function(a, b, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
            if (("undefined" == typeof a || null === a) && (a = this), this._image = a, a instanceof c.Sprite || a instanceof c.Image || a instanceof c.Text) this._pos.set(a.texture.crop.x, a.texture.crop.y),
            this._size.set(a.texture.crop.width, a.texture.crop.height),
            this._scale.set(a.scale.x, a.scale.y),
            this._anchor.set(a.anchor.x, a.anchor.y),
            this._rotate = a.rotation,
            this._alpha.current = a.alpha,
            this._image = a.texture.baseTexture.source,
            ("undefined" == typeof g || null === g) && (g = a.x),
            ("undefined" == typeof h || null === h) && (h = a.y),
            a.texture.trim && (g += a.texture.trim.x - a.anchor.x * a.texture.trim.width, h += a.texture.trim.y - a.anchor.y * a.texture.trim.height),
            16777215 !== a.tint && (a.cachedTint !== a.tint && (a.cachedTint = a.tint, a.tintedTexture = PIXI.CanvasTinter.getTintedTexture(a, a.tint)), this._image = a.tintedTexture);
            else {
                if (this._pos.set(0), this._scale.set(1), this._anchor.set(0), this._rotate = 0, this._alpha.current = 1, a instanceof c.BitmapData) this._image = a.canvas;
                else if ("string" == typeof a) {
                    if (a = this.game.cache.getImage(a), null === a) return;
                    this._image = a
                }
                this._size.set(this._image.width, this._image.height)
            }
            return ("undefined" == typeof b || null === b) && (b = 0),
            ("undefined" == typeof d || null === d) && (d = 0),
            e && (this._size.x = e),
            f && (this._size.y = f),
            ("undefined" == typeof g || null === g) && (g = b),
            ("undefined" == typeof h || null === h) && (h = d),
            ("undefined" == typeof i || null === i) && (i = this._size.x),
            ("undefined" == typeof j || null === j) && (j = this._size.y),
            "number" == typeof k && (this._rotate = k),
            "number" == typeof l && (this._anchor.x = l),
            "number" == typeof m && (this._anchor.y = m),
            "number" == typeof n && (this._scale.x = n),
            "number" == typeof o && (this._scale.y = o),
            "number" == typeof p && (this._alpha.current = p),
            "undefined" == typeof q && (q = null),
            "undefined" == typeof r && (r = !1),
            this._alpha.current <= 0 || 0 === this._scale.x || 0 === this._scale.y || 0 === this._size.x || 0 === this._size.y ? void 0 : (this._alpha.prev = this.context.globalAlpha, this.context.save(), this.context.globalAlpha = this._alpha.current, q && (this.context.globalCompositeOperation = q), r && (g |= 0, h |= 0), this.context.translate(g, h), this.context.scale(this._scale.x, this._scale.y), this.context.rotate(this._rotate), this.context.drawImage(this._image, this._pos.x + b, this._pos.y + d, this._size.x, this._size.y, -i * this._anchor.x, -j * this._anchor.y, i, j), this.context.restore(), this.context.globalAlpha = this._alpha.prev, this.dirty = !0, this)
        },
        copyRect: function(a, b, c, d, e, f, g) {
            return this.copy(a, b.x, b.y, b.width, b.height, c, d, b.width, b.height, 0, 0, 0, 1, 1, e, f, g)
        },
        draw: function(a, b, c, d, e, f, g) {
            return this.copy(a, null, null, null, null, b, c, d, e, null, null, null, null, null, null, f, g)
        },
        drawGroup: function(a, b, c) {
            return a.total > 0 && a.forEachExists(this.copy, this, null, null, null, null, null, null, null, null, null, null, null, null, null, null, b, c),
            this
        },
        shadow: function(a, b, c, d) {
            "undefined" == typeof a || null === a ? this.context.shadowColor = "rgba(0,0,0,0)": (this.context.shadowColor = a, this.context.shadowBlur = b || 5, this.context.shadowOffsetX = c || 10, this.context.shadowOffsetY = d || 10)
        },
        alphaMask: function(a, b, c, d) {
            return "undefined" == typeof d || null === d ? this.draw(b).blendSourceAtop() : this.draw(b, d.x, d.y, d.width, d.height).blendSourceAtop(),
            "undefined" == typeof c || null === c ? this.draw(a).blendReset() : this.draw(a, c.x, c.y, c.width, c.height).blendReset(),
            this
        },
        extract: function(a, b, c, d, e, f, g, h, i) {
            return "undefined" == typeof e && (e = 255),
            "undefined" == typeof f && (f = !1),
            "undefined" == typeof g && (g = b),
            "undefined" == typeof h && (h = c),
            "undefined" == typeof i && (i = d),
            f && a.resize(this.width, this.height),
            this.processPixelRGB(function(f, j, k) {
                return f.r === b && f.g === c && f.b === d && a.setPixel32(j, k, g, h, i, e, !1),
                !1
            },
            this),
            a.context.putImageData(a.imageData, 0, 0),
            a.dirty = !0,
            a
        },
        rect: function(a, b, c, d, e) {
            return "undefined" != typeof e && (this.context.fillStyle = e),
            this.context.fillRect(a, b, c, d),
            this
        },
        text: function(a, b, c, d, e, f) {
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = 0),
            "undefined" == typeof d && (d = "14px Courier"),
            "undefined" == typeof e && (e = "rgb(255,255,255)"),
            "undefined" == typeof f && (f = !0);
            var g = this.context.font;
            this.context.font = d,
            f && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(a, b + 1, c + 1)),
            this.context.fillStyle = e,
            this.context.fillText(a, b, c),
            this.context.font = g
        },
        circle: function(a, b, c, d) {
            return "undefined" != typeof d && (this.context.fillStyle = d),
            this.context.beginPath(),
            this.context.arc(a, b, c, 0, 2 * Math.PI, !1),
            this.context.closePath(),
            this.context.fill(),
            this
        },
        textureLine: function(a, b, d) {
            if ("undefined" == typeof d && (d = "repeat-x"), "string" != typeof b || (b = this.game.cache.getImage(b))) {
                var e = a.length;
                return "no-repeat" === d && e > b.width && (e = b.width),
                this.context.fillStyle = this.context.createPattern(b, d),
                this._circle = new c.Circle(a.start.x, a.start.y, b.height),
                this._circle.circumferencePoint(a.angle - 1.5707963267948966, !1, this._pos),
                this.context.save(),
                this.context.translate(this._pos.x, this._pos.y),
                this.context.rotate(a.angle),
                this.context.fillRect(0, 0, e, b.height),
                this.context.restore(),
                this.dirty = !0,
                this
            }
        },
        render: function() {
            return ! this.disableTextureUpload && this.dirty && (this.baseTexture.dirty(), this.dirty = !1),
            this
        },
        blendReset: function() {
            return this.context.globalCompositeOperation = "source-over",
            this
        },
        blendSourceOver: function() {
            return this.context.globalCompositeOperation = "source-over",
            this
        },
        blendSourceIn: function() {
            return this.context.globalCompositeOperation = "source-in",
            this
        },
        blendSourceOut: function() {
            return this.context.globalCompositeOperation = "source-out",
            this
        },
        blendSourceAtop: function() {
            return this.context.globalCompositeOperation = "source-atop",
            this
        },
        blendDestinationOver: function() {
            return this.context.globalCompositeOperation = "destination-over",
            this
        },
        blendDestinationIn: function() {
            return this.context.globalCompositeOperation = "destination-in",
            this
        },
        blendDestinationOut: function() {
            return this.context.globalCompositeOperation = "destination-out",
            this
        },
        blendDestinationAtop: function() {
            return this.context.globalCompositeOperation = "destination-atop",
            this
        },
        blendXor: function() {
            return this.context.globalCompositeOperation = "xor",
            this
        },
        blendAdd: function() {
            return this.context.globalCompositeOperation = "lighter",
            this
        },
        blendMultiply: function() {
            return this.context.globalCompositeOperation = "multiply",
            this
        },
        blendScreen: function() {
            return this.context.globalCompositeOperation = "screen",
            this
        },
        blendOverlay: function() {
            return this.context.globalCompositeOperation = "overlay",
            this
        },
        blendDarken: function() {
            return this.context.globalCompositeOperation = "darken",
            this
        },
        blendLighten: function() {
            return this.context.globalCompositeOperation = "lighten",
            this
        },
        blendColorDodge: function() {
            return this.context.globalCompositeOperation = "color-dodge",
            this
        },
        blendColorBurn: function() {
            return this.context.globalCompositeOperation = "color-burn",
            this
        },
        blendHardLight: function() {
            return this.context.globalCompositeOperation = "hard-light",
            this
        },
        blendSoftLight: function() {
            return this.context.globalCompositeOperation = "soft-light",
            this
        },
        blendDifference: function() {
            return this.context.globalCompositeOperation = "difference",
            this
        },
        blendExclusion: function() {
            return this.context.globalCompositeOperation = "exclusion",
            this
        },
        blendHue: function() {
            return this.context.globalCompositeOperation = "hue",
            this
        },
        blendSaturation: function() {
            return this.context.globalCompositeOperation = "saturation",
            this
        },
        blendColor: function() {
            return this.context.globalCompositeOperation = "color",
            this
        },
        blendLuminosity: function() {
            return this.context.globalCompositeOperation = "luminosity",
            this
        }
    },
    Object.defineProperty(c.BitmapData.prototype, "smoothed", {
        get: function() {
            c.Canvas.getSmoothingEnabled(this.context)
        },
        set: function(a) {
            c.Canvas.setSmoothingEnabled(this.context, a)
        }
    }),
    c.BitmapData.getTransform = function(a, b, c, d, e, f) {
        return "number" != typeof a && (a = 0),
        "number" != typeof b && (b = 0),
        "number" != typeof c && (c = 1),
        "number" != typeof d && (d = 1),
        "number" != typeof e && (e = 0),
        "number" != typeof f && (f = 0),
        {
            sx: c,
            sy: d,
            scaleX: c,
            scaleY: d,
            skewX: e,
            skewY: f,
            translateX: a,
            translateY: b,
            tx: a,
            ty: b
        }
    },
    c.BitmapData.prototype.constructor = c.BitmapData,
    c.Graphics = function(a, b, d) {
        b = b || 0,
        d = d || 0,
        this.type = c.GRAPHICS,
        this.physicsType = c.SPRITE,
        PIXI.Graphics.call(this),
        c.Component.Core.init.call(this, a, b, d, "", null)
    },
    c.Graphics.prototype = Object.create(PIXI.Graphics.prototype),
    c.Graphics.prototype.constructor = c.Graphics,
    c.Component.Core.install.call(c.Graphics.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]),
    c.Graphics.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Graphics.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Graphics.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Graphics.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Graphics.prototype.preUpdate = function() {
        return this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.Graphics.prototype.destroy = function(a) {
        this.clear(),
        c.Component.Destroy.prototype.destroy.call(this, a)
    },
    c.Graphics.prototype.drawTriangle = function(a, b) {
        "undefined" == typeof b && (b = !1);
        var d = new c.Polygon(a);
        if (b) {
            var e = new c.Point(this.game.camera.x - a[0].x, this.game.camera.y - a[0].y),
            f = new c.Point(a[1].x - a[0].x, a[1].y - a[0].y),
            g = new c.Point(a[1].x - a[2].x, a[1].y - a[2].y),
            h = g.cross(f);
            e.dot(h) > 0 && this.drawPolygon(d)
        } else this.drawPolygon(d)
    },
    c.Graphics.prototype.drawTriangles = function(a, b, d) {
        "undefined" == typeof d && (d = !1);
        var e, f = new c.Point,
        g = new c.Point,
        h = new c.Point,
        i = [];
        if (b) if (a[0] instanceof c.Point) for (e = 0; e < b.length / 3; e++) i.push(a[b[3 * e]]),
        i.push(a[b[3 * e + 1]]),
        i.push(a[b[3 * e + 2]]),
        3 === i.length && (this.drawTriangle(i, d), i = []);
        else for (e = 0; e < b.length; e++) f.x = a[2 * b[e]],
        f.y = a[2 * b[e] + 1],
        i.push(f.copyTo({})),
        3 === i.length && (this.drawTriangle(i, d), i = []);
        else if (a[0] instanceof c.Point) for (e = 0; e < a.length / 3; e++) this.drawTriangle([a[3 * e], a[3 * e + 1], a[3 * e + 2]], d);
        else for (e = 0; e < a.length / 6; e++) f.x = a[6 * e + 0],
        f.y = a[6 * e + 1],
        g.x = a[6 * e + 2],
        g.y = a[6 * e + 3],
        h.x = a[6 * e + 4],
        h.y = a[6 * e + 5],
        this.drawTriangle([f, g, h], d)
    },
    c.RenderTexture = function(a, b, d, e, f, g) {
        "undefined" == typeof e && (e = ""),
        "undefined" == typeof f && (f = c.scaleModes.DEFAULT),
        "undefined" == typeof g && (g = 1),
        this.game = a,
        this.key = e,
        this.type = c.RENDERTEXTURE,
        this.matrix = new PIXI.Matrix,
        PIXI.RenderTexture.call(this, b, d, this.game.renderer, f, g),
        this.render = c.RenderTexture.prototype.render
    },
    c.RenderTexture.prototype = Object.create(PIXI.RenderTexture.prototype),
    c.RenderTexture.prototype.constructor = c.RenderTexture,
    c.RenderTexture.prototype.renderXY = function(a, b, c, d) {
        this.matrix.tx = b,
        this.matrix.ty = c,
        this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this.matrix, d) : this.renderCanvas(a, this.matrix, d)
    },
    c.RenderTexture.prototype.render = function(a, b, c) {
        this.matrix.tx = b.x,
        this.matrix.ty = b.y,
        this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this.matrix, c) : this.renderCanvas(a, this.matrix, c)
    },
    c.Text = function(a, b, d, e, f) {
        b = b || 0,
        d = d || 0,
        e = e || " ",
        f = f || {},
        e = 0 === e.length ? " ": e.toString(),
        this.type = c.TEXT,
        this.physicsType = c.SPRITE,
        this.padding = new c.Point,
        this._text = e,
        this._fontComponents = null,
        this._lineSpacing = 0,
        this._charCount = 0,
        this.colors = [],
        this.setStyle(f),
        PIXI.Text.call(this, e, this.style),
        c.Component.Core.init.call(this, a, b, d, "", null),
        " " !== e && this.updateText()
    },
    c.Text.prototype = Object.create(PIXI.Text.prototype),
    c.Text.prototype.constructor = c.Text,
    c.Component.Core.install.call(c.Text.prototype, ["Angle", "AutoCull", "Bounds", "BringToTop", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "Overlap", "PhysicsBody", "Reset", "Smoothed"]),
    c.Text.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Text.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Text.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Text.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Text.prototype.preUpdate = function() {
        return this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.Text.prototype.update = function() {},
    c.Text.prototype.destroy = function(a) {
        this.texture.destroy(!0),
        this.canvas && this.canvas.parentNode ? this.canvas.parentNode.removeChild(this.canvas) : (this.canvas = null, this.context = null),
        c.Component.Destroy.prototype.destroy.call(this, a)
    },
    c.Text.prototype.setShadow = function(a, b, c, d) {
        "undefined" == typeof a && (a = 0),
        "undefined" == typeof b && (b = 0),
        "undefined" == typeof c && (c = "rgba(0, 0, 0, 1)"),
        "undefined" == typeof d && (d = 0),
        this.style.shadowOffsetX = a,
        this.style.shadowOffsetY = b,
        this.style.shadowColor = c,
        this.style.shadowBlur = d,
        this.dirty = !0
    },
    c.Text.prototype.setStyle = function(a) {
        a = a || {},
        a.font = a.font || "bold 20pt Arial",
        a.backgroundColor = a.backgroundColor || null,
        a.fill = a.fill || "black",
        a.align = a.align || "left",
        a.stroke = a.stroke || "black",
        a.strokeThickness = a.strokeThickness || 0,
        a.wordWrap = a.wordWrap || !1,
        a.wordWrapWidth = a.wordWrapWidth || 100,
        a.shadowOffsetX = a.shadowOffsetX || 0,
        a.shadowOffsetY = a.shadowOffsetY || 0,
        a.shadowColor = a.shadowColor || "rgba(0,0,0,0)",
        a.shadowBlur = a.shadowBlur || 0;
        var b = this.fontToComponents(a.font);
        a.fontStyle && (b.fontStyle = a.fontStyle),
        a.fontVariant && (b.fontVariant = a.fontVariant),
        a.fontWeight && (b.fontWeight = a.fontWeight),
        a.fontSize && ("number" == typeof a.fontSize && (a.fontSize = a.fontSize + "px"), b.fontSize = a.fontSize),
        this._fontComponents = b,
        a.font = this.componentsToFont(this._fontComponents),
        this.style = a,
        this.dirty = !0
    },
    c.Text.prototype.updateText = function() {
        this.texture.baseTexture.resolution = this.resolution,
        this.context.font = this.style.font;
        var a = this.text;
        this.style.wordWrap && (a = this.runWordWrap(this.text));
        for (var b = a.split(/(?:\r\n|\r|\n)/), c = [], d = 0, e = this.determineFontProperties(this.style.font), f = 0; f < b.length; f++) {
            var g = this.context.measureText(b[f]).width + this.padding.x;
            c[f] = g,
            d = Math.max(d, g)
        }
        var h = d + this.style.strokeThickness;
        this.canvas.width = h * this.resolution;
        var i = e.fontSize + this.style.strokeThickness + this.padding.y,
        j = i * b.length,
        k = this._lineSpacing;
        if (0 > k && Math.abs(k) > i && (k = -i), 0 !== k) {
            var l = k * (b.length - 1);
            j += l
        }
        this.canvas.height = j * this.resolution,
        this.context.scale(this.resolution, this.resolution),
        navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height),
        this.style.backgroundColor && (this.context.fillStyle = this.style.backgroundColor, this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)),
        this.context.fillStyle = this.style.fill,
        this.context.font = this.style.font,
        this.context.strokeStyle = this.style.stroke,
        this.context.textBaseline = "alphabetic",
        this.context.shadowOffsetX = this.style.shadowOffsetX,
        this.context.shadowOffsetY = this.style.shadowOffsetY,
        this.context.shadowColor = this.style.shadowColor,
        this.context.shadowBlur = this.style.shadowBlur,
        this.context.lineWidth = this.style.strokeThickness,
        this.context.lineCap = "round",
        this.context.lineJoin = "round";
        var m, n;
        for (this._charCount = 0, f = 0; f < b.length; f++) m = this.style.strokeThickness / 2,
        n = this.style.strokeThickness / 2 + f * i + e.ascent,
        f > 0 && (n += k * f),
        "right" === this.style.align ? m += d - c[f] : "center" === this.style.align && (m += (d - c[f]) / 2),
        this.colors.length > 0 ? this.updateLine(b[f], m, n) : (this.style.stroke && this.style.strokeThickness && this.context.strokeText(b[f], m, n), this.style.fill && this.context.fillText(b[f], m, n));
        this.updateTexture()
    },
    c.Text.prototype.updateLine = function(a, b, c) {
        for (var d = 0; d < a.length; d++) {
            var e = a[d];
            this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount], this.context.strokeStyle = this.colors[this._charCount]),
            this.style.stroke && this.style.strokeThickness && this.context.strokeText(e, b, c),
            this.style.fill && this.context.fillText(e, b, c),
            b += this.context.measureText(e).width,
            this._charCount++
        }
    },
    c.Text.prototype.clearColors = function() {
        this.colors = [],
        this.dirty = !0
    },
    c.Text.prototype.addColor = function(a, b) {
        this.colors[b] = a,
        this.dirty = !0
    },
    c.Text.prototype.runWordWrap = function(a) {
        for (var b = "",
        c = a.split("\n"), d = 0; d < c.length; d++) {
            for (var e = this.style.wordWrapWidth,
            f = c[d].split(" "), g = 0; g < f.length; g++) {
                var h = this.context.measureText(f[g]).width,
                i = h + this.context.measureText(" ").width;
                i > e ? (g > 0 && (b += "\n"), b += f[g] + " ", e = this.style.wordWrapWidth - h) : (e -= i, b += f[g] + " ")
            }
            d < c.length - 1 && (b += "\n")
        }
        return b
    },
    c.Text.prototype.updateFont = function(a) {
        var b = this.componentsToFont(a);
        this.style.font !== b && (this.style.font = b, this.dirty = !0, this.parent && this.updateTransform())
    },
    c.Text.prototype.fontToComponents = function(a) {
        var b = a.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);
        return b ? {
            font: a,
            fontStyle: b[1] || "normal",
            fontVariant: b[2] || "normal",
            fontWeight: b[3] || "normal",
            fontSize: b[4] || "medium",
            fontFamily: b[5]
        }: (console.warn("Phaser.Text - unparsable CSS font: " + a), {
            font: a
        })
    },
    c.Text.prototype.componentsToFont = function(a) {
        var b, c = [];
        return b = a.fontStyle,
        b && "normal" !== b && c.push(b),
        b = a.fontVariant,
        b && "normal" !== b && c.push(b),
        b = a.fontWeight,
        b && "normal" !== b && c.push(b),
        b = a.fontSize,
        b && "medium" !== b && c.push(b),
        b = a.fontFamily,
        b && c.push(b),
        c.length || c.push(a.font),
        c.join(" ")
    },
    Object.defineProperty(c.Text.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(a) {
            a !== this._text && (this._text = a.toString() || " ", this.dirty = !0, this.parent && this.updateTransform())
        }
    }),
    Object.defineProperty(c.Text.prototype, "cssFont", {
        get: function() {
            return this.componentsToFont(this._fontComponents)
        },
        set: function(a) {
            a = a || "bold 20pt Arial",
            this._fontComponents = this.fontToComponents(a),
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "font", {
        get: function() {
            return this._fontComponents.fontFamily
        },
        set: function(a) {
            a = a || "Arial",
            a = a.trim(),
            /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(a) || /['",]/.exec(a) || (a = "'" + a + "'"),
            this._fontComponents.fontFamily = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontSize", {
        get: function() {
            var a = this._fontComponents.fontSize;
            return a && /(?:^0$|px$)/.exec(a) ? parseInt(a, 10) : a
        },
        set: function(a) {
            a = a || "0",
            "number" == typeof a && (a += "px"),
            this._fontComponents.fontSize = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontWeight", {
        get: function() {
            return this._fontComponents.fontWeight || "normal"
        },
        set: function(a) {
            a = a || "normal",
            this._fontComponents.fontWeight = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontStyle", {
        get: function() {
            return this._fontComponents.fontStyle || "normal"
        },
        set: function(a) {
            a = a || "normal",
            this._fontComponents.fontStyle = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontVariant", {
        get: function() {
            return this._fontComponents.fontVariant || "normal"
        },
        set: function(a) {
            a = a || "normal",
            this._fontComponents.fontVariant = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fill", {
        get: function() {
            return this.style.fill
        },
        set: function(a) {
            a !== this.style.fill && (this.style.fill = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "align", {
        get: function() {
            return this.style.align
        },
        set: function(a) {
            a !== this.style.align && (this.style.align = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "stroke", {
        get: function() {
            return this.style.stroke
        },
        set: function(a) {
            a !== this.style.stroke && (this.style.stroke = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "strokeThickness", {
        get: function() {
            return this.style.strokeThickness
        },
        set: function(a) {
            a !== this.style.strokeThickness && (this.style.strokeThickness = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "wordWrap", {
        get: function() {
            return this.style.wordWrap
        },
        set: function(a) {
            a !== this.style.wordWrap && (this.style.wordWrap = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "wordWrapWidth", {
        get: function() {
            return this.style.wordWrapWidth
        },
        set: function(a) {
            a !== this.style.wordWrapWidth && (this.style.wordWrapWidth = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "lineSpacing", {
        get: function() {
            return this._lineSpacing
        },
        set: function(a) {
            a !== this._lineSpacing && (this._lineSpacing = parseFloat(a), this.dirty = !0, this.parent && this.updateTransform())
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowOffsetX", {
        get: function() {
            return this.style.shadowOffsetX
        },
        set: function(a) {
            a !== this.style.shadowOffsetX && (this.style.shadowOffsetX = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowOffsetY", {
        get: function() {
            return this.style.shadowOffsetY
        },
        set: function(a) {
            a !== this.style.shadowOffsetY && (this.style.shadowOffsetY = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowColor", {
        get: function() {
            return this.style.shadowColor
        },
        set: function(a) {
            a !== this.style.shadowColor && (this.style.shadowColor = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowBlur", {
        get: function() {
            return this.style.shadowBlur
        },
        set: function(a) {
            a !== this.style.shadowBlur && (this.style.shadowBlur = a, this.dirty = !0)
        }
    }),
    c.BitmapText = function(a, b, d, e, f, g) {
        b = b || 0,
        d = d || 0,
        e = e || "",
        f = f || "",
        g = g || 32,
        this.type = c.BITMAPTEXT,
        this.physicsType = c.SPRITE,
        this._text = f,
        this._font = e,
        this._fontSize = g,
        this._align = "left",
        this._tint = 16777215,
        this._tw = 0,
        this._th = 0,
        PIXI.BitmapText.call(this, f),
        c.Component.Core.init.call(this, a, b, d, "", null)
    },
    c.BitmapText.prototype = Object.create(PIXI.BitmapText.prototype),
    c.BitmapText.prototype.constructor = c.BitmapText,
    c.Component.Core.install.call(c.BitmapText.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]),
    c.BitmapText.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.BitmapText.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.BitmapText.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.BitmapText.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.BitmapText.prototype.preUpdate = function() {
        return this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld() ? this.preUpdateCore() : !1
    },
    c.BitmapText.prototype.postUpdate = function() {
        c.Component.PhysicsBody.postUpdate.call(this),
        c.Component.FixedToCamera.postUpdate.call(this),
        !this.body || this.textWidth === this._tw && this.textHeight === this._th || (this.body.setSize(this.textWidth, this.textHeight), this._tw = this.textWidth, this._th = this.textHeight)
    },
    c.BitmapText.prototype.setStyle = function() {
        this.style = {
            align: this._align
        },
        this.fontName = this._font,
        this.fontSize = this._fontSize,
        this.dirty = !0
    },
    Object.defineProperty(c.BitmapText.prototype, "align", {
        get: function() {
            return this._align
        },
        set: function(a) {
            a !== this._align && (this._align = a, this.setStyle())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(a) {
            a !== this._tint && (this._tint = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "font", {
        get: function() {
            return this._font
        },
        set: function(a) {
            a !== this._font && (this._font = a.trim(), this.fontName = this._font, this.style.font = this._fontSize + "px '" + this._font + "'", this.dirty = !0)
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "fontSize", {
        get: function() {
            return this._fontSize
        },
        set: function(a) {
            a = parseInt(a, 10),
            a !== this._fontSize && (this._fontSize = a, this.style.font = this._fontSize + "px '" + this._font + "'", this.dirty = !0)
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(a) {
            a !== this._text && (this._text = a.toString() || " ", this.dirty = !0)
        }
    }),
    c.RetroFont = function(a, b, d, e, f, g, h, i, j, k) {
        if (!a.cache.checkImageKey(b)) return ! 1; ("undefined" == typeof g || null === g) && (g = a.cache.getImage(b).width / d),
        this.characterWidth = d,
        this.characterHeight = e,
        this.characterSpacingX = h || 0,
        this.characterSpacingY = i || 0,
        this.characterPerRow = g,
        this.offsetX = j || 0,
        this.offsetY = k || 0,
        this.align = "left",
        this.multiLine = !1,
        this.autoUpperCase = !0,
        this.customSpacingX = 0,
        this.customSpacingY = 0,
        this.fixedWidth = 0,
        this.fontSet = a.cache.getImage(b),
        this._text = "",
        this.grabData = [],
        this.frameData = new c.FrameData;
        for (var l = this.offsetX,
        m = this.offsetY,
        n = 0,
        o = 0; o < f.length; o++) {
            var p = a.rnd.uuid(),
            q = this.frameData.addFrame(new c.Frame(o, l, m, this.characterWidth, this.characterHeight, "", p));
            this.grabData[f.charCodeAt(o)] = q.index,
            PIXI.TextureCache[p] = new PIXI.Texture(PIXI.BaseTextureCache[b], {
                x: l,
                y: m,
                width: this.characterWidth,
                height: this.characterHeight
            }),
            n++,
            n == this.characterPerRow ? (n = 0, l = this.offsetX, m += this.characterHeight + this.characterSpacingY) : l += this.characterWidth + this.characterSpacingX
        }
        a.cache.updateFrameData(b, this.frameData),
        this.stamp = new c.Image(a, 0, 0, b, 0),
        c.RenderTexture.call(this, a, 100, 100, "", c.scaleModes.NEAREST),
        this.type = c.RETROFONT
    },
    c.RetroFont.prototype = Object.create(c.RenderTexture.prototype),
    c.RetroFont.prototype.constructor = c.RetroFont,
    c.RetroFont.ALIGN_LEFT = "left",
    c.RetroFont.ALIGN_RIGHT = "right",
    c.RetroFont.ALIGN_CENTER = "center",
    c.RetroFont.TEXT_SET1 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",
    c.RetroFont.TEXT_SET2 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    c.RetroFont.TEXT_SET3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",
    c.RetroFont.TEXT_SET4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",
    c.RetroFont.TEXT_SET5 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",
    c.RetroFont.TEXT_SET6 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",
    c.RetroFont.TEXT_SET7 = "AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",
    c.RetroFont.TEXT_SET8 = "0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    c.RetroFont.TEXT_SET9 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",
    c.RetroFont.TEXT_SET10 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    c.RetroFont.TEXT_SET11 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",
    c.RetroFont.prototype.setFixedWidth = function(a, b) {
        "undefined" == typeof b && (b = "left"),
        this.fixedWidth = a,
        this.align = b
    },
    c.RetroFont.prototype.setText = function(a, b, c, d, e, f) {
        this.multiLine = b || !1,
        this.customSpacingX = c || 0,
        this.customSpacingY = d || 0,
        this.align = e || "left",
        this.autoUpperCase = f ? !1 : !0,
        a.length > 0 && (this.text = a)
    },
    c.RetroFont.prototype.buildRetroFontText = function() {
        var a = 0,
        b = 0;
        if (this.clear(), this.multiLine) {
            var d = this._text.split("\n");
            this.fixedWidth > 0 ? this.resize(this.fixedWidth, d.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0) : this.resize(this.getLongestLine() * (this.characterWidth + this.customSpacingX), d.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0);
            for (var e = 0; e < d.length; e++) {
                switch (this.align) {
                case c.RetroFont.ALIGN_LEFT:
                    a = 0;
                    break;
                case c.RetroFont.ALIGN_RIGHT:
                    a = this.width - d[e].length * (this.characterWidth + this.customSpacingX);
                    break;
                case c.RetroFont.ALIGN_CENTER:
                    a = this.width / 2 - d[e].length * (this.characterWidth + this.customSpacingX) / 2,
                    a += this.customSpacingX / 2
                }
                0 > a && (a = 0),
                this.pasteLine(d[e], a, b, this.customSpacingX),
                b += this.characterHeight + this.customSpacingY
            }
        } else {
            switch (this.fixedWidth > 0 ? this.resize(this.fixedWidth, this.characterHeight, !0) : this.resize(this._text.length * (this.characterWidth + this.customSpacingX), this.characterHeight, !0), this.align) {
            case c.RetroFont.ALIGN_LEFT:
                a = 0;
                break;
            case c.RetroFont.ALIGN_RIGHT:
                a = this.width - this._text.length * (this.characterWidth + this.customSpacingX);
                break;
            case c.RetroFont.ALIGN_CENTER:
                a = this.width / 2 - this._text.length * (this.characterWidth + this.customSpacingX) / 2,
                a += this.customSpacingX / 2
            }
            this.textureBuffer.clear(),
            this.pasteLine(this._text, a, 0, this.customSpacingX)
        }
    },
    c.RetroFont.prototype.pasteLine = function(a, b, d, e) {
        for (var f = new c.Point,
        g = 0; g < a.length; g++) if (" " == a.charAt(g)) b += this.characterWidth + e;
        else if (this.grabData[a.charCodeAt(g)] >= 0 && (this.stamp.frame = this.grabData[a.charCodeAt(g)], f.set(b, d), this.render(this.stamp, f, !1), b += this.characterWidth + e, b > this.width)) break
    },
    c.RetroFont.prototype.getLongestLine = function() {
        var a = 0;
        if (this._text.length > 0) for (var b = this._text.split("\n"), c = 0; c < b.length; c++) b[c].length > a && (a = b[c].length);
        return a
    },
    c.RetroFont.prototype.removeUnsupportedCharacters = function(a) {
        for (var b = "",
        c = 0; c < this._text.length; c++) {
            var d = this._text[c],
            e = d.charCodeAt(0); (this.grabData[e] >= 0 || !a && "\n" === d) && (b = b.concat(d))
        }
        return b
    },
    c.RetroFont.prototype.updateOffset = function(a, b) {
        if (this.offsetX !== a || this.offsetY !== b) {
            for (var c = a - this.offsetX,
            d = b - this.offsetY,
            e = this.game.cache.getFrameData(this.stamp.key).getFrames(), f = e.length; f--;) e[f].x += c,
            e[f].y += d,
            PIXI.TextureCache[e[f].uuid].frame.x = e[f].x,
            PIXI.TextureCache[e[f].uuid].frame.y = e[f].y;
            this.buildRetroFontText()
        }
    },
    Object.defineProperty(c.RetroFont.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(a) {
            var b;
            b = this.autoUpperCase ? a.toUpperCase() : a,
            b !== this._text && (this._text = b, this.removeUnsupportedCharacters(this.multiLine), this.buildRetroFontText())
        }
    }),
    Object.defineProperty(c.RetroFont.prototype, "smoothed", {
        get: function() {
            return this.stamp.smoothed
        },
        set: function(a) {
            this.stamp.smoothed = a,
            this.buildRetroFontText()
        }
    }),
    c.Device = function() {
        this.deviceReadyAt = 0,
        this.initialized = !1,
        this.desktop = !1,
        this.iOS = !1,
        this.cocoonJS = !1,
        this.cocoonJSApp = !1,
        this.cordova = !1,
        this.node = !1,
        this.nodeWebkit = !1,
        this.ejecta = !1,
        this.crosswalk = !1,
        this.android = !1,
        this.chromeOS = !1,
        this.linux = !1,
        this.macOS = !1,
        this.windows = !1,
        this.windowsPhone = !1,
        this.canvas = !1,
        this.canvasBitBltShift = null,
        this.webGL = !1,
        this.file = !1,
        this.fileSystem = !1,
        this.localStorage = !1,
        this.worker = !1,
        this.css3D = !1,
        this.pointerLock = !1,
        this.typedArray = !1,
        this.vibration = !1,
        this.getUserMedia = !1,
        this.quirksMode = !1,
        this.touch = !1,
        this.mspointer = !1,
        this.wheelEvent = null,
        this.arora = !1,
        this.chrome = !1,
        this.epiphany = !1,
        this.firefox = !1,
        this.ie = !1,
        this.ieVersion = 0,
        this.trident = !1,
        this.tridentVersion = 0,
        this.mobileSafari = !1,
        this.midori = !1,
        this.opera = !1,
        this.safari = !1,
        this.webApp = !1,
        this.silk = !1,
        this.audioData = !1,
        this.webAudio = !1,
        this.ogg = !1,
        this.opus = !1,
        this.mp3 = !1,
        this.wav = !1,
        this.m4a = !1,
        this.webm = !1,
        this.iPhone = !1,
        this.iPhone4 = !1,
        this.iPad = !1,
        this.pixelRatio = 0,
        this.littleEndian = !1,
        this.LITTLE_ENDIAN = !1,
        this.support32bit = !1,
        this.fullscreen = !1,
        this.requestFullscreen = "",
        this.cancelFullscreen = "",
        this.fullscreenKeyboard = !1
    },
    c.Device = new c.Device,
    c.Device.onInitialized = new c.Signal,
    c.Device.whenReady = function(a, b, c) {
        var d = this._readyCheck;
        if (this.deviceReadyAt || !d) a.call(b, this);
        else if (d._monitor || c) d._queue = d._queue || [],
        d._queue.push([a, b]);
        else {
            d._monitor = d.bind(this),
            d._queue = d._queue || [],
            d._queue.push([a, b]);
            var e = "undefined" != typeof window.cordova,
            f = navigator.isCocoonJS;
            "complete" === document.readyState || "interactive" === document.readyState ? window.setTimeout(d._monitor, 0) : e && !f ? document.addEventListener("deviceready", d._monitor, !1) : (document.addEventListener("DOMContentLoaded", d._monitor, !1), window.addEventListener("load", d._monitor, !1))
        }
    },
    c.Device._readyCheck = function() {
        var a = this._readyCheck;
        if (document.body) {
            if (!this.deviceReadyAt) {
                this.deviceReadyAt = Date.now(),
                document.removeEventListener("deviceready", a._monitor),
                document.removeEventListener("DOMContentLoaded", a._monitor),
                window.removeEventListener("load", a._monitor),
                this._initialize(),
                this.initialized = !0,
                this.onInitialized.dispatch(this);
                for (var b; b = a._queue.shift();) {
                    var c = b[0],
                    d = b[1];
                    c.call(d, this)
                }
                this._readyCheck = null,
                this._initialize = null,
                this.onInitialized = null
            }
        } else window.setTimeout(a._monitor, 20)
    },
    c.Device._initialize = function() {
        function a() {
            var a = navigator.userAgent;
            /Playstation Vita/.test(a) ? k.vita = !0 : /Kindle/.test(a) || /\bKF[A-Z][A-Z]+/.test(a) || /Silk.*Mobile Safari/.test(a) ? k.kindle = !0 : /Android/.test(a) ? k.android = !0 : /CrOS/.test(a) ? k.chromeOS = !0 : /iP[ao]d|iPhone/i.test(a) ? k.iOS = !0 : /Linux/.test(a) ? k.linux = !0 : /Mac OS/.test(a) ? k.macOS = !0 : /Windows/.test(a) && (k.windows = !0, /Windows Phone/i.test(a) && (k.windowsPhone = !0));
            var b = /Silk/.test(a); (k.windows || k.macOS || k.linux && !b || k.chromeOS) && (k.desktop = !0),
            (k.windowsPhone || /Windows NT/i.test(a) && /Touch/i.test(a)) && (k.desktop = !1)
        }
        function b() {
            k.canvas = !!window.CanvasRenderingContext2D || k.cocoonJS;
            try {
                k.localStorage = !!localStorage.getItem;
            } catch(a) {
                k.localStorage = !1
            }
            k.file = !!(window.File && window.FileReader && window.FileList && window.Blob),
            k.fileSystem = !!window.requestFileSystem,
            k.webGL = function() {
                try {
                    var a = document.createElement("canvas");
                    return a.screencanvas = !1,
                    !!window.WebGLRenderingContext && (a.getContext("webgl") || a.getContext("experimental-webgl"))
                } catch(b) {
                    return ! 1
                }
            } (),
            k.webGL = !!k.webGL,
            k.worker = !!window.Worker,
            k.pointerLock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document,
            k.quirksMode = "CSS1Compat" === document.compatMode ? !1 : !0,
            k.getUserMedia = !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia),
            !k.iOS && (k.ie || k.firefox || k.chrome) && (k.canvasBitBltShift = !0),
            (k.safari || k.mobileSafari) && (k.canvasBitBltShift = !1)
        }
        function c() { ("ontouchstart" in document.documentElement || window.navigator.maxTouchPoints && window.navigator.maxTouchPoints >= 1) && (k.touch = !0),
            (window.navigator.msPointerEnabled || window.navigator.pointerEnabled) && (k.mspointer = !0),
            k.cocoonJS || ("onwheel" in window || k.ie && "WheelEvent" in window ? k.wheelEvent = "wheel": "onmousewheel" in window ? k.wheelEvent = "mousewheel": k.firefox && "MouseScrollEvent" in window && (k.wheelEvent = "DOMMouseScroll"))
        }
        function d() {
            for (var a = ["requestFullscreen", "requestFullScreen", "webkitRequestFullscreen", "webkitRequestFullScreen", "msRequestFullscreen", "msRequestFullScreen", "mozRequestFullScreen", "mozRequestFullscreen"], b = document.createElement("div"), c = 0; c < a.length; c++) if (b[a[c]]) {
                k.fullscreen = !0,
                k.requestFullscreen = a[c];
                break
            }
            var d = ["cancelFullScreen", "exitFullscreen", "webkitCancelFullScreen", "webkitExitFullscreen", "msCancelFullScreen", "msExitFullscreen", "mozCancelFullScreen", "mozExitFullscreen"];
            if (k.fullscreen) for (var c = 0; c < d.length; c++) if (document[d[c]]) {
                k.cancelFullscreen = d[c];
                break
            }
            window.Element && Element.ALLOW_KEYBOARD_INPUT && (k.fullscreenKeyboard = !0)
        }
        function e() {
            var a = navigator.userAgent;
            if (/Arora/.test(a) ? k.arora = !0 : /Chrome/.test(a) ? k.chrome = !0 : /Epiphany/.test(a) ? k.epiphany = !0 : /Firefox/.test(a) ? k.firefox = !0 : /AppleWebKit/.test(a) && k.iOS ? k.mobileSafari = !0 : /MSIE (\d+\.\d+);/.test(a) ? (k.ie = !0, k.ieVersion = parseInt(RegExp.$1, 10)) : /Midori/.test(a) ? k.midori = !0 : /Opera/.test(a) ? k.opera = !0 : /Safari/.test(a) ? k.safari = !0 : /Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a) && (k.ie = !0, k.trident = !0, k.tridentVersion = parseInt(RegExp.$1, 10), k.ieVersion = parseInt(RegExp.$3, 10)), /Silk/.test(a) && (k.silk = !0), navigator.standalone && (k.webApp = !0), "undefined" != typeof window.cordova && (k.cordova = !0), "undefined" != typeof process && "undefined" != typeof require && (k.node = !0), k.node) try {
                k.nodeWebkit = "undefined" != typeof require("nw.gui")
            } catch(b) {
                k.nodeWebkit = !1
            }
            if (navigator.isCocoonJS && (k.cocoonJS = !0), k.cocoonJS) try {
                k.cocoonJSApp = "undefined" != typeof CocoonJS
            } catch(b) {
                k.cocoonJSApp = !1
            }
            "undefined" != typeof window.ejecta && (k.ejecta = !0),
            /Crosswalk/.test(a) && (k.crosswalk = !0)
        }
        function f() {
            k.audioData = !!window.Audio,
            k.webAudio = !(!window.AudioContext && !window.webkitAudioContext);
            var a = document.createElement("audio"),
            b = !1;
            try { (b = !!a.canPlayType) && (a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "") && (k.ogg = !0), (a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, "") || a.canPlayType("audio/opus;").replace(/^no$/, "")) && (k.opus = !0), a.canPlayType("audio/mpeg;").replace(/^no$/, "") && (k.mp3 = !0), a.canPlayType('audio/wav; codecs="1"').replace(/^no$/, "") && (k.wav = !0), (a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;").replace(/^no$/, "")) && (k.m4a = !0), a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "") && (k.webm = !0))
            } catch(c) {}
        }
        function g() {
            k.pixelRatio = window.devicePixelRatio || 1,
            k.iPhone = -1 != navigator.userAgent.toLowerCase().indexOf("iphone"),
            k.iPhone4 = 2 == k.pixelRatio && k.iPhone,
            k.iPad = -1 != navigator.userAgent.toLowerCase().indexOf("ipad"),
            k.typedArray = "undefined" != typeof Int8Array ? !0 : !1,
            "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array && "undefined" != typeof Uint32Array && (k.littleEndian = h(), k.LITTLE_ENDIAN = k.littleEndian),
            k.support32bit = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8ClampedArray && "undefined" != typeof Int32Array && null !== k.littleEndian && i(),
            navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate,
            navigator.vibrate && (k.vibration = !0)
        }
        function h() {
            var a = new ArrayBuffer(4),
            b = new Uint8Array(a),
            c = new Uint32Array(a);
            return b[0] = 161,
            b[1] = 178,
            b[2] = 195,
            b[3] = 212,
            3569595041 == c[0] ? !0 : 2712847316 == c[0] ? !1 : null
        }
        function i() {
            if ("undefined" == typeof Uint8ClampedArray) return ! 1;
            var a = document.createElement("canvas"),
            b = a.getContext("2d");
            if (!b) return ! 1;
            var c = b.createImageData(1, 1);
            return c.data instanceof Uint8ClampedArray
        }
        function j() {
            var a, b = document.createElement("p"),
            c = {
                webkitTransform: "-webkit-transform",
                OTransform: "-o-transform",
                msTransform: "-ms-transform",
                MozTransform: "-moz-transform",
                transform: "transform"
            };
            document.body.insertBefore(b, null);
            for (var d in c) void 0 !== b.style[d] && (b.style[d] = "translate3d(1px,1px,1px)", a = window.getComputedStyle(b).getPropertyValue(c[d]));
            document.body.removeChild(b),
            k.css3D = void 0 !== a && a.length > 0 && "none" !== a
        }
        var k = this;
        a(),
        f(),
        e(),
        j(),
        g(),
        b(),
        d(),
        c()
    },
    c.Device.canPlayAudio = function(a) {
        return "mp3" == a && this.mp3 ? !0 : "ogg" == a && (this.ogg || this.opus) ? !0 : "m4a" == a && this.m4a ? !0 : "opus" == a && this.opus ? !0 : "wav" == a && this.wav ? !0 : "webm" == a && this.webm ? !0 : !1
    },
    c.Device.isConsoleOpen = function() {
        return window.console && window.console.firebug ? !0 : window.console && (console.profile(), console.profileEnd(), console.clear && console.clear(), console.profiles) ? console.profiles.length > 0 : !1
    },
    c.Device.isAndroidStockBrowser = function() {
        var a = window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);
        return a && a[1] < 537
    },
    c.DOM = {
        getOffset: function(a, b) {
            b = b || new c.Point;
            var d = a.getBoundingClientRect(),
            e = c.DOM.scrollY,
            f = c.DOM.scrollX,
            g = document.documentElement.clientTop,
            h = document.documentElement.clientLeft;
            return b.x = d.left + f - h,
            b.y = d.top + e - g,
            b
        },
        getBounds: function(a, b) {
            return "undefined" == typeof b && (b = 0),
            a = a && !a.nodeType ? a[0] : a,
            a && 1 === a.nodeType ? this.calibrate(a.getBoundingClientRect(), b) : !1
        },
        calibrate: function(a, b) {
            b = +b || 0;
            var c = {
                width: 0,
                height: 0,
                left: 0,
                right: 0,
                top: 0,
                bottom: 0
            };
            return c.width = (c.right = a.right + b) - (c.left = a.left - b),
            c.height = (c.bottom = a.bottom + b) - (c.top = a.top - b),
            c
        },
        getAspectRatio: function(a) {
            a = null == a ? this.visualBounds: 1 === a.nodeType ? this.getBounds(a) : a;
            var b = a.width,
            c = a.height;
            return "function" == typeof b && (b = b.call(a)),
            "function" == typeof c && (c = c.call(a)),
            b / c
        },
        inLayoutViewport: function(a, b) {
            var c = this.getBounds(a, b);
            return !! c && c.bottom >= 0 && c.right >= 0 && c.top <= this.layoutBounds.width && c.left <= this.layoutBounds.height
        },
        getScreenOrientation: function(a) {
            var b = window.screen,
            c = b.orientation || b.mozOrientation || b.msOrientation;
            if (c && "string" == typeof c.type) return c.type;
            if ("string" == typeof c) return c;
            var d = "portrait-primary",
            e = "landscape-primary";
            if ("screen" === a) return b.height > b.width ? d: e;
            if ("viewport" === a) return this.visualBounds.height > this.visualBounds.width ? d: e;
            if ("window.orientation" === a && "number" == typeof window.orientation) return 0 === window.orientation || 180 === window.orientation ? d: e;
            if (window.matchMedia) {
                if (window.matchMedia("(orientation: portrait)").matches) return d;
                if (window.matchMedia("(orientation: landscape)").matches) return e
            }
            return this.visualBounds.height > this.visualBounds.width ? d: e
        },
        visualBounds: new c.Rectangle,
        layoutBounds: new c.Rectangle,
        documentBounds: new c.Rectangle
    },
    c.Device.whenReady(function(a) {
        var b = window && "pageXOffset" in window ?
        function() {
            return window.pageXOffset
        }: function() {
            return document.documentElement.scrollLeft
        },
        d = window && "pageYOffset" in window ?
        function() {
            return window.pageYOffset
        }: function() {
            return document.documentElement.scrollTop
        };
        Object.defineProperty(c.DOM, "scrollX", {
            get: b
        }),
        Object.defineProperty(c.DOM, "scrollY", {
            get: d
        }),
        Object.defineProperty(c.DOM.visualBounds, "x", {
            get: b
        }),
        Object.defineProperty(c.DOM.visualBounds, "y", {
            get: d
        }),
        Object.defineProperty(c.DOM.layoutBounds, "x", {
            value: 0
        }),
        Object.defineProperty(c.DOM.layoutBounds, "y", {
            value: 0
        });
        var e = a.desktop && document.documentElement.clientWidth <= window.innerWidth && document.documentElement.clientHeight <= window.innerHeight;
        if (e) {
            var f = function() {
                return Math.max(window.innerWidth, document.documentElement.clientWidth)
            },
            g = function() {
                return Math.max(window.innerHeight, document.documentElement.clientHeight)
            };
            Object.defineProperty(c.DOM.visualBounds, "width", {
                get: f
            }),
            Object.defineProperty(c.DOM.visualBounds, "height", {
                get: g
            }),
            Object.defineProperty(c.DOM.layoutBounds, "width", {
                get: f
            }),
            Object.defineProperty(c.DOM.layoutBounds, "height", {
                get: g
            })
        } else Object.defineProperty(c.DOM.visualBounds, "width", {
            get: function() {
                return window.innerWidth
            }
        }),
        Object.defineProperty(c.DOM.visualBounds, "height", {
            get: function() {
                return window.innerHeight
            }
        }),
        Object.defineProperty(c.DOM.layoutBounds, "width", {
            get: function() {
                var a = document.documentElement.clientWidth,
                b = window.innerWidth;
                return b > a ? b: a
            }
        }),
        Object.defineProperty(c.DOM.layoutBounds, "height", {
            get: function() {
                var a = document.documentElement.clientHeight,
                b = window.innerHeight;
                return b > a ? b: a
            }
        });
        Object.defineProperty(c.DOM.documentBounds, "x", {
            value: 0
        }),
        Object.defineProperty(c.DOM.documentBounds, "y", {
            value: 0
        }),
        Object.defineProperty(c.DOM.documentBounds, "width", {
            get: function() {
                var a = document.documentElement;
                return Math.max(a.clientWidth, a.offsetWidth, a.scrollWidth)
            }
        }),
        Object.defineProperty(c.DOM.documentBounds, "height", {
            get: function() {
                var a = document.documentElement;
                return Math.max(a.clientHeight, a.offsetHeight, a.scrollHeight)
            }
        })
    },
    null, !0),
    c.Canvas = {
        create: function(a, b, c) {
            a = a || 256,
            b = b || 256;
            var d = document.createElement("canvas");
            return "string" == typeof c && "" !== c && (d.id = c),
            d.width = a,
            d.height = b,
            d.style.display = "block",
            d
        },
        setBackgroundColor: function(a, b) {
            return b = b || "rgb(0,0,0)",
            a.style.backgroundColor = b,
            a
        },
        setTouchAction: function(a, b) {
            return b = b || "none",
            a.style.msTouchAction = b,
            a.style["ms-touch-action"] = b,
            a.style["touch-action"] = b,
            a
        },
        setUserSelect: function(a, b) {
            return b = b || "none",
            a.style["-webkit-touch-callout"] = b,
            a.style["-webkit-user-select"] = b,
            a.style["-khtml-user-select"] = b,
            a.style["-moz-user-select"] = b,
            a.style["-ms-user-select"] = b,
            a.style["user-select"] = b,
            a.style["-webkit-tap-highlight-color"] = "rgba(0, 0, 0, 0)",
            a
        },
        addToDOM: function(a, b, c) {
            var d;
            return "undefined" == typeof c && (c = !0),
            b && ("string" == typeof b ? d = document.getElementById(b) : "object" == typeof b && 1 === b.nodeType && (d = b)),
            d || (d = document.body),
            c && d.style && (d.style.overflow = "hidden"),
            d.appendChild(a),
            a
        },
        removeFromDOM: function(a) {
            a.parentNode && a.parentNode.removeChild(a)
        },
        setTransform: function(a, b, c, d, e, f, g) {
            return a.setTransform(d, f, g, e, b, c),
            a
        },
        setSmoothingEnabled: function(a, b) {
            return a.imageSmoothingEnabled = b,
            a.mozImageSmoothingEnabled = b,
            a.oImageSmoothingEnabled = b,
            a.webkitImageSmoothingEnabled = b,
            a.msImageSmoothingEnabled = b,
            a
        },
        getSmoothingEnabled: function(a) {
            return a.imageSmoothingEnabled || a.mozImageSmoothingEnabled || a.oImageSmoothingEnabled || a.webkitImageSmoothingEnabled || a.msImageSmoothingEnabled
        },
        setImageRenderingCrisp: function(a) {
            return a.style["image-rendering"] = "optimizeSpeed",
            a.style["image-rendering"] = "crisp-edges",
            a.style["image-rendering"] = "-moz-crisp-edges",
            a.style["image-rendering"] = "-webkit-optimize-contrast",
            a.style["image-rendering"] = "optimize-contrast",
            a.style["image-rendering"] = "pixelated",
            a.style.msInterpolationMode = "nearest-neighbor",
            a
        },
        setImageRenderingBicubic: function(a) {
            return a.style["image-rendering"] = "auto",
            a.style.msInterpolationMode = "bicubic",
            a
        }
    },
    c.Canvas.getOffset = c.DOM.getOffset,
    c.Canvas.getAspectRatio = c.DOM.getAspectRatio,
    c.RequestAnimationFrame = function(a, b) {
        "undefined" == typeof b && (b = !1),
        this.game = a,
        this.isRunning = !1,
        this.forceSetTimeOut = b;
        for (var c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; d++) window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"],
        window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"];
        this._isSetTimeOut = !1,
        this._onLoop = null,
        this._timeOutID = null
    },
    c.RequestAnimationFrame.prototype = {
        start: function() {
            this.isRunning = !0;
            var a = this; ! window.requestAnimationFrame || this.forceSetTimeOut ? (this._isSetTimeOut = !0, this._onLoop = function() {
                return a.updateSetTimeout()
            },
            this._timeOutID = window.setTimeout(this._onLoop, 0)) : (this._isSetTimeOut = !1, this._onLoop = function(b) {
                return a.updateRAF(b)
            },
            this._timeOutID = window.requestAnimationFrame(this._onLoop))
        },
        updateRAF: function(a) {
            this.game.update(Math.floor(a)),
            this._timeOutID = window.requestAnimationFrame(this._onLoop)
        },
        updateSetTimeout: function() {
            this.game.update(Date.now()),
            this._timeOutID = window.setTimeout(this._onLoop, this.game.time.timeToCall)
        },
        stop: function() {
            this._isSetTimeOut ? clearTimeout(this._timeOutID) : window.cancelAnimationFrame(this._timeOutID),
            this.isRunning = !1
        },
        isSetTimeOut: function() {
            return this._isSetTimeOut
        },
        isRAF: function() {
            return this._isSetTimeOut === !1
        }
    },
    c.RequestAnimationFrame.prototype.constructor = c.RequestAnimationFrame,
    c.Math = {
        PI2: 2 * Math.PI,
        fuzzyEqual: function(a, b, c) {
            return "undefined" == typeof c && (c = 1e-4),
            Math.abs(a - b) < c
        },
        fuzzyLessThan: function(a, b, c) {
            return "undefined" == typeof c && (c = 1e-4),
            b + c > a
        },
        fuzzyGreaterThan: function(a, b, c) {
            return "undefined" == typeof c && (c = 1e-4),
            a > b - c
        },
        fuzzyCeil: function(a, b) {
            return "undefined" == typeof b && (b = 1e-4),
            Math.ceil(a - b)
        },
        fuzzyFloor: function(a, b) {
            return "undefined" == typeof b && (b = 1e-4),
            Math.floor(a + b)
        },
        average: function() {
            for (var a = 0,
            b = 0; b < arguments.length; b++) a += +arguments[b];
            return a / arguments.length
        },
        truncate: function(a) {
            return Math.trunc(a)
        },
        shear: function(a) {
            return a % 1
        },
        snapTo: function(a, b, c) {
            return "undefined" == typeof c && (c = 0),
            0 === b ? a: (a -= c, a = b * Math.round(a / b), c + a)
        },
        snapToFloor: function(a, b, c) {
            return "undefined" == typeof c && (c = 0),
            0 === b ? a: (a -= c, a = b * Math.floor(a / b), c + a)
        },
        snapToCeil: function(a, b, c) {
            return "undefined" == typeof c && (c = 0),
            0 === b ? a: (a -= c, a = b * Math.ceil(a / b), c + a)
        },
        snapToInArray: function(a, b, d) {
            return "undefined" == typeof d && (d = !0),
            d && b.sort(),
            c.ArrayUtils.findClosest(a, b)
        },
        roundTo: function(a, b, c) {
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = 10);
            var d = Math.pow(c, -b);
            return Math.round(a * d) / d
        },
        floorTo: function(a, b, c) {
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = 10);
            var d = Math.pow(c, -b);
            return Math.floor(a * d) / d
        },
        ceilTo: function(a, b, c) {
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = 10);
            var d = Math.pow(c, -b);
            return Math.ceil(a * d) / d
        },
        interpolateFloat: function(a, b, c) {
            return (b - a) * c + a
        },
        angleBetween: function(a, b, c, d) {
            return Math.atan2(d - b, c - a)
        },
        angleBetweenY: function(a, b, c, d) {
            return Math.atan2(c - a, d - b)
        },
        angleBetweenPoints: function(a, b) {
            return Math.atan2(b.y - a.y, b.x - a.x)
        },
        angleBetweenPointsY: function(a, b) {
            return Math.atan2(b.x - a.x, b.y - a.y)
        },
        reverseAngle: function(a) {
            return this.normalizeAngle(a + Math.PI, !0)
        },
        normalizeAngle: function(a) {
            return a %= 2 * Math.PI,
            a >= 0 ? a: a + 2 * Math.PI
        },
        normalizeLatitude: function(a) {
            return c.Math.clamp(a, -90, 90)
        },
        normalizeLongitude: function(a) {
            return c.Math.wrap(a, -180, 180)
        },
        chanceRoll: function(a) {
            return c.Utils.chanceRoll(a)
        },
        numberArray: function(a, b) {
            return c.ArrayUtils.numberArray(a, b)
        },
        numberArrayStep: function(a, b, d) {
            return c.ArrayUtils.numberArrayStep(a, b, d)
        },
        maxAdd: function(a, b, c) {
            return Math.min(a + b, c)
        },
        minSub: function(a, b, c) {
            return Math.max(a - b, c)
        },
        wrap: function(a, b, c) {
            var d = c - b;
            if (0 >= d) return 0;
            var e = (a - b) % d;
            return 0 > e && (e += d),
            e + b
        },
        wrapValue: function(a, b, c) {
            var d;
            return a = Math.abs(a),
            b = Math.abs(b),
            c = Math.abs(c),
            d = (a + b) % c
        },
        limitValue: function(a, b, d) {
            return c.Math.clamp(a, b, d)
        },
        randomSign: function() {
            return c.Utils.randomChoice( - 1, 1)
        },
        isOdd: function(a) {
            return 1 & a
        },
        isEven: function(a) {
            return ! (1 & a)
        },
        min: function() {
            if (1 === arguments.length && "object" == typeof arguments[0]) var a = arguments[0];
            else var a = arguments;
            for (var b = 1,
            c = 0,
            d = a.length; d > b; b++) a[b] < a[c] && (c = b);
            return a[c]
        },
        max: function() {
            if (1 === arguments.length && "object" == typeof arguments[0]) var a = arguments[0];
            else var a = arguments;
            for (var b = 1,
            c = 0,
            d = a.length; d > b; b++) a[b] > a[c] && (c = b);
            return a[c]
        },
        minProperty: function(a) {
            if (2 === arguments.length && "object" == typeof arguments[1]) var b = arguments[1];
            else var b = arguments.slice(1);
            for (var c = 1,
            d = 0,
            e = b.length; e > c; c++) b[c][a] < b[d][a] && (d = c);
            return b[d][a]
        },
        maxProperty: function(a) {
            if (2 === arguments.length && "object" == typeof arguments[1]) var b = arguments[1];
            else var b = arguments.slice(1);
            for (var c = 1,
            d = 0,
            e = b.length; e > c; c++) b[c][a] > b[d][a] && (d = c);
            return b[d][a]
        },
        wrapAngle: function(a, b) {
            return b ? this.wrap(a, -Math.PI, Math.PI) : this.wrap(a, -180, 180)
        },
        angleLimit: function(a, b, c) {
            var d = a;
            return a > c ? d = c: b > a && (d = b),
            d
        },
        linearInterpolation: function(a, b) {
            var c = a.length - 1,
            d = c * b,
            e = Math.floor(d);
            return 0 > b ? this.linear(a[0], a[1], d) : b > 1 ? this.linear(a[c], a[c - 1], c - d) : this.linear(a[e], a[e + 1 > c ? c: e + 1], d - e)
        },
        bezierInterpolation: function(a, b) {
            for (var c = 0,
            d = a.length - 1,
            e = 0; d >= e; e++) c += Math.pow(1 - b, d - e) * Math.pow(b, e) * a[e] * this.bernstein(d, e);
            return c
        },
        catmullRomInterpolation: function(a, b) {
            var c = a.length - 1,
            d = c * b,
            e = Math.floor(d);
            return a[0] === a[c] ? (0 > b && (e = Math.floor(d = c * (1 + b))), this.catmullRom(a[(e - 1 + c) % c], a[e], a[(e + 1) % c], a[(e + 2) % c], d - e)) : 0 > b ? a[0] - (this.catmullRom(a[0], a[0], a[1], a[1], -d) - a[0]) : b > 1 ? a[c] - (this.catmullRom(a[c], a[c], a[c - 1], a[c - 1], d - c) - a[c]) : this.catmullRom(a[e ? e - 1 : 0], a[e], a[e + 1 > c ? c: e + 1], a[e + 2 > c ? c: e + 2], d - e)
        },
        linear: function(a, b, c) {
            return (b - a) * c + a
        },
        bernstein: function(a, b) {
            return this.factorial(a) / this.factorial(b) / this.factorial(a - b)
        },
        factorial: function(a) {
            if (0 === a) return 1;
            for (var b = a; --a;) b *= a;
            return b
        },
        catmullRom: function(a, b, c, d, e) {
            var f = .5 * (c - a),
            g = .5 * (d - b),
            h = e * e,
            i = e * h;
            return (2 * b - 2 * c + f + g) * i + ( - 3 * b + 3 * c - 2 * f - g) * h + f * e + b
        },
        difference: function(a, b) {
            return Math.abs(a - b)
        },
        getRandom: function(a, b, d) {
            return c.ArrayUtils.getRandomItem(a, b, d)
        },
        removeRandom: function(a, b, d) {
            return c.ArrayUtils.removeRandomItem(a, b, d)
        },
        floor: function(a) {
            return Math.trunc(a)
        },
        ceil: function(a) {
            return c.Math.roundAwayFromZero(a)
        },
        roundAwayFromZero: function(a) {
            return a > 0 ? Math.ceil(a) : Math.floor(a)
        },
        sinCosGenerator: function(a, b, c, d) {
            "undefined" == typeof b && (b = 1),
            "undefined" == typeof c && (c = 1),
            "undefined" == typeof d && (d = 1);
            for (var e = b,
            f = c,
            g = d * Math.PI / a,
            h = [], i = [], j = 0; a > j; j++) f -= e * g,
            e += f * g,
            h[j] = f,
            i[j] = e;
            return {
                sin: i,
                cos: h,
                length: a
            }
        },
        shift: function(a) {
            var b = a.shift();
            return a.push(b),
            b
        },
        shuffleArray: function(a) {
            return c.ArrayUtils.shuffle(a)
        },
        distance: function(a, b, c, d) {
            var e = a - c,
            f = b - d;
            return Math.sqrt(e * e + f * f)
        },
        distancePow: function(a, b, c, d, e) {
            return "undefined" == typeof e && (e = 2),
            Math.sqrt(Math.pow(c - a, e) + Math.pow(d - b, e))
        },
        distanceRounded: function(a, b, d, e) {
            return Math.round(c.Math.distance(a, b, d, e))
        },
        clamp: function(a, b, c) {
            return b > a ? b: a > c ? c: a
        },
        clampBottom: function(a, b) {
            return b > a ? b: a
        },
        within: function(a, b, c) {
            return Math.abs(a - b) <= c
        },
        mapLinear: function(a, b, c, d, e) {
            return d + (a - b) * (e - d) / (c - b)
        },
        smoothstep: function(a, b, c) {
            return a = Math.max(0, Math.min(1, (a - b) / (c - b))),
            a * a * (3 - 2 * a)
        },
        smootherstep: function(a, b, c) {
            return a = Math.max(0, Math.min(1, (a - b) / (c - b))),
            a * a * a * (a * (6 * a - 15) + 10)
        },
        sign: function(a) {
            return 0 > a ? -1 : a > 0 ? 1 : 0
        },
        percent: function(a, b, c) {
            return "undefined" == typeof c && (c = 0),
            a > b || c > b ? 1 : c > a || c > a ? 0 : (a - c) / b
        }
    };
    var j = Math.PI / 180,
    k = 180 / Math.PI;
    c.Math.degToRad = function(a) {
        return a * j
    },
    c.Math.radToDeg = function(a) {
        return a * k
    },
    c.RandomDataGenerator = function(a) {
        "undefined" == typeof a && (a = []),
        this.c = 1,
        this.s0 = 0,
        this.s1 = 0,
        this.s2 = 0,
        this.sow(a)
    },
    c.RandomDataGenerator.prototype = {
        rnd: function() {
            var a = 2091639 * this.s0 + 2.3283064365386963e-10 * this.c;
            return this.c = 0 | a,
            this.s0 = this.s1,
            this.s1 = this.s2,
            this.s2 = a - this.c,
            this.s2
        },
        sow: function(a) {
            if (this.s0 = this.hash(" "), this.s1 = this.hash(this.s0), this.s2 = this.hash(this.s1), this.c = 1, a) for (var b = 0; b < a.length && null != a[b]; b++) {
                var c = a[b];
                this.s0 -= this.hash(c),
                this.s0 += ~~ (this.s0 < 0),
                this.s1 -= this.hash(c),
                this.s1 += ~~ (this.s1 < 0),
                this.s2 -= this.hash(c),
                this.s2 += ~~ (this.s2 < 0)
            }
        },
        hash: function(a) {
            var b, c, d;
            for (d = 4022871197, a = a.toString(), c = 0; c < a.length; c++) d += a.charCodeAt(c),
            b = .02519603282416938 * d,
            d = b >>> 0,
            b -= d,
            b *= d,
            d = b >>> 0,
            b -= d,
            d += 4294967296 * b;
            return 2.3283064365386963e-10 * (d >>> 0)
        },
        integer: function() {
            return 4294967296 * this.rnd.apply(this)
        },
        frac: function() {
            return this.rnd.apply(this) + 1.1102230246251565e-16 * (2097152 * this.rnd.apply(this) | 0)
        },
        real: function() {
            return this.integer() + this.frac()
        },
        integerInRange: function(a, b) {
            return Math.floor(this.realInRange(0, b - a + 1) + a)
        },
        between: function(a, b) {
            return this.integerInRange(a, b)
        },
        realInRange: function(a, b) {
            return this.frac() * (b - a) + a
        },
        normal: function() {
            return 1 - 2 * this.frac()
        },
        uuid: function() {
            var a = "",
            b = "";
            for (b = a = ""; a++<36; b += ~a % 5 | 3 * a & 4 ? (15 ^ a ? 8 ^ this.frac() * (20 ^ a ? 16 : 4) : 4).toString(16) : "-");
            return b
        },
        pick: function(a) {
            return a[this.integerInRange(0, a.length - 1)]
        },
        weightedPick: function(a) {
            return a[~~ (Math.pow(this.frac(), 2) * (a.length - 1))]
        },
        timestamp: function(a, b) {
            return this.realInRange(a || 9466848e5, b || 1577862e6)
        },
        angle: function() {
            return this.integerInRange( - 180, 180)
        }
    },
    c.RandomDataGenerator.prototype.constructor = c.RandomDataGenerator,
    c.QuadTree = function(a, b, c, d, e, f, g) {
        this.maxObjects = 10,
        this.maxLevels = 4,
        this.level = 0,
        this.bounds = {},
        this.objects = [],
        this.nodes = [],
        this._empty = [],
        this.reset(a, b, c, d, e, f, g)
    },
    c.QuadTree.prototype = {
        reset: function(a, b, c, d, e, f, g) {
            this.maxObjects = e || 10,
            this.maxLevels = f || 4,
            this.level = g || 0,
            this.bounds = {
                x: Math.round(a),
                y: Math.round(b),
                width: c,
                height: d,
                subWidth: Math.floor(c / 2),
                subHeight: Math.floor(d / 2),
                right: Math.round(a) + Math.floor(c / 2),
                bottom: Math.round(b) + Math.floor(d / 2)
            },
            this.objects.length = 0,
            this.nodes.length = 0
        },
        populate: function(a) {
            a.forEach(this.populateHandler, this, !0)
        },
        populateHandler: function(a) {
            a.body && a.exists && this.insert(a.body)
        },
        split: function() {
            this.nodes[0] = new c.QuadTree(this.bounds.right, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1),
            this.nodes[1] = new c.QuadTree(this.bounds.x, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1),
            this.nodes[2] = new c.QuadTree(this.bounds.x, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1),
            this.nodes[3] = new c.QuadTree(this.bounds.right, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1)
        },
        insert: function(a) {
            var b, c = 0;
            if (null != this.nodes[0] && (b = this.getIndex(a), -1 !== b)) return void this.nodes[b].insert(a);
            if (this.objects.push(a), this.objects.length > this.maxObjects && this.level < this.maxLevels) for (null == this.nodes[0] && this.split(); c < this.objects.length;) b = this.getIndex(this.objects[c]),
            -1 !== b ? this.nodes[b].insert(this.objects.splice(c, 1)[0]) : c++
        },
        getIndex: function(a) {
            var b = -1;
            return a.x < this.bounds.right && a.right < this.bounds.right ? a.y < this.bounds.bottom && a.bottom < this.bounds.bottom ? b = 1 : a.y > this.bounds.bottom && (b = 2) : a.x > this.bounds.right && (a.y < this.bounds.bottom && a.bottom < this.bounds.bottom ? b = 0 : a.y > this.bounds.bottom && (b = 3)),
            b
        },
        retrieve: function(a) {
            if (a instanceof c.Rectangle) var b = this.objects,
            d = this.getIndex(a);
            else {
                if (!a.body) return this._empty;
                var b = this.objects,
                d = this.getIndex(a.body)
            }
            return this.nodes[0] && ( - 1 !== d ? b = b.concat(this.nodes[d].retrieve(a)) : (b = b.concat(this.nodes[0].retrieve(a)), b = b.concat(this.nodes[1].retrieve(a)), b = b.concat(this.nodes[2].retrieve(a)), b = b.concat(this.nodes[3].retrieve(a)))),
            b
        },
        clear: function() {
            this.objects.length = 0;
            for (var a = this.nodes.length; a--;) this.nodes[a].clear(),
            this.nodes.splice(a, 1);
            this.nodes.length = 0
        }
    },
    c.QuadTree.prototype.constructor = c.QuadTree,
    c.Net = function(a) {
        this.game = a
    },
    c.Net.prototype = {
        getHostName: function() {
            return window.location && window.location.hostname ? window.location.hostname: null
        },
        checkDomainName: function(a) {
            return - 1 !== window.location.hostname.indexOf(a)
        },
        updateQueryString: function(a, b, c, d) {
            "undefined" == typeof c && (c = !1),
            ("undefined" == typeof d || "" === d) && (d = window.location.href);
            var e = "",
            f = new RegExp("([?|&])" + a + "=.*?(&|#|$)(.*)", "gi");
            if (f.test(d)) e = "undefined" != typeof b && null !== b ? d.replace(f, "$1" + a + "=" + b + "$2$3") : d.replace(f, "$1$3").replace(/(&|\?)$/, "");
            else if ("undefined" != typeof b && null !== b) {
                var g = -1 !== d.indexOf("?") ? "&": "?",
                h = d.split("#");
                d = h[0] + g + a + "=" + b,
                h[1] && (d += "#" + h[1]),
                e = d
            } else e = d;
            return c ? void(window.location.href = e) : e
        },
        getQueryString: function(a) {
            "undefined" == typeof a && (a = "");
            var b = {},
            c = location.search.substring(1).split("&");
            for (var d in c) {
                var e = c[d].split("=");
                if (e.length > 1) {
                    if (a && a == this.decodeURI(e[0])) return this.decodeURI(e[1]);
                    b[this.decodeURI(e[0])] = this.decodeURI(e[1])
                }
            }
            return b
        },
        decodeURI: function(a) {
            return decodeURIComponent(a.replace(/\+/g, " "))
        }
    },
    c.Net.prototype.constructor = c.Net,
    c.TweenManager = function(a) {
        this.game = a,
        this._tweens = [],
        this._add = [],
        this.easeMap = {
            Power0: c.Easing.Power0,
            Power1: c.Easing.Power1,
            Power2: c.Easing.Power2,
            Power3: c.Easing.Power3,
            Power4: c.Easing.Power4,
            Linear: c.Easing.Linear.None,
            Quad: c.Easing.Quadratic.Out,
            Cubic: c.Easing.Cubic.Out,
            Quart: c.Easing.Quartic.Out,
            Quint: c.Easing.Quintic.Out,
            Sine: c.Easing.Sinusoidal.Out,
            Expo: c.Easing.Exponential.Out,
            Circ: c.Easing.Circular.Out,
            Elastic: c.Easing.Elastic.Out,
            Back: c.Easing.Back.Out,
            Bounce: c.Easing.Bounce.Out,
            "Quad.easeIn": c.Easing.Quadratic.In,
            "Cubic.easeIn": c.Easing.Cubic.In,
            "Quart.easeIn": c.Easing.Quartic.In,
            "Quint.easeIn": c.Easing.Quintic.In,
            "Sine.easeIn": c.Easing.Sinusoidal.In,
            "Expo.easeIn": c.Easing.Exponential.In,
            "Circ.easeIn": c.Easing.Circular.In,
            "Elastic.easeIn": c.Easing.Elastic.In,
            "Back.easeIn": c.Easing.Back.In,
            "Bounce.easeIn": c.Easing.Bounce.In,
            "Quad.easeOut": c.Easing.Quadratic.Out,
            "Cubic.easeOut": c.Easing.Cubic.Out,
            "Quart.easeOut": c.Easing.Quartic.Out,
            "Quint.easeOut": c.Easing.Quintic.Out,
            "Sine.easeOut": c.Easing.Sinusoidal.Out,
            "Expo.easeOut": c.Easing.Exponential.Out,
            "Circ.easeOut": c.Easing.Circular.Out,
            "Elastic.easeOut": c.Easing.Elastic.Out,
            "Back.easeOut": c.Easing.Back.Out,
            "Bounce.easeOut": c.Easing.Bounce.Out,
            "Quad.easeInOut": c.Easing.Quadratic.InOut,
            "Cubic.easeInOut": c.Easing.Cubic.InOut,
            "Quart.easeInOut": c.Easing.Quartic.InOut,
            "Quint.easeInOut": c.Easing.Quintic.InOut,
            "Sine.easeInOut": c.Easing.Sinusoidal.InOut,
            "Expo.easeInOut": c.Easing.Exponential.InOut,
            "Circ.easeInOut": c.Easing.Circular.InOut,
            "Elastic.easeInOut": c.Easing.Elastic.InOut,
            "Back.easeInOut": c.Easing.Back.InOut,
            "Bounce.easeInOut": c.Easing.Bounce.InOut
        },
        this.game.onPause.add(this._pauseAll, this),
        this.game.onResume.add(this._resumeAll, this)
    },
    c.TweenManager.prototype = {
        getAll: function() {
            return this._tweens
        },
        removeAll: function() {
            for (var a = 0; a < this._tweens.length; a++) this._tweens[a].pendingDelete = !0;
            this._add = []
        },
        removeFrom: function(a, b) {
            "undefined" == typeof b && (b = !0);
            var d, e;
            if (Array.isArray(a)) for (d = 0, e = a.length; e > d; d++) this.removeFrom(a[d]);
            else if (a.type === c.GROUP && b) for (var d = 0,
            e = a.children.length; e > d; d++) this.removeFrom(a.children[d]);
            else {
                for (d = 0, e = this._tweens.length; e > d; d++) a === this._tweens[d].target && this.remove(this._tweens[d]);
                for (d = 0, e = this._add.length; e > d; d++) a === this._add[d].target && this.remove(this._add[d])
            }
        },
        add: function(a) {
            a._manager = this,
            this._add.push(a)
        },
        create: function(a) {
            return new c.Tween(a, this.game, this)
        },
        remove: function(a) {
            var b = this._tweens.indexOf(a); - 1 !== b ? this._tweens[b].pendingDelete = !0 : (b = this._add.indexOf(a), -1 !== b && (this._add[b].pendingDelete = !0))
        },
        update: function() {
            var a = this._add.length,
            b = this._tweens.length;
            if (0 === b && 0 === a) return ! 1;
            for (var c = 0; b > c;) this._tweens[c].update(this.game.time.time) ? c++:(this._tweens.splice(c, 1), b--);
            return a > 0 && (this._tweens = this._tweens.concat(this._add), this._add.length = 0),
            !0
        },
        isTweening: function(a) {
            return this._tweens.some(function(b) {
                return b.target === a
            })
        },
        _pauseAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--) this._tweens[a]._pause()
        },
        _resumeAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--) this._tweens[a]._resume()
        },
        pauseAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--) this._tweens[a].pause()
        },
        resumeAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--) this._tweens[a].resume(!0)
        }
    },
    c.TweenManager.prototype.constructor = c.TweenManager,
    c.Tween = function(a, b, d) {
        this.game = b,
        this.target = a,
        this.manager = d,
        this.timeline = [],
        this.reverse = !1,
        this.timeScale = 1,
        this.repeatCounter = 0,
        this.pendingDelete = !1,
        this.onStart = new c.Signal,
        this.onLoop = new c.Signal,
        this.onRepeat = new c.Signal,
        this.onChildComplete = new c.Signal,
        this.onComplete = new c.Signal,
        this.isRunning = !1,
        this.current = 0,
        this.properties = {},
        this.chainedTween = null,
        this.isPaused = !1,
        this._onUpdateCallback = null,
        this._onUpdateCallbackContext = null,
        this._pausedTime = 0,
        this._codePaused = !1
    },
    c.Tween.prototype = {
        to: function(a, b, d, e, f, g, h) {
            return "undefined" == typeof b && (b = 1e3),
            "undefined" == typeof d && (d = c.Easing.Default),
            "undefined" == typeof e && (e = !1),
            "undefined" == typeof f && (f = 0),
            "undefined" == typeof g && (g = 0),
            "undefined" == typeof h && (h = !1),
            "string" == typeof d && this.manager.easeMap[d] && (d = this.manager.easeMap[d]),
            this.isRunning ? (console.warn("Phaser.Tween.to cannot be called after Tween.start"), this) : (this.timeline.push(new c.TweenData(this).to(a, b, d, f, g, h)), e && this.start(), this)
        },
        from: function(a, b, d, e, f, g, h) {
            return "undefined" == typeof b && (b = 1e3),
            "undefined" == typeof d && (d = c.Easing.Default),
            "undefined" == typeof e && (e = !1),
            "undefined" == typeof f && (f = 0),
            "undefined" == typeof g && (g = 0),
            "undefined" == typeof h && (h = !1),
            "string" == typeof d && this.manager.easeMap[d] && (d = this.manager.easeMap[d]),
            this.isRunning ? (console.warn("Phaser.Tween.from cannot be called after Tween.start"), this) : (this.timeline.push(new c.TweenData(this).from(a, b, d, f, g, h)), e && this.start(), this)
        },
        start: function(a) {
            if ("undefined" == typeof a && (a = 0), null === this.game || null === this.target || 0 === this.timeline.length || this.isRunning) return this;
            for (var b = 0; b < this.timeline.length; b++) for (var c in this.timeline[b].vEnd) this.properties[c] = this.target[c] || 0,
            Array.isArray(this.properties[c]) || (this.properties[c] *= 1);
            for (var b = 0; b < this.timeline.length; b++) this.timeline[b].loadValues();
            return this.manager.add(this),
            this.isRunning = !0,
            (0 > a || a > this.timeline.length - 1) && (a = 0),
            this.current = a,
            this.timeline[this.current].start(),
            this.onStart.dispatch(this.target, this),
            this
        },
        stop: function(a) {
            return "undefined" == typeof a && (a = !1),
            this.isRunning = !1,
            this._onUpdateCallback = null,
            this._onUpdateCallbackContext = null,
            a && (this.onComplete.dispatch(this.target, this), this.chainedTween && this.chainedTween.start()),
            this.manager.remove(this),
            this
        },
        updateTweenData: function(a, b, c) {
            if (0 === this.timeline.length) return this;
            if ("undefined" == typeof c && (c = 0), -1 === c) for (var d = 0; d < this.timeline.length; d++) this.timeline[d][a] = b;
            else this.timeline[c][a] = b;
            return this
        },
        delay: function(a, b) {
            return this.updateTweenData("delay", a, b)
        },
        repeat: function(a, b, c) {
            return "undefined" == typeof b && (b = 0),
            this.updateTweenData("repeatCounter", a, c),
            this.updateTweenData("repeatDelay", b, c)
        },
        repeatDelay: function(a, b) {
            return this.updateTweenData("repeatDelay", a, b)
        },
        yoyo: function(a, b, c) {
            return "undefined" == typeof b && (b = 0),
            this.updateTweenData("yoyo", a, c),
            this.updateTweenData("yoyoDelay", b, c)
        },
        yoyoDelay: function(a, b) {
            return this.updateTweenData("yoyoDelay", a, b)
        },
        easing: function(a, b) {
            return "string" == typeof a && this.manager.easeMap[a] && (a = this.manager.easeMap[a]),
            this.updateTweenData("easingFunction", a, b)
        },
        interpolation: function(a, b, d) {
            return "undefined" == typeof b && (b = c.Math),
            this.updateTweenData("interpolationFunction", a, d),
            this.updateTweenData("interpolationContext", b, d)
        },
        repeatAll: function(a) {
            return "undefined" == typeof a && (a = 0),
            this.repeatCounter = a,
            this
        },
        chain: function() {
            for (var a = arguments.length; a--;) a > 0 ? arguments[a - 1].chainedTween = arguments[a] : this.chainedTween = arguments[a];
            return this
        },
        loop: function(a) {
            return "undefined" == typeof a && (a = !0),
            a ? this.repeatAll( - 1) : this.repeatCounter = 0,
            this
        },
        onUpdateCallback: function(a, b) {
            return this._onUpdateCallback = a,
            this._onUpdateCallbackContext = b,
            this
        },
        pause: function() {
            this.isPaused = !0,
            this._codePaused = !0,
            this._pausedTime = this.game.time.time
        },
        _pause: function() {
            this._codePaused || (this.isPaused = !0, this._pausedTime = this.game.time.time)
        },
        resume: function() {
            if (this.isPaused) {
                this.isPaused = !1,
                this._codePaused = !1;
                for (var a = 0; a < this.timeline.length; a++) this.timeline[a].isRunning || (this.timeline[a].startTime += this.game.time.time - this._pausedTime)
            }
        },
        _resume: function() {
            this._codePaused || this.resume()
        },
        update: function(a) {
            if (this.pendingDelete) return ! 1;
            if (this.isPaused) return ! 0;
            var b = this.timeline[this.current].update(a);
            if (b === c.TweenData.PENDING) return ! 0;
            if (b === c.TweenData.RUNNING) return null !== this._onUpdateCallback && this._onUpdateCallback.call(this._onUpdateCallbackContext, this, this.timeline[this.current].value, this.timeline[this.current]),
            this.isRunning;
            if (b === c.TweenData.LOOPED) return this.onLoop.dispatch(this.target, this),
            !0;
            if (b === c.TweenData.COMPLETE) {
                var d = !1;
                return this.reverse ? (this.current--, this.current < 0 && (this.current = this.timeline.length - 1, d = !0)) : (this.current++, this.current === this.timeline.length && (this.current = 0, d = !0)),
                d ? -1 === this.repeatCounter ? (this.timeline[this.current].start(), this.onRepeat.dispatch(this.target, this), !0) : this.repeatCounter > 0 ? (this.repeatCounter--, this.timeline[this.current].start(), this.onRepeat.dispatch(this.target, this), !0) : (this.isRunning = !1, this.onComplete.dispatch(this.target, this), this.chainedTween && this.chainedTween.start(), !1) : (this.onChildComplete.dispatch(this.target, this), this.timeline[this.current].start(), !0)
            }
        },
        generateData: function(a, b) {
            if (null === this.game || null === this.target) return null;
            "undefined" == typeof b && (b = []);
            for (var c = 0; c < this.timeline.length; c++) for (var d in this.timeline[c].vEnd) this.properties[d] = this.target[d] || 0,
            Array.isArray(this.properties[d]) || (this.properties[d] *= 1);
            for (var c = 0; c < this.timeline.length; c++) this.timeline[c].loadValues();
            for (var c = 0; c < this.timeline.length; c++) b = b.concat(this.timeline[c].generateData(a));
            return b
        }
    },
    Object.defineProperty(c.Tween.prototype, "totalDuration", {
        get: function() {
            for (var a = 0,
            b = 0; b < this.timeline.length; b++) a += this.timeline[b].duration;
            return a
        }
    }),
    c.Tween.prototype.constructor = c.Tween,
    c.TweenData = function(a) {
        this.parent = a,
        this.game = a.game,
        this.vStart = {},
        this.vStartCache = {},
        this.vEnd = {},
        this.vEndCache = {},
        this.duration = 1e3,
        this.percent = 0,
        this.value = 0,
        this.repeatCounter = 0,
        this.repeatDelay = 0,
        this.interpolate = !1,
        this.yoyo = !1,
        this.yoyoDelay = 0,
        this.inReverse = !1,
        this.delay = 0,
        this.dt = 0,
        this.startTime = null,
        this.easingFunction = c.Easing.Default,
        this.interpolationFunction = c.Math.linearInterpolation,
        this.interpolationContext = c.Math,
        this.isRunning = !1,
        this.isFrom = !1
    },
    c.TweenData.PENDING = 0,
    c.TweenData.RUNNING = 1,
    c.TweenData.LOOPED = 2,
    c.TweenData.COMPLETE = 3,
    c.TweenData.prototype = {
        to: function(a, b, c, d, e, f) {
            return this.vEnd = a,
            this.duration = b,
            this.easingFunction = c,
            this.delay = d,
            this.repeatCounter = e,
            this.yoyo = f,
            this.isFrom = !1,
            this
        },
        from: function(a, b, c, d, e, f) {
            return this.vEnd = a,
            this.duration = b,
            this.easingFunction = c,
            this.delay = d,
            this.repeatCounter = e,
            this.yoyo = f,
            this.isFrom = !0,
            this
        },
        start: function() {
            if (this.startTime = this.game.time.time + this.delay, this.dt = this.parent.reverse ? this.duration: 0, this.isRunning = this.delay > 0 ? !1 : !0, this.isFrom) for (var a in this.vStartCache) this.vStart[a] = this.vEndCache[a],
            this.vEnd[a] = this.vStartCache[a],
            this.parent.target[a] = this.vStart[a];
            return this.value = 0,
            this.yoyoCounter = 0,
            this
        },
        loadValues: function() {
            for (var a in this.parent.properties) {
                if (this.vStart[a] = this.parent.properties[a], Array.isArray(this.vEnd[a])) {
                    if (0 === this.vEnd[a].length) continue;
                    this.vEnd[a] = [this.vStart[a]].concat(this.vEnd[a])
                }
                "undefined" != typeof this.vEnd[a] ? ("string" == typeof this.vEnd[a] && (this.vEnd[a] = this.vStart[a] + parseFloat(this.vEnd[a], 10)), this.parent.properties[a] = this.vEnd[a]) : this.vEnd[a] = this.vStart[a],
                this.vStartCache[a] = this.vStart[a],
                this.vEndCache[a] = this.vEnd[a]
            }
            return this
        },
        update: function() {
            if (this.isRunning) {
                if (this.game.time.time < this.startTime) return c.TweenData.RUNNING
            } else {
                if (! (this.game.time.time >= this.startTime)) return c.TweenData.PENDING;
                this.isRunning = !0
            }
            this.parent.reverse ? (this.dt -= this.game.time.physicsElapsedMS * this.parent.timeScale, this.dt = Math.max(this.dt, 0)) : (this.dt += this.game.time.physicsElapsedMS * this.parent.timeScale, this.dt = Math.min(this.dt, this.duration)),
            this.percent = this.dt / this.duration,
            this.value = this.easingFunction(this.percent);
            for (var a in this.vEnd) {
                var b = this.vStart[a],
                d = this.vEnd[a];
                this.parent.target[a] = Array.isArray(d) ? this.interpolationFunction.call(this.interpolationContext, d, this.value) : b + (d - b) * this.value
            }
            return ! this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent ? this.repeat() : c.TweenData.RUNNING
        },
        generateData: function(a) {
            this.dt = this.parent.reverse ? this.duration: 0;
            var b = [],
            c = !1,
            d = 1 / a * 1e3;
            do {
                this.parent.reverse ? (this.dt -= d, this.dt = Math.max(this.dt, 0)) : (this.dt += d, this.dt = Math.min(this.dt, this.duration)), this.percent = this.dt / this.duration, this.value = this.easingFunction(this.percent);
                var e = {};
                for (var f in this.vEnd) {
                    var g = this.vStart[f],
                    h = this.vEnd[f];
                    e[f] = Array.isArray(h) ? this.interpolationFunction(h, this.value) : g + (h - g) * this.value
                }
                b.push(e), (!this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent) && (c = !0)
            } while (! c );
            if (this.yoyo) {
                var i = b.slice();
                i.reverse(),
                b = b.concat(i)
            }
            return b
        },
        repeat: function() {
            if (this.yoyo) {
                if (this.inReverse && 0 === this.repeatCounter) return c.TweenData.COMPLETE;
                this.inReverse = !this.inReverse
            } else if (0 === this.repeatCounter) return c.TweenData.COMPLETE;
            if (this.inReverse) for (var a in this.vStartCache) this.vStart[a] = this.vEndCache[a],
            this.vEnd[a] = this.vStartCache[a];
            else {
                for (var a in this.vStartCache) this.vStart[a] = this.vStartCache[a],
                this.vEnd[a] = this.vEndCache[a];
                this.repeatCounter > 0 && this.repeatCounter--
            }
            return this.startTime = this.game.time.time,
            this.yoyo && this.inReverse ? this.startTime += this.yoyoDelay: this.inReverse || (this.startTime += this.repeatDelay),
            this.dt = this.parent.reverse ? this.duration: 0,
            c.TweenData.LOOPED
        }
    },
    c.TweenData.prototype.constructor = c.TweenData,
    c.Easing = {
        Linear: {
            None: function(a) {
                return a
            }
        },
        Quadratic: {
            In: function(a) {
                return a * a
            },
            Out: function(a) {
                return a * (2 - a)
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a: -.5 * (--a * (a - 2) - 1)
            }
        },
        Cubic: {
            In: function(a) {
                return a * a * a
            },
            Out: function(a) {
                return--a * a * a + 1
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a * a: .5 * ((a -= 2) * a * a + 2)
            }
        },
        Quartic: {
            In: function(a) {
                return a * a * a * a
            },
            Out: function(a) {
                return 1 - --a * a * a * a
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a * a * a: -.5 * ((a -= 2) * a * a * a - 2)
            }
        },
        Quintic: {
            In: function(a) {
                return a * a * a * a * a
            },
            Out: function(a) {
                return--a * a * a * a * a + 1
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a * a * a * a: .5 * ((a -= 2) * a * a * a * a + 2)
            }
        },
        Sinusoidal: {
            In: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : 1 - Math.cos(a * Math.PI / 2)
            },
            Out: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : Math.sin(a * Math.PI / 2)
            },
            InOut: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : .5 * (1 - Math.cos(Math.PI * a))
            }
        },
        Exponential: {
            In: function(a) {
                return 0 === a ? 0 : Math.pow(1024, a - 1)
            },
            Out: function(a) {
                return 1 === a ? 1 : 1 - Math.pow(2, -10 * a)
            },
            InOut: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : (a *= 2) < 1 ? .5 * Math.pow(1024, a - 1) : .5 * ( - Math.pow(2, -10 * (a - 1)) + 2)
            }
        },
        Circular: {
            In: function(a) {
                return 1 - Math.sqrt(1 - a * a)
            },
            Out: function(a) {
                return Math.sqrt(1 - --a * a)
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
            }
        },
        Elastic: {
            In: function(a) {
                var b, c = .1,
                d = .4;
                return 0 === a ? 0 : 1 === a ? 1 : (!c || 1 > c ? (c = 1, b = d / 4) : b = d * Math.asin(1 / c) / (2 * Math.PI), -(c * Math.pow(2, 10 * (a -= 1)) * Math.sin(2 * (a - b) * Math.PI / d)))
            },
            Out: function(a) {
                var b, c = .1,
                d = .4;
                return 0 === a ? 0 : 1 === a ? 1 : (!c || 1 > c ? (c = 1, b = d / 4) : b = d * Math.asin(1 / c) / (2 * Math.PI), c * Math.pow(2, -10 * a) * Math.sin(2 * (a - b) * Math.PI / d) + 1)
            },
            InOut: function(a) {
                var b, c = .1,
                d = .4;
                return 0 === a ? 0 : 1 === a ? 1 : (!c || 1 > c ? (c = 1, b = d / 4) : b = d * Math.asin(1 / c) / (2 * Math.PI), (a *= 2) < 1 ? -.5 * c * Math.pow(2, 10 * (a -= 1)) * Math.sin(2 * (a - b) * Math.PI / d) : c * Math.pow(2, -10 * (a -= 1)) * Math.sin(2 * (a - b) * Math.PI / d) * .5 + 1)
            }
        },
        Back: {
            In: function(a) {
                var b = 1.70158;
                return a * a * ((b + 1) * a - b)
            },
            Out: function(a) {
                var b = 1.70158;
                return--a * a * ((b + 1) * a + b) + 1
            },
            InOut: function(a) {
                var b = 2.5949095;
                return (a *= 2) < 1 ? .5 * a * a * ((b + 1) * a - b) : .5 * ((a -= 2) * a * ((b + 1) * a + b) + 2)
            }
        },
        Bounce: {
            In: function(a) {
                return 1 - c.Easing.Bounce.Out(1 - a)
            },
            Out: function(a) {
                return 1 / 2.75 > a ? 7.5625 * a * a: 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
            },
            InOut: function(a) {
                return.5 > a ? .5 * c.Easing.Bounce.In(2 * a) : .5 * c.Easing.Bounce.Out(2 * a - 1) + .5
            }
        }
    },
    c.Easing.Default = c.Easing.Linear.None,
    c.Easing.Power0 = c.Easing.Linear.None,
    c.Easing.Power1 = c.Easing.Quadratic.Out,
    c.Easing.Power2 = c.Easing.Cubic.Out,
    c.Easing.Power3 = c.Easing.Quartic.Out,
    c.Easing.Power4 = c.Easing.Quintic.Out,
    c.Time = function(a) {
        this.game = a,
        this.time = 0,
        this.prevTime = 0,
        this.now = 0,
        this.elapsed = 0,
        this.elapsedMS = 0,
        this.physicsElapsed = 0,
        this.physicsElapsedMS = 0,
        this.desiredFps = 60,
        this.suggestedFps = null,
        this.slowMotion = 1,
        this.advancedTiming = !1,
        this.frames = 0,
        this.fps = 0,
        this.fpsMin = 1e3,
        this.fpsMax = 0,
        this.msMin = 1e3,
        this.msMax = 0,
        this.pauseDuration = 0,
        this.timeToCall = 0,
        this.timeExpected = 0,
        this.events = new c.Timer(this.game, !1),
        this._frameCount = 0,
        this._elapsedAccumulator = 0,
        this._started = 0,
        this._timeLastSecond = 0,
        this._pauseStarted = 0,
        this._justResumed = !1,
        this._timers = []
    },
    c.Time.prototype = {
        boot: function() {
            this._started = Date.now(),
            this.time = Date.now(),
            this.events.start()
        },
        add: function(a) {
            return this._timers.push(a),
            a
        },
        create: function(a) {
            "undefined" == typeof a && (a = !0);
            var b = new c.Timer(this.game, a);
            return this._timers.push(b),
            b
        },
        removeAll: function() {
            for (var a = 0; a < this._timers.length; a++) this._timers[a].destroy();
            this._timers = [],
            this.events.removeAll()
        },
        update: function(a) {
            var b = this.time;
            if (this.time = Date.now(), this.elapsedMS = this.time - b, this.prevTime = this.now, this.now = a, this.elapsed = this.now - this.prevTime, this.timeToCall = Math.floor(Math.max(0, 1e3 / this.desiredFps - (this.timeCallExpected - a))), this.timeCallExpected = a + this.timeToCall, this._frameCount++, this._elapsedAccumulator += this.elapsed, this._frameCount >= 2 * this.desiredFps && (this.suggestedFps = 5 * Math.floor(200 / (this._elapsedAccumulator / this._frameCount)), this._frameCount = 0, this._elapsedAccumulator = 0), this.physicsElapsed = 1 / this.desiredFps, this.physicsElapsedMS = 1e3 * this.physicsElapsed, this.advancedTiming && (this.msMin = Math.min(this.msMin, this.elapsed), this.msMax = Math.max(this.msMax, this.elapsed), this.frames++, this.now > this._timeLastSecond + 1e3 && (this.fps = Math.round(1e3 * this.frames / (this.now - this._timeLastSecond)), this.fpsMin = Math.min(this.fpsMin, this.fps), this.fpsMax = Math.max(this.fpsMax, this.fps), this._timeLastSecond = this.now, this.frames = 0)), !this.game.paused) {
                this.events.update(this.time);
                for (var c = 0,
                d = this._timers.length; d > c;) this._timers[c].update(this.time) ? c++:(this._timers.splice(c, 1), d--)
            }
        },
        gamePaused: function() {
            this._pauseStarted = Date.now(),
            this.events.pause();
            for (var a = this._timers.length; a--;) this._timers[a]._pause()
        },
        gameResumed: function() {
            this.time = Date.now(),
            this.pauseDuration = this.time - this._pauseStarted,
            this.events.resume();
            for (var a = this._timers.length; a--;) this._timers[a]._resume()
        },
        totalElapsedSeconds: function() {
            return.001 * (this.time - this._started)
        },
        elapsedSince: function(a) {
            return this.time - a
        },
        elapsedSecondsSince: function(a) {
            return.001 * (this.time - a)
        },
        reset: function() {
            this._started = this.time,
            this.removeAll()
        }
    },
    c.Time.prototype.constructor = c.Time,
    c.Timer = function(a, b) {
        "undefined" == typeof b && (b = !0),
        this.game = a,
        this.running = !1,
        this.autoDestroy = b,
        this.expired = !1,
        this.elapsed = 0,
        this.events = [],
        this.onComplete = new c.Signal,
        this.nextTick = 0,
        this.timeCap = 1e3,
        this.paused = !1,
        this._codePaused = !1,
        this._started = 0,
        this._pauseStarted = 0,
        this._pauseTotal = 0,
        this._now = Date.now(),
        this._len = 0,
        this._marked = 0,
        this._i = 0,
        this._diff = 0,
        this._newTick = 0
    },
    c.Timer.MINUTE = 6e4,
    c.Timer.SECOND = 1e3,
    c.Timer.HALF = 500,
    c.Timer.QUARTER = 250,
    c.Timer.prototype = {
        create: function(a, b, d, e, f, g) {
            a = Math.round(a);
            var h = a;
            h += 0 === this._now ? this.game.time.time: this._now;
            var i = new c.TimerEvent(this, a, h, d, b, e, f, g);
            return this.events.push(i),
            this.order(),
            this.expired = !1,
            i
        },
        add: function(a, b, c) {
            return this.create(a, !1, 0, b, c, Array.prototype.splice.call(arguments, 3))
        },
        repeat: function(a, b, c, d) {
            return this.create(a, !1, b, c, d, Array.prototype.splice.call(arguments, 4))
        },
        loop: function(a, b, c) {
            return this.create(a, !0, 0, b, c, Array.prototype.splice.call(arguments, 3))
        },
        start: function(a) {
            if (!this.running) {
                this._started = this.game.time.time + (a || 0),
                this.running = !0;
                for (var b = 0; b < this.events.length; b++) this.events[b].tick = this.events[b].delay + this._started
            }
        },
        stop: function(a) {
            this.running = !1,
            "undefined" == typeof a && (a = !0),
            a && (this.events.length = 0)
        },
        remove: function(a) {
            for (var b = 0; b < this.events.length; b++) if (this.events[b] === a) return this.events[b].pendingDelete = !0,
            !0;
            return ! 1
        },
        order: function() {
            this.events.length > 0 && (this.events.sort(this.sortHandler), this.nextTick = this.events[0].tick)
        },
        sortHandler: function(a, b) {
            return a.tick < b.tick ? -1 : a.tick > b.tick ? 1 : 0
        },
        clearPendingEvents: function() {
            for (this._i = this.events.length; this._i--;) this.events[this._i].pendingDelete && this.events.splice(this._i, 1);
            this._len = this.events.length,
            this._i = 0
        },
        update: function(a) {
            if (this.paused) return ! 0;
            if (this.elapsed = a - this._now, this._now = a, this.elapsed > this.timeCap && this.adjustEvents(a - this.elapsed), this._marked = 0, this.clearPendingEvents(), this.running && this._now >= this.nextTick && this._len > 0) {
                for (; this._i < this._len && this.running && this._now >= this.events[this._i].tick && !this.events[this._i].pendingDelete;) this._newTick = this._now + this.events[this._i].delay - (this._now - this.events[this._i].tick),
                this._newTick < 0 && (this._newTick = this._now + this.events[this._i].delay),
                this.events[this._i].loop === !0 ? (this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : this.events[this._i].repeatCount > 0 ? (this.events[this._i].repeatCount--, this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : (this._marked++, this.events[this._i].pendingDelete = !0, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)),
                this._i++;
                this.events.length > this._marked ? this.order() : (this.expired = !0, this.onComplete.dispatch(this))
            }
            return this.expired && this.autoDestroy ? !1 : !0
        },
        pause: function() {
            this.running && (this._codePaused = !0, this.paused || (this._pauseStarted = this.game.time.time, this.paused = !0))
        },
        _pause: function() { ! this.paused && this.running && (this._pauseStarted = this.game.time.time, this.paused = !0)
        },
        adjustEvents: function(a) {
            for (var b = 0; b < this.events.length; b++) if (!this.events[b].pendingDelete) {
                var c = this.events[b].tick - a;
                0 > c && (c = 0),
                this.events[b].tick = this._now + c
            }
            var d = this.nextTick - a;
            this.nextTick = 0 > d ? this._now: this._now + d
        },
        resume: function() {
            if (this.paused) {
                var a = this.game.time.time;
                this._pauseTotal += a - this._now,
                this._now = a,
                this.adjustEvents(this._pauseStarted),
                this.paused = !1,
                this._codePaused = !1
            }
        },
        _resume: function() {
            this._codePaused || this.resume()
        },
        removeAll: function() {
            this.onComplete.removeAll(),
            this.events.length = 0,
            this._len = 0,
            this._i = 0
        },
        destroy: function() {
            this.onComplete.removeAll(),
            this.running = !1,
            this.events = [],
            this._len = 0,
            this._i = 0
        }
    },
    Object.defineProperty(c.Timer.prototype, "next", {
        get: function() {
            return this.nextTick
        }
    }),
    Object.defineProperty(c.Timer.prototype, "duration", {
        get: function() {
            return this.running && this.nextTick > this._now ? this.nextTick - this._now: 0
        }
    }),
    Object.defineProperty(c.Timer.prototype, "length", {
        get: function() {
            return this.events.length
        }
    }),
    Object.defineProperty(c.Timer.prototype, "ms", {
        get: function() {
            return this.running ? this._now - this._started - this._pauseTotal: 0
        }
    }),
    Object.defineProperty(c.Timer.prototype, "seconds", {
        get: function() {
            return this.running ? .001 * this.ms: 0
        }
    }),
    c.Timer.prototype.constructor = c.Timer,
    c.TimerEvent = function(a, b, c, d, e, f, g, h) {
        this.timer = a,
        this.delay = b,
        this.tick = c,
        this.repeatCount = d - 1,
        this.loop = e,
        this.callback = f,
        this.callbackContext = g,
        this.args = h,
        this.pendingDelete = !1
    },
    c.TimerEvent.prototype.constructor = c.TimerEvent,
    c.AnimationManager = function(a) {
        this.sprite = a,
        this.game = a.game,
        this.currentFrame = null,
        this.currentAnim = null,
        this.updateIfVisible = !0,
        this.isLoaded = !1,
        this._frameData = null,
        this._anims = {},
        this._outputFrames = []
    },
    c.AnimationManager.prototype = {
        loadFrameData: function(a, b) {
            if ("undefined" == typeof a) return ! 1;
            if (this.isLoaded) for (var c in this._anims) this._anims[c].updateFrameData(a);
            return this._frameData = a,
            "undefined" == typeof b || null === b ? this.frame = 0 : "string" == typeof b ? this.frameName = b: this.frame = b,
            this.isLoaded = !0,
            !0
        },
        copyFrameData: function(a, b) {
            if (this._frameData = a.clone(), this.isLoaded) for (var c in this._anims) this._anims[c].updateFrameData(this._frameData);
            return "undefined" == typeof b || null === b ? this.frame = 0 : "string" == typeof b ? this.frameName = b: this.frame = b,
            this.isLoaded = !0,
            !0
        },
        add: function(a, b, d, e, f) {
            return b = b || [],
            d = d || 60,
            "undefined" == typeof e && (e = !1),
            "undefined" == typeof f && (f = b && "number" == typeof b[0] ? !0 : !1),
            this._outputFrames.length = 0,
            this._frameData.getFrameIndexes(b, f, this._outputFrames),
            this._anims[a] = new c.Animation(this.game, this.sprite, a, this._frameData, this._outputFrames, d, e),
            this.currentAnim = this._anims[a],
            this.currentFrame = this.currentAnim.currentFrame,
            this.sprite.__tilePattern && (this.sprite.__tilePattern = !1, this.tilingTexture = !1),
            this._anims[a]
        },
        validateFrames: function(a, b) {
            "undefined" == typeof b && (b = !0);
            for (var c = 0; c < a.length; c++) if (b === !0) {
                if (a[c] > this._frameData.total) return ! 1
            } else if (this._frameData.checkFrameName(a[c]) === !1) return ! 1;
            return ! 0
        },
        play: function(a, b, c, d) {
            return this._anims[a] ? this.currentAnim === this._anims[a] ? this.currentAnim.isPlaying === !1 ? (this.currentAnim.paused = !1, this.currentAnim.play(b, c, d)) : this.currentAnim: (this.currentAnim && this.currentAnim.isPlaying && this.currentAnim.stop(), this.currentAnim = this._anims[a], this.currentAnim.paused = !1, this.currentFrame = this.currentAnim.currentFrame, this.currentAnim.play(b, c, d)) : void 0
        },
        stop: function(a, b) {
            "undefined" == typeof b && (b = !1),
            "string" == typeof a ? this._anims[a] && (this.currentAnim = this._anims[a], this.currentAnim.stop(b)) : this.currentAnim && this.currentAnim.stop(b)
        },
        update: function() {
            return this.updateIfVisible && !this.sprite.visible ? !1 : this.currentAnim && this.currentAnim.update() ? (this.currentFrame = this.currentAnim.currentFrame, !0) : !1
        },
        next: function(a) {
            this.currentAnim && (this.currentAnim.next(a), this.currentFrame = this.currentAnim.currentFrame)
        },
        previous: function(a) {
            this.currentAnim && (this.currentAnim.previous(a), this.currentFrame = this.currentAnim.currentFrame)
        },
        getAnimation: function(a) {
            return "string" == typeof a && this._anims[a] ? this._anims[a] : null
        },
        refreshFrame: function() {
            this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),
            this.sprite.__tilePattern && (this.__tilePattern = !1, this.tilingTexture = !1)
        },
        destroy: function() {
            var a = null;
            for (var a in this._anims) this._anims.hasOwnProperty(a) && this._anims[a].destroy();
            this._anims = {},
            this._outputFrames = [],
            this._frameData = null,
            this.currentAnim = null,
            this.currentFrame = null,
            this.sprite = null,
            this.game = null
        }
    },
    c.AnimationManager.prototype.constructor = c.AnimationManager,
    Object.defineProperty(c.AnimationManager.prototype, "frameData", {
        get: function() {
            return this._frameData
        }
    }),
    Object.defineProperty(c.AnimationManager.prototype, "frameTotal", {
        get: function() {
            return this._frameData.total
        }
    }),
    Object.defineProperty(c.AnimationManager.prototype, "paused", {
        get: function() {
            return this.currentAnim.isPaused
        },
        set: function(a) {
            this.currentAnim.paused = a
        }
    }),
    Object.defineProperty(c.AnimationManager.prototype, "name", {
        get: function() {
            return this.currentAnim ? this.currentAnim.name: void 0
        }
    }),
    Object.defineProperty(c.AnimationManager.prototype, "frame", {
        get: function() {
            return this.currentFrame ? this.currentFrame.index: void 0
        },
        set: function(a) {
            "number" == typeof a && this._frameData && null !== this._frameData.getFrame(a) && (this.currentFrame = this._frameData.getFrame(a), this.currentFrame && (this.sprite.setFrame(this.currentFrame), this.sprite.__tilePattern && (this.__tilePattern = !1, this.tilingTexture = !1)))
        }
    }),
    Object.defineProperty(c.AnimationManager.prototype, "frameName", {
        get: function() {
            return this.currentFrame ? this.currentFrame.name: void 0
        },
        set: function(a) {
            "string" == typeof a && null !== this._frameData.getFrameByName(a) ? (this.currentFrame = this._frameData.getFrameByName(a), this.currentFrame && (this._frameIndex = this.currentFrame.index, this.sprite.setFrame(this.currentFrame), this.sprite.__tilePattern && (this.__tilePattern = !1, this.tilingTexture = !1))) : console.warn("Cannot set frameName: " + a)
        }
    }),
    c.Animation = function(a, b, d, e, f, g, h) {
        "undefined" == typeof h && (h = !1),
        this.game = a,
        this._parent = b,
        this._frameData = e,
        this.name = d,
        this._frames = [],
        this._frames = this._frames.concat(f),
        this.delay = 1e3 / g,
        this.loop = h,
        this.loopCount = 0,
        this.killOnComplete = !1,
        this.isFinished = !1,
        this.isPlaying = !1,
        this.isPaused = !1,
        this._pauseStartTime = 0,
        this._frameIndex = 0,
        this._frameDiff = 0,
        this._frameSkip = 1,
        this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]),
        this.onStart = new c.Signal,
        this.onUpdate = null,
        this.onComplete = new c.Signal,
        this.onLoop = new c.Signal,
        this.game.onPause.add(this.onPause, this),
        this.game.onResume.add(this.onResume, this)
    },
    c.Animation.prototype = {
        play: function(a, b, c) {
            return "number" == typeof a && (this.delay = 1e3 / a),
            "boolean" == typeof b && (this.loop = b),
            "undefined" != typeof c && (this.killOnComplete = c),
            this.isPlaying = !0,
            this.isFinished = !1,
            this.paused = !1,
            this.loopCount = 0,
            this._timeLastFrame = this.game.time.time,
            this._timeNextFrame = this.game.time.time + this.delay,
            this._frameIndex = 0,
            this.updateCurrentFrame(!1),
            this._parent.events.onAnimationStart$dispatch(this._parent, this),
            this.onStart.dispatch(this._parent, this),
            this._parent.animations.currentAnim = this,
            this._parent.animations.currentFrame = this.currentFrame,
            this
        },
        restart: function() {
            this.isPlaying = !0,
            this.isFinished = !1,
            this.paused = !1,
            this.loopCount = 0,
            this._timeLastFrame = this.game.time.time,
            this._timeNextFrame = this.game.time.time + this.delay,
            this._frameIndex = 0,
            this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]),
            this._parent.setFrame(this.currentFrame),
            this._parent.animations.currentAnim = this,
            this._parent.animations.currentFrame = this.currentFrame,
            this.onStart.dispatch(this._parent, this)
        },
        setFrame: function(a, b) {
            var c;
            if ("undefined" == typeof b && (b = !1), "string" == typeof a) for (var d = 0; d < this._frames.length; d++) this._frameData.getFrame(this._frames[d]).name === a && (c = d);
            else if ("number" == typeof a) if (b) c = a;
            else for (var d = 0; d < this._frames.length; d++) this._frames[d] === c && (c = d);
            c && (this._frameIndex = c - 1, this._timeNextFrame = this.game.time.time, this.update())
        },
        stop: function(a, b) {
            "undefined" == typeof a && (a = !1),
            "undefined" == typeof b && (b = !1),
            this.isPlaying = !1,
            this.isFinished = !0,
            this.paused = !1,
            a && (this.currentFrame = this._frameData.getFrame(this._frames[0]), this._parent.setFrame(this.currentFrame)),
            b && (this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this))
        },
        onPause: function() {
            this.isPlaying && (this._frameDiff = this._timeNextFrame - this.game.time.time)
        },
        onResume: function() {
            this.isPlaying && (this._timeNextFrame = this.game.time.time + this._frameDiff)
        },
        update: function() {
            return this.isPaused ? !1 : this.isPlaying && this.game.time.time >= this._timeNextFrame ? (this._frameSkip = 1, this._frameDiff = this.game.time.time - this._timeNextFrame, this._timeLastFrame = this.game.time.time, this._frameDiff > this.delay && (this._frameSkip = Math.floor(this._frameDiff / this.delay), this._frameDiff -= this._frameSkip * this.delay), this._timeNextFrame = this.game.time.time + (this.delay - this._frameDiff), this._frameIndex += this._frameSkip, this._frameIndex >= this._frames.length ? this.loop ? (this._frameIndex %= this._frames.length, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.loopCount++, this._parent.events.onAnimationLoop$dispatch(this._parent, this), this.onLoop.dispatch(this._parent, this), this.updateCurrentFrame(!0)) : (this.complete(), !1) : this.updateCurrentFrame(!0)) : !1
        },
        updateCurrentFrame: function(a) {
            return this._frameData ? (this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && (this._parent.setFrame(this.currentFrame), this._parent.__tilePattern && (this._parent.__tilePattern = !1, this._parent.tilingTexture = !1)), this.onUpdate && a ? (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData) : !0) : !1
        },
        next: function(a) {
            "undefined" == typeof a && (a = 1);
            var b = this._frameIndex + a;
            b >= this._frames.length && (this.loop ? b %= this._frames.length: b = this._frames.length - 1),
            b !== this._frameIndex && (this._frameIndex = b, this.updateCurrentFrame(!0))
        },
        previous: function(a) {
            "undefined" == typeof a && (a = 1);
            var b = this._frameIndex - a;
            0 > b && (this.loop ? b = this._frames.length + b: b++),
            b !== this._frameIndex && (this._frameIndex = b, this.updateCurrentFrame(!0))
        },
        updateFrameData: function(a) {
            this._frameData = a,
            this.currentFrame = this._frameData ? this._frameData.getFrame(this._frames[this._frameIndex % this._frames.length]) : null
        },
        destroy: function() {
            this._frameData && (this.game.onPause.remove(this.onPause, this), this.game.onResume.remove(this.onResume, this), this.game = null, this._parent = null, this._frames = null, this._frameData = null, this.currentFrame = null, this.isPlaying = !1, this.onStart.dispose(), this.onLoop.dispose(), this.onComplete.dispose(), this.onUpdate && this.onUpdate.dispose())
        },
        complete: function() {
            this._frameIndex = this._frames.length - 1,
            this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]),
            this.isPlaying = !1,
            this.isFinished = !0,
            this.paused = !1,
            this._parent.events.onAnimationComplete$dispatch(this._parent, this),
            this.onComplete.dispatch(this._parent, this),
            this.killOnComplete && this._parent.kill()
        }
    },
    c.Animation.prototype.constructor = c.Animation,
    Object.defineProperty(c.Animation.prototype, "paused", {
        get: function() {
            return this.isPaused
        },
        set: function(a) {
            this.isPaused = a,
            a ? this._pauseStartTime = this.game.time.time: this.isPlaying && (this._timeNextFrame = this.game.time.time + this.delay)
        }
    }),
    Object.defineProperty(c.Animation.prototype, "frameTotal", {
        get: function() {
            return this._frames.length
        }
    }),
    Object.defineProperty(c.Animation.prototype, "frame", {
        get: function() {
            return null !== this.currentFrame ? this.currentFrame.index: this._frameIndex
        },
        set: function(a) {
            this.currentFrame = this._frameData.getFrame(this._frames[a]),
            null !== this.currentFrame && (this._frameIndex = a, this._parent.setFrame(this.currentFrame), this.onUpdate && this.onUpdate.dispatch(this, this.currentFrame))
        }
    }),
    Object.defineProperty(c.Animation.prototype, "speed", {
        get: function() {
            return Math.round(1e3 / this.delay)
        },
        set: function(a) {
            a >= 1 && (this.delay = 1e3 / a)
        }
    }),
    Object.defineProperty(c.Animation.prototype, "enableUpdate", {
        get: function() {
            return null !== this.onUpdate
        },
        set: function(a) {
            a && null === this.onUpdate ? this.onUpdate = new c.Signal: a || null === this.onUpdate || (this.onUpdate.dispose(), this.onUpdate = null)
        }
    }),
    c.Animation.generateFrameNames = function(a, b, d, e, f) {
        "undefined" == typeof e && (e = "");
        var g = [],
        h = "";
        if (d > b) for (var i = b; d >= i; i++) h = "number" == typeof f ? c.Utils.pad(i.toString(), f, "0", 1) : i.toString(),
        h = a + h + e,
        g.push(h);
        else for (var i = b; i >= d; i--) h = "number" == typeof f ? c.Utils.pad(i.toString(), f, "0", 1) : i.toString(),
        h = a + h + e,
        g.push(h);
        return g
    },
    c.Frame = function(a, b, d, e, f, g, h) {
        this.index = a,
        this.x = b,
        this.y = d,
        this.width = e,
        this.height = f,
        this.name = g,
        this.uuid = h,
        this.centerX = Math.floor(e / 2),
        this.centerY = Math.floor(f / 2),
        this.distance = c.Math.distance(0, 0, e, f),
        this.rotated = !1,
        this.rotationDirection = "cw",
        this.trimmed = !1,
        this.sourceSizeW = e,
        this.sourceSizeH = f,
        this.spriteSourceSizeX = 0,
        this.spriteSourceSizeY = 0,
        this.spriteSourceSizeW = 0,
        this.spriteSourceSizeH = 0,
        this.right = this.x + this.width,
        this.bottom = this.y + this.height
    },
    c.Frame.prototype = {
        setTrim: function(a, b, c, d, e, f, g) {
            this.trimmed = a,
            a && (this.sourceSizeW = b, this.sourceSizeH = c, this.centerX = Math.floor(b / 2), this.centerY = Math.floor(c / 2), this.spriteSourceSizeX = d, this.spriteSourceSizeY = e, this.spriteSourceSizeW = f, this.spriteSourceSizeH = g)
        },
        clone: function() {
            var a = new c.Frame(this.index, this.x, this.y, this.width, this.height, this.name, this.uuid);
            for (var b in this) this.hasOwnProperty(b) && (a[b] = this[b]);
            return a
        },
        getRect: function(a) {
            return "undefined" == typeof a ? a = new c.Rectangle(this.x, this.y, this.width, this.height) : a.setTo(this.x, this.y, this.width, this.height),
            a
        }
    },
    c.Frame.prototype.constructor = c.Frame,
    c.FrameData = function() {
        this._frames = [],
        this._frameNames = []
    },
    c.FrameData.prototype = {
        addFrame: function(a) {
            return a.index = this._frames.length,
            this._frames.push(a),
            "" !== a.name && (this._frameNames[a.name] = a.index),
            a
        },
        getFrame: function(a) {
            return a >= this._frames.length && (a = 0),
            this._frames[a]
        },
        getFrameByName: function(a) {
            return "number" == typeof this._frameNames[a] ? this._frames[this._frameNames[a]] : null
        },
        checkFrameName: function(a) {
            return null == this._frameNames[a] ? !1 : !0
        },
        clone: function() {
            for (var a = new c.FrameData,
            b = 0; b < this._frames.length; b++) a._frames.push(this._frames[b].clone());
            for (var d in this._frameNames) this._frameNames.hasOwnProperty(d) && a._frameNames.push(this._frameNames[d]);
            return a
        },
        getFrameRange: function(a, b, c) {
            "undefined" == typeof c && (c = []);
            for (var d = a; b >= d; d++) c.push(this._frames[d]);
            return c
        },
        getFrames: function(a, b, c) {
            if ("undefined" == typeof b && (b = !0), "undefined" == typeof c && (c = []), "undefined" == typeof a || 0 === a.length) for (var d = 0; d < this._frames.length; d++) c.push(this._frames[d]);
            else for (var d = 0,
            e = a.length; e > d; d++) c.push(b ? this.getFrame(a[d]) : this.getFrameByName(a[d]));
            return c
        },
        getFrameIndexes: function(a, b, c) {
            if ("undefined" == typeof b && (b = !0), "undefined" == typeof c && (c = []), "undefined" == typeof a || 0 === a.length) for (var d = 0,
            e = this._frames.length; e > d; d++) c.push(this._frames[d].index);
            else for (var d = 0,
            e = a.length; e > d; d++) b ? c.push(a[d]) : this.getFrameByName(a[d]) && c.push(this.getFrameByName(a[d]).index);
            return c
        }
    },
    c.FrameData.prototype.constructor = c.FrameData,
    Object.defineProperty(c.FrameData.prototype, "total", {
        get: function() {
            return this._frames.length
        }
    }),
    c.AnimationParser = {
        spriteSheet: function(a, b, d, e, f, g, h) {
            var i = a.cache.getImage(b);
            if (null == i) return null;
            var j = i.width,
            k = i.height;
            0 >= d && (d = Math.floor( - j / Math.min( - 1, d))),
            0 >= e && (e = Math.floor( - k / Math.min( - 1, e)));
            var l = Math.floor((j - g) / (d + h)),
            m = Math.floor((k - g) / (e + h)),
            n = l * m;
            if ( - 1 !== f && (n = f), 0 === j || 0 === k || d > j || e > k || 0 === n) return console.warn("Phaser.AnimationParser.spriteSheet: '" + b + "'s width/height zero or width/height < given frameWidth/frameHeight"),
            null;
            for (var o = new c.FrameData,
            p = g,
            q = g,
            r = 0; n > r; r++) {
                var s = a.rnd.uuid();
                o.addFrame(new c.Frame(r, p, q, d, e, "", s)),
                PIXI.TextureCache[s] = new PIXI.Texture(PIXI.BaseTextureCache[b], {
                    x: p,
                    y: q,
                    width: d,
                    height: e
                }),
                p += d + h,
                p + d > j && (p = g, q += e + h)
            }
            return o
        },
        JSONData: function(a, b, d) {
            if (!b.frames) return console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),
            void console.log(b);
            for (var e, f = new c.FrameData,
            g = b.frames,
            h = 0; h < g.length; h++) {
                var i = a.rnd.uuid();
                e = f.addFrame(new c.Frame(h, g[h].frame.x, g[h].frame.y, g[h].frame.w, g[h].frame.h, g[h].filename, i)),
                PIXI.TextureCache[i] = new PIXI.Texture(PIXI.BaseTextureCache[d], {
                    x: g[h].frame.x,
                    y: g[h].frame.y,
                    width: g[h].frame.w,
                    height: g[h].frame.h
                }),
                g[h].trimmed && e.setTrim(g[h].trimmed, g[h].sourceSize.w, g[h].sourceSize.h, g[h].spriteSourceSize.x, g[h].spriteSourceSize.y, g[h].spriteSourceSize.w, g[h].spriteSourceSize.h)
            }
            return f
        },
        JSONDataHash: function(a, b, d) {
            if (!b.frames) return console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),
            void console.log(b);
            var e, f = new c.FrameData,
            g = b.frames,
            h = 0;
            for (var i in g) {
                var j = a.rnd.uuid();
                e = f.addFrame(new c.Frame(h, g[i].frame.x, g[i].frame.y, g[i].frame.w, g[i].frame.h, i, j)),
                PIXI.TextureCache[j] = new PIXI.Texture(PIXI.BaseTextureCache[d], {
                    x: g[i].frame.x,
                    y: g[i].frame.y,
                    width: g[i].frame.w,
                    height: g[i].frame.h
                }),
                g[i].trimmed && e.setTrim(g[i].trimmed, g[i].sourceSize.w, g[i].sourceSize.h, g[i].spriteSourceSize.x, g[i].spriteSourceSize.y, g[i].spriteSourceSize.w, g[i].spriteSourceSize.h),
                h++
            }
            return f
        },
        XMLData: function(a, b, d) {
            if (!b.getElementsByTagName("TextureAtlas")) return void console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag");
            for (var e, f, g, h, i, j, k, l, m, n, o, p, q = new c.FrameData,
            r = b.getElementsByTagName("SubTexture"), s = 0; s < r.length; s++) f = a.rnd.uuid(),
            h = r[s].attributes,
            g = h.name.value,
            i = parseInt(h.x.value, 10),
            j = parseInt(h.y.value, 10),
            k = parseInt(h.width.value, 10),
            l = parseInt(h.height.value, 10),
            m = null,
            n = null,
            h.frameX && (m = Math.abs(parseInt(h.frameX.value, 10)), n = Math.abs(parseInt(h.frameY.value, 10)), o = parseInt(h.frameWidth.value, 10), p = parseInt(h.frameHeight.value, 10)),
            e = q.addFrame(new c.Frame(s, i, j, k, l, g, f)),
            PIXI.TextureCache[f] = new PIXI.Texture(PIXI.BaseTextureCache[d], {
                x: i,
                y: j,
                width: k,
                height: l
            }),
            (null !== m || null !== n) && e.setTrim(!0, k, l, m, n, o, p);
            return q
        }
    },
    c.Cache = function(a) {
        this.game = a,
        this.autoResolveURL = !1,
        this._canvases = {},
        this._images = {},
        this._textures = {},
        this._sounds = {},
        this._text = {},
        this._json = {},
        this._xml = {},
        this._physics = {},
        this._tilemaps = {},
        this._binary = {},
        this._bitmapDatas = {},
        this._bitmapFont = {},
        this._urlMap = {},
        this._urlResolver = new Image,
        this._urlTemp = null,
        this.addDefaultImage(),
        this.addMissingImage(),
        this.onSoundUnlock = new c.Signal,
        this._cacheMap = [],
        this._cacheMap[c.Cache.CANVAS] = this._canvases,
        this._cacheMap[c.Cache.IMAGE] = this._images,
        this._cacheMap[c.Cache.TEXTURE] = this._textures,
        this._cacheMap[c.Cache.SOUND] = this._sounds,
        this._cacheMap[c.Cache.TEXT] = this._text,
        this._cacheMap[c.Cache.PHYSICS] = this._physics,
        this._cacheMap[c.Cache.TILEMAP] = this._tilemaps,
        this._cacheMap[c.Cache.BINARY] = this._binary,
        this._cacheMap[c.Cache.BITMAPDATA] = this._bitmapDatas,
        this._cacheMap[c.Cache.BITMAPFONT] = this._bitmapFont,
        this._cacheMap[c.Cache.JSON] = this._json,
        this._cacheMap[c.Cache.XML] = this._xml
    },
    c.Cache.CANVAS = 1,
    c.Cache.IMAGE = 2,
    c.Cache.TEXTURE = 3,
    c.Cache.SOUND = 4,
    c.Cache.TEXT = 5,
    c.Cache.PHYSICS = 6,
    c.Cache.TILEMAP = 7,
    c.Cache.BINARY = 8,
    c.Cache.BITMAPDATA = 9,
    c.Cache.BITMAPFONT = 10,
    c.Cache.JSON = 11,
    c.Cache.XML = 12,
    c.Cache.prototype = {
        addCanvas: function(a, b, c) {
            this._canvases[a] = {
                canvas: b,
                context: c
            }
        },
        addBinary: function(a, b) {
            this._binary[a] = b
        },
        addBitmapData: function(a, b, d) {
            return b.key = a,
            "undefined" == typeof d && (d = new c.FrameData, d.addFrame(b.textureFrame)),
            this._bitmapDatas[a] = {
                data: b,
                frameData: d
            },
            b
        },
        addRenderTexture: function(a, b) {
            var d = new c.Frame(0, 0, 0, b.width, b.height, "", "");
            this._textures[a] = {
                texture: b,
                frame: d
            }
        },
        addSpriteSheet: function(a, b, d, e, f, g, h, i) {
            this._images[a] = {
                url: b,
                data: d,
                frameWidth: e,
                frameHeight: f,
                margin: h,
                spacing: i
            },
            PIXI.BaseTextureCache[a] = new PIXI.BaseTexture(d),
            PIXI.TextureCache[a] = new PIXI.Texture(PIXI.BaseTextureCache[a]),
            this._images[a].frameData = c.AnimationParser.spriteSheet(this.game, a, e, f, g, h, i),
            this._resolveURL(b, this._images[a])
        },
        addTilemap: function(a, b, c, d) {
            this._tilemaps[a] = {
                url: b,
                data: c,
                format: d
            },
            this._resolveURL(b, this._tilemaps[a])
        },
        addTextureAtlas: function(a, b, d, e, f) {
            this._images[a] = {
                url: b,
                data: d
            },
            PIXI.BaseTextureCache[a] = new PIXI.BaseTexture(d),
            PIXI.TextureCache[a] = new PIXI.Texture(PIXI.BaseTextureCache[a]),
            f == c.Loader.TEXTURE_ATLAS_JSON_ARRAY ? this._images[a].frameData = c.AnimationParser.JSONData(this.game, e, a) : f == c.Loader.TEXTURE_ATLAS_JSON_HASH ? this._images[a].frameData = c.AnimationParser.JSONDataHash(this.game, e, a) : f == c.Loader.TEXTURE_ATLAS_XML_STARLING && (this._images[a].frameData = c.AnimationParser.XMLData(this.game, e, a)),
            this._resolveURL(b, this._images[a])
        },
        addBitmapFont: function(a, b, d, e, f, g) {
            this._images[a] = {
                url: b,
                data: d
            },
            PIXI.BaseTextureCache[a] = new PIXI.BaseTexture(d),
            PIXI.TextureCache[a] = new PIXI.Texture(PIXI.BaseTextureCache[a]),
            c.LoaderParser.bitmapFont(this.game, e, a, f, g),
            this._bitmapFont[a] = PIXI.BitmapText.fonts[a],
            this._resolveURL(b, this._bitmapFont[a])
        },
        addPhysicsData: function(a, b, c, d) {
            this._physics[a] = {
                url: b,
                data: c,
                format: d
            },
            this._resolveURL(b, this._physics[a])
        },
        addDefaultImage: function() {
            var a = new Image;
            a.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",
            this._images.__default = {
                url: null,
                data: a
            },
            this._images.__default.frame = new c.Frame(0, 0, 0, 32, 32, "", ""),
            this._images.__default.frameData = new c.FrameData,
            this._images.__default.frameData.addFrame(new c.Frame(0, 0, 0, 32, 32, null, this.game.rnd.uuid())),
            PIXI.BaseTextureCache.__default = new PIXI.BaseTexture(a),
            PIXI.TextureCache.__default = new PIXI.Texture(PIXI.BaseTextureCache.__default)
        },
        addMissingImage: function() {
            var a = new Image;
            a.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",
            this._images.__missing = {
                url: null,
                data: a
            },
            this._images.__missing.frame = new c.Frame(0, 0, 0, 32, 32, "", ""),
            this._images.__missing.frameData = new c.FrameData,
            this._images.__missing.frameData.addFrame(new c.Frame(0, 0, 0, 32, 32, null, this.game.rnd.uuid())),
            PIXI.BaseTextureCache.__missing = new PIXI.BaseTexture(a),
            PIXI.TextureCache.__missing = new PIXI.Texture(PIXI.BaseTextureCache.__missing)
        },
        addText: function(a, b, c) {
            this._text[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._text[a])
        },
        addJSON: function(a, b, c) {
            this._json[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._json[a])
        },
        addXML: function(a, b, c) {
            this._xml[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._xml[a])
        },
        addImage: function(a, b, d) {
            this.checkImageKey(a) && this.removeImage(a),
            this._images[a] = {
                url: b,
                data: d
            },
            this._images[a].frame = new c.Frame(0, 0, 0, d.width, d.height, a, this.game.rnd.uuid()),
            this._images[a].frameData = new c.FrameData,
            this._images[a].frameData.addFrame(new c.Frame(0, 0, 0, d.width, d.height, b, this.game.rnd.uuid())),
            PIXI.BaseTextureCache[a] = new PIXI.BaseTexture(d),
            PIXI.TextureCache[a] = new PIXI.Texture(PIXI.BaseTextureCache[a]),
            this._resolveURL(b, this._images[a])
        },
        addSound: function(a, b, c, d, e) {
            d = d || !0,
            e = e || !1;
            var f = !1;
            e && (f = !0),
            this._sounds[a] = {
                url: b,
                data: c,
                isDecoding: !1,
                decoded: f,
                webAudio: d,
                audioTag: e,
                locked: this.game.sound.touchLocked
            },
            this._resolveURL(b, this._sounds[a])
        },
        reloadSound: function(a) {
            var b = this;
            this._sounds[a] && (this._sounds[a].data.src = this._sounds[a].url, this._sounds[a].data.addEventListener("canplaythrough",
            function() {
                return b.reloadSoundComplete(a)
            },
            !1), this._sounds[a].data.load())
        },
        reloadSoundComplete: function(a) {
            this._sounds[a] && (this._sounds[a].locked = !1, this.onSoundUnlock.dispatch(a))
        },
        updateSound: function(a, b, c) {
            this._sounds[a] && (this._sounds[a][b] = c)
        },
        decodedSound: function(a, b) {
            this._sounds[a].data = b,
            this._sounds[a].decoded = !0,
            this._sounds[a].isDecoding = !1
        },
        getCanvas: function(a) {
            return this._canvases[a] ? this._canvases[a].canvas: (console.warn('Phaser.Cache.getCanvas: Invalid key: "' + a + '"'), null)
        },
        getBitmapData: function(a) {
            return this._bitmapDatas[a] ? this._bitmapDatas[a].data: (console.warn('Phaser.Cache.getBitmapData: Invalid key: "' + a + '"'), null)
        },
        getBitmapFont: function(a) {
            return this._bitmapFont[a] ? this._bitmapFont[a] : (console.warn('Phaser.Cache.getBitmapFont: Invalid key: "' + a + '"'), null)
        },
        getPhysicsData: function(a, b, c) {
            if ("undefined" == typeof b || null === b) {
                if (this._physics[a]) return this._physics[a].data;
                console.warn('Phaser.Cache.getPhysicsData: Invalid key: "' + a + '"')
            } else if (this._physics[a] && this._physics[a].data[b]) {
                var d = this._physics[a].data[b];
                if (!d || !c) return d;
                for (var e in d) if (e = d[e], e.fixtureKey === c) return e;
                console.warn('Phaser.Cache.getPhysicsData: Could not find given fixtureKey: "' + c + " in " + a + '"')
            } else console.warn('Phaser.Cache.getPhysicsData: Invalid key/object: "' + a + " / " + b + '"');
            return null
        },
        checkKey: function(a, b) {
            return this._cacheMap[a][b] ? !0 : !1
        },
        checkCanvasKey: function(a) {
            return this.checkKey(c.Cache.CANVAS, a)
        },
        checkImageKey: function(a) {
            return this.checkKey(c.Cache.IMAGE, a)
        },
        checkTextureKey: function(a) {
            return this.checkKey(c.Cache.TEXTURE, a)
        },
        checkSoundKey: function(a) {
            return this.checkKey(c.Cache.SOUND, a)
        },
        checkTextKey: function(a) {
            return this.checkKey(c.Cache.TEXT, a)
        },
        checkPhysicsKey: function(a) {
            return this.checkKey(c.Cache.PHYSICS, a)
        },
        checkTilemapKey: function(a) {
            return this.checkKey(c.Cache.TILEMAP, a)
        },
        checkBinaryKey: function(a) {
            return this.checkKey(c.Cache.BINARY, a)
        },
        checkBitmapDataKey: function(a) {
            return this.checkKey(c.Cache.BITMAPDATA, a)
        },
        checkBitmapFontKey: function(a) {
            return this.checkKey(c.Cache.BITMAPFONT, a)
        },
        checkJSONKey: function(a) {
            return this.checkKey(c.Cache.JSON, a)
        },
        checkXMLKey: function(a) {
            return this.checkKey(c.Cache.XML, a)
        },
        checkURL: function(a) {
            return this._urlMap[this._resolveURL(a)] ? !0 : !1
        },
        getImage: function(a) {
            return this._images[a] ? this._images[a].data: (console.warn('Phaser.Cache.getImage: Invalid key: "' + a + '"'), null)
        },
        getTilemapData: function(a) {
            return this._tilemaps[a] ? this._tilemaps[a] : (console.warn('Phaser.Cache.getTilemapData: Invalid key: "' + a + '"'), null)
        },
        getFrameData: function(a, b) {
            return "undefined" == typeof b && (b = c.Cache.IMAGE),
            this._cacheMap[b][a] ? this._cacheMap[b][a].frameData: null
        },
        updateFrameData: function(a, b) {
            this._images[a] && (this._images[a].frameData = b)
        },
        getFrameByIndex: function(a, b) {
            return this._images[a] ? this._images[a].frameData.getFrame(b) : null
        },
        getFrameByName: function(a, b) {
            return this._images[a] ? this._images[a].frameData.getFrameByName(b) : null
        },
        getFrame: function(a) {
            return this._images[a] ? this._images[a].frame: null
        },
        getTextureFrame: function(a) {
            return this._textures[a] ? this._textures[a].frame: null
        },
        getRenderTexture: function(a) {
            return this._textures[a] ? this._textures[a] : (console.warn('Phaser.Cache.getTexture: Invalid key: "' + a + '"'), null)
        },
        getTexture: function(a) {
            return this._textures[a] ? this._textures[a] : void console.warn('Phaser.Cache.getTexture: Invalid key: "' + a + '"')
        },
        getSound: function(a) {
            return this._sounds[a] ? this._sounds[a] : (console.warn('Phaser.Cache.getSound: Invalid key: "' + a + '"'), null)
        },
        getSoundData: function(a) {
            return this._sounds[a] ? this._sounds[a].data: (console.warn('Phaser.Cache.getSoundData: Invalid key: "' + a + '"'), null)
        },
        isSoundDecoded: function(a) {
            return this._sounds[a] ? this._sounds[a].decoded: void 0
        },
        isSoundReady: function(a) {
            return this._sounds[a] && this._sounds[a].decoded && this.game.sound.touchLocked === !1
        },
        getFrameCount: function(a) {
            return this._images[a] ? this._images[a].frameData.total: 0
        },
        getText: function(a) {
            return this._text[a] ? this._text[a].data: (console.warn('Phaser.Cache.getText: Invalid key: "' + a + '"'), null)
        },
        getJSON: function(a) {
            return this._json[a] ? this._json[a].data: (console.warn('Phaser.Cache.getJSON: Invalid key: "' + a + '"'), null)
        },
        getXML: function(a) {
            return this._xml[a] ? this._xml[a].data: (console.warn('Phaser.Cache.getXML: Invalid key: "' + a + '"'), null)
        },
        getBinary: function(a) {
            return this._binary[a] ? this._binary[a] : (console.warn('Phaser.Cache.getBinary: Invalid key: "' + a + '"'), null)
        },
        getURL: function(a) {
            var a = this._resolveURL(a);
            return a ? this._urlMap[a] : (console.warn('Phaser.Cache.getUrl: Invalid url: "' + a + '" or Cache.autoResolveURL was false'), null)
        },
        getUrl: function(a) {
            return this.getURL(a)
        },
        getKeys: function(a) {
            var b = null;
            switch (a) {
            case c.Cache.CANVAS:
                b = this._canvases;
                break;
            case c.Cache.IMAGE:
                b = this._images;
                break;
            case c.Cache.TEXTURE:
                b = this._textures;
                break;
            case c.Cache.SOUND:
                b = this._sounds;
                break;
            case c.Cache.TEXT:
                b = this._text;
                break;
            case c.Cache.PHYSICS:
                b = this._physics;
                break;
            case c.Cache.TILEMAP:
                b = this._tilemaps;
                break;
            case c.Cache.BINARY:
                b = this._binary;
                break;
            case c.Cache.BITMAPDATA:
                b = this._bitmapDatas;
                break;
            case c.Cache.BITMAPFONT:
                b = this._bitmapFont;
                break;
            case c.Cache.JSON:
                b = this._json;
                break;
            case c.Cache.XML:
                b = this._xml
            }
            if (b) {
                var d = [];
                for (var e in b)"__default" !== e && "__missing" !== e && d.push(e);
                return d
            }
        },
        removeCanvas: function(a) {
            delete this._canvases[a]
        },
        removeImage: function(a, b) {
            "undefined" == typeof b && (b = !0),
            delete this._images[a],
            b && PIXI.BaseTextureCache[a].destroy()
        },
        removeSound: function(a) {
            delete this._sounds[a]
        },
        removeText: function(a) {
            delete this._text[a]
        },
        removeJSON: function(a) {
            delete this._json[a]
        },
        removeXML: function(a) {
            delete this._xml[a]
        },
        removePhysics: function(a) {
            delete this._physics[a]
        },
        removeTilemap: function(a) {
            delete this._tilemaps[a]
        },
        removeBinary: function(a) {
            delete this._binary[a]
        },
        removeBitmapData: function(a) {
            delete this._bitmapDatas[a]
        },
        removeBitmapFont: function(a) {
            delete this._bitmapFont[a]
        },
        _resolveURL: function(a, b) {
            return this.autoResolveURL ? (this._urlResolver.src = this.game.load.baseURL + a, this._urlTemp = this._urlResolver.src, this._urlResolver.src = "", b && (this._urlMap[this._urlTemp] = b), this._urlTemp) : null
        },
        destroy: function() {
            for (var a in this._images)"__default" !== a && "__missing" !== a && delete this._images[a];
            for (var b = [this._canvases, this._sounds, this._text, this._json, this._xml, this._textures, this._physics, this._tilemaps, this._binary, this._bitmapDatas, this._bitmapFont], c = 0; c < b.length; c++) for (var a in b[c]) delete b[c][a];
            this._urlMap = null,
            this._urlResolver = null,
            this._urlTemp = null
        }
    },
    c.Cache.prototype.constructor = c.Cache,
    c.Loader = function(a) {
        this.game = a,
        this.resetLocked = !1,
        this.isLoading = !1,
        this.hasLoaded = !1,
        this.preloadSprite = null,
        this.crossOrigin = !1,
        this.baseURL = "",
        this.onLoadStart = new c.Signal,
        this.onLoadComplete = new c.Signal,
        this.onPackComplete = new c.Signal,
        this.onFileStart = new c.Signal,
        this.onFileComplete = new c.Signal,
        this.onFileError = new c.Signal,
        this.useXDomainRequest = !1,
        this._warnedAboutXDomainRequest = !1,
        this.enableParallel = !0,
        this.maxParallelDownloads = 4,
        this._withSyncPointDepth = 0,
        this._fileList = [],
        this._flightQueue = [],
        this._processingHead = 0,
        this._fileLoadStarted = !1,
        this._totalPackCount = 0,
        this._totalFileCount = 0,
        this._loadedPackCount = 0,
        this._loadedFileCount = 0
    },
    c.Loader.TEXTURE_ATLAS_JSON_ARRAY = 0,
    c.Loader.TEXTURE_ATLAS_JSON_HASH = 1,
    c.Loader.TEXTURE_ATLAS_XML_STARLING = 2,
    c.Loader.PHYSICS_LIME_CORONA_JSON = 3,
    c.Loader.PHYSICS_PHASER_JSON = 4,
    c.Loader.prototype = {
        setPreloadSprite: function(a, b) {
            b = b || 0,
            this.preloadSprite = {
                sprite: a,
                direction: b,
                width: a.width,
                height: a.height,
                rect: null
            },
            this.preloadSprite.rect = 0 === b ? new c.Rectangle(0, 0, 1, a.height) : new c.Rectangle(0, 0, a.width, 1),
            a.crop(this.preloadSprite.rect),
            a.visible = !0
        },
        resize: function() {
            this.preloadSprite && this.preloadSprite.height !== this.preloadSprite.sprite.height && (this.preloadSprite.rect.height = this.preloadSprite.sprite.height)
        },
        checkKeyExists: function(a, b) {
            return this.getAssetIndex(a, b) > -1
        },
        getAssetIndex: function(a, b) {
            for (var c = -1,
            d = 0; d < this._fileList.length; d++) {
                var e = this._fileList[d];
                if (e.type === a && e.key === b && (c = d, !e.loaded && !e.loading)) break
            }
            return c
        },
        getAsset: function(a, b) {
            var c = this.getAssetIndex(a, b);
            return c > -1 ? {
                index: c,
                file: this._fileList[c]
            }: !1
        },
        reset: function(a, b) {
            "undefined" == typeof b && (b = !1),
            this.resetLocked || (a && (this.preloadSprite = null), this.isLoading = !1, this._processingHead = 0, this._fileList.length = 0, this._flightQueue.length = 0, this._fileLoadStarted = !1, this._totalFileCount = 0, this._totalPackCount = 0, this._loadedPackCount = 0, this._loadedFileCount = 0, b && (this.onLoadStart.removeAll(), this.onLoadComplete.removeAll(), this.onPackComplete.removeAll(), this.onFileStart.removeAll(), this.onFileComplete.removeAll(), this.onFileError.removeAll()))
        },
        addToFileList: function(a, b, c, d, e) {
            var f = {
                type: a,
                key: b,
                url: c,
                syncPoint: this._withSyncPointDepth > 0,
                data: null,
                loading: !1,
                loaded: !1,
                error: !1
            };
            if (d) for (var g in d) f[g] = d[g];
            var h = this.getAssetIndex(a, b);
            if (e && h > -1) {
                var i = this._fileList[h];
                i.loading || i.loaded ? (this._fileList.push(f), this._totalFileCount++) : this._fileList[h] = f
            } else - 1 === h && (this._fileList.push(f), this._totalFileCount++)
        },
        replaceInFileList: function(a, b, c, d) {
            return this.addToFileList(a, b, c, d, !0)
        },
        pack: function(a, b, c, d) {
            if ("undefined" == typeof b && (b = null), "undefined" == typeof c && (c = null), "undefined" == typeof d && (d = null), !b && !c) return console.warn("Phaser.Loader.pack - Both url and data are null. One must be set."),
            this;
            var e = {
                type: "packfile",
                key: a,
                url: b,
                syncPoint: !0,
                data: null,
                loading: !1,
                loaded: !1,
                error: !1,
                callbackContext: d
            };
            c && ("string" == typeof c && (c = JSON.parse(c)), e.data = c || {},
            e.loaded = !0);
            for (var f = 0; f < this._fileList.length + 1; f++) {
                var g = this._fileList[f];
                if (!g || !g.loaded && !g.loading && "packfile" !== g.type) {
                    this._fileList.splice(f, 1, e),
                    this._totalPackCount++;
                    break
                }
            }
            return this
        },
        image: function(a, b, c) {
            return "undefined" == typeof c && (c = !1),
            this.addToFileList("image", a, b, void 0, c),
            this
        },
        text: function(a, b, c) {
            return "undefined" == typeof c && (c = !1),
            this.addToFileList("text", a, b, void 0, c),
            this
        },
        json: function(a, b, c) {
            return "undefined" == typeof c && (c = !1),
            this.addToFileList("json", a, b, void 0, c),
            this
        },
        xml: function(a, b, c) {
            return "undefined" == typeof c && (c = !1),
            this.addToFileList("xml", a, b, void 0, c),
            this
        },
        script: function(a, b, c, d) {
            return "undefined" == typeof c && (c = !1),
            c !== !1 && "undefined" == typeof d && (d = c),
            this.addToFileList("script", a, b, {
                syncPoint: !0,
                callback: c,
                callbackContext: d
            }),
            this
        },
        binary: function(a, b, c, d) {
            return "undefined" == typeof c && (c = !1),
            c !== !1 && "undefined" == typeof d && (d = c),
            this.addToFileList("binary", a, b, {
                callback: c,
                callbackContext: d
            }),
            this
        },
        spritesheet: function(a, b, c, d, e, f, g) {
            return "undefined" == typeof e && (e = -1),
            "undefined" == typeof f && (f = 0),
            "undefined" == typeof g && (g = 0),
            this.addToFileList("spritesheet", a, b, {
                frameWidth: c,
                frameHeight: d,
                frameMax: e,
                margin: f,
                spacing: g
            }),
            this
        },
        audio: function(a, b, c) {
            return "undefined" == typeof c && (c = !0),
            "string" == typeof b && (b = [b]),
            this.addToFileList("audio", a, b, {
                buffer: null,
                autoDecode: c
            }),
            this
        },
        audiosprite: function(a, b, c, d, e) {
            return "undefined" == typeof c && (c = null),
            "undefined" == typeof d && (d = null),
            "undefined" == typeof e && (e = !0),
            this.audio(a, b, e),
            c ? this.json(a + "-audioatlas", c) : d ? ("string" == typeof d && (d = JSON.parse(d)), this.game.cache.addJSON(a + "-audioatlas", "", d)) : console.warn("Phaser.Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"),
            this
        },
        tilemap: function(a, b, d, e) {
            if ("undefined" == typeof b && (b = null), "undefined" == typeof d && (d = null), "undefined" == typeof e && (e = c.Tilemap.CSV), !b && !d) return console.warn("Phaser.Loader.tilemap - Both url and data are null. One must be set."),
            this;
            if (d) {
                switch (e) {
                case c.Tilemap.CSV:
                    break;
                case c.Tilemap.TILED_JSON:
                    "string" == typeof d && (d = JSON.parse(d))
                }
                this.game.cache.addTilemap(a, null, d, e)
            } else this.addToFileList("tilemap", a, b, {
                format: e
            });
            return this
        },
        physics: function(a, b, d, e) {
            return "undefined" == typeof b && (b = null),
            "undefined" == typeof d && (d = null),
            "undefined" == typeof e && (e = c.Physics.LIME_CORONA_JSON),
            b || d ? (d ? ("string" == typeof d && (d = JSON.parse(d)), this.game.cache.addPhysicsData(a, null, d, e)) : this.addToFileList("physics", a, b, {
                format: e
            }), this) : (console.warn("Phaser.Loader.physics - Both url and data are null. One must be set."), this)
        },
        bitmapFont: function(a, b, c, d, e, f) {
            if ("undefined" == typeof c && (c = null), "undefined" == typeof d && (d = null), "undefined" == typeof e && (e = 0), "undefined" == typeof f && (f = 0), c) this.addToFileList("bitmapfont", a, b, {
                xmlURL: c,
                xSpacing: e,
                ySpacing: f
            });
            else if ("string" == typeof d) {
                var g = this.parseXml(d);
                if (!g) throw new Error("Phaser.Loader. Invalid Bitmap Font XML given");
                this.addToFileList("bitmapfont", a, b, {
                    xmlURL: null,
                    xmlData: g,
                    xSpacing: e,
                    ySpacing: f
                })
            }
            return this
        },
        atlasJSONArray: function(a, b, d, e) {
            return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_JSON_ARRAY)
        },
        atlasJSONHash: function(a, b, d, e) {
            return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_JSON_HASH)
        },
        atlasXML: function(a, b, d, e) {
            return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_XML_STARLING)
        },
        atlas: function(a, b, d, e, f) {
            if ("undefined" == typeof d && (d = null), "undefined" == typeof e && (e = null), "undefined" == typeof f && (f = c.Loader.TEXTURE_ATLAS_JSON_ARRAY), d) this.addToFileList("textureatlas", a, b, {
                atlasURL: d,
                format: f
            });
            else {
                switch (f) {
                case c.Loader.TEXTURE_ATLAS_JSON_ARRAY:
                    "string" == typeof e && (e = JSON.parse(e));
                    break;
                case c.Loader.TEXTURE_ATLAS_XML_STARLING:
                    if ("string" == typeof e) {
                        var g = this.parseXml(e);
                        if (!g) throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");
                        e = g
                    }
                }
                this.addToFileList("textureatlas", a, b, {
                    atlasURL: null,
                    atlasData: e,
                    format: f
                })
            }
            return this
        },
        withSyncPoint: function(a, b) {
            this._withSyncPointDepth++;
            try {
                a.call(b || this, this)
            } finally {
                this._withSyncPointDepth--
            }
            return this
        },
        addSyncPoint: function(a, b) {
            var c = this.getAsset(a, b);
            return c && (c.file.syncPoint = !0),
            this
        },
        removeFile: function(a, b) {
            var c = this.getAsset(a, b);
            c && (c.loaded || c.loading || this._fileList.splice(c.index, 1))
        },
        removeAll: function() {
            this._fileList.length = 0,
            this._flightQueue.length = 0
        },
        start: function() {
            this.isLoading || (this.hasLoaded = !1, this.isLoading = !0, this.updateProgress(), this.processLoadQueue())
        },
        processLoadQueue: function() {
            if (!this.isLoading) return console.warn("Phaser.Loader - active loading canceled / reset"),
            void this.finishedLoading(!0);
            for (var a = 0; a < this._flightQueue.length; a++) {
                var b = this._flightQueue[a]; (b.loaded || b.error) && (this._flightQueue.splice(a, 1), a--, b.loading = !1, b.requestUrl = null, b.requestObject = null, b.error && this.onFileError.dispatch(b.key, b), "packfile" !== b.type ? (this._loadedFileCount++, this.onFileComplete.dispatch(this.progress, b.key, !b.error, this._loadedFileCount, this._totalFileCount)) : "packfile" === b.type && b.error && (this._loadedPackCount++, this.onPackComplete.dispatch(b.key, !b.error, this._loadedPackCount, this._totalPackCount)))
            }
            for (var d = !1,
            e = this.enableParallel ? c.Math.clamp(this.maxParallelDownloads, 1, 12) : 1, a = this._processingHead; a < this._fileList.length; a++) {
                var b = this._fileList[a];
                if ("packfile" === b.type && !b.error && b.loaded && a === this._processingHead && (this.processPack(b), this._loadedPackCount++, this.onPackComplete.dispatch(b.key, !b.error, this._loadedPackCount, this._totalPackCount)), b.loaded || b.error ? a === this._processingHead && (this._processingHead = a + 1) : !b.loading && this._flightQueue.length < e && ("packfile" !== b.type || b.data ? d || (this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this._flightQueue.push(b), b.loading = !0, this.onFileStart.dispatch(this.progress, b.key, b.url), this.loadFile(b)) : (this._flightQueue.push(b), b.loading = !0, this.loadFile(b))), !b.loaded && b.syncPoint && (d = !0), this._flightQueue.length >= e || d && this._loadedPackCount === this._totalPackCount) break
            }
            if (this.updateProgress(), this._processingHead >= this._fileList.length) this.finishedLoading();
            else if (!this._flightQueue.length) {
                console.warn("Phaser.Loader - aborting: processing queue empty, loading may have stalled");
                var f = this;
                setTimeout(function() {
                    f.finishedLoading(!0)
                },
                2e3)
            }
        },
        finishedLoading: function(a) {
            this.hasLoaded || (this.hasLoaded = !0, this.isLoading = !1, a || this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this.onLoadComplete.dispatch(), this.reset(), this.game.state.loadComplete())
        },
        asyncComplete: function(a, b) {
            "undefined" == typeof b && (b = ""),
            a.loaded = !0,
            a.error = !!b,
            b && (a.errorMessage = b, console.warn("Phaser.Loader - " + a.type + "[" + a.key + "]: " + b)),
            this.processLoadQueue()
        },
        processPack: function(a) {
            var b = a.data[a.key];
            if (!b) return void console.warn("Phaser.Loader - " + a.key + ": pack has data, but not for pack key");
            for (var d = 0; d < b.length; d++) {
                var e = b[d];
                switch (e.type) {
                case "image":
                    this.image(e.key, e.url, e.overwrite);
                    break;
                case "text":
                    this.text(e.key, e.url, e.overwrite);
                    break;
                case "json":
                    this.json(e.key, e.url, e.overwrite);
                    break;
                case "xml":
                    this.xml(e.key, e.url, e.overwrite);
                    break;
                case "script":
                    this.script(e.key, e.url, e.callback, a.callbackContext || this);
                    break;
                case "binary":
                    this.binary(e.key, e.url, e.callback, a.callbackContext || this);
                    break;
                case "spritesheet":
                    this.spritesheet(e.key, e.url, e.frameWidth, e.frameHeight, e.frameMax, e.margin, e.spacing);
                    break;
                case "audio":
                    this.audio(e.key, e.urls, e.autoDecode);
                    break;
                case "audiosprite":
                    this.audio(e.key, e.urls, e.jsonURL);
                    break;
                case "tilemap":
                    this.tilemap(e.key, e.url, e.data, c.Tilemap[e.format]);
                    break;
                case "physics":
                    this.physics(e.key, e.url, e.data, c.Loader[e.format]);
                    break;
                case "bitmapFont":
                    this.bitmapFont(e.key, e.textureURL, e.xmlURL, e.xmlData, e.xSpacing, e.ySpacing);
                    break;
                case "atlasJSONArray":
                    this.atlasJSONArray(e.key, e.textureURL, e.atlasURL, e.atlasData);
                    break;
                case "atlasJSONHash":
                    this.atlasJSONHash(e.key, e.textureURL, e.atlasURL, e.atlasData);
                    break;
                case "atlasXML":
                    this.atlasXML(e.key, e.textureURL, e.atlasURL, e.atlasData);
                    break;
                case "atlas":
                    this.atlas(e.key, e.textureURL, e.atlasURL, e.atlasData, c.Loader[e.format])
                }
            }
        },
        transformUrl: function(a) {
            return this.baseURL + a
        },
        loadFile: function(a) {
            switch (a.type) {
            case "packfile":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.fileComplete);
                break;
            case "image":
            case "spritesheet":
            case "textureatlas":
            case "bitmapfont":
                this.loadImageTag(a);
                break;
            case "audio":
                a.url = this.getAudioURL(a.url),
                a.url ? this.game.sound.usingWebAudio ? this.xhrLoad(a, this.transformUrl(a.url, a), "arraybuffer", this.fileComplete) : this.game.sound.usingAudioTag && this.loadAudioTag(a) : this.fileError(a, null, "no supported audio URL specified");
                break;
            case "json":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.jsonLoadComplete);
                break;
            case "xml":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.xmlLoadComplete);
                break;
            case "tilemap":
                a.format === c.Tilemap.TILED_JSON ? this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.jsonLoadComplete) : a.format === c.Tilemap.CSV ? this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.csvLoadComplete) : this.asyncComplete(a, "invalid Tilemap format: " + a.format);
                break;
            case "text":
            case "script":
            case "physics":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.fileComplete);
                break;
            case "binary":
                this.xhrLoad(a, this.transformUrl(a.url, a), "arraybuffer", this.fileComplete)
            }
        },
        loadImageTag: function(a) {
            var b = this;
            a.data = new Image,
            a.data.name = a.key,
            this.crossOrigin && (a.data.crossOrigin = this.crossOrigin),
            a.data.onload = function() {
                a.data.onload && (a.data.onload = null, a.data.onerror = null, b.fileComplete(a))
            },
            a.data.onerror = function() {
                a.data.onload && (a.data.onload = null, a.data.onerror = null, b.fileError(a))
            },
            a.data.src = this.transformUrl(a.url, a),
            a.data.complete && a.data.width && a.data.height && (a.data.onload = null, a.data.onerror = null, this.fileComplete(a))
        },
        loadAudioTag: function(a) {
            var b = this;
            if (this.game.sound.touchLocked) a.data = new Audio,
            a.data.name = a.key,
            a.data.preload = "auto",
            a.data.src = this.transformUrl(a.url, a),
            this.fileComplete(a);
            else {
                a.data = new Audio,
                a.data.name = a.key;
                var d = function() {
                    a.data.removeEventListener("canplaythrough", d, !1),
                    a.data.onerror = null,
                    c.GAMES[b.game.id].load.fileComplete(a)
                };
                a.data.onerror = function() {
                    a.data.removeEventListener("canplaythrough", d, !1),
                    a.data.onerror = null,
                    b.fileError(a)
                },
                a.data.preload = "auto",
                a.data.src = this.transformUrl(a.url, a),
                a.data.addEventListener("canplaythrough", d, !1),
                a.data.load()
            }
        },
        xhrLoad: function(a, b, c, d, e) {
            if (this.useXDomainRequest && window.XDomainRequest) return void this.xhrLoadWithXDR(a, b, c, d, e);
            var f = new XMLHttpRequest;
            f.open("GET", b, !0),
            f.responseType = c,
            e = e || this.fileError;
            var g = this;
            f.onload = function() {
                try {
                    return d.call(g, a, f)
                } catch(b) {
                    g.hasLoaded ? window.console && console.error(b) : g.asyncComplete(a, b.message || "Exception")
                }
            },
            f.onerror = function() {
                try {
                    return e.call(g, a, f)
                } catch(b) {
                    g.hasLoaded ? window.console && console.error(b) : g.asyncComplete(a, b.message || "Exception")
                }
            },
            a.requestObject = f,
            a.requestUrl = b,
            f.send()
        },
        xhrLoadWithXDR: function(a, b, c, d, e) {
            this._warnedAboutXDomainRequest || this.game.device.ie && !(this.game.device.ieVersion >= 10) || (this._warnedAboutXDomainRequest = !0, console.warn("Phaser.Loader - using XDomainRequest outside of IE 9"));
            var f = new window.XDomainRequest;
            f.open("GET", b, !0),
            f.responseType = c,
            f.timeout = 3e3,
            e = e || this.fileError;
            var g = this;
            f.onerror = function() {
                try {
                    return e.call(g, a, f)
                } catch(b) {
                    g.asyncComplete(a, b.message || "Exception")
                }
            },
            f.ontimeout = function() {
                try {
                    return e.call(g, a, f)
                } catch(b) {
                    g.asyncComplete(a, b.message || "Exception")
                }
            },
            f.onprogress = function() {},
            f.onload = function() {
                try {
                    return d.call(g, a, f)
                } catch(b) {
                    g.asyncComplete(a, b.message || "Exception")
                }
            },
            a.requestObject = f,
            a.requestUrl = b,
            setTimeout(function() {
                f.send()
            },
            0)
        },
        getAudioURL: function(a) {
            for (var b = 0; b < a.length; b++) {
                var c, d = a[b];
                if (d.uri) d = d.uri,
                c = d.type;
                else {
                    if (0 === d.indexOf("blob:") || 0 === d.indexOf("data:")) return d;
                    d.indexOf("?") >= 0 && (d = d.substr(0, d.indexOf("?")));
                    var e = d.substr((Math.max(0, d.lastIndexOf(".")) || 1 / 0) + 1);
                    c = e.toLowerCase()
                }
                if (this.game.device.canPlayAudio(c)) return a[b]
            }
            return null
        },
        fileError: function(a, b, c) {
            var d = a.requestUrl || this.transformUrl(a.url, a),
            e = "error loading asset from URL " + d; ! c && b && (c = b.status),
            c && (e = e + " (" + c + ")"),
            this.asyncComplete(a, e)
        },
        fileComplete: function(a, b) {
            var d = !0;
            switch (a.type) {
            case "packfile":
                var e = JSON.parse(b.responseText);
                a.data = e || {};
                break;
            case "image":
                this.game.cache.addImage(a.key, a.url, a.data);
                break;
            case "spritesheet":
                this.game.cache.addSpriteSheet(a.key, a.url, a.data, a.frameWidth, a.frameHeight, a.frameMax, a.margin, a.spacing);
                break;
            case "textureatlas":
                if (null == a.atlasURL) this.game.cache.addTextureAtlas(a.key, a.url, a.data, a.atlasData, a.format);
                else if (d = !1, a.format == c.Loader.TEXTURE_ATLAS_JSON_ARRAY || a.format == c.Loader.TEXTURE_ATLAS_JSON_HASH) this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", this.jsonLoadComplete);
                else {
                    if (a.format != c.Loader.TEXTURE_ATLAS_XML_STARLING) throw new Error("Phaser.Loader. Invalid Texture Atlas format: " + a.format);
                    this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", this.xmlLoadComplete)
                }
                break;
            case "bitmapfont":
                a.xmlURL ? (d = !1, this.xhrLoad(a, this.transformUrl(a.xmlURL, a), "text", this.xmlLoadComplete)) : this.game.cache.addBitmapFont(a.key, a.url, a.data, a.xmlData, a.xSpacing, a.ySpacing);
                break;
            case "audio":
                this.game.sound.usingWebAudio ? (a.data = b.response, this.game.cache.addSound(a.key, a.url, a.data, !0, !1), a.autoDecode && this.game.sound.decode(a.key)) : this.game.cache.addSound(a.key, a.url, a.data, !1, !0);
                break;
            case "text":
                a.data = b.responseText,
                this.game.cache.addText(a.key, a.url, a.data);
                break;
            case "physics":
                var e = JSON.parse(b.responseText);
                this.game.cache.addPhysicsData(a.key, a.url, e, a.format);
                break;
            case "script":
                a.data = document.createElement("script"),
                a.data.language = "javascript",
                a.data.type = "text/javascript",
                a.data.defer = !1,
                a.data.text = b.responseText,
                document.head.appendChild(a.data),
                a.callback && (a.data = a.callback.call(a.callbackContext, a.key, b.responseText));
                break;
            case "binary":
                a.data = a.callback ? a.callback.call(a.callbackContext, a.key, b.response) : b.response,
                this.game.cache.addBinary(a.key, a.data)
            }
            d && this.asyncComplete(a)
        },
        jsonLoadComplete: function(a, b) {
            var c = JSON.parse(b.responseText);
            "tilemap" === a.type ? this.game.cache.addTilemap(a.key, a.url, c, a.format) : "json" === a.type ? this.game.cache.addJSON(a.key, a.url, c) : this.game.cache.addTextureAtlas(a.key, a.url, a.data, c, a.format),
            this.asyncComplete(a)
        },
        csvLoadComplete: function(a, b) {
            var c = b.responseText;
            this.game.cache.addTilemap(a.key, a.url, c, a.format),
            this.asyncComplete(a)
        },
        xmlLoadComplete: function(a, b) {
            var c = b.responseText,
            d = this.parseXml(c);
            if (!d) {
                var e = b.responseType || b.contentType;
                return console.warn("Phaser.Loader - " + a.key + ": invalid XML (" + e + ")"),
                void this.asyncComplete(a, "invalid XML")
            }
            "bitmapfont" === a.type ? this.game.cache.addBitmapFont(a.key, a.url, a.data, d, a.xSpacing, a.ySpacing) : "textureatlas" === a.type ? this.game.cache.addTextureAtlas(a.key, a.url, a.data, d, a.format) : "xml" === a.type && this.game.cache.addXML(a.key, a.url, d),
            this.asyncComplete(a)
        },
        parseXml: function(a) {
            var b;
            try {
                if (window.DOMParser) {
                    var c = new DOMParser;
                    b = c.parseFromString(a, "text/xml")
                } else b = new ActiveXObject("Microsoft.XMLDOM"),
                b.async = "false",
                b.loadXML(a)
            } catch(d) {
                b = null
            }
            return b && b.documentElement && !b.getElementsByTagName("parsererror").length ? b: null
        },
        updateProgress: function() {
            this.preloadSprite && (0 === this.preloadSprite.direction ? this.preloadSprite.rect.width = Math.floor(this.preloadSprite.width / 100 * this.progress) : this.preloadSprite.rect.height = Math.floor(this.preloadSprite.height / 100 * this.progress), this.preloadSprite.sprite ? this.preloadSprite.sprite.updateCrop() : this.preloadSprite = null)
        },
        totalLoadedFiles: function() {
            return this._loadedFileCount
        },
        totalQueuedFiles: function() {
            return this._totalFileCount - this._loadedFileCount
        },
        totalLoadedPacks: function() {
            return this._totalPackCount
        },
        totalQueuedPacks: function() {
            return this._totalPackCount - this._loadedPackCount
        }
    },
    Object.defineProperty(c.Loader.prototype, "progressFloat", {
        get: function() {
            var a = this._loadedFileCount / this._totalFileCount * 100;
            return c.Math.clamp(a || 0, 0, 100)
        }
    }),
    Object.defineProperty(c.Loader.prototype, "progress", {
        get: function() {
            return Math.round(this.progressFloat)
        }
    }),
    c.Loader.prototype.constructor = c.Loader,
    c.LoaderParser = {
        bitmapFont: function(a, b, c, d, e) {
            var f = {},
            g = b.getElementsByTagName("info")[0],
            h = b.getElementsByTagName("common")[0];
            f.font = g.getAttribute("face"),
            f.size = parseInt(g.getAttribute("size"), 10),
            f.lineHeight = parseInt(h.getAttribute("lineHeight"), 10) + e,
            f.chars = {};
            for (var i = b.getElementsByTagName("char"), j = 0; j < i.length; j++) {
                var k = parseInt(i[j].getAttribute("id"), 10),
                l = new PIXI.Rectangle(parseInt(i[j].getAttribute("x"), 10), parseInt(i[j].getAttribute("y"), 10), parseInt(i[j].getAttribute("width"), 10), parseInt(i[j].getAttribute("height"), 10));
                f.chars[k] = {
                    xOffset: parseInt(i[j].getAttribute("xoffset"), 10),
                    yOffset: parseInt(i[j].getAttribute("yoffset"), 10),
                    xAdvance: parseInt(i[j].getAttribute("xadvance"), 10) + d,
                    kerning: {},
                    texture: PIXI.TextureCache[c] = new PIXI.Texture(PIXI.BaseTextureCache[c], l)
                }
            }
            var m = b.getElementsByTagName("kerning");
            for (j = 0; j < m.length; j++) {
                var n = parseInt(m[j].getAttribute("first"), 10),
                o = parseInt(m[j].getAttribute("second"), 10),
                p = parseInt(m[j].getAttribute("amount"), 10);
                f.chars[o].kerning[n] = p
            }
            PIXI.BitmapText.fonts[c] = f
        }
    },
    c.AudioSprite = function(a, b) {
        this.game = a,
        this.key = b,
        this.config = this.game.cache.getJSON(b + "-audioatlas"),
        this.autoplayKey = null,
        this.autoplay = !1,
        this.sounds = {};
        for (var c in this.config.spritemap) {
            var d = this.config.spritemap[c],
            e = this.game.add.sound(this.key);
            e.addMarker(c, d.start, d.end - d.start, null, d.loop),
            this.sounds[c] = e
        }
        this.config.autoplay && (this.autoplayKey = this.config.autoplay, this.play(this.autoplayKey), this.autoplay = this.sounds[this.autoplayKey])
    },
    c.AudioSprite.prototype = {
        play: function(a, b) {
            return "undefined" == typeof b && (b = 1),
            this.sounds[a].play(a, null, b)
        },
        stop: function(a) {
            if (a) this.sounds[a].stop();
            else for (var b in this.sounds) this.sounds[b].stop()
        },
        get: function(a) {
            return this.sounds[a]
        }
    },
    c.AudioSprite.prototype.constructor = c.AudioSprite,
    c.Sound = function(a, b, d, e, f) {
        "undefined" == typeof d && (d = 1),
        "undefined" == typeof e && (e = !1),
        "undefined" == typeof f && (f = a.sound.connectToMaster),
        this.game = a,
        this.name = b,
        this.key = b,
        this.loop = e,
        this.volume = d,
        this.markers = {},
        this.context = null,
        this.autoplay = !1,
        this.totalDuration = 0,
        this.startTime = 0,
        this.currentTime = 0,
        this.duration = 0,
        this.durationMS = 0,
        this.position = 0,
        this.stopTime = 0,
        this.paused = !1,
        this.pausedPosition = 0,
        this.pausedTime = 0,
        this.isPlaying = !1,
        this.currentMarker = "",
        this.fadeTween = null,
        this.pendingPlayback = !1,
        this.override = !1,
        this.allowMultiple = !1,
        this.usingWebAudio = this.game.sound.usingWebAudio,
        this.usingAudioTag = this.game.sound.usingAudioTag,
        this.externalNode = null,
        this.masterGainNode = null,
        this.gainNode = null,
        this._sound = null,
        this.usingWebAudio ? (this.context = this.game.sound.context, this.masterGainNode = this.game.sound.masterGain, this.gainNode = "undefined" == typeof this.context.createGain ? this.context.createGainNode() : this.context.createGain(), this.gainNode.gain.value = d * this.game.sound.volume, f && this.gainNode.connect(this.masterGainNode)) : this.usingAudioTag && (this.game.cache.getSound(b) && this.game.cache.isSoundReady(b) ? (this._sound = this.game.cache.getSoundData(b), this.totalDuration = 0, this._sound.duration && (this.totalDuration = this._sound.duration)) : this.game.cache.onSoundUnlock.add(this.soundHasUnlocked, this)),
        this.onDecoded = new c.Signal,
        this.onPlay = new c.Signal,
        this.onPause = new c.Signal,
        this.onResume = new c.Signal,
        this.onLoop = new c.Signal,
        this.onStop = new c.Signal,
        this.onMute = new c.Signal,
        this.onMarkerComplete = new c.Signal,
        this.onFadeComplete = new c.Signal,
        this._volume = d,
        this._buffer = null,
        this._muted = !1,
        this._tempMarker = 0,
        this._tempPosition = 0,
        this._tempVolume = 0,
        this._muteVolume = 0,
        this._tempLoop = 0,
        this._paused = !1,
        this._onDecodedEventDispatched = !1
    },
    c.Sound.prototype = {
        soundHasUnlocked: function(a) {
            a === this.key && (this._sound = this.game.cache.getSoundData(this.key), this.totalDuration = this._sound.duration)
        },
        addMarker: function(a, b, c, d, e) {
            "undefined" == typeof d && (d = 1),
            "undefined" == typeof e && (e = !1),
            this.markers[a] = {
                name: a,
                start: b,
                stop: b + c,
                volume: d,
                duration: c,
                durationMS: 1e3 * c,
                loop: e
            }
        },
        removeMarker: function(a) {
            delete this.markers[a]
        },
        onEndedHandler: function() {
            this.isPlaying = !1,
            this.stop()
        },
        update: function() {
            this.isDecoded && !this._onDecodedEventDispatched && (this.onDecoded.dispatch(this), this._onDecodedEventDispatched = !0),
            this.pendingPlayback && this.game.cache.isSoundReady(this.key) && (this.pendingPlayback = !1, this.play(this._tempMarker, this._tempPosition, this._tempVolume, this._tempLoop)),
            this.isPlaying && (this.currentTime = this.game.time.time - this.startTime, this.currentTime >= this.durationMS && (this.usingWebAudio ? this.loop ? (this.onLoop.dispatch(this), "" === this.currentMarker ? (this.currentTime = 0, this.startTime = this.game.time.time) : (this.onMarkerComplete.dispatch(this.currentMarker, this), this.play(this.currentMarker, 0, this.volume, !0, !0))) : "" !== this.currentMarker && this.stop() : this.loop ? (this.onLoop.dispatch(this), this.play(this.currentMarker, 0, this.volume, !0, !0)) : this.stop()))
        },
        loopFull: function(a) {
            this.play(null, 0, a, !0)
        },
        play: function(a, b, c, d, e) {
            if (("undefined" == typeof a || a === !1 || null === a) && (a = ""), "undefined" == typeof e && (e = !0), this.isPlaying && !this.allowMultiple && !e && !this.override) return this;
            if (this._sound && this.isPlaying && !this.allowMultiple && (this.override || e)) if (this.usingWebAudio) if ("undefined" == typeof this._sound.stop) this._sound.noteOff(0);
            else try {
                this._sound.stop(0)
            } catch(f) {} else this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
            if ("" === a && Object.keys(this.markers).length > 0) return this;
            if ("" !== a) {
                if (this.currentMarker = a, !this.markers[a]) return this;
                this.position = this.markers[a].start,
                this.volume = this.markers[a].volume,
                this.loop = this.markers[a].loop,
                this.duration = this.markers[a].duration,
                this.durationMS = this.markers[a].durationMS,
                "undefined" != typeof c && (this.volume = c),
                "undefined" != typeof d && (this.loop = d),
                this._tempMarker = a,
                this._tempPosition = this.position,
                this._tempVolume = this.volume,
                this._tempLoop = this.loop
            } else b = b || 0,
            "undefined" == typeof c && (c = this._volume),
            "undefined" == typeof d && (d = this.loop),
            this.position = b,
            this.volume = c,
            this.loop = d,
            this.duration = 0,
            this.durationMS = 0,
            this._tempMarker = a,
            this._tempPosition = b,
            this._tempVolume = c,
            this._tempLoop = d;
            return this.usingWebAudio ? this.game.cache.isSoundDecoded(this.key) ? (null === this._buffer && (this._buffer = this.game.cache.getSoundData(this.key)), this._sound = this.context.createBufferSource(), this._sound.buffer = this._buffer, this._sound.connect(this.externalNode ? this.externalNode: this.gainNode), this.loop && "" === a && (this._sound.loop = !0), this.loop || "" !== a || (this._sound.onended = this.onEndedHandler.bind(this)), this.totalDuration = this._sound.buffer.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = Math.ceil(1e3 * this.totalDuration)), "undefined" == typeof this._sound.start ? this._sound.noteGrainOn(0, this.position, this.duration) : this.loop && "" === a ? this._sound.start(0) : this._sound.start(0, this.position, this.duration), this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : (this.pendingPlayback = !0, this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).isDecoding === !1 && this.game.sound.decode(this.key, this)) : this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).locked ? (this.game.cache.reloadSound(this.key), this.pendingPlayback = !0) : this._sound && (this.game.device.cocoonJS || 4 === this._sound.readyState) ? (this._sound.play(), this.totalDuration = this._sound.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = 1e3 * this.totalDuration), this._sound.currentTime = this.position, this._sound.muted = this._muted, this._sound.volume = this._muted ? 0 : this._volume, this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : this.pendingPlayback = !0,
            this
        },
        restart: function(a, b, c, d) {
            a = a || "",
            b = b || 0,
            c = c || 1,
            "undefined" == typeof d && (d = !1),
            this.play(a, b, c, d, !0)
        },
        pause: function() {
            this.isPlaying && this._sound && (this.paused = !0, this.pausedPosition = this.currentTime, this.pausedTime = this.game.time.time, this.onPause.dispatch(this), this.stop())
        },
        resume: function() {
            if (this.paused && this._sound) {
                if (this.usingWebAudio) {
                    var a = this.position + this.pausedPosition / 1e3;
                    this._sound = this.context.createBufferSource(),
                    this._sound.buffer = this._buffer,
                    this._sound.connect(this.externalNode ? this.externalNode: this.gainNode),
                    this.loop && (this._sound.loop = !0),
                    this.loop || "" !== this.currentMarker || (this._sound.onended = this.onEndedHandler.bind(this));
                    var b = this.duration - this.pausedPosition / 1e3;
                    "undefined" == typeof this._sound.start ? this._sound.noteGrainOn(0, a, b) : this._sound.start(0, a, b)
                } else this._sound.play();
                this.isPlaying = !0,
                this.paused = !1,
                this.startTime += this.game.time.time - this.pausedTime,
                this.onResume.dispatch(this)
            }
        },
        stop: function() {
            if (this.isPlaying && this._sound) if (this.usingWebAudio) if ("undefined" == typeof this._sound.stop) this._sound.noteOff(0);
            else try {
                this._sound.stop(0)
            } catch(a) {} else this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
            this.pendingPlayback = !1,
            this.isPlaying = !1;
            var b = this.currentMarker;
            "" !== this.currentMarker && this.onMarkerComplete.dispatch(this.currentMarker, this),
            this.currentMarker = "",
            null !== this.fadeTween && this.fadeTween.stop(),
            this.paused || this.onStop.dispatch(this, b)
        },
        fadeIn: function(a, b, c) {
            "undefined" == typeof b && (b = !1),
            "undefined" == typeof c && (c = this.currentMarker),
            this.paused || (this.play(c, 0, 0, b), this.fadeTo(a, 1))
        },
        fadeOut: function(a) {
            this.fadeTo(a, 0)
        },
        fadeTo: function(a, b) {
            if (this.isPlaying && !this.paused && b !== this.volume) {
                if ("undefined" == typeof a && (a = 1e3), "undefined" == typeof b) return void console.warn("Phaser.Sound.fadeTo: No Volume Specified.");
                this.fadeTween = this.game.add.tween(this).to({
                    volume: b
                },
                a, c.Easing.Linear.None, !0),
                this.fadeTween.onComplete.add(this.fadeComplete, this)
            }
        },
        fadeComplete: function() {
            this.onFadeComplete.dispatch(this, this.volume),
            0 === this.volume && this.stop()
        },
        destroy: function(a) {
            "undefined" == typeof a && (a = !0),
            this.stop(),
            a ? this.game.sound.remove(this) : (this.markers = {},
            this.context = null, this._buffer = null, this.externalNode = null, this.onDecoded.dispose(), this.onPlay.dispose(), this.onPause.dispose(), this.onResume.dispose(), this.onLoop.dispose(), this.onStop.dispose(), this.onMute.dispose(), this.onMarkerComplete.dispose())
        }
    },
    c.Sound.prototype.constructor = c.Sound,
    Object.defineProperty(c.Sound.prototype, "isDecoding", {
        get: function() {
            return this.game.cache.getSound(this.key).isDecoding
        }
    }),
    Object.defineProperty(c.Sound.prototype, "isDecoded", {
        get: function() {
            return this.game.cache.isSoundDecoded(this.key)
        }
    }),
    Object.defineProperty(c.Sound.prototype, "mute", {
        get: function() {
            return this._muted || this.game.sound.mute
        },
        set: function(a) {
            a = a || null,
            a ? (this._muted = !0, this.usingWebAudio ? (this._muteVolume = this.gainNode.gain.value, this.gainNode.gain.value = 0) : this.usingAudioTag && this._sound && (this._muteVolume = this._sound.volume, this._sound.volume = 0)) : (this._muted = !1, this.usingWebAudio ? this.gainNode.gain.value = this._muteVolume: this.usingAudioTag && this._sound && (this._sound.volume = this._muteVolume)),
            this.onMute.dispatch(this)
        }
    }),
    Object.defineProperty(c.Sound.prototype, "volume", {
        get: function() {
            return this._volume
        },
        set: function(a) {
            this.usingWebAudio ? (this._volume = a, this.gainNode.gain.value = a) : this.usingAudioTag && this._sound && a >= 0 && 1 >= a && (this._volume = a, this._sound.volume = a)
        }
    }),
    c.SoundManager = function(a) {
        this.game = a,
        this.onSoundDecode = new c.Signal,
        this._codeMuted = !1,
        this._muted = !1,
        this._unlockSource = null,
        this._volume = 1,
        this._sounds = [],
        this._watchList = new c.ArraySet,
        this._watching = !1,
        this._watchCallback = null,
        this._watchContext = null,
        this.context = null,
        this.usingWebAudio = !0,
        this.usingAudioTag = !1,
        this.noAudio = !1,
        this.connectToMaster = !0,
        this.touchLocked = !1,
        this.channels = 32
    },
    c.SoundManager.prototype = {
        boot: function() {
            if (this.game.device.iOS && this.game.device.webAudio === !1 && (this.channels = 1), !this.game.device.cocoonJS && this.game.device.iOS || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock ? (this.game.input.touch.callbackContext = this, this.game.input.touch.touchStartCallback = this.unlock, this.game.input.mouse.callbackContext = this, this.game.input.mouse.mouseDownCallback = this.unlock, this.touchLocked = !0) : this.touchLocked = !1, window.PhaserGlobal) {
                if (window.PhaserGlobal.disableAudio === !0) return this.usingWebAudio = !1,
                void(this.noAudio = !0);
                if (window.PhaserGlobal.disableWebAudio === !0) return this.usingWebAudio = !1,
                this.usingAudioTag = !0,
                void(this.noAudio = !1)
            }
            if (window.PhaserGlobal && window.PhaserGlobal.audioContext) this.context = window.PhaserGlobal.audioContext;
            else if (window.AudioContext) try {
                this.context = new window.AudioContext
            } catch(a) {
                this.context = null,
                this.usingWebAudio = !1,
                this.noAudio = !0
            } else if (window.webkitAudioContext) try {
                this.context = new window.webkitAudioContext
            } catch(a) {
                this.context = null,
                this.usingWebAudio = !1,
                this.noAudio = !0
            }
            window.Audio && null === this.context && (this.usingWebAudio = !1, this.usingAudioTag = !0, this.noAudio = !1),
            null !== this.context && (this.masterGain = "undefined" == typeof this.context.createGain ? this.context.createGainNode() : this.context.createGain(), this.masterGain.gain.value = 1, this.masterGain.connect(this.context.destination))
        },
        unlock: function() {
            if (this.touchLocked !== !1) if (this.game.device.webAudio === !1 || window.PhaserGlobal && window.PhaserGlobal.disableWebAudio === !0) this.touchLocked = !1,
            this._unlockSource = null,
            this.game.input.touch.callbackContext = null,
            this.game.input.touch.touchStartCallback = null,
            this.game.input.mouse.callbackContext = null,
            this.game.input.mouse.mouseDownCallback = null;
            else {
                var a = this.context.createBuffer(1, 1, 22050);
                this._unlockSource = this.context.createBufferSource(),
                this._unlockSource.buffer = a,
                this._unlockSource.connect(this.context.destination),
                "undefined" == typeof this._unlockSource.start ? this._unlockSource.noteOn(0) : this._unlockSource.start(0)
            }
        },
        stopAll: function() {
            for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].stop()
        },
        pauseAll: function() {
            for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].pause()
        },
        resumeAll: function() {
            for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].resume()
        },
        decode: function(a, b) {
            b = b || null;
            var c = this.game.cache.getSoundData(a);
            if (c && this.game.cache.isSoundDecoded(a) === !1) {
                this.game.cache.updateSound(a, "isDecoding", !0);
                var d = this;
                this.context.decodeAudioData(c,
                function(c) {
                    c && (d.game.cache.decodedSound(a, c), d.onSoundDecode.dispatch(a, b))
                })
            }
        },
        setDecodedCallback: function(a, b, d) {
            "string" == typeof a && (a = [a]),
            this._watchList.reset();
            for (var e = 0; e < a.length; e++) a[e] instanceof c.Sound ? this.game.cache.isSoundDecoded(a[e].key) || this._watchList.add(a[e].key) : this.game.cache.isSoundDecoded(a[e]) || this._watchList.add(a[e]);
            0 === this._watchList.total ? (this._watching = !1, b.call(d)) : (this._watching = !0, this._watchCallback = b, this._watchContext = d)
        },
        update: function() {
            this.touchLocked && this.game.device.webAudio && null !== this._unlockSource && (this._unlockSource.playbackState === this._unlockSource.PLAYING_STATE || this._unlockSource.playbackState === this._unlockSource.FINISHED_STATE) && (this.touchLocked = !1, this._unlockSource = null, this.game.input.touch.callbackContext = null, this.game.input.touch.touchStartCallback = null);
            for (var a = 0; a < this._sounds.length; a++) this._sounds[a].update();
            if (this._watching) {
                for (var b = this._watchList.first; b;) this.game.cache.isSoundDecoded(b) && this._watchList.remove(b),
                b = this._watchList.next;
                0 === this._watchList.total && (this._watching = !1, this._watchCallback.call(this._watchContext))
            }
        },
        add: function(a, b, d, e) {
            "undefined" == typeof b && (b = 1),
            "undefined" == typeof d && (d = !1),
            "undefined" == typeof e && (e = this.connectToMaster);
            var f = new c.Sound(this.game, a, b, d, e);
            return this._sounds.push(f),
            f
        },
        addSprite: function(a) {
            var b = new c.AudioSprite(this.game, a);
            return b
        },
        remove: function(a) {
            for (var b = this._sounds.length; b--;) if (this._sounds[b] === a) return this._sounds[b].destroy(!1),
            this._sounds.splice(b, 1),
            !0;
            return ! 1
        },
        removeByKey: function(a) {
            for (var b = this._sounds.length,
            c = 0; b--;) this._sounds[b].key === a && (this._sounds[b].destroy(!1), this._sounds.splice(b, 1), c++);
            return c
        },
        play: function(a, b, c) {
            var d = this.add(a, b, c);
            return d.play(),
            d
        },
        setMute: function() {
            if (!this._muted) {
                this._muted = !0,
                this.usingWebAudio && (this._muteVolume = this.masterGain.gain.value, this.masterGain.gain.value = 0);
                for (var a = 0; a < this._sounds.length; a++) this._sounds[a].usingAudioTag && (this._sounds[a].mute = !0)
            }
        },
        unsetMute: function() {
            if (this._muted && !this._codeMuted) {
                this._muted = !1,
                this.usingWebAudio && (this.masterGain.gain.value = this._muteVolume);
                for (var a = 0; a < this._sounds.length; a++) this._sounds[a].usingAudioTag && (this._sounds[a].mute = !1)
            }
        },
        destroy: function() {
            this.stopAll();
            for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].destroy();
            this._sounds = [],
            this.onSoundDecode.dispose(),
            this.context && window.PhaserGlobal && (window.PhaserGlobal.audioContext = this.context)
        }
    },
    c.SoundManager.prototype.constructor = c.SoundManager,
    Object.defineProperty(c.SoundManager.prototype, "mute", {
        get: function() {
            return this._muted
        },
        set: function(a) {
            if (a = a || null) {
                if (this._muted) return;
                this._codeMuted = !0,
                this.setMute()
            } else {
                if (!this._muted) return;
                this._codeMuted = !1,
                this.unsetMute()
            }
        }
    }),
    Object.defineProperty(c.SoundManager.prototype, "volume", {
        get: function() {
            return this.usingWebAudio ? this.masterGain.gain.value: this._volume
        },
        set: function(a) {
            if (this._volume = a, this.usingWebAudio) this.masterGain.gain.value = a;
            else for (var b = 0; b < this._sounds.length; b++) this._sounds[b].usingAudioTag && (this._sounds[b].volume = this._sounds[b].volume * a)
        }
    }),
    c.Utils.Debug = function(a) {
        this.game = a,
        this.sprite = null,
        this.bmd = null,
        this.canvas = null,
        this.context = null,
        this.font = "14px Courier",
        this.columnWidth = 100,
        this.lineHeight = 16,
        this.renderShadow = !0,
        this.currentX = 0,
        this.currentY = 0,
        this.currentAlpha = 1,
        this.dirty = !1
    },
    c.Utils.Debug.prototype = {
        boot: function() {
            this.game.renderType === c.CANVAS ? this.context = this.game.context: (this.bmd = this.game.make.bitmapData(this.game.width, this.game.height), this.sprite = this.game.make.image(0, 0, this.bmd), this.game.stage.addChild(this.sprite), this.canvas = c.Canvas.create(this.game.width, this.game.height, "", !0), this.context = this.canvas.getContext("2d"))
        },
        preUpdate: function() {
            this.dirty && this.sprite && (this.bmd.clear(), this.bmd.draw(this.canvas, 0, 0), this.context.clearRect(0, 0, this.game.width, this.game.height), this.dirty = !1)
        },
        reset: function() {
            this.context && this.context.clearRect(0, 0, this.game.width, this.game.height),
            this.sprite && this.bmd.clear()
        },
        start: function(a, b, c, d) {
            "number" != typeof a && (a = 0),
            "number" != typeof b && (b = 0),
            c = c || "rgb(255,255,255)",
            "undefined" == typeof d && (d = 0),
            this.currentX = a,
            this.currentY = b,
            this.currentColor = c,
            this.currentAlpha = this.context.globalAlpha,
            this.columnWidth = d,
            this.dirty = !0,
            this.context.save(),
            this.context.setTransform(1, 0, 0, 1, 0, 0),
            this.context.strokeStyle = c,
            this.context.fillStyle = c,
            this.context.font = this.font,
            this.context.globalAlpha = 1
        },
        stop: function() {
            this.context.restore(),
            this.context.globalAlpha = this.currentAlpha
        },
        line: function() {
            for (var a = this.currentX,
            b = 0; b < arguments.length; b++) this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(arguments[b], a + 1, this.currentY + 1), this.context.fillStyle = this.currentColor),
            this.context.fillText(arguments[b], a, this.currentY),
            a += this.columnWidth;
            this.currentY += this.lineHeight
        },
        soundInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Sound: " + a.key + " Locked: " + a.game.sound.touchLocked),
            this.line("Is Ready?: " + this.game.cache.isSoundReady(a.key) + " Pending Playback: " + a.pendingPlayback),
            this.line("Decoded: " + a.isDecoded + " Decoding: " + a.isDecoding),
            this.line("Total Duration: " + a.totalDuration + " Playing: " + a.isPlaying),
            this.line("Time: " + a.currentTime),
            this.line("Volume: " + a.volume + " Muted: " + a.mute),
            this.line("WebAudio: " + a.usingWebAudio + " Audio: " + a.usingAudioTag),
            "" !== a.currentMarker && (this.line("Marker: " + a.currentMarker + " Duration: " + a.duration + " (ms: " + a.durationMS + ")"), this.line("Start: " + a.markers[a.currentMarker].start + " Stop: " + a.markers[a.currentMarker].stop), this.line("Position: " + a.position)),
            this.stop()
        },
        cameraInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Camera (" + a.width + " x " + a.height + ")"),
            this.line("X: " + a.x + " Y: " + a.y),
            a.bounds && this.line("Bounds x: " + a.bounds.x + " Y: " + a.bounds.y + " w: " + a.bounds.width + " h: " + a.bounds.height),
            this.line("View x: " + a.view.x + " Y: " + a.view.y + " w: " + a.view.width + " h: " + a.view.height),
            this.line("Total in view: " + a.totalInView),
            this.stop()
        },
        timer: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Timer (running: " + a.running + " expired: " + a.expired + ")"),
            this.line("Next Tick: " + a.next + " Duration: " + a.duration),
            this.line("Paused: " + a.paused + " Length: " + a.length),
            this.stop()
        },
        pointer: function(a, b, c, d, e) {
            null != a && ("undefined" == typeof b && (b = !1), c = c || "rgba(0,255,0,0.5)", d = d || "rgba(255,0,0,0.5)", (b !== !0 || a.isUp !== !0) && (this.start(a.x, a.y - 100, e), this.context.beginPath(), this.context.arc(a.x, a.y, a.circle.radius, 0, 2 * Math.PI), this.context.fillStyle = a.active ? c: d, this.context.fill(), this.context.closePath(), this.context.beginPath(), this.context.moveTo(a.positionDown.x, a.positionDown.y), this.context.lineTo(a.position.x, a.position.y), this.context.lineWidth = 2, this.context.stroke(), this.context.closePath(), this.line("ID: " + a.id + " Active: " + a.active), this.line("World X: " + a.worldX + " World Y: " + a.worldY), this.line("Screen X: " + a.x + " Screen Y: " + a.y), this.line("Duration: " + a.duration + " ms"), this.line("is Down: " + a.isDown + " is Up: " + a.isUp), this.stop()))
        },
        spriteInputInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Sprite Input: (" + a.width + " x " + a.height + ")"),
            this.line("x: " + a.input.pointerX().toFixed(1) + " y: " + a.input.pointerY().toFixed(1)),
            this.line("over: " + a.input.pointerOver() + " duration: " + a.input.overDuration().toFixed(0)),
            this.line("down: " + a.input.pointerDown() + " duration: " + a.input.downDuration().toFixed(0)),
            this.line("just over: " + a.input.justOver() + " just out: " + a.input.justOut()),
            this.stop()
        },
        key: function(a, b, c, d) {
            this.start(b, c, d, 150),
            this.line("Key:", a.keyCode, "isDown:", a.isDown),
            this.line("justDown:", a.justDown, "justUp:", a.justUp),
            this.line("Time Down:", a.timeDown.toFixed(0), "duration:", a.duration.toFixed(0)),
            this.stop()
        },
        inputInfo: function(a, b, c) {
            this.start(a, b, c),
            this.line("Input"),
            this.line("X: " + this.game.input.x + " Y: " + this.game.input.y),
            this.line("World X: " + this.game.input.worldX + " World Y: " + this.game.input.worldY),
            this.line("Scale X: " + this.game.input.scale.x.toFixed(1) + " Scale Y: " + this.game.input.scale.x.toFixed(1)),
            this.line("Screen X: " + this.game.input.activePointer.screenX + " Screen Y: " + this.game.input.activePointer.screenY),
            this.stop()
        },
        spriteBounds: function(a, b, c) {
            var d = a.getBounds();
            d.x += this.game.camera.x,
            d.y += this.game.camera.y,
            this.rectangle(d, b, c)
        },
        ropeSegments: function(a, b, c) {
            var d = a.segments;
            d.forEach(function(a) {
                this.rectangle(a, b, c)
            },
            this)
        },
        spriteInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Sprite:  (" + a.width + " x " + a.height + ") anchor: " + a.anchor.x + " x " + a.anchor.y),
            this.line("x: " + a.x.toFixed(1) + " y: " + a.y.toFixed(1)),
            this.line("angle: " + a.angle.toFixed(1) + " rotation: " + a.rotation.toFixed(1)),
            this.line("visible: " + a.visible + " in camera: " + a.inCamera),
            this.line("bounds x: " + a._bounds.x.toFixed(1) + " y: " + a._bounds.y.toFixed(1) + " w: " + a._bounds.width.toFixed(1) + " h: " + a._bounds.height.toFixed(1)),
            this.stop()
        },
        spriteCoords: function(a, b, c, d) {
            this.start(b, c, d, 100),
            a.name && this.line(a.name),
            this.line("x:", a.x.toFixed(2), "y:", a.y.toFixed(2)),
            this.line("pos x:", a.position.x.toFixed(2), "pos y:", a.position.y.toFixed(2)),
            this.line("world x:", a.world.x.toFixed(2), "world y:", a.world.y.toFixed(2)),
            this.stop()
        },
        lineInfo: function(a, b, c, d) {
            this.start(b, c, d, 80),
            this.line("start.x:", a.start.x.toFixed(2), "start.y:", a.start.y.toFixed(2)),
            this.line("end.x:", a.end.x.toFixed(2), "end.y:", a.end.y.toFixed(2)),
            this.line("length:", a.length.toFixed(2), "angle:", a.angle),
            this.stop()
        },
        pixel: function(a, b, c, d) {
            d = d || 2,
            this.start(),
            this.context.fillStyle = c,
            this.context.fillRect(a, b, d, d),
            this.stop()
        },
        geom: function(a, b, d, e) {
            "undefined" == typeof d && (d = !0),
            "undefined" == typeof e && (e = 0),
            b = b || "rgba(0,255,0,0.4)",
            this.start(),
            this.context.fillStyle = b,
            this.context.strokeStyle = b,
            a instanceof c.Rectangle || 1 === e ? d ? this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height) : this.context.strokeRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height) : a instanceof c.Circle || 2 === e ? (this.context.beginPath(), this.context.arc(a.x - this.game.camera.x, a.y - this.game.camera.y, a.radius, 0, 2 * Math.PI, !1), this.context.closePath(), d ? this.context.fill() : this.context.stroke()) : a instanceof c.Point || 3 === e ? this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, 4, 4) : (a instanceof c.Line || 4 === e) && (this.context.lineWidth = 1, this.context.beginPath(), this.context.moveTo(a.start.x + .5 - this.game.camera.x, a.start.y + .5 - this.game.camera.y), this.context.lineTo(a.end.x + .5 - this.game.camera.x, a.end.y + .5 - this.game.camera.y), this.context.closePath(), this.context.stroke()),
            this.stop()
        },
        rectangle: function(a, b, c) {
            "undefined" == typeof c && (c = !0),
            b = b || "rgba(0, 255, 0, 0.4)",
            this.start(),
            c ? (this.context.fillStyle = b, this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)) : (this.context.strokeStyle = b, this.context.strokeRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)),
            this.stop()
        },
        text: function(a, b, c, d, e) {
            d = d || "rgb(255,255,255)",
            e = e || "16px Courier",
            this.start(),
            this.context.font = e,
            this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(a, b + 1, c + 1)),
            this.context.fillStyle = d,
            this.context.fillText(a, b, c),
            this.stop()
        },
        quadTree: function(a, b) {
            b = b || "rgba(255,0,0,0.3)",
            this.start();
            var c = a.bounds;
            if (0 === a.nodes.length) {
                this.context.strokeStyle = b,
                this.context.strokeRect(c.x, c.y, c.width, c.height),
                this.text("size: " + a.objects.length, c.x + 4, c.y + 16, "rgb(0,200,0)", "12px Courier"),
                this.context.strokeStyle = "rgb(0,255,0)";
                for (var d = 0; d < a.objects.length; d++) this.context.strokeRect(a.objects[d].x, a.objects[d].y, a.objects[d].width, a.objects[d].height)
            } else for (var d = 0; d < a.nodes.length; d++) this.quadTree(a.nodes[d]);
            this.stop()
        },
        body: function(a, b, d) {
            a.body && (this.start(), a.body.type === c.Physics.ARCADE ? c.Physics.Arcade.Body.render(this.context, a.body, b, d) : a.body.type === c.Physics.NINJA ? c.Physics.Ninja.Body.render(this.context, a.body, b, d) : a.body.type === c.Physics.BOX2D && c.Physics.Box2D.renderBody(this.context, a.body, b), this.stop())
        },
        bodyInfo: function(a, b, d, e) {
            a.body && (this.start(b, d, e, 210), a.body.type === c.Physics.ARCADE ? c.Physics.Arcade.Body.renderBodyInfo(this, a.body) : a.body.type === c.Physics.BOX2D && this.game.physics.box2d.renderBodyInfo(this, a.body), this.stop())
        },
        box2dWorld: function() {
            this.start(),
            this.context.translate( - this.game.camera.view.x, -this.game.camera.view.y, 0),
            this.game.physics.box2d.renderDebugDraw(this.context),
            this.stop()
        },
        box2dBody: function(a, b) {
            this.start(),
            c.Physics.Box2D.renderBody(this.context, a, b),
            this.stop()
        }
    },
    c.Utils.Debug.prototype.constructor = c.Utils.Debug,
    c.ArraySet = function(a) {
        this.position = 0,
        this.list = a || []
    },
    c.ArraySet.prototype = {
        add: function(a) {
            return this.exists(a) || this.list.push(a),
            a
        },
        getIndex: function(a) {
            return this.list.indexOf(a)
        },
        getByKey: function(a, b) {
            for (var c = this.list.length; c--;) if (this.list[c][a] === b) return this.list[c];
            return null
        },
        exists: function(a) {
            return this.list.indexOf(a) > -1
        },
        reset: function() {
            this.list.length = 0
        },
        remove: function(a) {
            var b = this.list.indexOf(a);
            return b > -1 ? (this.list.splice(b, 1), a) : void 0
        },
        setAll: function(a, b) {
            for (var c = this.list.length; c--;) this.list[c] && (this.list[c][a] = b)
        },
        callAll: function(a) {
            for (var b = Array.prototype.splice.call(arguments, 1), c = this.list.length; c--;) this.list[c] && this.list[c][a] && this.list[c][a].apply(this.list[c], b)
        },
        removeAll: function(a) {
            "undefined" == typeof a && (a = !1);
            for (var b = this.list.length; b--;) if (this.list[b]) {
                var c = this.remove(this.list[b]);
                a && c.destroy()
            }
            this.position = 0,
            this.list = []
        }
    },
    Object.defineProperty(c.ArraySet.prototype, "total", {
        get: function() {
            return this.list.length
        }
    }),
    Object.defineProperty(c.ArraySet.prototype, "first", {
        get: function() {
            return this.position = 0,
            this.list.length > 0 ? this.list[0] : null
        }
    }),
    Object.defineProperty(c.ArraySet.prototype, "next", {
        get: function() {
            return this.position < this.list.length ? (this.position++, this.list[this.position]) : null
        }
    }),
    c.ArraySet.prototype.constructor = c.ArraySet,
    c.ArrayList = c.ArraySet,
    c.ArrayUtils = {
        getRandomItem: function(a, b, c) {
            if (null == a) return null;
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = a.length);
            var d = b + Math.floor(Math.random() * c);
            return void 0 === a[d] ? null: a[d]
        },
        removeRandomItem: function(a, b, c) {
            if (null == a) return null;
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = a.length);
            var d = b + Math.floor(Math.random() * c);
            if (d < a.length) {
                var e = a.splice(d, 1);
                return void 0 === e[0] ? null: e[0]
            }
            return null
        },
        shuffle: function(a) {
            for (var b = a.length - 1; b > 0; b--) {
                var c = Math.floor(Math.random() * (b + 1)),
                d = a[b];
                a[b] = a[c],
                a[c] = d
            }
            return a
        },
        transposeMatrix: function(a) {
            for (var b = a.length,
            c = a[0].length, d = new Array(c), e = 0; c > e; e++) {
                d[e] = new Array(b);
                for (var f = b - 1; f > -1; f--) d[e][f] = a[f][e]
            }
            return d
        },
        rotateMatrix: function(a, b) {
            if ("string" != typeof b && (b = (b % 360 + 360) % 360), 90 === b || -270 === b || "rotateLeft" === b) a = c.ArrayUtils.transposeMatrix(a),
            a = a.reverse();
            else if ( - 90 === b || 270 === b || "rotateRight" === b) a = a.reverse(),
            a = c.ArrayUtils.transposeMatrix(a);
            else if (180 === Math.abs(b) || "rotate180" === b) {
                for (var d = 0; d < a.length; d++) a[d].reverse();
                a = a.reverse()
            }
            return a
        },
        findClosest: function(a, b) {
            if (!b.length) return NaN;
            if (1 === b.length || a < b[0]) return b[0];
            for (var c = 1; b[c] < a;) c++;
            var d = b[c - 1],
            e = c < b.length ? b[c] : Number.POSITIVE_INFINITY;
            return a - d >= e - a ? e: d
        },
        rotate: function(a) {
            var b = a.shift();
            return a.push(b),
            b
        },
        numberArray: function(a, b) {
            for (var c = [], d = a; b >= d; d++) c.push(d);
            return c
        },
        numberArrayStep: function(a, b, d) {
            a = +a || 0;
            var e = typeof b;
            "number" !== e && "string" !== e || !d || d[b] !== a || (b = d = null),
            d = null == d ? 1 : +d || 0,
            null === b ? (b = a, a = 0) : b = +b || 0;
            for (var f = -1,
            g = Math.max(c.Math.roundAwayFromZero((b - a) / (d || 1)), 0), h = new Array(g); ++f < g;) h[f] = a,
            a += d;
            return h
        }
    },
    c.Color = {
        packPixel: function(a, b, d, e) {
            return c.Device.LITTLE_ENDIAN ? (e << 24 | d << 16 | b << 8 | a) >>> 0 : (a << 24 | b << 16 | d << 8 | e) >>> 0
        },
        unpackPixel: function(a, b, d, e) {
            return ("undefined" == typeof b || null === b) && (b = c.Color.createColor()),
            ("undefined" == typeof d || null === d) && (d = !1),
            ("undefined" == typeof e || null === e) && (e = !1),
            c.Device.LITTLE_ENDIAN ? (b.a = (4278190080 & a) >>> 24, b.b = (16711680 & a) >>> 16, b.g = (65280 & a) >>> 8, b.r = 255 & a) : (b.r = (4278190080 & a) >>> 24, b.g = (16711680 & a) >>> 16, b.b = (65280 & a) >>> 8, b.a = 255 & a),
            b.color = a,
            b.rgba = "rgba(" + b.r + "," + b.g + "," + b.b + "," + b.a / 255 + ")",
            d && c.Color.RGBtoHSL(b.r, b.g, b.b, b),
            e && c.Color.RGBtoHSV(b.r, b.g, b.b, b),
            b
        },
        fromRGBA: function(a, b) {
            return b || (b = c.Color.createColor()),
            b.r = (4278190080 & a) >>> 24,
            b.g = (16711680 & a) >>> 16,
            b.b = (65280 & a) >>> 8,
            b.a = 255 & a,
            b.rgba = "rgba(" + b.r + "," + b.g + "," + b.b + "," + b.a + ")",
            b
        },
        toRGBA: function(a, b, c, d) {
            return a << 24 | b << 16 | c << 8 | d
        },
        RGBtoHSL: function(a, b, d, e) {
            e || (e = c.Color.createColor(a, b, d, 1)),
            a /= 255,
            b /= 255,
            d /= 255;
            var f = Math.min(a, b, d),
            g = Math.max(a, b, d);
            if (e.h = 0, e.s = 0, e.l = (g + f) / 2, g !== f) {
                var h = g - f;
                e.s = e.l > .5 ? h / (2 - g - f) : h / (g + f),
                g === a ? e.h = (b - d) / h + (d > b ? 6 : 0) : g === b ? e.h = (d - a) / h + 2 : g === d && (e.h = (a - b) / h + 4),
                e.h /= 6
            }
            return e
        },
        HSLtoRGB: function(a, b, d, e) {
            if (e ? (e.r = d, e.g = d, e.b = d) : e = c.Color.createColor(d, d, d), 0 !== b) {
                var f = .5 > d ? d * (1 + b) : d + b - d * b,
                g = 2 * d - f;
                e.r = c.Color.hueToColor(g, f, a + 1 / 3),
                e.g = c.Color.hueToColor(g, f, a),
                e.b = c.Color.hueToColor(g, f, a - 1 / 3)
            }
            return e.r = Math.floor(255 * e.r | 0),
            e.g = Math.floor(255 * e.g | 0),
            e.b = Math.floor(255 * e.b | 0),
            c.Color.updateColor(e),
            e
        },
        RGBtoHSV: function(a, b, d, e) {
            e || (e = c.Color.createColor(a, b, d, 255)),
            a /= 255,
            b /= 255,
            d /= 255;
            var f = Math.min(a, b, d),
            g = Math.max(a, b, d),
            h = g - f;
            return e.h = 0,
            e.s = 0 === g ? 0 : h / g,
            e.v = g,
            g !== f && (g === a ? e.h = (b - d) / h + (d > b ? 6 : 0) : g === b ? e.h = (d - a) / h + 2 : g === d && (e.h = (a - b) / h + 4), e.h /= 6),
            e
        },
        HSVtoRGB: function(a, b, d, e) {
            "undefined" == typeof e && (e = c.Color.createColor(0, 0, 0, 1, a, b, 0, d));
            var f, g, h, i = Math.floor(6 * a),
            j = 6 * a - i,
            k = d * (1 - b),
            l = d * (1 - j * b),
            m = d * (1 - (1 - j) * b);
            switch (i % 6) {
            case 0:
                f = d,
                g = m,
                h = k;
                break;
            case 1:
                f = l,
                g = d,
                h = k;
                break;
            case 2:
                f = k,
                g = d,
                h = m;
                break;
            case 3:
                f = k,
                g = l,
                h = d;
                break;
            case 4:
                f = m,
                g = k,
                h = d;
                break;
            case 5:
                f = d,
                g = k,
                h = l
            }
            return e.r = Math.floor(255 * f),
            e.g = Math.floor(255 * g),
            e.b = Math.floor(255 * h),
            c.Color.updateColor(e),
            e
        },
        hueToColor: function(a, b, c) {
            return 0 > c && (c += 1),
            c > 1 && (c -= 1),
            1 / 6 > c ? a + 6 * (b - a) * c: .5 > c ? b: 2 / 3 > c ? a + (b - a) * (2 / 3 - c) * 6 : a
        },
        createColor: function(a, b, d, e, f, g, h, i) {
            var j = {
                r: a || 0,
                g: b || 0,
                b: d || 0,
                a: e || 1,
                h: f || 0,
                s: g || 0,
                l: h || 0,
                v: i || 0,
                color: 0,
                color32: 0,
                rgba: ""
            };
            return j.color = c.Color.getColor(j.r, j.g, j.b),
            j.color32 = c.Color.getColor32(j.a, j.r, j.g, j.b),
            c.Color.updateColor(j)
        },
        updateColor: function(a) {
            return a.rgba = "rgba(" + a.r.toString() + "," + a.g.toString() + "," + a.b.toString() + "," + a.a.toString() + ")",
            a
        },
        getColor32: function(a, b, c, d) {
            return a << 24 | b << 16 | c << 8 | d
        },
        getColor: function(a, b, c) {
            return a << 16 | b << 8 | c
        },
        RGBtoString: function(a, b, d, e, f) {
            return "undefined" == typeof e && (e = 255),
            "undefined" == typeof f && (f = "#"),
            "#" === f ? "#" + ((1 << 24) + (a << 16) + (b << 8) + d).toString(16).slice(1) : "0x" + c.Color.componentToHex(e) + c.Color.componentToHex(a) + c.Color.componentToHex(b) + c.Color.componentToHex(d)
        },
        hexToRGB: function(a) {
            var b = c.Color.hexToColor(a);
            return b ? c.Color.getColor32(b.a, b.r, b.g, b.b) : void 0
        },
        hexToColor: function(a, b) {
            a = a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,
            function(a, b, c, d) {
                return b + b + c + c + d + d
            });
            var d = /^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
            if (d) {
                var e = parseInt(d[1], 16),
                f = parseInt(d[2], 16),
                g = parseInt(d[3], 16);
                b ? (b.r = e, b.g = f, b.b = g) : b = c.Color.createColor(e, f, g)
            }
            return b
        },
        webToColor: function(a, b) {
            b || (b = c.Color.createColor());
            var d = /^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a);
            return d && (b.r = parseInt(d[1], 10), b.g = parseInt(d[2], 10), b.b = parseInt(d[3], 10), b.a = void 0 !== d[4] ? parseFloat(d[4]) : 1),
            b
        },
        valueToColor: function(a, b) {
            if (b || (b = c.Color.createColor()), "string" == typeof a) return 0 === a.indexOf("rgb") ? c.Color.webToColor(a, b) : (b.a = 1, c.Color.hexToColor(a, b));
            if ("number" == typeof a) {
                var d = c.Color.getRGB(a);
                return b.r = d.r,
                b.g = d.g,
                b.b = d.b,
                b.a = d.a / 255,
                b
            }
            return b
        },
        componentToHex: function(a) {
            var b = a.toString(16);
            return 1 == b.length ? "0" + b: b
        },
        HSVColorWheel: function(a, b) {
            "undefined" == typeof a && (a = 1),
            "undefined" == typeof b && (b = 1);
            for (var d = [], e = 0; 359 >= e; e++) d.push(c.Color.HSVtoRGB(e / 359, a, b));
            return d
        },
        HSLColorWheel: function(a, b) {
            "undefined" == typeof a && (a = .5),
            "undefined" == typeof b && (b = .5);
            for (var d = [], e = 0; 359 >= e; e++) d.push(c.Color.HSLtoRGB(e / 359, a, b));
            return d
        },
        interpolateColor: function(a, b, d, e, f) {
            "undefined" == typeof f && (f = 255);
            var g = c.Color.getRGB(a),
            h = c.Color.getRGB(b),
            i = (h.red - g.red) * e / d + g.red,
            j = (h.green - g.green) * e / d + g.green,
            k = (h.blue - g.blue) * e / d + g.blue;
            return c.Color.getColor32(f, i, j, k)
        },
        interpolateColorWithRGB: function(a, b, d, e, f, g) {
            var h = c.Color.getRGB(a),
            i = (b - h.red) * g / f + h.red,
            j = (d - h.green) * g / f + h.green,
            k = (e - h.blue) * g / f + h.blue;
            return c.Color.getColor(i, j, k)
        },
        interpolateRGB: function(a, b, d, e, f, g, h, i) {
            var j = (e - a) * i / h + a,
            k = (f - b) * i / h + b,
            l = (g - d) * i / h + d;
            return c.Color.getColor(j, k, l)
        },
        getRandomColor: function(a, b, d) {
            if ("undefined" == typeof a && (a = 0), "undefined" == typeof b && (b = 255), "undefined" == typeof d && (d = 255), b > 255 || a > b) return c.Color.getColor(255, 255, 255);
            var e = a + Math.round(Math.random() * (b - a)),
            f = a + Math.round(Math.random() * (b - a)),
            g = a + Math.round(Math.random() * (b - a));
            return c.Color.getColor32(d, e, f, g)
        },
        getRGB: function(a) {
            return a > 16777215 ? {
                alpha: a >>> 24,
                red: a >> 16 & 255,
                green: a >> 8 & 255,
                blue: 255 & a,
                a: a >>> 24,
                r: a >> 16 & 255,
                g: a >> 8 & 255,
                b: 255 & a
            }: {
                alpha: 255,
                red: a >> 16 & 255,
                green: a >> 8 & 255,
                blue: 255 & a,
                a: 255,
                r: a >> 16 & 255,
                g: a >> 8 & 255,
                b: 255 & a
            }
        },
        getWebRGB: function(a) {
            if ("object" == typeof a) return "rgba(" + a.r.toString() + "," + a.g.toString() + "," + a.b.toString() + "," + (a.a / 255).toString() + ")";
            var b = c.Color.getRGB(a);
            return "rgba(" + b.r.toString() + "," + b.g.toString() + "," + b.b.toString() + "," + (b.a / 255).toString() + ")"
        },
        getAlpha: function(a) {
            return a >>> 24
        },
        getAlphaFloat: function(a) {
            return (a >>> 24) / 255
        },
        getRed: function(a) {
            return a >> 16 & 255
        },
        getGreen: function(a) {
            return a >> 8 & 255
        },
        getBlue: function(a) {
            return 255 & a
        }
    },
    c.LinkedList = function() {
        this.next = null,
        this.prev = null,
        this.first = null,
        this.last = null,
        this.total = 0
    },
    c.LinkedList.prototype = {
        add: function(a) {
            return 0 === this.total && null === this.first && null === this.last ? (this.first = a, this.last = a, this.next = a, a.prev = this, this.total++, a) : (this.last.next = a, a.prev = this.last, this.last = a, this.total++, a)
        },
        reset: function() {
            this.first = null,
            this.last = null,
            this.next = null,
            this.prev = null,
            this.total = 0
        },
        remove: function(a) {
            return 1 === this.total ? (this.reset(), void(a.next = a.prev = null)) : (a === this.first ? this.first = this.first.next: a === this.last && (this.last = this.last.prev), a.prev && (a.prev.next = a.next), a.next && (a.next.prev = a.prev), a.next = a.prev = null, null === this.first && (this.last = null), void this.total--)
        },
        callAll: function(a) {
            if (this.first && this.last) {
                var b = this.first;
                do b && b[a] && b[a].call(b),
                b = b.next;
                while (b != this.last.next)
            }
        }
    },
    c.LinkedList.prototype.constructor = c.LinkedList,
    c.Physics = function(a, b) {
        b = b || {},
        this.game = a,
        this.config = b,
        this.arcade = null,
        this.p2 = null,
        this.ninja = null,
        this.box2d = null,
        this.chipmunk = null,
        this.parseConfig()
    },
    c.Physics.ARCADE = 0,
    c.Physics.P2JS = 1,
    c.Physics.NINJA = 2,
    c.Physics.BOX2D = 3,
    c.Physics.CHIPMUNK = 4,
    c.Physics.prototype = {
        parseConfig: function() {
            this.config.hasOwnProperty("arcade") && this.config.arcade !== !0 || !c.Physics.hasOwnProperty("Arcade") || (this.arcade = new c.Physics.Arcade(this.game), this.game.time.deltaCap = .2),
            this.config.hasOwnProperty("ninja") && this.config.ninja === !0 && c.Physics.hasOwnProperty("Ninja") && (this.ninja = new c.Physics.Ninja(this.game)),
            this.config.hasOwnProperty("p2") && this.config.p2 === !0 && c.Physics.hasOwnProperty("P2") && (this.p2 = new c.Physics.P2(this.game, this.config)),
            this.config.hasOwnProperty("box2d") && this.config.box2d === !0 && c.Physics.hasOwnProperty("BOX2D") && (this.box2d = new c.Physics.BOX2D(this.game, this.config))
        },
        startSystem: function(a) {
            a === c.Physics.ARCADE ? this.arcade = new c.Physics.Arcade(this.game) : a === c.Physics.P2JS ? null === this.p2 ? this.p2 = new c.Physics.P2(this.game, this.config) : this.p2.reset() : a === c.Physics.NINJA ? this.ninja = new c.Physics.Ninja(this.game) : a === c.Physics.BOX2D && (null === this.box2d ? this.box2d = new c.Physics.Box2D(this.game, this.config) : this.box2d.reset())
        },
        enable: function(a, b, d) {
            "undefined" == typeof b && (b = c.Physics.ARCADE),
            "undefined" == typeof d && (d = !1),
            b === c.Physics.ARCADE ? this.arcade.enable(a) : b === c.Physics.P2JS && this.p2 ? this.p2.enable(a, d) : b === c.Physics.NINJA && this.ninja ? this.ninja.enableAABB(a) : b === c.Physics.BOX2D && this.box2d && this.box2d.enable(a)
        },
        preUpdate: function() {
            this.p2 && this.p2.preUpdate(),
            this.box2d && this.box2d.preUpdate()
        },
        update: function() {
            this.p2 && this.p2.update(),
            this.box2d && this.box2d.update()
        },
        setBoundsToWorld: function() {
            this.arcade && this.arcade.setBoundsToWorld(),
            this.ninja && this.ninja.setBoundsToWorld(),
            this.p2 && this.p2.setBoundsToWorld(),
            this.box2d && this.box2d.setBoundsToWorld()
        },
        clear: function() {
            this.p2 && this.p2.clear(),
            this.box2d && this.box2d.clear()
        },
        reset: function() {
            this.p2 && this.p2.reset(),
            this.box2d && this.box2d.reset()
        },
        destroy: function() {
            this.p2 && this.p2.destroy(),
            this.box2d && this.box2d.destroy(),
            this.arcade = null,
            this.ninja = null,
            this.p2 = null,
            this.box2d = null
        }
    },
    c.Physics.prototype.constructor = c.Physics,
    c.Physics.Arcade = function(a) {
        this.game = a,
        this.gravity = new c.Point,
        this.bounds = new c.Rectangle(0, 0, a.world.width, a.world.height),
        this.checkCollision = {
            up: !0,
            down: !0,
            left: !0,
            right: !0
        },
        this.maxObjects = 10,
        this.maxLevels = 4,
        this.OVERLAP_BIAS = 4,
        this.forceX = !1,
        this.sortDirection = c.Physics.Arcade.LEFT_RIGHT,
        this.skipQuadTree = !0,
        this.isPaused = !1,
        this.quadTree = new c.QuadTree(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels),
        this._total = 0,
        this.setBoundsToWorld()
    },
    c.Physics.Arcade.prototype.constructor = c.Physics.Arcade,
    c.Physics.Arcade.SORT_NONE = 0,
    c.Physics.Arcade.LEFT_RIGHT = 1,
    c.Physics.Arcade.RIGHT_LEFT = 2,
    c.Physics.Arcade.TOP_BOTTOM = 3,
    c.Physics.Arcade.BOTTOM_TOP = 4,
    c.Physics.Arcade.prototype = {
        setBounds: function(a, b, c, d) {
            this.bounds.setTo(a, b, c, d)
        },
        setBoundsToWorld: function() {
            this.bounds.setTo(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height)
        },
        enable: function(a, b) {
            "undefined" == typeof b && (b = !0);
            var d = 1;
            if (Array.isArray(a)) for (d = a.length; d--;) a[d] instanceof c.Group ? this.enable(a[d].children, b) : (this.enableBody(a[d]), b && a[d].hasOwnProperty("children") && a[d].children.length > 0 && this.enable(a[d], !0));
            else a instanceof c.Group ? this.enable(a.children, b) : (this.enableBody(a), b && a.hasOwnProperty("children") && a.children.length > 0 && this.enable(a.children, !0))
        },
        enableBody: function(a) {
            a.hasOwnProperty("body") && null === a.body && (a.body = new c.Physics.Arcade.Body(a))
        },
        updateMotion: function(a) {
            var b = this.computeVelocity(0, a, a.angularVelocity, a.angularAcceleration, a.angularDrag, a.maxAngular) - a.angularVelocity;
            a.angularVelocity += b,
            a.rotation += a.angularVelocity * this.game.time.physicsElapsed,
            a.velocity.x = this.computeVelocity(1, a, a.velocity.x, a.acceleration.x, a.drag.x, a.maxVelocity.x),
            a.velocity.y = this.computeVelocity(2, a, a.velocity.y, a.acceleration.y, a.drag.y, a.maxVelocity.y)
        },
        computeVelocity: function(a, b, c, d, e, f) {
            return "undefined" == typeof f && (f = 1e4),
            1 === a && b.allowGravity ? c += (this.gravity.x + b.gravity.x) * this.game.time.physicsElapsed: 2 === a && b.allowGravity && (c += (this.gravity.y + b.gravity.y) * this.game.time.physicsElapsed),
            d ? c += d * this.game.time.physicsElapsed: e && (e *= this.game.time.physicsElapsed, c - e > 0 ? c -= e: 0 > c + e ? c += e: c = 0),
            c > f ? c = f: -f > c && (c = -f),
            c
        },
        overlap: function(a, b, c, d, e) {
            if (c = c || null, d = d || null, e = e || c, this._total = 0, !Array.isArray(a) && Array.isArray(b)) for (var f = 0; f < b.length; f++) this.collideHandler(a, b[f], c, d, e, !0);
            else if (Array.isArray(a) && !Array.isArray(b)) for (var f = 0; f < a.length; f++) this.collideHandler(a[f], b, c, d, e, !0);
            else if (Array.isArray(a) && Array.isArray(b)) for (var f = 0; f < a.length; f++) for (var g = 0; g < b.length; g++) this.collideHandler(a[f], b[g], c, d, e, !0);
            else this.collideHandler(a, b, c, d, e, !0);
            return this._total > 0
        },
        collide: function(a, b, c, d, e) {
            if (c = c || null, d = d || null, e = e || c, this._total = 0, !Array.isArray(a) && Array.isArray(b)) for (var f = 0; f < b.length; f++) this.collideHandler(a, b[f], c, d, e, !1);
            else if (Array.isArray(a) && !Array.isArray(b)) for (var f = 0; f < a.length; f++) this.collideHandler(a[f], b, c, d, e, !1);
            else if (Array.isArray(a) && Array.isArray(b)) for (var f = 0; f < a.length; f++) for (var g = 0; g < b.length; g++) this.collideHandler(a[f], b[g], c, d, e, !1);
            else this.collideHandler(a, b, c, d, e, !1);
            return this._total > 0
        },
        sort: function(a) {
            this.sortDirection === c.Physics.Arcade.LEFT_RIGHT ? a._hash.sort(function(a, b) {
                return a.body && b.body ? a.body.x - b.body.x: -1
            }) : this.sortDirection === c.Physics.Arcade.RIGHT_LEFT ? a._hash.sort(function(a, b) {
                return a.body && b.body ? b.body.x - a.body.x: -1
            }) : this.sortDirection === c.Physics.Arcade.TOP_BOTTOM ? a._hash.sort(function(a, b) {
                return a.body && b.body ? a.body.y - b.body.y: -1
            }) : this.sortDirection === c.Physics.Arcade.BOTTOM_TOP && a._hash.sort(function(a, b) {
                return a.body && b.body ? b.body.y - a.body.y: -1
            })
        },
        collideHandler: function(a, b, d, e, f, g) {
            return "undefined" == typeof b && a.physicsType === c.GROUP ? (this.sort(a), void this.collideGroupVsSelf(a, d, e, f, g)) : void(a && b && a.exists && b.exists && (this.sortDirection !== c.Physics.Arcade.SORT_NONE && (a.physicsType === c.GROUP && this.sort(a), b.physicsType === c.GROUP && this.sort(b)), a.physicsType === c.SPRITE ? b.physicsType === c.SPRITE ? this.collideSpriteVsSprite(a, b, d, e, f, g) : b.physicsType === c.GROUP ? this.collideSpriteVsGroup(a, b, d, e, f, g) : b.physicsType === c.TILEMAPLAYER && this.collideSpriteVsTilemapLayer(a, b, d, e, f) : a.physicsType === c.GROUP ? b.physicsType === c.SPRITE ? this.collideSpriteVsGroup(b, a, d, e, f, g) : b.physicsType === c.GROUP ? this.collideGroupVsGroup(a, b, d, e, f, g) : b.physicsType === c.TILEMAPLAYER && this.collideGroupVsTilemapLayer(a, b, d, e, f, g) : a.physicsType === c.TILEMAPLAYER && (b.physicsType === c.SPRITE ? this.collideSpriteVsTilemapLayer(b, a, d, e, f, g) : b.physicsType === c.GROUP && this.collideGroupVsTilemapLayer(b, a, d, e, f, g))))
        },
        collideSpriteVsSprite: function(a, b, c, d, e, f) {
            return a.body && b.body ? (this.separate(a.body, b.body, d, e, f) && (c && c.call(e, a, b), this._total++), !0) : !1
        },
        collideSpriteVsGroup: function(a, b, d, e, f, g) {
            if (0 !== b.length && a.body) if (this.skipQuadTree || a.body.skipQuadTree) {
                for (var h = 0; h < b._hash.length; h++) if (b._hash[h] && b._hash[h].exists && b._hash[h].body) {
                    if (this.sortDirection === c.Physics.Arcade.LEFT_RIGHT) {
                        if (a.body.right < b._hash[h].body.x) break;
                        if (b._hash[h].body.right < a.body.x) continue
                    } else if (this.sortDirection === c.Physics.Arcade.RIGHT_LEFT) {
                        if (a.body.x > b._hash[h].body.right) break;
                        if (b._hash[h].body.x > a.body.right) continue
                    } else if (this.sortDirection === c.Physics.Arcade.TOP_BOTTOM) {
                        if (a.body.bottom < b._hash[h].body.y) break;
                        if (b._hash[h].body.bottom < a.body.y) continue
                    } else if (this.sortDirection === c.Physics.Arcade.BOTTOM_TOP) {
                        if (a.body.y > b._hash[h].body.bottom) break;
                        if (b._hash[h].body.y > a.body.bottom) continue
                    }
                    this.collideSpriteVsSprite(a, b._hash[h], d, e, f, g)
                }
            } else {
                this.quadTree.clear(),
                this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels),
                this.quadTree.populate(b);
                for (var i = this.quadTree.retrieve(a), h = 0; h < i.length; h++) this.separate(a.body, i[h], e, f, g) && (d && d.call(f, a, i[h].sprite), this._total++)
            }
        },
        collideGroupVsSelf: function(a, b, d, e, f) {
            if (0 !== a.length) for (var g = 0; g < a._hash.length; g++) if (a._hash[g] && a._hash[g].exists && a._hash[g].body) for (var h = a._hash[g], i = g + 1; i < a._hash.length; i++) if (a._hash[i] && a._hash[i].exists && a._hash[i].body) {
                var j = a._hash[i];
                if (this.sortDirection === c.Physics.Arcade.LEFT_RIGHT) {
                    if (h.body.right < j.body.x) break;
                    if (j.body.right < h.body.x) continue
                } else if (this.sortDirection === c.Physics.Arcade.RIGHT_LEFT) {
                    if (h.body.x > j.body.right) continue;
                    if (j.body.x > h.body.right) break
                } else if (this.sortDirection === c.Physics.Arcade.TOP_BOTTOM) {
                    if (h.body.bottom < j.body.y) continue;
                    if (j.body.bottom < h.body.y) break
                } else if (this.sortDirection === c.Physics.Arcade.BOTTOM_TOP) {
                    if (h.body.y > j.body.bottom) continue;
                    if (j.body.y > h.body.bottom) break
                }
                this.collideSpriteVsSprite(h, j, b, d, e, f)
            }
        },
        collideGroupVsGroup: function(a, b, d, e, f, g) {
            if (0 !== a.length && 0 !== b.length) for (var h = 0; h < a.children.length; h++) a.children[h].exists && (a.children[h].physicsType === c.GROUP ? this.collideGroupVsGroup(a.children[h], b, d, e, f, g) : this.collideSpriteVsGroup(a.children[h], b, d, e, f, g))
        },
        separate: function(a, b, c, d, e) {
            if (!a.enable || !b.enable || !this.intersects(a, b)) return ! 1;
            if (c && c.call(d, a.sprite, b.sprite) === !1) return ! 1;
            var f = !1;
            return f = this.forceX || Math.abs(this.gravity.y + a.gravity.y) < Math.abs(this.gravity.x + a.gravity.x) ? this.separateX(a, b, e) || this.separateY(a, b, e) : this.separateY(a, b, e) || this.separateX(a, b, e),
            e ? !0 : f
        },
        intersects: function(a, b) {
            return a.right <= b.position.x ? !1 : a.bottom <= b.position.y ? !1 : a.position.x >= b.right ? !1 : a.position.y >= b.bottom ? !1 : !0
        },
        separateX: function(a, b, c) {
            if (a.immovable && b.immovable) return ! 1;
            var d = 0;
            if (this.intersects(a, b)) {
                var e = a.deltaAbsX() + b.deltaAbsX() + this.OVERLAP_BIAS;
                if (0 === a.deltaX() && 0 === b.deltaX() ? (a.embedded = !0, b.embedded = !0) : a.deltaX() > b.deltaX() ? (d = a.right - b.x, d > e || a.checkCollision.right === !1 || b.checkCollision.left === !1 ? d = 0 : (a.touching.none = !1, a.touching.right = !0, b.touching.none = !1, b.touching.left = !0)) : a.deltaX() < b.deltaX() && (d = a.x - b.width - b.x, -d > e || a.checkCollision.left === !1 || b.checkCollision.right === !1 ? d = 0 : (a.touching.none = !1, a.touching.left = !0, b.touching.none = !1, b.touching.right = !0)), a.overlapX = d, b.overlapX = d, 0 !== d) {
                    if (c || a.customSeparateX || b.customSeparateX) return ! 0;
                    var f = a.velocity.x,
                    g = b.velocity.x;
                    if (a.immovable || b.immovable) a.immovable ? b.immovable || (b.x += d, b.velocity.x = f - g * b.bounce.x, a.moves && (b.y += (a.y - a.prev.y) * a.friction.y)) : (a.x = a.x - d, a.velocity.x = g - f * a.bounce.x, b.moves && (a.y += (b.y - b.prev.y) * b.friction.y));
                    else {
                        d *= .5,
                        a.x = a.x - d,
                        b.x += d;
                        var h = Math.sqrt(g * g * b.mass / a.mass) * (g > 0 ? 1 : -1),
                        i = Math.sqrt(f * f * a.mass / b.mass) * (f > 0 ? 1 : -1),
                        j = .5 * (h + i);
                        h -= j,
                        i -= j,
                        a.velocity.x = j + h * a.bounce.x,
                        b.velocity.x = j + i * b.bounce.x
                    }
                    return ! 0
                }
            }
            return ! 1
        },
        separateY: function(a, b, c) {
            if (a.immovable && b.immovable) return ! 1;
            var d = 0;
            if (this.intersects(a, b)) {
                var e = a.deltaAbsY() + b.deltaAbsY() + this.OVERLAP_BIAS;
                if (0 === a.deltaY() && 0 === b.deltaY() ? (a.embedded = !0, b.embedded = !0) : a.deltaY() > b.deltaY() ? (d = a.bottom - b.y, d > e || a.checkCollision.down === !1 || b.checkCollision.up === !1 ? d = 0 : (a.touching.none = !1, a.touching.down = !0, b.touching.none = !1, b.touching.up = !0)) : a.deltaY() < b.deltaY() && (d = a.y - b.bottom, -d > e || a.checkCollision.up === !1 || b.checkCollision.down === !1 ? d = 0 : (a.touching.none = !1, a.touching.up = !0, b.touching.none = !1, b.touching.down = !0)), a.overlapY = d, b.overlapY = d, 0 !== d) {
                    if (c || a.customSeparateY || b.customSeparateY) return ! 0;
                    var f = a.velocity.y,
                    g = b.velocity.y;
                    if (a.immovable || b.immovable) a.immovable ? b.immovable || (b.y += d, b.velocity.y = f - g * b.bounce.y, a.moves && (b.x += (a.x - a.prev.x) * a.friction.x)) : (a.y = a.y - d, a.velocity.y = g - f * a.bounce.y, b.moves && (a.x += (b.x - b.prev.x) * b.friction.x));
                    else {
                        d *= .5,
                        a.y = a.y - d,
                        b.y += d;
                        var h = Math.sqrt(g * g * b.mass / a.mass) * (g > 0 ? 1 : -1),
                        i = Math.sqrt(f * f * a.mass / b.mass) * (f > 0 ? 1 : -1),
                        j = .5 * (h + i);
                        h -= j,
                        i -= j,
                        a.velocity.y = j + h * a.bounce.y,
                        b.velocity.y = j + i * b.bounce.y
                    }
                    return ! 0
                }
            }
            return ! 1
        },
        getObjectsUnderPointer: function(a, b, c, d) {
            return 0 !== b.length && a.exists ? this.getObjectsAtLocation(a.x, a.y, b, c, d, a) : void 0
        },
        getObjectsAtLocation: function(a, b, d, e, f, g) {
            this.quadTree.clear(),
            this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels),
            this.quadTree.populate(d);
            for (var h = new c.Rectangle(a, b, 1, 1), i = [], j = this.quadTree.retrieve(h), k = 0; k < j.length; k++) j[k].hitTest(a, b) && (e && e.call(f, g, j[k].sprite), i.push(j[k].sprite));
            return i
        },
        moveToObject: function(a, b, c, d) {
            "undefined" == typeof c && (c = 60),
            "undefined" == typeof d && (d = 0);
            var e = Math.atan2(b.y - a.y, b.x - a.x);
            return d > 0 && (c = this.distanceBetween(a, b) / (d / 1e3)),
            a.body.velocity.x = Math.cos(e) * c,
            a.body.velocity.y = Math.sin(e) * c,
            e
        },
        moveToPointer: function(a, b, c, d) {
            "undefined" == typeof b && (b = 60),
            c = c || this.game.input.activePointer,
            "undefined" == typeof d && (d = 0);
            var e = this.angleToPointer(a, c);
            return d > 0 && (b = this.distanceToPointer(a, c) / (d / 1e3)),
            a.body.velocity.x = Math.cos(e) * b,
            a.body.velocity.y = Math.sin(e) * b,
            e
        },
        moveToXY: function(a, b, c, d, e) {
            "undefined" == typeof d && (d = 60),
            "undefined" == typeof e && (e = 0);
            var f = Math.atan2(c - a.y, b - a.x);
            return e > 0 && (d = this.distanceToXY(a, b, c) / (e / 1e3)),
            a.body.velocity.x = Math.cos(f) * d,
            a.body.velocity.y = Math.sin(f) * d,
            f
        },
        velocityFromAngle: function(a, b, d) {
            return "undefined" == typeof b && (b = 60),
            d = d || new c.Point,
            d.setTo(Math.cos(this.game.math.degToRad(a)) * b, Math.sin(this.game.math.degToRad(a)) * b)
        },
        velocityFromRotation: function(a, b, d) {
            return "undefined" == typeof b && (b = 60),
            d = d || new c.Point,
            d.setTo(Math.cos(a) * b, Math.sin(a) * b)
        },
        accelerationFromRotation: function(a, b, d) {
            return "undefined" == typeof b && (b = 60),
            d = d || new c.Point,
            d.setTo(Math.cos(a) * b, Math.sin(a) * b)
        },
        accelerateToObject: function(a, b, c, d, e) {
            "undefined" == typeof c && (c = 60),
            "undefined" == typeof d && (d = 1e3),
            "undefined" == typeof e && (e = 1e3);
            var f = this.angleBetween(a, b);
            return a.body.acceleration.setTo(Math.cos(f) * c, Math.sin(f) * c),
            a.body.maxVelocity.setTo(d, e),
            f
        },
        accelerateToPointer: function(a, b, c, d, e) {
            "undefined" == typeof c && (c = 60),
            "undefined" == typeof b && (b = this.game.input.activePointer),
            "undefined" == typeof d && (d = 1e3),
            "undefined" == typeof e && (e = 1e3);
            var f = this.angleToPointer(a, b);
            return a.body.acceleration.setTo(Math.cos(f) * c, Math.sin(f) * c),
            a.body.maxVelocity.setTo(d, e),
            f
        },
        accelerateToXY: function(a, b, c, d, e, f) {
            "undefined" == typeof d && (d = 60),
            "undefined" == typeof e && (e = 1e3),
            "undefined" == typeof f && (f = 1e3);
            var g = this.angleToXY(a, b, c);
            return a.body.acceleration.setTo(Math.cos(g) * d, Math.sin(g) * d),
            a.body.maxVelocity.setTo(e, f),
            g
        },
        distanceBetween: function(a, b) {
            var c = a.x - b.x,
            d = a.y - b.y;
            return Math.sqrt(c * c + d * d)
        },
        distanceToXY: function(a, b, c) {
            var d = a.x - b,
            e = a.y - c;
            return Math.sqrt(d * d + e * e)
        },
        distanceToPointer: function(a, b) {
            b = b || this.game.input.activePointer;
            var c = a.x - b.worldX,
            d = a.y - b.worldY;
            return Math.sqrt(c * c + d * d)
        },
        angleBetween: function(a, b) {
            var c = b.x - a.x,
            d = b.y - a.y;
            return Math.atan2(d, c)
        },
        angleToXY: function(a, b, c) {
            var d = b - a.x,
            e = c - a.y;
            return Math.atan2(e, d)
        },
        angleToPointer: function(a, b) {
            b = b || this.game.input.activePointer;
            var c = b.worldX - a.x,
            d = b.worldY - a.y;
            return Math.atan2(d, c)
        }
    },
    c.Physics.Arcade.Body = function(a) {
        this.sprite = a,
        this.game = a.game,
        this.type = c.Physics.ARCADE,
        this.enable = !0,
        this.offset = new c.Point,
        this.position = new c.Point(a.x, a.y),
        this.prev = new c.Point(this.position.x, this.position.y),
        this.allowRotation = !0,
        this.rotation = a.rotation,
        this.preRotation = a.rotation,
        this.width = a.width,
        this.height = a.height,
        this.sourceWidth = a.width,
        this.sourceHeight = a.height,
        a.texture && (this.sourceWidth = a.texture.frame.width, this.sourceHeight = a.texture.frame.height),
        this.halfWidth = Math.abs(a.width / 2),
        this.halfHeight = Math.abs(a.height / 2),
        this.center = new c.Point(a.x + this.halfWidth, a.y + this.halfHeight),
        this.velocity = new c.Point,
        this.newVelocity = new c.Point(0, 0),
        this.deltaMax = new c.Point(0, 0),
        this.acceleration = new c.Point,
        this.drag = new c.Point,
        this.allowGravity = !0,
        this.gravity = new c.Point(0, 0),
        this.bounce = new c.Point,
        this.maxVelocity = new c.Point(1e4, 1e4),
        this.friction = new c.Point(1, 0),
        this.angularVelocity = 0,
        this.angularAcceleration = 0,
        this.angularDrag = 0,
        this.maxAngular = 1e3,
        this.mass = 1,
        this.angle = 0,
        this.speed = 0,
        this.facing = c.NONE,
        this.immovable = !1,
        this.moves = !0,
        this.customSeparateX = !1,
        this.customSeparateY = !1,
        this.overlapX = 0,
        this.overlapY = 0,
        this.embedded = !1,
        this.collideWorldBounds = !1,
        this.checkCollision = {
            none: !1,
            any: !0,
            up: !0,
            down: !0,
            left: !0,
            right: !0
        },
        this.touching = {
            none: !0,
            up: !1,
            down: !1,
            left: !1,
            right: !1
        },
        this.wasTouching = {
            none: !0,
            up: !1,
            down: !1,
            left: !1,
            right: !1
        },
        this.blocked = {
            up: !1,
            down: !1,
            left: !1,
            right: !1
        },
        this.tilePadding = new c.Point,
        this.dirty = !1,
        this.skipQuadTree = !1,
        this._reset = !0,
        this._sx = a.scale.x,
        this._sy = a.scale.y,
        this._dx = 0,
        this._dy = 0
    },
    c.Physics.Arcade.Body.prototype = {
        updateBounds: function() {
            var a = Math.abs(this.sprite.scale.x),
            b = Math.abs(this.sprite.scale.y); (a !== this._sx || b !== this._sy) && (this.width = this.sourceWidth * a, this.height = this.sourceHeight * b, this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this._sx = a, this._sy = b, this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight), this._reset = !0)
        },
        preUpdate: function() {
            this.enable && !this.game.physics.arcade.isPaused && (this.dirty = !0, this.wasTouching.none = this.touching.none, this.wasTouching.up = this.touching.up, this.wasTouching.down = this.touching.down, this.wasTouching.left = this.touching.left, this.wasTouching.right = this.touching.right, this.touching.none = !0, this.touching.up = !1, this.touching.down = !1, this.touching.left = !1, this.touching.right = !1, this.blocked.up = !1, this.blocked.down = !1, this.blocked.left = !1, this.blocked.right = !1, this.embedded = !1, this.updateBounds(), this.position.x = this.sprite.world.x - this.sprite.anchor.x * this.width + this.offset.x, this.position.y = this.sprite.world.y - this.sprite.anchor.y * this.height + this.offset.y, this.rotation = this.sprite.angle, this.preRotation = this.rotation, (this._reset || this.sprite.fresh) && (this.prev.x = this.position.x, this.prev.y = this.position.y), this.moves && (this.game.physics.arcade.updateMotion(this), this.newVelocity.set(this.velocity.x * this.game.time.physicsElapsed, this.velocity.y * this.game.time.physicsElapsed), this.position.x += this.newVelocity.x, this.position.y += this.newVelocity.y, (this.position.x !== this.prev.x || this.position.y !== this.prev.y) && (this.speed = Math.sqrt(this.velocity.x * this.velocity.x + this.velocity.y * this.velocity.y), this.angle = Math.atan2(this.velocity.y, this.velocity.x)), this.collideWorldBounds && this.checkWorldBounds()), this._dx = this.deltaX(), this._dy = this.deltaY(), this._reset = !1)
        },
        postUpdate: function() {
            this.enable && this.dirty && (this.dirty = !1, this.deltaX() < 0 ? this.facing = c.LEFT: this.deltaX() > 0 && (this.facing = c.RIGHT), this.deltaY() < 0 ? this.facing = c.UP: this.deltaY() > 0 && (this.facing = c.DOWN), this.moves && (this._dx = this.deltaX(), this._dy = this.deltaY(), 0 !== this.deltaMax.x && 0 !== this._dx && (this._dx < 0 && this._dx < -this.deltaMax.x ? this._dx = -this.deltaMax.x: this._dx > 0 && this._dx > this.deltaMax.x && (this._dx = this.deltaMax.x)), 0 !== this.deltaMax.y && 0 !== this._dy && (this._dy < 0 && this._dy < -this.deltaMax.y ? this._dy = -this.deltaMax.y: this._dy > 0 && this._dy > this.deltaMax.y && (this._dy = this.deltaMax.y)), this.sprite.position.x += this._dx, this.sprite.position.y += this._dy, this._reset = !0), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight), this.allowRotation && (this.sprite.angle += this.deltaZ()), this.prev.x = this.position.x, this.prev.y = this.position.y)
        },
        destroy: function() {
            this.sprite.body = null,
            this.sprite = null
        },
        checkWorldBounds: function() {
            this.position.x < this.game.physics.arcade.bounds.x && this.game.physics.arcade.checkCollision.left ? (this.position.x = this.game.physics.arcade.bounds.x, this.velocity.x *= -this.bounce.x, this.blocked.left = !0) : this.right > this.game.physics.arcade.bounds.right && this.game.physics.arcade.checkCollision.right && (this.position.x = this.game.physics.arcade.bounds.right - this.width, this.velocity.x *= -this.bounce.x, this.blocked.right = !0),
            this.position.y < this.game.physics.arcade.bounds.y && this.game.physics.arcade.checkCollision.up ? (this.position.y = this.game.physics.arcade.bounds.y, this.velocity.y *= -this.bounce.y, this.blocked.up = !0) : this.bottom > this.game.physics.arcade.bounds.bottom && this.game.physics.arcade.checkCollision.down && (this.position.y = this.game.physics.arcade.bounds.bottom - this.height, this.velocity.y *= -this.bounce.y, this.blocked.down = !0)
        },
        setSize: function(a, b, c, d) {
            "undefined" == typeof c && (c = this.offset.x),
            "undefined" == typeof d && (d = this.offset.y),
            this.sourceWidth = a,
            this.sourceHeight = b,
            this.width = this.sourceWidth * this._sx,
            this.height = this.sourceHeight * this._sy,
            this.halfWidth = Math.floor(this.width / 2),
            this.halfHeight = Math.floor(this.height / 2),
            this.offset.setTo(c, d),
            this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight)
        },
        reset: function(a, b) {
            this.velocity.set(0),
            this.acceleration.set(0),
            this.speed = 0,
            this.angularVelocity = 0,
            this.angularAcceleration = 0,
            this.position.x = a - this.sprite.anchor.x * this.width + this.offset.x,
            this.position.y = b - this.sprite.anchor.y * this.height + this.offset.y,
            this.prev.x = this.position.x,
            this.prev.y = this.position.y,
            this.rotation = this.sprite.angle,
            this.preRotation = this.rotation,
            this._sx = this.sprite.scale.x,
            this._sy = this.sprite.scale.y,
            this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight)
        },
        hitTest: function(a, b) {
            return c.Rectangle.contains(this, a, b)
        },
        onFloor: function() {
            return this.blocked.down
        },
        onWall: function() {
            return this.blocked.left || this.blocked.right
        },
        deltaAbsX: function() {
            return this.deltaX() > 0 ? this.deltaX() : -this.deltaX()
        },
        deltaAbsY: function() {
            return this.deltaY() > 0 ? this.deltaY() : -this.deltaY()
        },
        deltaX: function() {
            return this.position.x - this.prev.x
        },
        deltaY: function() {
            return this.position.y - this.prev.y
        },
        deltaZ: function() {
            return this.rotation - this.preRotation
        }
    },
    Object.defineProperty(c.Physics.Arcade.Body.prototype, "bottom", {
        get: function() {
            return this.position.y + this.height
        }
    }),
    Object.defineProperty(c.Physics.Arcade.Body.prototype, "right", {
        get: function() {
            return this.position.x + this.width
        }
    }),
    Object.defineProperty(c.Physics.Arcade.Body.prototype, "x", {
        get: function() {
            return this.position.x
        },
        set: function(a) {
            this.position.x = a
        }
    }),
    Object.defineProperty(c.Physics.Arcade.Body.prototype, "y", {
        get: function() {
            return this.position.y
        },
        set: function(a) {
            this.position.y = a
        }
    }),
    c.Physics.Arcade.Body.render = function(a, b, c, d) {
        "undefined" == typeof d && (d = !0),
        c = c || "rgba(0,255,0,0.4)",
        d ? (a.fillStyle = c, a.fillRect(b.position.x - b.game.camera.x, b.position.y - b.game.camera.y, b.width, b.height)) : (a.strokeStyle = c, a.strokeRect(b.position.x - b.game.camera.x, b.position.y - b.game.camera.y, b.width, b.height))
    },
    c.Physics.Arcade.Body.renderBodyInfo = function(a, b) {
        a.line("x: " + b.x.toFixed(2), "y: " + b.y.toFixed(2), "width: " + b.width, "height: " + b.height),
        a.line("velocity x: " + b.velocity.x.toFixed(2), "y: " + b.velocity.y.toFixed(2), "deltaX: " + b._dx.toFixed(2), "deltaY: " + b._dy.toFixed(2)),
        a.line("acceleration x: " + b.acceleration.x.toFixed(2), "y: " + b.acceleration.y.toFixed(2), "speed: " + b.speed.toFixed(2), "angle: " + b.angle.toFixed(2)),
        a.line("gravity x: " + b.gravity.x, "y: " + b.gravity.y, "bounce x: " + b.bounce.x.toFixed(2), "y: " + b.bounce.y.toFixed(2)),
        a.line("touching left: " + b.touching.left, "right: " + b.touching.right, "up: " + b.touching.up, "down: " + b.touching.down),
        a.line("blocked left: " + b.blocked.left, "right: " + b.blocked.right, "up: " + b.blocked.up, "down: " + b.blocked.down)
    },
    c.Physics.Arcade.Body.prototype.constructor = c.Physics.Arcade.Body,
    c.Physics.Arcade.TilemapCollision = function() {},
    c.Physics.Arcade.TilemapCollision.prototype = {
        TILE_BIAS: 16,
        collideSpriteVsTilemapLayer: function(a, b, c, d, e) {
            if (a.body) {
                var f = b.getTiles(a.body.position.x - a.body.tilePadding.x, a.body.position.y - a.body.tilePadding.y, a.body.width + a.body.tilePadding.x, a.body.height + a.body.tilePadding.y, !1, !1);
                if (0 !== f.length) for (var g = 0; g < f.length; g++) d ? d.call(e, a, f[g]) && this.separateTile(g, a.body, f[g]) && (this._total++, c && c.call(e, a, f[g])) : this.separateTile(g, a.body, f[g]) && (this._total++, c && c.call(e, a, f[g]))
            }
        },
        collideGroupVsTilemapLayer: function(a, b, c, d, e) {
            if (0 !== a.length) for (var f = 0; f < a.children.length; f++) a.children[f].exists && this.collideSpriteVsTilemapLayer(a.children[f], b, c, d, e)
        },
        separateTile: function(a, b, c) {
            if (!b.enable || !c.intersects(b.position.x, b.position.y, b.right, b.bottom)) return ! 1;
            if (c.collisionCallback && !c.collisionCallback.call(c.collisionCallbackContext, b.sprite, c)) return ! 1;
            if (c.layer.callbacks[c.index] && !c.layer.callbacks[c.index].callback.call(c.layer.callbacks[c.index].callbackContext, b.sprite, c)) return ! 1;
            if (! (c.faceLeft || c.faceRight || c.faceTop || c.faceBottom)) return ! 1;
            var d = 0,
            e = 0,
            f = 0,
            g = 1;
            if (b.deltaAbsX() > b.deltaAbsY() ? f = -1 : b.deltaAbsX() < b.deltaAbsY() && (g = -1), 0 !== b.deltaX() && 0 !== b.deltaY() && (c.faceLeft || c.faceRight) && (c.faceTop || c.faceBottom) && (f = Math.min(Math.abs(b.position.x - c.right), Math.abs(b.right - c.left)), g = Math.min(Math.abs(b.position.y - c.bottom), Math.abs(b.bottom - c.top))), g > f) {
                if ((c.faceLeft || c.faceRight) && (d = this.tileCheckX(b, c), 0 !== d && !c.intersects(b.position.x, b.position.y, b.right, b.bottom))) return ! 0; (c.faceTop || c.faceBottom) && (e = this.tileCheckY(b, c))
            } else {
                if ((c.faceTop || c.faceBottom) && (e = this.tileCheckY(b, c), 0 !== e && !c.intersects(b.position.x, b.position.y, b.right, b.bottom))) return ! 0; (c.faceLeft || c.faceRight) && (d = this.tileCheckX(b, c))
            }
            return 0 !== d || 0 !== e
        },
        tileCheckX: function(a, b) {
            var c = 0;
            return a.deltaX() < 0 && !a.blocked.left && b.collideRight && a.checkCollision.left ? b.faceRight && a.x < b.right && (c = a.x - b.right, c < -this.TILE_BIAS && (c = 0)) : a.deltaX() > 0 && !a.blocked.right && b.collideLeft && a.checkCollision.right && b.faceLeft && a.right > b.left && (c = a.right - b.left, c > this.TILE_BIAS && (c = 0)),
            0 !== c && (a.customSeparateX ? a.overlapX = c: this.processTileSeparationX(a, c)),
            c
        },
        tileCheckY: function(a, b) {
            var c = 0;
            return a.deltaY() < 0 && !a.blocked.up && b.collideDown && a.checkCollision.up ? b.faceBottom && a.y < b.bottom && (c = a.y - b.bottom, c < -this.TILE_BIAS && (c = 0)) : a.deltaY() > 0 && !a.blocked.down && b.collideUp && a.checkCollision.down && b.faceTop && a.bottom > b.top && (c = a.bottom - b.top, c > this.TILE_BIAS && (c = 0)),
            0 !== c && (a.customSeparateY ? a.overlapY = c: this.processTileSeparationY(a, c)),
            c
        },
        processTileSeparationX: function(a, b) {
            0 > b ? a.blocked.left = !0 : b > 0 && (a.blocked.right = !0),
            a.position.x -= b,
            a.velocity.x = 0 === a.bounce.x ? 0 : -a.velocity.x * a.bounce.x
        },
        processTileSeparationY: function(a, b) {
            0 > b ? a.blocked.up = !0 : b > 0 && (a.blocked.down = !0),
            a.position.y -= b,
            a.velocity.y = 0 === a.bounce.y ? 0 : -a.velocity.y * a.bounce.y
        }
    },
    c.Utils.mixinPrototype(c.Physics.Arcade.prototype, c.Physics.Arcade.TilemapCollision.prototype),
    !
    function(a) {
        "object" == typeof exports ? module.exports = a() : "function" == typeof define && define.amd ? define(a) : "undefined" != typeof window ? window.p2 = a() : "undefined" != typeof global ? global.p2 = a() : "undefined" != typeof self && (self.p2 = a())
    } (function() {
        return function a(b, c, d) {
            function e(g, h) {
                if (!c[g]) {
                    if (!b[g]) {
                        var i = "function" == typeof require && require;
                        if (!h && i) return i(g, !0);
                        if (f) return f(g, !0);
                        throw new Error("Cannot find module '" + g + "'")
                    }
                    var j = c[g] = {
                        exports: {}
                    };
                    b[g][0].call(j.exports,
                    function(a) {
                        var c = b[g][1][a];
                        return e(c ? c: a)
                    },
                    j, j.exports, a, b, c, d)
                }
                return c[g].exports
            }
            for (var f = "function" == typeof require && require,
            g = 0; g < d.length; g++) e(d[g]);
            return e
        } ({
            1 : [function(a, b) {
                function c() {}
                var d = a("./Scalar");
                b.exports = c,
                c.lineInt = function(a, b, c) {
                    c = c || 0;
                    var e, f, g, h, i, j, k, l = [0, 0];
                    return e = a[1][1] - a[0][1],
                    f = a[0][0] - a[1][0],
                    g = e * a[0][0] + f * a[0][1],
                    h = b[1][1] - b[0][1],
                    i = b[0][0] - b[1][0],
                    j = h * b[0][0] + i * b[0][1],
                    k = e * i - h * f,
                    d.eq(k, 0, c) || (l[0] = (i * g - f * j) / k, l[1] = (e * j - h * g) / k),
                    l
                },
                c.segmentsIntersect = function(a, b, c, d) {
                    var e = b[0] - a[0],
                    f = b[1] - a[1],
                    g = d[0] - c[0],
                    h = d[1] - c[1];
                    if (g * f - h * e == 0) return ! 1;
                    var i = (e * (c[1] - a[1]) + f * (a[0] - c[0])) / (g * f - h * e),
                    j = (g * (a[1] - c[1]) + h * (c[0] - a[0])) / (h * e - g * f);
                    return i >= 0 && 1 >= i && j >= 0 && 1 >= j
                }
            },
            {
                "./Scalar": 4
            }],
            2 : [function(a, b) {
                function c() {}
                b.exports = c,
                c.area = function(a, b, c) {
                    return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1])
                },
                c.left = function(a, b, d) {
                    return c.area(a, b, d) > 0
                },
                c.leftOn = function(a, b, d) {
                    return c.area(a, b, d) >= 0
                },
                c.right = function(a, b, d) {
                    return c.area(a, b, d) < 0
                },
                c.rightOn = function(a, b, d) {
                    return c.area(a, b, d) <= 0
                };
                var d = [],
                e = [];
                c.collinear = function(a, b, f, g) {
                    if (g) {
                        var h = d,
                        i = e;
                        h[0] = b[0] - a[0],
                        h[1] = b[1] - a[1],
                        i[0] = f[0] - b[0],
                        i[1] = f[1] - b[1];
                        var j = h[0] * i[0] + h[1] * i[1],
                        k = Math.sqrt(h[0] * h[0] + h[1] * h[1]),
                        l = Math.sqrt(i[0] * i[0] + i[1] * i[1]),
                        m = Math.acos(j / (k * l));
                        return g > m
                    }
                    return 0 == c.area(a, b, f)
                },
                c.sqdist = function(a, b) {
                    var c = b[0] - a[0],
                    d = b[1] - a[1];
                    return c * c + d * d
                }
            },
            {}],
            3 : [function(a, b) {
                function c() {
                    this.vertices = []
                }
                function d(a, b, c, d, e) {
                    e = e || 0;
                    var f = b[1] - a[1],
                    h = a[0] - b[0],
                    i = f * a[0] + h * a[1],
                    j = d[1] - c[1],
                    k = c[0] - d[0],
                    l = j * c[0] + k * c[1],
                    m = f * k - j * h;
                    return g.eq(m, 0, e) ? [0, 0] : [(k * i - h * l) / m, (f * l - j * i) / m]
                }
                var e = a("./Line"),
                f = a("./Point"),
                g = a("./Scalar");
                b.exports = c,
                c.prototype.at = function(a) {
                    var b = this.vertices,
                    c = b.length;
                    return b[0 > a ? a % c + c: a % c]
                },
                c.prototype.first = function() {
                    return this.vertices[0]
                },
                c.prototype.last = function() {
                    return this.vertices[this.vertices.length - 1]
                },
                c.prototype.clear = function() {
                    this.vertices.length = 0
                },
                c.prototype.append = function(a, b, c) {
                    if ("undefined" == typeof b) throw new Error("From is not given!");
                    if ("undefined" == typeof c) throw new Error("To is not given!");
                    if (b > c - 1) throw new Error("lol1");
                    if (c > a.vertices.length) throw new Error("lol2");
                    if (0 > b) throw new Error("lol3");
                    for (var d = b; c > d; d++) this.vertices.push(a.vertices[d])
                },
                c.prototype.makeCCW = function() {
                    for (var a = 0,
                    b = this.vertices,
                    c = 1; c < this.vertices.length; ++c)(b[c][1] < b[a][1] || b[c][1] == b[a][1] && b[c][0] > b[a][0]) && (a = c);
                    f.left(this.at(a - 1), this.at(a), this.at(a + 1)) || this.reverse()
                },
                c.prototype.reverse = function() {
                    for (var a = [], b = 0, c = this.vertices.length; b !== c; b++) a.push(this.vertices.pop());
                    this.vertices = a;
                },
                c.prototype.isReflex = function(a) {
                    return f.right(this.at(a - 1), this.at(a), this.at(a + 1))
                };
                var h = [],
                i = [];
                c.prototype.canSee = function(a, b) {
                    var c, d, g = h,
                    j = i;
                    if (f.leftOn(this.at(a + 1), this.at(a), this.at(b)) && f.rightOn(this.at(a - 1), this.at(a), this.at(b))) return ! 1;
                    d = f.sqdist(this.at(a), this.at(b));
                    for (var k = 0; k !== this.vertices.length; ++k) if ((k + 1) % this.vertices.length !== a && k !== a && f.leftOn(this.at(a), this.at(b), this.at(k + 1)) && f.rightOn(this.at(a), this.at(b), this.at(k)) && (g[0] = this.at(a), g[1] = this.at(b), j[0] = this.at(k), j[1] = this.at(k + 1), c = e.lineInt(g, j), f.sqdist(this.at(a), c) < d)) return ! 1;
                    return ! 0
                },
                c.prototype.copy = function(a, b, d) {
                    var e = d || new c;
                    if (e.clear(), b > a) for (var f = a; b >= f; f++) e.vertices.push(this.vertices[f]);
                    else {
                        for (var f = 0; b >= f; f++) e.vertices.push(this.vertices[f]);
                        for (var f = a; f < this.vertices.length; f++) e.vertices.push(this.vertices[f])
                    }
                    return e
                },
                c.prototype.getCutEdges = function() {
                    for (var a = [], b = [], d = [], e = new c, f = Number.MAX_VALUE, g = 0; g < this.vertices.length; ++g) if (this.isReflex(g)) for (var h = 0; h < this.vertices.length; ++h) if (this.canSee(g, h)) {
                        b = this.copy(g, h, e).getCutEdges(),
                        d = this.copy(h, g, e).getCutEdges();
                        for (var i = 0; i < d.length; i++) b.push(d[i]);
                        b.length < f && (a = b, f = b.length, a.push([this.at(g), this.at(h)]))
                    }
                    return a
                },
                c.prototype.decomp = function() {
                    var a = this.getCutEdges();
                    return a.length > 0 ? this.slice(a) : [this]
                },
                c.prototype.slice = function(a) {
                    if (0 == a.length) return [this];
                    if (a instanceof Array && a.length && a[0] instanceof Array && 2 == a[0].length && a[0][0] instanceof Array) {
                        for (var b = [this], c = 0; c < a.length; c++) for (var d = a[c], e = 0; e < b.length; e++) {
                            var f = b[e],
                            g = f.slice(d);
                            if (g) {
                                b.splice(e, 1),
                                b.push(g[0], g[1]);
                                break
                            }
                        }
                        return b
                    }
                    var d = a,
                    c = this.vertices.indexOf(d[0]),
                    e = this.vertices.indexOf(d[1]);
                    return - 1 != c && -1 != e ? [this.copy(c, e), this.copy(e, c)] : !1
                },
                c.prototype.isSimple = function() {
                    for (var a = this.vertices,
                    b = 0; b < a.length - 1; b++) for (var c = 0; b - 1 > c; c++) if (e.segmentsIntersect(a[b], a[b + 1], a[c], a[c + 1])) return ! 1;
                    for (var b = 1; b < a.length - 2; b++) if (e.segmentsIntersect(a[0], a[a.length - 1], a[b], a[b + 1])) return ! 1;
                    return ! 0
                },
                c.prototype.quickDecomp = function(a, b, e, g, h, i) {
                    h = h || 100,
                    i = i || 0,
                    g = g || 25,
                    a = "undefined" != typeof a ? a: [],
                    b = b || [],
                    e = e || [];
                    var j = [0, 0],
                    k = [0, 0],
                    l = [0, 0],
                    m = 0,
                    n = 0,
                    o = 0,
                    p = 0,
                    q = 0,
                    r = 0,
                    s = 0,
                    t = new c,
                    u = new c,
                    v = this,
                    w = this.vertices;
                    if (w.length < 3) return a;
                    if (i++, i > h) return console.warn("quickDecomp: max level (" + h + ") reached."),
                    a;
                    for (var x = 0; x < this.vertices.length; ++x) if (v.isReflex(x)) {
                        b.push(v.vertices[x]),
                        m = n = Number.MAX_VALUE;
                        for (var y = 0; y < this.vertices.length; ++y) f.left(v.at(x - 1), v.at(x), v.at(y)) && f.rightOn(v.at(x - 1), v.at(x), v.at(y - 1)) && (l = d(v.at(x - 1), v.at(x), v.at(y), v.at(y - 1)), f.right(v.at(x + 1), v.at(x), l) && (o = f.sqdist(v.vertices[x], l), n > o && (n = o, k = l, r = y))),
                        f.left(v.at(x + 1), v.at(x), v.at(y + 1)) && f.rightOn(v.at(x + 1), v.at(x), v.at(y)) && (l = d(v.at(x + 1), v.at(x), v.at(y), v.at(y + 1)), f.left(v.at(x - 1), v.at(x), l) && (o = f.sqdist(v.vertices[x], l), m > o && (m = o, j = l, q = y)));
                        if (r == (q + 1) % this.vertices.length) l[0] = (k[0] + j[0]) / 2,
                        l[1] = (k[1] + j[1]) / 2,
                        e.push(l),
                        q > x ? (t.append(v, x, q + 1), t.vertices.push(l), u.vertices.push(l), 0 != r && u.append(v, r, v.vertices.length), u.append(v, 0, x + 1)) : (0 != x && t.append(v, x, v.vertices.length), t.append(v, 0, q + 1), t.vertices.push(l), u.vertices.push(l), u.append(v, r, x + 1));
                        else {
                            if (r > q && (q += this.vertices.length), p = Number.MAX_VALUE, r > q) return a;
                            for (var y = r; q >= y; ++y) f.leftOn(v.at(x - 1), v.at(x), v.at(y)) && f.rightOn(v.at(x + 1), v.at(x), v.at(y)) && (o = f.sqdist(v.at(x), v.at(y)), p > o && (p = o, s = y % this.vertices.length));
                            s > x ? (t.append(v, x, s + 1), 0 != s && u.append(v, s, w.length), u.append(v, 0, x + 1)) : (0 != x && t.append(v, x, w.length), t.append(v, 0, s + 1), u.append(v, s, x + 1))
                        }
                        return t.vertices.length < u.vertices.length ? (t.quickDecomp(a, b, e, g, h, i), u.quickDecomp(a, b, e, g, h, i)) : (u.quickDecomp(a, b, e, g, h, i), t.quickDecomp(a, b, e, g, h, i)),
                        a
                    }
                    return a.push(this),
                    a
                },
                c.prototype.removeCollinearPoints = function(a) {
                    for (var b = 0,
                    c = this.vertices.length - 1; this.vertices.length > 3 && c >= 0; --c) f.collinear(this.at(c - 1), this.at(c), this.at(c + 1), a) && (this.vertices.splice(c % this.vertices.length, 1), c--, b++);
                    return b
                }
            },
            {
                "./Line": 1,
                "./Point": 2,
                "./Scalar": 4
            }],
            4 : [function(a, b) {
                function c() {}
                b.exports = c,
                c.eq = function(a, b, c) {
                    return c = c || 0,
                    Math.abs(a - b) < c
                }
            },
            {}],
            5 : [function(a, b) {
                b.exports = {
                    Polygon: a("./Polygon"),
                    Point: a("./Point")
                }
            },
            {
                "./Point": 2,
                "./Polygon": 3
            }],
            6 : [function(a, b) {
                b.exports = {
                    name: "p2",
                    version: "0.6.0",
                    description: "A JavaScript 2D physics engine.",
                    author: "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",
                    keywords: ["p2.js", "p2", "physics", "engine", "2d"],
                    main: "./src/p2.js",
                    engines: {
                        node: "*"
                    },
                    repository: {
                        type: "git",
                        url: "https://github.com/schteppe/p2.js.git"
                    },
                    bugs: {
                        url: "https://github.com/schteppe/p2.js/issues"
                    },
                    licenses: [{
                        type: "MIT"
                    }],
                    devDependencies: {
                        grunt: "~0.4.0",
                        "grunt-contrib-jshint": "~0.9.2",
                        "grunt-contrib-nodeunit": "~0.1.2",
                        "grunt-contrib-uglify": "~0.4.0",
                        "grunt-contrib-watch": "~0.5.0",
                        "grunt-browserify": "~2.0.1",
                        "grunt-contrib-concat": "^0.4.0"
                    },
                    dependencies: {
                        "poly-decomp": "0.1.0"
                    }
                }
            },
            {}],
            7 : [function(a, b) {
                function c(a) {
                    this.lowerBound = d.create(),
                    a && a.lowerBound && d.copy(this.lowerBound, a.lowerBound),
                    this.upperBound = d.create(),
                    a && a.upperBound && d.copy(this.upperBound, a.upperBound)
                }
                var d = a("../math/vec2");
                a("../utils/Utils"),
                b.exports = c;
                var e = d.create();
                c.prototype.setFromPoints = function(a, b, c, f) {
                    var g = this.lowerBound,
                    h = this.upperBound;
                    "number" != typeof c && (c = 0),
                    0 !== c ? d.rotate(g, a[0], c) : d.copy(g, a[0]),
                    d.copy(h, g);
                    for (var i = Math.cos(c), j = Math.sin(c), k = 1; k < a.length; k++) {
                        var l = a[k];
                        if (0 !== c) {
                            var m = l[0],
                            n = l[1];
                            e[0] = i * m - j * n,
                            e[1] = j * m + i * n,
                            l = e
                        }
                        for (var o = 0; 2 > o; o++) l[o] > h[o] && (h[o] = l[o]),
                        l[o] < g[o] && (g[o] = l[o])
                    }
                    b && (d.add(this.lowerBound, this.lowerBound, b), d.add(this.upperBound, this.upperBound, b)),
                    f && (this.lowerBound[0] -= f, this.lowerBound[1] -= f, this.upperBound[0] += f, this.upperBound[1] += f)
                },
                c.prototype.copy = function(a) {
                    d.copy(this.lowerBound, a.lowerBound),
                    d.copy(this.upperBound, a.upperBound)
                },
                c.prototype.extend = function(a) {
                    for (var b = 2; b--;) {
                        var c = a.lowerBound[b];
                        this.lowerBound[b] > c && (this.lowerBound[b] = c);
                        var d = a.upperBound[b];
                        this.upperBound[b] < d && (this.upperBound[b] = d)
                    }
                },
                c.prototype.overlaps = function(a) {
                    var b = this.lowerBound,
                    c = this.upperBound,
                    d = a.lowerBound,
                    e = a.upperBound;
                    return (d[0] <= c[0] && c[0] <= e[0] || b[0] <= e[0] && e[0] <= c[0]) && (d[1] <= c[1] && c[1] <= e[1] || b[1] <= e[1] && e[1] <= c[1])
                }
            },
            {
                "../math/vec2": 31,
                "../utils/Utils": 50
            }],
            8 : [function(a, b) {
                function c(a) {
                    this.type = a,
                    this.result = [],
                    this.world = null,
                    this.boundingVolumeType = c.AABB
                }
                var d = a("../math/vec2"),
                e = a("../objects/Body");
                b.exports = c,
                c.AABB = 1,
                c.BOUNDING_CIRCLE = 2,
                c.prototype.setWorld = function(a) {
                    this.world = a
                },
                c.prototype.getCollisionPairs = function() {
                    throw new Error("getCollisionPairs must be implemented in a subclass!")
                };
                var f = d.create();
                c.boundingRadiusCheck = function(a, b) {
                    d.sub(f, a.position, b.position);
                    var c = d.squaredLength(f),
                    e = a.boundingRadius + b.boundingRadius;
                    return e * e >= c
                },
                c.aabbCheck = function(a, b) {
                    return a.getAABB().overlaps(b.getAABB())
                },
                c.prototype.boundingVolumeCheck = function(a, b) {
                    var d;
                    switch (this.boundingVolumeType) {
                    case c.BOUNDING_CIRCLE:
                        d = c.boundingRadiusCheck(a, b);
                        break;
                    case c.AABB:
                        d = c.aabbCheck(a, b);
                        break;
                    default:
                        throw new Error("Bounding volume type not recognized: " + this.boundingVolumeType)
                    }
                    return d
                },
                c.canCollide = function(a, b) {
                    return a.type === e.STATIC && b.type === e.STATIC ? !1 : a.type === e.KINEMATIC && b.type === e.STATIC || a.type === e.STATIC && b.type === e.KINEMATIC ? !1 : a.type === e.KINEMATIC && b.type === e.KINEMATIC ? !1 : a.sleepState === e.SLEEPING && b.sleepState === e.SLEEPING ? !1 : a.sleepState === e.SLEEPING && b.type === e.STATIC || b.sleepState === e.SLEEPING && a.type === e.STATIC ? !1 : !0
                },
                c.NAIVE = 1,
                c.SAP = 2
            },
            {
                "../math/vec2": 31,
                "../objects/Body": 32
            }],
            9 : [function(a, b) {
                function c(a) {
                    d.apply(this),
                    a = e.defaults(a, {
                        xmin: -100,
                        xmax: 100,
                        ymin: -100,
                        ymax: 100,
                        nx: 10,
                        ny: 10
                    }),
                    this.xmin = a.xmin,
                    this.ymin = a.ymin,
                    this.xmax = a.xmax,
                    this.ymax = a.ymax,
                    this.nx = a.nx,
                    this.ny = a.ny,
                    this.binsizeX = (this.xmax - this.xmin) / this.nx,
                    this.binsizeY = (this.ymax - this.ymin) / this.ny
                }
                var d = (a("../shapes/Circle"), a("../shapes/Plane"), a("../shapes/Particle"), a("../collision/Broadphase")),
                e = (a("../math/vec2"), a("../utils/Utils"));
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.getCollisionPairs = function(a) {
                    for (var b = [], c = a.bodies, e = c.length, f = (this.binsizeX, this.binsizeY, this.nx), g = this.ny, h = this.xmin, i = this.ymin, j = this.xmax, k = this.ymax, l = [], m = f * g, n = 0; m > n; n++) l.push([]);
                    for (var o = f / (j - h), p = g / (k - i), n = 0; n !== e; n++) for (var q = c[n], r = q.aabb, s = Math.max(r.lowerBound[0], h), t = Math.max(r.lowerBound[1], i), u = Math.min(r.upperBound[0], j), v = Math.min(r.upperBound[1], k), w = Math.floor(o * (s - h)), x = Math.floor(p * (t - i)), y = Math.floor(o * (u - h)), z = Math.floor(p * (v - i)), A = w; y >= A; A++) for (var B = x; z >= B; B++) {
                        var C = A,
                        D = B,
                        E = C * (g - 1) + D;
                        E >= 0 && m > E && l[E].push(q)
                    }
                    for (var n = 0; n !== m; n++) for (var F = l[n], A = 0, G = F.length; A !== G; A++) for (var q = F[A], B = 0; B !== A; B++) {
                        var H = F[B];
                        d.canCollide(q, H) && this.boundingVolumeCheck(q, H) && b.push(q, H)
                    }
                    return b
                }
            },
            {
                "../collision/Broadphase": 8,
                "../math/vec2": 31,
                "../shapes/Circle": 38,
                "../shapes/Particle": 42,
                "../shapes/Plane": 43,
                "../utils/Utils": 50
            }],
            10 : [function(a, b) {
                function c() {
                    d.call(this, d.NAIVE)
                }
                var d = (a("../shapes/Circle"), a("../shapes/Plane"), a("../shapes/Shape"), a("../shapes/Particle"), a("../collision/Broadphase"));
                a("../math/vec2"),
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.getCollisionPairs = function(a) {
                    var b = a.bodies,
                    c = this.result;
                    c.length = 0;
                    for (var e = 0,
                    f = b.length; e !== f; e++) for (var g = b[e], h = 0; e > h; h++) {
                        var i = b[h];
                        d.canCollide(g, i) && this.boundingVolumeCheck(g, i) && c.push(g, i)
                    }
                    return c
                },
                c.prototype.aabbQuery = function(a, b, c) {
                    c = c || [];
                    for (var d = a.bodies,
                    e = 0; e < d.length; e++) {
                        var f = d[e];
                        f.aabbNeedsUpdate && f.updateAABB(),
                        f.aabb.overlaps(b) && c.push(f)
                    }
                    return c
                }
            },
            {
                "../collision/Broadphase": 8,
                "../math/vec2": 31,
                "../shapes/Circle": 38,
                "../shapes/Particle": 42,
                "../shapes/Plane": 43,
                "../shapes/Shape": 45
            }],
            11 : [function(a, b) {
                function c() {
                    this.contactEquations = [],
                    this.frictionEquations = [],
                    this.enableFriction = !0,
                    this.enabledEquations = !0,
                    this.slipForce = 10,
                    this.frictionCoefficient = .3,
                    this.surfaceVelocity = 0,
                    this.reuseObjects = !0,
                    this.reusableContactEquations = [],
                    this.reusableFrictionEquations = [],
                    this.restitution = 0,
                    this.stiffness = l.DEFAULT_STIFFNESS,
                    this.relaxation = l.DEFAULT_RELAXATION,
                    this.frictionStiffness = l.DEFAULT_STIFFNESS,
                    this.frictionRelaxation = l.DEFAULT_RELAXATION,
                    this.enableFrictionReduction = !0,
                    this.collidingBodiesLastStep = new k,
                    this.contactSkinSize = .01
                }
                function d(a, b) {
                    f.set(a.vertices[0], .5 * -b.length, -b.radius),
                    f.set(a.vertices[1], .5 * b.length, -b.radius),
                    f.set(a.vertices[2], .5 * b.length, b.radius),
                    f.set(a.vertices[3], .5 * -b.length, b.radius)
                }
                function e(a, b, c, d) {
                    for (var e = T,
                    i = U,
                    j = V,
                    k = W,
                    l = a,
                    m = b.vertices,
                    n = null,
                    o = 0; o !== m.length + 1; o++) {
                        var p = m[o % m.length],
                        q = m[(o + 1) % m.length];
                        f.rotate(e, p, d),
                        f.rotate(i, q, d),
                        h(e, e, c),
                        h(i, i, c),
                        g(j, e, l),
                        g(k, i, l);
                        var r = f.crossLength(j, k);
                        if (null === n && (n = r), 0 >= r * n) return ! 1;
                        n = r
                    }
                    return ! 0
                }
                var f = a("../math/vec2"),
                g = f.sub,
                h = f.add,
                i = f.dot,
                j = a("../utils/Utils"),
                k = a("../utils/TupleDictionary"),
                l = a("../equations/Equation"),
                m = a("../equations/ContactEquation"),
                n = a("../equations/FrictionEquation"),
                o = a("../shapes/Circle"),
                p = a("../shapes/Convex"),
                q = a("../shapes/Shape"),
                r = (a("../objects/Body"), a("../shapes/Rectangle"));
                b.exports = c;
                var s = f.fromValues(0, 1),
                t = f.fromValues(0, 0),
                u = f.fromValues(0, 0),
                v = f.fromValues(0, 0),
                w = f.fromValues(0, 0),
                x = f.fromValues(0, 0),
                y = f.fromValues(0, 0),
                z = f.fromValues(0, 0),
                A = f.fromValues(0, 0),
                B = f.fromValues(0, 0),
                C = f.fromValues(0, 0),
                D = f.fromValues(0, 0),
                E = f.fromValues(0, 0),
                F = f.fromValues(0, 0),
                G = f.fromValues(0, 0),
                H = f.fromValues(0, 0),
                I = f.fromValues(0, 0),
                J = f.fromValues(0, 0),
                K = f.fromValues(0, 0),
                L = [],
                M = f.create(),
                N = f.create();
                c.prototype.bodiesOverlap = function(a, b) {
                    for (var c = M,
                    d = N,
                    e = 0,
                    f = a.shapes.length; e !== f; e++) {
                        var g = a.shapes[e],
                        h = a.shapeOffsets[e];
                        a.shapeAngles[e],
                        a.toWorldFrame(c, h);
                        for (var i = 0,
                        j = b.shapes.length; i !== j; i++) {
                            var k = b.shapes[i],
                            l = b.shapeOffsets[i];
                            if (b.shapeAngles[i], b.toWorldFrame(d, l), this[g.type | k.type](a, g, c, g.angle + a.angle, b, k, d, k.angle + b.angle, !0)) return ! 0
                        }
                    }
                    return ! 1
                },
                c.prototype.collidedLastStep = function(a, b) {
                    var c = 0 | a.id,
                    d = 0 | b.id;
                    return !! this.collidingBodiesLastStep.get(c, d)
                },
                c.prototype.reset = function() {
                    this.collidingBodiesLastStep.reset();
                    for (var a = this.contactEquations,
                    b = a.length; b--;) {
                        var c = a[b],
                        d = c.bodyA.id,
                        e = c.bodyB.id;
                        this.collidingBodiesLastStep.set(d, e, !0)
                    }
                    if (this.reuseObjects) {
                        var f = this.contactEquations,
                        g = this.frictionEquations,
                        h = this.reusableFrictionEquations,
                        i = this.reusableContactEquations;
                        j.appendArray(i, f),
                        j.appendArray(h, g)
                    }
                    this.contactEquations.length = this.frictionEquations.length = 0
                },
                c.prototype.createContactEquation = function(a, b, c, d) {
                    var e = this.reusableContactEquations.length ? this.reusableContactEquations.pop() : new m(a, b);
                    return e.bodyA = a,
                    e.bodyB = b,
                    e.shapeA = c,
                    e.shapeB = d,
                    e.restitution = this.restitution,
                    e.firstImpact = !this.collidedLastStep(a, b),
                    e.stiffness = this.stiffness,
                    e.relaxation = this.relaxation,
                    e.needsUpdate = !0,
                    e.enabled = this.enabledEquations,
                    e.offset = this.contactSkinSize,
                    e
                },
                c.prototype.createFrictionEquation = function(a, b, c, d) {
                    var e = this.reusableFrictionEquations.length ? this.reusableFrictionEquations.pop() : new n(a, b);
                    return e.bodyA = a,
                    e.bodyB = b,
                    e.shapeA = c,
                    e.shapeB = d,
                    e.setSlipForce(this.slipForce),
                    e.frictionCoefficient = this.frictionCoefficient,
                    e.relativeVelocity = this.surfaceVelocity,
                    e.enabled = this.enabledEquations,
                    e.needsUpdate = !0,
                    e.stiffness = this.frictionStiffness,
                    e.relaxation = this.frictionRelaxation,
                    e.contactEquations.length = 0,
                    e
                },
                c.prototype.createFrictionFromContact = function(a) {
                    var b = this.createFrictionEquation(a.bodyA, a.bodyB, a.shapeA, a.shapeB);
                    return f.copy(b.contactPointA, a.contactPointA),
                    f.copy(b.contactPointB, a.contactPointB),
                    f.rotate90cw(b.t, a.normalA),
                    b.contactEquations.push(a),
                    b
                },
                c.prototype.createFrictionFromAverage = function(a) {
                    var b = this.contactEquations[this.contactEquations.length - 1],
                    c = this.createFrictionEquation(b.bodyA, b.bodyB, b.shapeA, b.shapeB),
                    d = b.bodyA;
                    b.bodyB,
                    f.set(c.contactPointA, 0, 0),
                    f.set(c.contactPointB, 0, 0),
                    f.set(c.t, 0, 0);
                    for (var e = 0; e !== a; e++) b = this.contactEquations[this.contactEquations.length - 1 - e],
                    b.bodyA === d ? (f.add(c.t, c.t, b.normalA), f.add(c.contactPointA, c.contactPointA, b.contactPointA), f.add(c.contactPointB, c.contactPointB, b.contactPointB)) : (f.sub(c.t, c.t, b.normalA), f.add(c.contactPointA, c.contactPointA, b.contactPointB), f.add(c.contactPointB, c.contactPointB, b.contactPointA)),
                    c.contactEquations.push(b);
                    var g = 1 / a;
                    return f.scale(c.contactPointA, c.contactPointA, g),
                    f.scale(c.contactPointB, c.contactPointB, g),
                    f.normalize(c.t, c.t),
                    f.rotate90cw(c.t, c.t),
                    c
                },
                c.prototype[q.LINE | q.CONVEX] = c.prototype.convexLine = function(a, b, c, d, e, f, g, h, i) {
                    return i ? !1 : 0
                },
                c.prototype[q.LINE | q.RECTANGLE] = c.prototype.lineRectangle = function(a, b, c, d, e, f, g, h, i) {
                    return i ? !1 : 0
                };
                var O = new r(1, 1),
                P = f.create();
                c.prototype[q.CAPSULE | q.CONVEX] = c.prototype[q.CAPSULE | q.RECTANGLE] = c.prototype.convexCapsule = function(a, b, c, e, g, h, i, j, k) {
                    var l = P;
                    f.set(l, h.length / 2, 0),
                    f.rotate(l, l, j),
                    f.add(l, l, i);
                    var m = this.circleConvex(g, h, l, j, a, b, c, e, k, h.radius);
                    f.set(l, -h.length / 2, 0),
                    f.rotate(l, l, j),
                    f.add(l, l, i);
                    var n = this.circleConvex(g, h, l, j, a, b, c, e, k, h.radius);
                    if (k && (m || n)) return ! 0;
                    var o = O;
                    d(o, h);
                    var p = this.convexConvex(a, b, c, e, g, o, i, j, k);
                    return p + m + n
                },
                c.prototype[q.CAPSULE | q.LINE] = c.prototype.lineCapsule = function(a, b, c, d, e, f, g, h, i) {
                    return i ? !1 : 0
                };
                var Q = f.create(),
                R = f.create(),
                S = new r(1, 1);
                c.prototype[q.CAPSULE | q.CAPSULE] = c.prototype.capsuleCapsule = function(a, b, c, e, g, h, i, j, k) {
                    for (var l, m = Q,
                    n = R,
                    o = 0,
                    p = 0; 2 > p; p++) {
                        f.set(m, (0 === p ? -1 : 1) * b.length / 2, 0),
                        f.rotate(m, m, e),
                        f.add(m, m, c);
                        for (var q = 0; 2 > q; q++) {
                            f.set(n, (0 === q ? -1 : 1) * h.length / 2, 0),
                            f.rotate(n, n, j),
                            f.add(n, n, i),
                            this.enableFrictionReduction && (l = this.enableFriction, this.enableFriction = !1);
                            var r = this.circleCircle(a, b, m, e, g, h, n, j, k, b.radius, h.radius);
                            if (this.enableFrictionReduction && (this.enableFriction = l), k && r) return ! 0;
                            o += r
                        }
                    }
                    this.enableFrictionReduction && (l = this.enableFriction, this.enableFriction = !1);
                    var s = S;
                    d(s, b);
                    var t = this.convexCapsule(a, s, c, e, g, h, i, j, k);
                    if (this.enableFrictionReduction && (this.enableFriction = l), k && t) return ! 0;
                    if (o += t, this.enableFrictionReduction) {
                        var l = this.enableFriction;
                        this.enableFriction = !1
                    }
                    d(s, h);
                    var u = this.convexCapsule(g, s, i, j, a, b, c, e, k);
                    return this.enableFrictionReduction && (this.enableFriction = l),
                    k && u ? !0 : (o += u, this.enableFrictionReduction && o && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(o)), o)
                },
                c.prototype[q.LINE | q.LINE] = c.prototype.lineLine = function(a, b, c, d, e, f, g, h, i) {
                    return i ? !1 : 0
                },
                c.prototype[q.PLANE | q.LINE] = c.prototype.planeLine = function(a, b, c, d, e, j, k, l, m) {
                    var n = t,
                    o = u,
                    p = v,
                    q = w,
                    r = x,
                    C = y,
                    D = z,
                    E = A,
                    F = B,
                    G = L,
                    H = 0;
                    f.set(n, -j.length / 2, 0),
                    f.set(o, j.length / 2, 0),
                    f.rotate(p, n, l),
                    f.rotate(q, o, l),
                    h(p, p, k),
                    h(q, q, k),
                    f.copy(n, p),
                    f.copy(o, q),
                    g(r, o, n),
                    f.normalize(C, r),
                    f.rotate90cw(F, C),
                    f.rotate(E, s, d),
                    G[0] = n,
                    G[1] = o;
                    for (var I = 0; I < G.length; I++) {
                        var J = G[I];
                        g(D, J, c);
                        var K = i(D, E);
                        if (0 > K) {
                            if (m) return ! 0;
                            var M = this.createContactEquation(a, e, b, j);
                            H++,
                            f.copy(M.normalA, E),
                            f.normalize(M.normalA, M.normalA),
                            f.scale(D, E, K),
                            g(M.contactPointA, J, D),
                            g(M.contactPointA, M.contactPointA, a.position),
                            g(M.contactPointB, J, k),
                            h(M.contactPointB, M.contactPointB, k),
                            g(M.contactPointB, M.contactPointB, e.position),
                            this.contactEquations.push(M),
                            this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(M))
                        }
                    }
                    return m ? !1 : (this.enableFrictionReduction || H && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(H)), H)
                },
                c.prototype[q.PARTICLE | q.CAPSULE] = c.prototype.particleCapsule = function(a, b, c, d, e, f, g, h, i) {
                    return this.circleLine(a, b, c, d, e, f, g, h, i, f.radius, 0)
                },
                c.prototype[q.CIRCLE | q.LINE] = c.prototype.circleLine = function(a, b, c, d, e, j, k, l, m, n, o) {
                    var n = n || 0,
                    o = "undefined" != typeof o ? o: b.radius,
                    p = t,
                    q = u,
                    r = v,
                    s = w,
                    H = x,
                    I = y,
                    J = z,
                    K = A,
                    M = B,
                    N = C,
                    O = D,
                    P = E,
                    Q = F,
                    R = G,
                    S = L;
                    f.set(K, -j.length / 2, 0),
                    f.set(M, j.length / 2, 0),
                    f.rotate(N, K, l),
                    f.rotate(O, M, l),
                    h(N, N, k),
                    h(O, O, k),
                    f.copy(K, N),
                    f.copy(M, O),
                    g(I, M, K),
                    f.normalize(J, I),
                    f.rotate90cw(H, J),
                    g(P, c, K);
                    var T = i(P, H);
                    g(s, K, k),
                    g(Q, c, k);
                    var U = o + n;
                    if (Math.abs(T) < U) {
                        f.scale(p, H, T),
                        g(r, c, p),
                        f.scale(q, H, i(H, Q)),
                        f.normalize(q, q),
                        f.scale(q, q, n),
                        h(r, r, q);
                        var V = i(J, r),
                        W = i(J, K),
                        X = i(J, M);
                        if (V > W && X > V) {
                            if (m) return ! 0;
                            var Y = this.createContactEquation(a, e, b, j);
                            return f.scale(Y.normalA, p, -1),
                            f.normalize(Y.normalA, Y.normalA),
                            f.scale(Y.contactPointA, Y.normalA, o),
                            h(Y.contactPointA, Y.contactPointA, c),
                            g(Y.contactPointA, Y.contactPointA, a.position),
                            g(Y.contactPointB, r, k),
                            h(Y.contactPointB, Y.contactPointB, k),
                            g(Y.contactPointB, Y.contactPointB, e.position),
                            this.contactEquations.push(Y),
                            this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Y)),
                            1
                        }
                    }
                    S[0] = K,
                    S[1] = M;
                    for (var Z = 0; Z < S.length; Z++) {
                        var $ = S[Z];
                        if (g(P, $, c), f.squaredLength(P) < Math.pow(U, 2)) {
                            if (m) return ! 0;
                            var Y = this.createContactEquation(a, e, b, j);
                            return f.copy(Y.normalA, P),
                            f.normalize(Y.normalA, Y.normalA),
                            f.scale(Y.contactPointA, Y.normalA, o),
                            h(Y.contactPointA, Y.contactPointA, c),
                            g(Y.contactPointA, Y.contactPointA, a.position),
                            g(Y.contactPointB, $, k),
                            f.scale(R, Y.normalA, -n),
                            h(Y.contactPointB, Y.contactPointB, R),
                            h(Y.contactPointB, Y.contactPointB, k),
                            g(Y.contactPointB, Y.contactPointB, e.position),
                            this.contactEquations.push(Y),
                            this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Y)),
                            1
                        }
                    }
                    return 0
                },
                c.prototype[q.CIRCLE | q.CAPSULE] = c.prototype.circleCapsule = function(a, b, c, d, e, f, g, h, i) {
                    return this.circleLine(a, b, c, d, e, f, g, h, i, f.radius)
                },
                c.prototype[q.CIRCLE | q.CONVEX] = c.prototype[q.CIRCLE | q.RECTANGLE] = c.prototype.circleConvex = function(a, b, c, d, i, j, k, l, m, n) {
                    for (var n = "number" == typeof n ? n: b.radius, o = t, p = u, q = v, r = w, s = x, y = C, z = D, A = F, B = G, E = H, J = I, K = !1, L = Number.MAX_VALUE, M = j.vertices, N = 0; N !== M.length + 1; N++) {
                        var O = M[N % M.length],
                        P = M[(N + 1) % M.length];
                        if (f.rotate(o, O, l), f.rotate(p, P, l), h(o, o, k), h(p, p, k), g(q, p, o), f.normalize(r, q), f.rotate90cw(s, r), f.scale(B, s, -b.radius), h(B, B, c), e(B, j, k, l)) {
                            f.sub(E, o, B);
                            var Q = Math.abs(f.dot(E, s));
                            L > Q && (f.copy(J, B), L = Q, f.scale(A, s, Q), f.add(A, A, B), K = !0)
                        }
                    }
                    if (K) {
                        if (m) return ! 0;
                        var R = this.createContactEquation(a, i, b, j);
                        return f.sub(R.normalA, J, c),
                        f.normalize(R.normalA, R.normalA),
                        f.scale(R.contactPointA, R.normalA, n),
                        h(R.contactPointA, R.contactPointA, c),
                        g(R.contactPointA, R.contactPointA, a.position),
                        g(R.contactPointB, A, k),
                        h(R.contactPointB, R.contactPointB, k),
                        g(R.contactPointB, R.contactPointB, i.position),
                        this.contactEquations.push(R),
                        this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(R)),
                        1
                    }
                    if (n > 0) for (var N = 0; N < M.length; N++) {
                        var S = M[N];
                        if (f.rotate(z, S, l), h(z, z, k), g(y, z, c), f.squaredLength(y) < Math.pow(n, 2)) {
                            if (m) return ! 0;
                            var R = this.createContactEquation(a, i, b, j);
                            return f.copy(R.normalA, y),
                            f.normalize(R.normalA, R.normalA),
                            f.scale(R.contactPointA, R.normalA, n),
                            h(R.contactPointA, R.contactPointA, c),
                            g(R.contactPointA, R.contactPointA, a.position),
                            g(R.contactPointB, z, k),
                            h(R.contactPointB, R.contactPointB, k),
                            g(R.contactPointB, R.contactPointB, i.position),
                            this.contactEquations.push(R),
                            this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(R)),
                            1
                        }
                    }
                    return 0
                };
                var T = f.create(),
                U = f.create(),
                V = f.create(),
                W = f.create();
                c.prototype[q.PARTICLE | q.CONVEX] = c.prototype[q.PARTICLE | q.RECTANGLE] = c.prototype.particleConvex = function(a, b, c, d, j, k, l, m, n) {
                    var o = t,
                    p = u,
                    q = v,
                    r = w,
                    s = x,
                    A = y,
                    B = z,
                    D = C,
                    E = F,
                    G = J,
                    H = K,
                    I = Number.MAX_VALUE,
                    L = !1,
                    M = k.vertices;
                    if (!e(c, k, l, m)) return 0;
                    if (n) return ! 0;
                    for (var N = 0; N !== M.length + 1; N++) {
                        var O = M[N % M.length],
                        P = M[(N + 1) % M.length];
                        f.rotate(o, O, m),
                        f.rotate(p, P, m),
                        h(o, o, l),
                        h(p, p, l),
                        g(q, p, o),
                        f.normalize(r, q),
                        f.rotate90cw(s, r),
                        g(D, c, o),
                        i(D, s),
                        g(A, o, l),
                        g(B, c, l),
                        f.sub(G, o, c);
                        var Q = Math.abs(f.dot(G, s));
                        I > Q && (I = Q, f.scale(E, s, Q), f.add(E, E, c), f.copy(H, s), L = !0)
                    }
                    if (L) {
                        var R = this.createContactEquation(a, j, b, k);
                        return f.scale(R.normalA, H, -1),
                        f.normalize(R.normalA, R.normalA),
                        f.set(R.contactPointA, 0, 0),
                        h(R.contactPointA, R.contactPointA, c),
                        g(R.contactPointA, R.contactPointA, a.position),
                        g(R.contactPointB, E, l),
                        h(R.contactPointB, R.contactPointB, l),
                        g(R.contactPointB, R.contactPointB, j.position),
                        this.contactEquations.push(R),
                        this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(R)),
                        1
                    }
                    return 0
                },
                c.prototype[q.CIRCLE] = c.prototype.circleCircle = function(a, b, c, d, e, i, j, k, l, m, n) {
                    var o = t,
                    m = m || b.radius,
                    n = n || i.radius;
                    g(o, c, j);
                    var p = m + n;
                    if (f.squaredLength(o) > Math.pow(p, 2)) return 0;
                    if (l) return ! 0;
                    var q = this.createContactEquation(a, e, b, i);
                    return g(q.normalA, j, c),
                    f.normalize(q.normalA, q.normalA),
                    f.scale(q.contactPointA, q.normalA, m),
                    f.scale(q.contactPointB, q.normalA, -n),
                    h(q.contactPointA, q.contactPointA, c),
                    g(q.contactPointA, q.contactPointA, a.position),
                    h(q.contactPointB, q.contactPointB, j),
                    g(q.contactPointB, q.contactPointB, e.position),
                    this.contactEquations.push(q),
                    this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(q)),
                    1
                },
                c.prototype[q.PLANE | q.CONVEX] = c.prototype[q.PLANE | q.RECTANGLE] = c.prototype.planeConvex = function(a, b, c, d, e, j, k, l, m) {
                    var n = t,
                    o = u,
                    p = v,
                    q = 0;
                    f.rotate(o, s, d);
                    for (var r = 0; r !== j.vertices.length; r++) {
                        var w = j.vertices[r];
                        if (f.rotate(n, w, l), h(n, n, k), g(p, n, c), i(p, o) <= 0) {
                            if (m) return ! 0;
                            q++;
                            var x = this.createContactEquation(a, e, b, j);
                            g(p, n, c),
                            f.copy(x.normalA, o);
                            var y = i(p, x.normalA);
                            f.scale(p, x.normalA, y),
                            g(x.contactPointB, n, e.position),
                            g(x.contactPointA, n, p),
                            g(x.contactPointA, x.contactPointA, a.position),
                            this.contactEquations.push(x),
                            this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(x))
                        }
                    }
                    return this.enableFrictionReduction && this.enableFriction && q && this.frictionEquations.push(this.createFrictionFromAverage(q)),
                    q
                },
                c.prototype[q.PARTICLE | q.PLANE] = c.prototype.particlePlane = function(a, b, c, d, e, h, j, k, l) {
                    var m = t,
                    n = u;
                    k = k || 0,
                    g(m, c, j),
                    f.rotate(n, s, k);
                    var o = i(m, n);
                    if (o > 0) return 0;
                    if (l) return ! 0;
                    var p = this.createContactEquation(e, a, h, b);
                    return f.copy(p.normalA, n),
                    f.scale(m, p.normalA, o),
                    g(p.contactPointA, c, m),
                    g(p.contactPointA, p.contactPointA, e.position),
                    g(p.contactPointB, c, a.position),
                    this.contactEquations.push(p),
                    this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(p)),
                    1
                },
                c.prototype[q.CIRCLE | q.PARTICLE] = c.prototype.circleParticle = function(a, b, c, d, e, i, j, k, l) {
                    var m = t;
                    if (g(m, j, c), f.squaredLength(m) > Math.pow(b.radius, 2)) return 0;
                    if (l) return ! 0;
                    var n = this.createContactEquation(a, e, b, i);
                    return f.copy(n.normalA, m),
                    f.normalize(n.normalA, n.normalA),
                    f.scale(n.contactPointA, n.normalA, b.radius),
                    h(n.contactPointA, n.contactPointA, c),
                    g(n.contactPointA, n.contactPointA, a.position),
                    g(n.contactPointB, j, e.position),
                    this.contactEquations.push(n),
                    this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(n)),
                    1
                };
                var X = new o(1),
                Y = f.create(),
                Z = f.create();
                f.create(),
                c.prototype[q.PLANE | q.CAPSULE] = c.prototype.planeCapsule = function(a, b, c, d, e, g, i, j, k) {
                    var l = Y,
                    m = Z,
                    n = X;
                    f.set(l, -g.length / 2, 0),
                    f.rotate(l, l, j),
                    h(l, l, i),
                    f.set(m, g.length / 2, 0),
                    f.rotate(m, m, j),
                    h(m, m, i),
                    n.radius = g.radius;
                    var o;
                    this.enableFrictionReduction && (o = this.enableFriction, this.enableFriction = !1);
                    var p = this.circlePlane(e, n, l, 0, a, b, c, d, k),
                    q = this.circlePlane(e, n, m, 0, a, b, c, d, k);
                    if (this.enableFrictionReduction && (this.enableFriction = o), k) return p || q;
                    var r = p + q;
                    return this.enableFrictionReduction && r && this.frictionEquations.push(this.createFrictionFromAverage(r)),
                    r
                },
                c.prototype[q.CIRCLE | q.PLANE] = c.prototype.circlePlane = function(a, b, c, d, e, j, k, l, m) {
                    var n = a,
                    o = b,
                    p = c,
                    q = e,
                    r = k,
                    w = l;
                    w = w || 0;
                    var x = t,
                    y = u,
                    z = v;
                    g(x, p, r),
                    f.rotate(y, s, w);
                    var A = i(y, x);
                    if (A > o.radius) return 0;
                    if (m) return ! 0;
                    var B = this.createContactEquation(q, n, j, b);
                    return f.copy(B.normalA, y),
                    f.scale(B.contactPointB, B.normalA, -o.radius),
                    h(B.contactPointB, B.contactPointB, p),
                    g(B.contactPointB, B.contactPointB, n.position),
                    f.scale(z, B.normalA, A),
                    g(B.contactPointA, x, z),
                    h(B.contactPointA, B.contactPointA, r),
                    g(B.contactPointA, B.contactPointA, q.position),
                    this.contactEquations.push(B),
                    this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(B)),
                    1
                },
                c.prototype[q.CONVEX] = c.prototype[q.CONVEX | q.RECTANGLE] = c.prototype[q.RECTANGLE] = c.prototype.convexConvex = function(a, b, d, e, j, k, l, m, n, o) {
                    var p = t,
                    q = u,
                    r = v,
                    s = w,
                    y = x,
                    C = z,
                    D = A,
                    E = B,
                    F = 0,
                    o = "number" == typeof o ? o: 0,
                    G = c.findSeparatingAxis(b, d, e, k, l, m, p);
                    if (!G) return 0;
                    g(D, l, d),
                    i(p, D) > 0 && f.scale(p, p, -1);
                    var H = c.getClosestEdge(b, e, p, !0),
                    I = c.getClosestEdge(k, m, p);
                    if ( - 1 === H || -1 === I) return 0;
                    for (var J = 0; 2 > J; J++) {
                        var K = H,
                        L = I,
                        M = b,
                        N = k,
                        O = d,
                        P = l,
                        Q = e,
                        R = m,
                        S = a,
                        T = j;
                        if (0 === J) {
                            var U;
                            U = K,
                            K = L,
                            L = U,
                            U = M,
                            M = N,
                            N = U,
                            U = O,
                            O = P,
                            P = U,
                            U = Q,
                            Q = R,
                            R = U,
                            U = S,
                            S = T,
                            T = U
                        }
                        for (var V = L; L + 2 > V; V++) {
                            var W = N.vertices[(V + N.vertices.length) % N.vertices.length];
                            f.rotate(q, W, R),
                            h(q, q, P);
                            for (var X = 0,
                            Y = K - 1; K + 2 > Y; Y++) {
                                var Z = M.vertices[(Y + M.vertices.length) % M.vertices.length],
                                $ = M.vertices[(Y + 1 + M.vertices.length) % M.vertices.length];
                                f.rotate(r, Z, Q),
                                f.rotate(s, $, Q),
                                h(r, r, O),
                                h(s, s, O),
                                g(y, s, r),
                                f.rotate90cw(E, y),
                                f.normalize(E, E),
                                g(D, q, r);
                                var _ = i(E, D); (Y === K && o >= _ || Y !== K && 0 >= _) && X++
                            }
                            if (X >= 3) {
                                if (n) return ! 0;
                                var aa = this.createContactEquation(S, T, M, N);
                                F++;
                                var Z = M.vertices[K % M.vertices.length],
                                $ = M.vertices[(K + 1) % M.vertices.length];
                                f.rotate(r, Z, Q),
                                f.rotate(s, $, Q),
                                h(r, r, O),
                                h(s, s, O),
                                g(y, s, r),
                                f.rotate90cw(aa.normalA, y),
                                f.normalize(aa.normalA, aa.normalA),
                                g(D, q, r);
                                var _ = i(aa.normalA, D);
                                f.scale(C, aa.normalA, _),
                                g(aa.contactPointA, q, O),
                                g(aa.contactPointA, aa.contactPointA, C),
                                h(aa.contactPointA, aa.contactPointA, O),
                                g(aa.contactPointA, aa.contactPointA, S.position),
                                g(aa.contactPointB, q, P),
                                h(aa.contactPointB, aa.contactPointB, P),
                                g(aa.contactPointB, aa.contactPointB, T.position),
                                this.contactEquations.push(aa),
                                this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(aa))
                            }
                        }
                    }
                    return this.enableFrictionReduction && this.enableFriction && F && this.frictionEquations.push(this.createFrictionFromAverage(F)),
                    F
                };
                var $ = f.fromValues(0, 0);
                c.projectConvexOntoAxis = function(a, b, c, d, e) {
                    var g, h, j = null,
                    k = null,
                    l = $;
                    f.rotate(l, d, -c);
                    for (var m = 0; m < a.vertices.length; m++) g = a.vertices[m],
                    h = i(g, l),
                    (null === j || h > j) && (j = h),
                    (null === k || k > h) && (k = h);
                    if (k > j) {
                        var n = k;
                        k = j,
                        j = n
                    }
                    var o = i(b, d);
                    f.set(e, k + o, j + o)
                };
                var _ = f.fromValues(0, 0),
                aa = f.fromValues(0, 0),
                ba = f.fromValues(0, 0),
                ca = f.fromValues(0, 0),
                da = f.fromValues(0, 0),
                ea = f.fromValues(0, 0);
                c.findSeparatingAxis = function(a, b, d, e, h, i, j) {
                    var k = null,
                    l = !1,
                    m = !1,
                    n = _,
                    o = aa,
                    p = ba,
                    q = ca,
                    s = da,
                    t = ea;
                    if (a instanceof r && e instanceof r) for (var u = 0; 2 !== u; u++) {
                        var v = a,
                        w = d;
                        1 === u && (v = e, w = i);
                        for (var x = 0; 2 !== x; x++) {
                            0 === x ? f.set(q, 0, 1) : 1 === x && f.set(q, 1, 0),
                            0 !== w && f.rotate(q, q, w),
                            c.projectConvexOntoAxis(a, b, d, q, s),
                            c.projectConvexOntoAxis(e, h, i, q, t);
                            var y = s,
                            z = t,
                            A = !1;
                            s[0] > t[0] && (z = s, y = t, A = !0);
                            var B = z[0] - y[1];
                            l = 0 >= B,
                            (null === k || B > k) && (f.copy(j, q), k = B, m = l)
                        }
                    } else for (var u = 0; 2 !== u; u++) {
                        var v = a,
                        w = d;
                        1 === u && (v = e, w = i);
                        for (var x = 0; x !== v.vertices.length; x++) {
                            f.rotate(o, v.vertices[x], w),
                            f.rotate(p, v.vertices[(x + 1) % v.vertices.length], w),
                            g(n, p, o),
                            f.rotate90cw(q, n),
                            f.normalize(q, q),
                            c.projectConvexOntoAxis(a, b, d, q, s),
                            c.projectConvexOntoAxis(e, h, i, q, t);
                            var y = s,
                            z = t,
                            A = !1;
                            s[0] > t[0] && (z = s, y = t, A = !0);
                            var B = z[0] - y[1];
                            l = 0 >= B,
                            (null === k || B > k) && (f.copy(j, q), k = B, m = l)
                        }
                    }
                    return m
                };
                var fa = f.fromValues(0, 0),
                ga = f.fromValues(0, 0),
                ha = f.fromValues(0, 0);
                c.getClosestEdge = function(a, b, c, d) {
                    var e = fa,
                    h = ga,
                    j = ha;
                    f.rotate(e, c, -b),
                    d && f.scale(e, e, -1);
                    for (var k = -1,
                    l = a.vertices.length,
                    m = -1,
                    n = 0; n !== l; n++) {
                        g(h, a.vertices[(n + 1) % l], a.vertices[n % l]),
                        f.rotate90cw(j, h),
                        f.normalize(j, j);
                        var o = i(j, e); ( - 1 === k || o > m) && (k = n % l, m = o)
                    }
                    return k
                };
                var ia = f.create(),
                ja = f.create(),
                ka = f.create(),
                la = f.create(),
                ma = f.create(),
                na = f.create(),
                oa = f.create();
                c.prototype[q.CIRCLE | q.HEIGHTFIELD] = c.prototype.circleHeightfield = function(a, b, c, d, e, i, j, k, l, m) {
                    var n = i.data,
                    m = m || b.radius,
                    o = i.elementWidth,
                    p = ja,
                    q = ia,
                    r = ma,
                    s = oa,
                    t = na,
                    u = ka,
                    v = la,
                    w = Math.floor((c[0] - m - j[0]) / o),
                    x = Math.ceil((c[0] + m - j[0]) / o);
                    0 > w && (w = 0),
                    x >= n.length && (x = n.length - 1);
                    for (var y = n[w], z = n[x], A = w; x > A; A++) n[A] < z && (z = n[A]),
                    n[A] > y && (y = n[A]);
                    if (c[1] - m > y) return l ? !1 : 0;
                    for (var B = !1,
                    A = w; x > A; A++) {
                        f.set(u, A * o, n[A]),
                        f.set(v, (A + 1) * o, n[A + 1]),
                        f.add(u, u, j),
                        f.add(v, v, j),
                        f.sub(t, v, u),
                        f.rotate(t, t, Math.PI / 2),
                        f.normalize(t, t),
                        f.scale(q, t, -m),
                        f.add(q, q, c),
                        f.sub(p, q, u);
                        var C = f.dot(p, t);
                        if (q[0] >= u[0] && q[0] < v[0] && 0 >= C) {
                            if (l) return ! 0;
                            B = !0,
                            f.scale(p, t, -C),
                            f.add(r, q, p),
                            f.copy(s, t);
                            var D = this.createContactEquation(e, a, i, b);
                            f.copy(D.normalA, s),
                            f.scale(D.contactPointB, D.normalA, -m),
                            h(D.contactPointB, D.contactPointB, c),
                            g(D.contactPointB, D.contactPointB, a.position),
                            f.copy(D.contactPointA, r),
                            f.sub(D.contactPointA, D.contactPointA, e.position),
                            this.contactEquations.push(D),
                            this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(D))
                        }
                    }
                    if (B = !1, m > 0) for (var A = w; x >= A; A++) if (f.set(u, A * o, n[A]), f.add(u, u, j), f.sub(p, c, u), f.squaredLength(p) < Math.pow(m, 2)) {
                        if (l) return ! 0;
                        B = !0;
                        var D = this.createContactEquation(e, a, i, b);
                        f.copy(D.normalA, p),
                        f.normalize(D.normalA, D.normalA),
                        f.scale(D.contactPointB, D.normalA, -m),
                        h(D.contactPointB, D.contactPointB, c),
                        g(D.contactPointB, D.contactPointB, a.position),
                        g(D.contactPointA, u, j),
                        h(D.contactPointA, D.contactPointA, j),
                        g(D.contactPointA, D.contactPointA, e.position),
                        this.contactEquations.push(D),
                        this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(D))
                    }
                    return B ? 1 : 0
                };
                var pa = f.create(),
                qa = f.create(),
                ra = f.create(),
                sa = new p([f.create(), f.create(), f.create(), f.create()]);
                c.prototype[q.RECTANGLE | q.HEIGHTFIELD] = c.prototype[q.CONVEX | q.HEIGHTFIELD] = c.prototype.convexHeightfield = function(a, b, c, d, e, g, h, i, j) {
                    var k = g.data,
                    l = g.elementWidth,
                    m = pa,
                    n = qa,
                    o = ra,
                    p = sa,
                    q = Math.floor((a.aabb.lowerBound[0] - h[0]) / l),
                    r = Math.ceil((a.aabb.upperBound[0] - h[0]) / l);
                    0 > q && (q = 0),
                    r >= k.length && (r = k.length - 1);
                    for (var s = k[q], t = k[r], u = q; r > u; u++) k[u] < t && (t = k[u]),
                    k[u] > s && (s = k[u]);
                    if (a.aabb.lowerBound[1] > s) return j ? !1 : 0;
                    for (var v = 0,
                    u = q; r > u; u++) {
                        f.set(m, u * l, k[u]),
                        f.set(n, (u + 1) * l, k[u + 1]),
                        f.add(m, m, h),
                        f.add(n, n, h);
                        var w = 100;
                        f.set(o, .5 * (n[0] + m[0]), .5 * (n[1] + m[1] - w)),
                        f.sub(p.vertices[0], n, o),
                        f.sub(p.vertices[1], m, o),
                        f.copy(p.vertices[2], p.vertices[1]),
                        f.copy(p.vertices[3], p.vertices[0]),
                        p.vertices[2][1] -= w,
                        p.vertices[3][1] -= w,
                        v += this.convexConvex(a, b, c, d, e, p, o, 0, j)
                    }
                    return v
                }
            },
            {
                "../equations/ContactEquation": 22,
                "../equations/Equation": 23,
                "../equations/FrictionEquation": 24,
                "../math/vec2": 31,
                "../objects/Body": 32,
                "../shapes/Circle": 38,
                "../shapes/Convex": 39,
                "../shapes/Rectangle": 44,
                "../shapes/Shape": 45,
                "../utils/TupleDictionary": 49,
                "../utils/Utils": 50
            }],
            12 : [function(a, b) {
                function c(a) {
                    a = a || {},
                    this.from = a.from ? e.fromValues(a.from[0], a.from[1]) : e.create(),
                    this.to = a.to ? e.fromValues(a.to[0], a.to[1]) : e.create(),
                    this._direction = e.create(),
                    this.precision = 1e-4,
                    this.checkCollisionResponse = !0,
                    this.skipBackfaces = !1,
                    this.collisionMask = -1,
                    this.collisionGroup = -1,
                    this.mode = c.ANY,
                    this.result = new f,
                    this.hasHit = !1,
                    this.callback = function() {}
                }
                function d(a, b, c) {
                    e.sub(z, c, a);
                    var d = e.dot(z, b);
                    e.scale(A, b, d),
                    e.add(A, A, a);
                    var f = e.distance(c, A);
                    return f
                }
                b.exports = c;
                var e = a("../math/vec2"),
                f = a("../collision/RaycastResult"),
                g = a("../shapes/Shape"),
                h = a("../collision/AABB");
                c.prototype.constructor = c,
                c.CLOSEST = 1,
                c.ANY = 2,
                c.ALL = 4;
                var i = new h,
                j = [];
                c.prototype.intersectWorld = function(a, b) {
                    return this.mode = b.mode || c.ANY,
                    this.result = b.result || new f,
                    this.skipBackfaces = !!b.skipBackfaces,
                    this.collisionMask = "undefined" != typeof b.collisionMask ? b.collisionMask: -1,
                    this.collisionGroup = "undefined" != typeof b.collisionGroup ? b.collisionGroup: -1,
                    b.from && e.copy(this.from, b.from),
                    b.to && e.copy(this.to, b.to),
                    this.callback = b.callback ||
                    function() {},
                    this.hasHit = !1,
                    this.result.reset(),
                    this._updateDirection(),
                    this.getAABB(i),
                    j.length = 0,
                    a.broadphase.aabbQuery(a, i, j),
                    this.intersectBodies(j),
                    this.hasHit
                };
                var k = (e.create(), e.create(), e.create());
                c.prototype.intersectBody = function(a, b) {
                    b && (this.result = b, this._updateDirection());
                    var c = this.checkCollisionResponse;
                    if (!c || a.collisionResponse) for (var d = k,
                    f = 0,
                    g = a.shapes.length; g > f; f++) {
                        var h = a.shapes[f];
                        if (!c || h.collisionResponse) {
                            e.copy(d, a.shapeOffsets[f]),
                            e.rotate(d, d, a.angle),
                            e.add(d, d, a.position);
                            var i = a.shapeAngles[f] + a.angle;
                            if (this.intersectShape(h, i, d, a), this.result._shouldStop) break
                        }
                    }
                },
                c.prototype.intersectBodies = function(a, b) {
                    b && (this.result = b, this._updateDirection());
                    for (var c = 0,
                    d = a.length; ! this.result._shouldStop && d > c; c++) this.intersectBody(a[c])
                },
                c.prototype._updateDirection = function() {
                    var a = this._direction;
                    e.sub(a, this.to, this.from),
                    e.normalize(a, a)
                },
                c.prototype.intersectShape = function(a, b, c, e) {
                    var f = this.from,
                    g = d(f, this._direction, c);
                    if (! (g > a.boundingSphereRadius)) {
                        var h = this[a.type];
                        h && h.call(this, a, b, c, e)
                    }
                };
                var l = (e.create(), e.create(), e.create(), e.create(), e.create(), e.create(), e.create(), new f, e.create()),
                m = e.create(),
                n = e.create(),
                o = e.create(),
                p = e.create(),
                q = e.create(),
                r = e.create();
                c.prototype.intersectRectangle = function(a, b, c, d) {
                    var f = -Number.MAX_VALUE,
                    g = Number.MAX_VALUE,
                    h = l,
                    i = m,
                    j = n,
                    k = o,
                    s = p,
                    t = q,
                    u = r;
                    if (e.set(t, .5 * -a.width, .5 * -a.height), e.set(u, .5 * a.width, .5 * a.height), e.rotate(h, this._direction, -b), d.toLocalFrame(i, this.from), 0 !== h[0]) {
                        var v = (t[0] - i[0]) / h[0],
                        w = (u[0] - i[0]) / h[0],
                        x = f;
                        f = Math.max(f, Math.min(v, w)),
                        f !== x && e.set(j, v > w ? 1 : -1, 0);
                        var y = g;
                        g = Math.min(g, Math.max(v, w)),
                        g !== y && e.set(k, w > v ? 1 : -1, 0)
                    }
                    if (0 !== h[1]) {
                        var z = (t[1] - i[1]) / h[1],
                        A = (u[1] - i[1]) / h[1],
                        x = f;
                        f = Math.max(f, Math.min(z, A)),
                        f !== x && e.set(j, 0, z > A ? 1 : -1);
                        var y = g;
                        g = Math.min(g, Math.max(z, A)),
                        g !== y && e.set(k, 0, A > z ? 1 : -1)
                    }
                    if (g >= f) {
                        if (e.set(s, i[0] + h[0] * f, i[1] + h[1] * f), e.rotate(j, j, b), d.toWorldFrame(s, s), this.reportIntersection(j, s, a, d, -1), this._shouldStop) return;
                        e.rotate(k, k, b),
                        e.set(s, i[0] + h[0] * g, i[1] + h[1] * g),
                        d.toWorldFrame(s, s),
                        this.reportIntersection(k, s, a, d, -1)
                    }
                },
                c.prototype[g.RECTANGLE] = c.prototype.intersectRectangle;
                var s = e.create(),
                t = e.create(),
                u = e.create(),
                v = e.create(),
                w = e.create();
                c.prototype.intersectPlane = function(a, b, c, d) {
                    var f = this.from,
                    g = this.to,
                    h = this._direction,
                    i = s,
                    j = t,
                    k = u,
                    l = v,
                    m = w;
                    e.set(l, 0, 1),
                    e.rotate(l, l, b),
                    e.sub(m, f, c);
                    var n = e.dot(m, l);
                    e.sub(m, g, c);
                    var o = e.dot(m, l);
                    if (! (n * o > 0 || e.distance(f, g) < n)) {
                        var p = e.dot(l, h);
                        e.sub(i, f, c);
                        var q = -e.dot(l, i) / p;
                        e.scale(j, h, q),
                        e.add(k, f, j),
                        this.reportIntersection(l, k, a, d, -1)
                    }
                },
                c.prototype[g.PLANE] = c.prototype.intersectPlane;
                var x = e.create(),
                y = e.create();
                c.prototype.intersectCircle = function(a, b, c, d) {
                    var f = this.from,
                    g = this.to,
                    h = a.radius,
                    i = Math.pow(g[0] - f[0], 2) + Math.pow(g[1] - f[1], 2),
                    j = 2 * ((g[0] - f[0]) * (f[0] - c[0]) + (g[1] - f[1]) * (f[1] - c[1])),
                    k = Math.pow(f[0] - c[0], 2) + Math.pow(f[1] - c[1], 2) - Math.pow(h, 2),
                    l = Math.pow(j, 2) - 4 * i * k,
                    m = x,
                    n = y;
                    if (! (0 > l)) if (0 === l) e.lerp(m, f, g, l),
                    e.sub(n, m, c),
                    e.normalize(n, n),
                    this.reportIntersection(n, m, a, d, -1);
                    else {
                        var o = ( - j - Math.sqrt(l)) / (2 * i),
                        p = ( - j + Math.sqrt(l)) / (2 * i);
                        if (e.lerp(m, f, g, o), e.sub(n, m, c), e.normalize(n, n), this.reportIntersection(n, m, a, d, -1), this.result._shouldStop) return;
                        e.lerp(m, f, g, p),
                        e.sub(n, m, c),
                        e.normalize(n, n),
                        this.reportIntersection(n, m, a, d, -1)
                    }
                },
                c.prototype[g.CIRCLE] = c.prototype.intersectCircle,
                c.prototype.getAABB = function(a) {
                    var b = this.to,
                    c = this.from;
                    a.lowerBound[0] = Math.min(b[0], c[0]),
                    a.lowerBound[1] = Math.min(b[1], c[1]),
                    a.upperBound[0] = Math.max(b[0], c[0]),
                    a.upperBound[1] = Math.max(b[1], c[1])
                },
                c.prototype.reportIntersection = function(a, b, d, f, g) {
                    var h = this.from,
                    i = this.to,
                    j = e.distance(h, b),
                    k = this.result;
                    if (! (this.skipBackfaces && e.dot(a, this._direction) > 0)) switch (k.hitFaceIndex = "undefined" != typeof g ? g: -1, this.mode) {
                    case c.ALL:
                        this.hasHit = !0,
                        k.set(h, i, a, b, d, f, j),
                        k.hasHit = !0,
                        this.callback(k);
                        break;
                    case c.CLOSEST:
                        (j < k.distance || !k.hasHit) && (this.hasHit = !0, k.hasHit = !0, k.set(h, i, a, b, d, f, j));
                        break;
                    case c.ANY:
                        this.hasHit = !0,
                        k.hasHit = !0,
                        k.set(h, i, a, b, d, f, j),
                        k._shouldStop = !0
                    }
                };
                var z = e.create(),
                A = e.create()
            },
            {
                "../collision/AABB": 7,
                "../collision/RaycastResult": 13,
                "../math/vec2": 31,
                "../shapes/Shape": 45
            }],
            13 : [function(a, b) {
                function c() {
                    this.rayFromWorld = d.create(),
                    this.rayToWorld = d.create(),
                    this.hitNormalWorld = d.create(),
                    this.hitPointWorld = d.create(),
                    this.hasHit = !1,
                    this.shape = null,
                    this.body = null,
                    this.hitFaceIndex = -1,
                    this.distance = -1,
                    this._shouldStop = !1
                }
                var d = a("../math/vec2");
                b.exports = c,
                c.prototype.reset = function() {
                    d.set(this.rayFromWorld, 0, 0),
                    d.set(this.rayToWorld, 0, 0),
                    d.set(this.hitNormalWorld, 0, 0),
                    d.set(this.hitPointWorld, 0, 0),
                    this.hasHit = !1,
                    this.shape = null,
                    this.body = null,
                    this.hitFaceIndex = -1,
                    this.distance = -1,
                    this._shouldStop = !1
                },
                c.prototype.abort = function() {
                    this._shouldStop = !0
                },
                c.prototype.set = function(a, b, c, e, f, g, h) {
                    d.copy(this.rayFromWorld, a),
                    d.copy(this.rayToWorld, b),
                    d.copy(this.hitNormalWorld, c),
                    d.copy(this.hitPointWorld, e),
                    this.shape = f,
                    this.body = g,
                    this.distance = h
                }
            },
            {
                "../math/vec2": 31
            }],
            14 : [function(a, b) {
                function c() {
                    e.call(this, e.SAP),
                    this.axisList = [],
                    this.axisIndex = 0;
                    var a = this;
                    this._addBodyHandler = function(b) {
                        a.axisList.push(b.body)
                    },
                    this._removeBodyHandler = function(b) {
                        var c = a.axisList.indexOf(b.body); - 1 !== c && a.axisList.splice(c, 1)
                    }
                }
                var d = a("../utils/Utils"),
                e = a("../collision/Broadphase");
                b.exports = c,
                c.prototype = new e,
                c.prototype.constructor = c,
                c.prototype.setWorld = function(a) {
                    this.axisList.length = 0,
                    d.appendArray(this.axisList, a.bodies),
                    a.off("addBody", this._addBodyHandler).off("removeBody", this._removeBodyHandler),
                    a.on("addBody", this._addBodyHandler).on("removeBody", this._removeBodyHandler),
                    this.world = a
                },
                c.sortAxisList = function(a, b) {
                    b = 0 | b;
                    for (var c = 1,
                    d = a.length; d > c; c++) {
                        for (var e = a[c], f = c - 1; f >= 0 && !(a[f].aabb.lowerBound[b] <= e.aabb.lowerBound[b]); f--) a[f + 1] = a[f];
                        a[f + 1] = e
                    }
                    return a
                },
                c.prototype.sortList = function() {
                    var a = this.axisList,
                    b = this.axisIndex;
                    c.sortAxisList(a, b)
                },
                c.prototype.getCollisionPairs = function() {
                    var a = this.axisList,
                    b = this.result,
                    c = this.axisIndex;
                    b.length = 0;
                    for (var d = a.length; d--;) {
                        var f = a[d];
                        f.aabbNeedsUpdate && f.updateAABB()
                    }
                    this.sortList();
                    for (var g = 0,
                    h = 0 | a.length; g !== h; g++) for (var i = a[g], j = g + 1; h > j; j++) {
                        var k = a[j],
                        l = k.aabb.lowerBound[c] <= i.aabb.upperBound[c];
                        if (!l) break;
                        e.canCollide(i, k) && this.boundingVolumeCheck(i, k) && b.push(i, k)
                    }
                    return b
                },
                c.prototype.aabbQuery = function(a, b, c) {
                    c = c || [],
                    this.sortList();
                    var d = this.axisIndex,
                    e = "x";
                    1 === d && (e = "y"),
                    2 === d && (e = "z");
                    for (var f = this.axisList,
                    g = (b.lowerBound[e], b.upperBound[e], 0); g < f.length; g++) {
                        var h = f[g];
                        h.aabbNeedsUpdate && h.updateAABB(),
                        h.aabb.overlaps(b) && c.push(h)
                    }
                    return c
                }
            },
            {
                "../collision/Broadphase": 8,
                "../utils/Utils": 50
            }],
            15 : [function(a, b) {
                function c(a, b, c, e) {
                    this.type = c,
                    e = d.defaults(e, {
                        collideConnected: !0,
                        wakeUpBodies: !0
                    }),
                    this.equations = [],
                    this.bodyA = a,
                    this.bodyB = b,
                    this.collideConnected = e.collideConnected,
                    e.wakeUpBodies && (a && a.wakeUp(), b && b.wakeUp())
                }
                b.exports = c;
                var d = a("../utils/Utils");
                c.prototype.update = function() {
                    throw new Error("method update() not implmemented in this Constraint subclass!")
                },
                c.DISTANCE = 1,
                c.GEAR = 2,
                c.LOCK = 3,
                c.PRISMATIC = 4,
                c.REVOLUTE = 5,
                c.prototype.setStiffness = function(a) {
                    for (var b = this.equations,
                    c = 0; c !== b.length; c++) {
                        var d = b[c];
                        d.stiffness = a,
                        d.needsUpdate = !0
                    }
                },
                c.prototype.setRelaxation = function(a) {
                    for (var b = this.equations,
                    c = 0; c !== b.length; c++) {
                        var d = b[c];
                        d.relaxation = a,
                        d.needsUpdate = !0
                    }
                }
            },
            {
                "../utils/Utils": 50
            }],
            16 : [function(a, b) {
                function c(a, b, c) {
                    c = g.defaults(c, {
                        localAnchorA: [0, 0],
                        localAnchorB: [0, 0]
                    }),
                    d.call(this, a, b, d.DISTANCE, c),
                    this.localAnchorA = f.fromValues(c.localAnchorA[0], c.localAnchorA[1]),
                    this.localAnchorB = f.fromValues(c.localAnchorB[0], c.localAnchorB[1]);
                    var h = this.localAnchorA,
                    i = this.localAnchorB;
                    if (this.distance = 0, "number" == typeof c.distance) this.distance = c.distance;
                    else {
                        var j = f.create(),
                        k = f.create(),
                        l = f.create();
                        f.rotate(j, h, a.angle),
                        f.rotate(k, i, b.angle),
                        f.add(l, b.position, k),
                        f.sub(l, l, j),
                        f.sub(l, l, a.position),
                        this.distance = f.length(l)
                    }
                    var m;
                    m = "undefined" == typeof c.maxForce ? Number.MAX_VALUE: c.maxForce;
                    var n = new e(a, b, -m, m);
                    this.equations = [n],
                    this.maxForce = m;
                    var l = f.create(),
                    o = f.create(),
                    p = f.create(),
                    q = this;
                    n.computeGq = function() {
                        var a = this.bodyA,
                        b = this.bodyB,
                        c = a.position,
                        d = b.position;
                        return f.rotate(o, h, a.angle),
                        f.rotate(p, i, b.angle),
                        f.add(l, d, p),
                        f.sub(l, l, o),
                        f.sub(l, l, c),
                        f.length(l) - q.distance
                    },
                    this.setMaxForce(m),
                    this.upperLimitEnabled = !1,
                    this.upperLimit = 1,
                    this.lowerLimitEnabled = !1,
                    this.lowerLimit = 0,
                    this.position = 0
                }
                var d = a("./Constraint"),
                e = a("../equations/Equation"),
                f = a("../math/vec2"),
                g = a("../utils/Utils");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c;
                var h = f.create(),
                i = f.create(),
                j = f.create();
                c.prototype.update = function() {
                    var a = this.equations[0],
                    b = this.bodyA,
                    c = this.bodyB,
                    d = (this.distance, b.position),
                    e = c.position,
                    g = this.equations[0],
                    k = a.G;
                    f.rotate(i, this.localAnchorA, b.angle),
                    f.rotate(j, this.localAnchorB, c.angle),
                    f.add(h, e, j),
                    f.sub(h, h, i),
                    f.sub(h, h, d),
                    this.position = f.length(h);
                    var l = !1;
                    if (this.upperLimitEnabled && this.position > this.upperLimit && (g.maxForce = 0, g.minForce = -this.maxForce, this.distance = this.upperLimit, l = !0), this.lowerLimitEnabled && this.position < this.lowerLimit && (g.maxForce = this.maxForce, g.minForce = 0, this.distance = this.lowerLimit, l = !0), (this.lowerLimitEnabled || this.upperLimitEnabled) && !l) return void(g.enabled = !1);
                    g.enabled = !0,
                    f.normalize(h, h);
                    var m = f.crossLength(i, h),
                    n = f.crossLength(j, h);
                    k[0] = -h[0],
                    k[1] = -h[1],
                    k[2] = -m,
                    k[3] = h[0],
                    k[4] = h[1],
                    k[5] = n
                },
                c.prototype.setMaxForce = function(a) {
                    var b = this.equations[0];
                    b.minForce = -a,
                    b.maxForce = a
                },
                c.prototype.getMaxForce = function() {
                    var a = this.equations[0];
                    return a.maxForce
                }
            },
            {
                "../equations/Equation": 23,
                "../math/vec2": 31,
                "../utils/Utils": 50,
                "./Constraint": 15
            }],
            17 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, d.GEAR, c),
                    this.ratio = "number" == typeof c.ratio ? c.ratio: 1,
                    this.angle = "number" == typeof c.angle ? c.angle: b.angle - this.ratio * a.angle,
                    c.angle = this.angle,
                    c.ratio = this.ratio,
                    this.equations = [new e(a, b, c)],
                    "number" == typeof c.maxTorque && this.setMaxTorque(c.maxTorque)
                }
                var d = a("./Constraint"),
                e = (a("../equations/Equation"), a("../equations/AngleLockEquation"));
                a("../math/vec2"),
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.update = function() {
                    var a = this.equations[0];
                    a.ratio !== this.ratio && a.setRatio(this.ratio),
                    a.angle = this.angle
                },
                c.prototype.setMaxTorque = function(a) {
                    this.equations[0].setMaxTorque(a)
                },
                c.prototype.getMaxTorque = function() {
                    return this.equations[0].maxForce
                }
            },
            {
                "../equations/AngleLockEquation": 21,
                "../equations/Equation": 23,
                "../math/vec2": 31,
                "./Constraint": 15
            }],
            18 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, d.LOCK, c);
                    var g = "undefined" == typeof c.maxForce ? Number.MAX_VALUE: c.maxForce,
                    h = (c.localAngleB || 0, new f(a, b, -g, g)),
                    i = new f(a, b, -g, g),
                    j = new f(a, b, -g, g),
                    k = e.create(),
                    l = e.create(),
                    m = this;
                    h.computeGq = function() {
                        return e.rotate(k, m.localOffsetB, a.angle),
                        e.sub(l, b.position, a.position),
                        e.sub(l, l, k),
                        l[0]
                    },
                    i.computeGq = function() {
                        return e.rotate(k, m.localOffsetB, a.angle),
                        e.sub(l, b.position, a.position),
                        e.sub(l, l, k),
                        l[1]
                    };
                    var n = e.create(),
                    o = e.create();
                    j.computeGq = function() {
                        return e.rotate(n, m.localOffsetB, b.angle - m.localAngleB),
                        e.scale(n, n, -1),
                        e.sub(l, a.position, b.position),
                        e.add(l, l, n),
                        e.rotate(o, n, -Math.PI / 2),
                        e.normalize(o, o),
                        e.dot(l, o)
                    },
                    this.localOffsetB = e.create(),
                    c.localOffsetB ? e.copy(this.localOffsetB, c.localOffsetB) : (e.sub(this.localOffsetB, b.position, a.position), e.rotate(this.localOffsetB, this.localOffsetB, -a.angle)),
                    this.localAngleB = 0,
                    this.localAngleB = "number" == typeof c.localAngleB ? c.localAngleB: b.angle - a.angle,
                    this.equations.push(h, i, j),
                    this.setMaxForce(g)
                }
                var d = a("./Constraint"),
                e = a("../math/vec2"),
                f = a("../equations/Equation");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.setMaxForce = function(a) {
                    for (var b = this.equations,
                    c = 0; c < this.equations.length; c++) b[c].maxForce = a,
                    b[c].minForce = -a
                },
                c.prototype.getMaxForce = function() {
                    return this.equations[0].maxForce
                };
                var g = e.create(),
                h = e.create(),
                i = e.create(),
                j = e.fromValues(1, 0),
                k = e.fromValues(0, 1);
                c.prototype.update = function() {
                    var a = this.equations[0],
                    b = this.equations[1],
                    c = this.equations[2],
                    d = this.bodyA,
                    f = this.bodyB;
                    e.rotate(g, this.localOffsetB, d.angle),
                    e.rotate(h, this.localOffsetB, f.angle - this.localAngleB),
                    e.scale(h, h, -1),
                    e.rotate(i, h, Math.PI / 2),
                    e.normalize(i, i),
                    a.G[0] = -1,
                    a.G[1] = 0,
                    a.G[2] = -e.crossLength(g, j),
                    a.G[3] = 1,
                    b.G[0] = 0,
                    b.G[1] = -1,
                    b.G[2] = -e.crossLength(g, k),
                    b.G[4] = 1,
                    c.G[0] = -i[0],
                    c.G[1] = -i[1],
                    c.G[3] = i[0],
                    c.G[4] = i[1],
                    c.G[5] = e.crossLength(h, i)
                }
            },
            {
                "../equations/Equation": 23,
                "../math/vec2": 31,
                "./Constraint": 15
            }],
            19 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, d.PRISMATIC, c);
                    var i = g.fromValues(0, 0),
                    j = g.fromValues(1, 0),
                    k = g.fromValues(0, 0);
                    c.localAnchorA && g.copy(i, c.localAnchorA),
                    c.localAxisA && g.copy(j, c.localAxisA),
                    c.localAnchorB && g.copy(k, c.localAnchorB),
                    this.localAnchorA = i,
                    this.localAnchorB = k,
                    this.localAxisA = j;
                    var l = this.maxForce = "undefined" != typeof c.maxForce ? c.maxForce: Number.MAX_VALUE,
                    m = new f(a, b, -l, l),
                    n = new g.create,
                    o = new g.create,
                    p = new g.create,
                    q = new g.create;
                    if (m.computeGq = function() {
                        return g.dot(p, q)
                    },
                    m.updateJacobian = function() {
                        var c = this.G,
                        d = a.position,
                        e = b.position;
                        g.rotate(n, i, a.angle),
                        g.rotate(o, k, b.angle),
                        g.add(p, e, o),
                        g.sub(p, p, d),
                        g.sub(p, p, n),
                        g.rotate(q, j, a.angle + Math.PI / 2),
                        c[0] = -q[0],
                        c[1] = -q[1],
                        c[2] = -g.crossLength(n, q) + g.crossLength(q, p),
                        c[3] = q[0],
                        c[4] = q[1],
                        c[5] = g.crossLength(o, q)
                    },
                    this.equations.push(m), !c.disableRotationalLock) {
                        var r = new h(a, b, -l, l);
                        this.equations.push(r)
                    }
                    this.position = 0,
                    this.velocity = 0,
                    this.lowerLimitEnabled = "undefined" != typeof c.lowerLimit ? !0 : !1,
                    this.upperLimitEnabled = "undefined" != typeof c.upperLimit ? !0 : !1,
                    this.lowerLimit = "undefined" != typeof c.lowerLimit ? c.lowerLimit: 0,
                    this.upperLimit = "undefined" != typeof c.upperLimit ? c.upperLimit: 1,
                    this.upperLimitEquation = new e(a, b),
                    this.lowerLimitEquation = new e(a, b),
                    this.upperLimitEquation.minForce = this.lowerLimitEquation.minForce = 0,
                    this.upperLimitEquation.maxForce = this.lowerLimitEquation.maxForce = l,
                    this.motorEquation = new f(a, b),
                    this.motorEnabled = !1,
                    this.motorSpeed = 0;
                    var s = this,
                    t = this.motorEquation;
                    t.computeGW,
                    t.computeGq = function() {
                        return 0
                    },
                    t.computeGW = function() {
                        var a = this.G,
                        b = this.bodyA,
                        c = this.bodyB,
                        d = b.velocity,
                        e = c.velocity,
                        f = b.angularVelocity,
                        g = c.angularVelocity;
                        return this.gmult(a, d, f, e, g) + s.motorSpeed
                    }
                }
                var d = a("./Constraint"),
                e = a("../equations/ContactEquation"),
                f = a("../equations/Equation"),
                g = a("../math/vec2"),
                h = a("../equations/RotationalLockEquation");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c;
                var i = g.create(),
                j = g.create(),
                k = g.create(),
                l = g.create(),
                m = g.create(),
                n = g.create();
                c.prototype.update = function() {
                    var a = this.equations,
                    b = a[0],
                    c = this.upperLimit,
                    d = this.lowerLimit,
                    e = this.upperLimitEquation,
                    f = this.lowerLimitEquation,
                    h = this.bodyA,
                    o = this.bodyB,
                    p = this.localAxisA,
                    q = this.localAnchorA,
                    r = this.localAnchorB;
                    b.updateJacobian(),
                    g.rotate(i, p, h.angle),
                    g.rotate(l, q, h.angle),
                    g.add(j, l, h.position),
                    g.rotate(m, r, o.angle),
                    g.add(k, m, o.position);
                    var s = this.position = g.dot(k, i) - g.dot(j, i);
                    if (this.motorEnabled) {
                        var t = this.motorEquation.G;
                        t[0] = i[0],
                        t[1] = i[1],
                        t[2] = g.crossLength(i, m),
                        t[3] = -i[0],
                        t[4] = -i[1],
                        t[5] = -g.crossLength(i, l)
                    }
                    if (this.upperLimitEnabled && s > c) g.scale(e.normalA, i, -1),
                    g.sub(e.contactPointA, j, h.position),
                    g.sub(e.contactPointB, k, o.position),
                    g.scale(n, i, c),
                    g.add(e.contactPointA, e.contactPointA, n),
                    -1 === a.indexOf(e) && a.push(e);
                    else {
                        var u = a.indexOf(e); - 1 !== u && a.splice(u, 1)
                    }
                    if (this.lowerLimitEnabled && d > s) g.scale(f.normalA, i, 1),
                    g.sub(f.contactPointA, j, h.position),
                    g.sub(f.contactPointB, k, o.position),
                    g.scale(n, i, d),
                    g.sub(f.contactPointB, f.contactPointB, n),
                    -1 === a.indexOf(f) && a.push(f);
                    else {
                        var u = a.indexOf(f); - 1 !== u && a.splice(u, 1)
                    }
                },
                c.prototype.enableMotor = function() {
                    this.motorEnabled || (this.equations.push(this.motorEquation), this.motorEnabled = !0)
                },
                c.prototype.disableMotor = function() {
                    if (this.motorEnabled) {
                        var a = this.equations.indexOf(this.motorEquation);
                        this.equations.splice(a, 1),
                        this.motorEnabled = !1
                    }
                },
                c.prototype.setLimits = function(a, b) {
                    "number" == typeof a ? (this.lowerLimit = a, this.lowerLimitEnabled = !0) : (this.lowerLimit = a, this.lowerLimitEnabled = !1),
                    "number" == typeof b ? (this.upperLimit = b, this.upperLimitEnabled = !0) : (this.upperLimit = b, this.upperLimitEnabled = !1)
                }
            },
            {
                "../equations/ContactEquation": 22,
                "../equations/Equation": 23,
                "../equations/RotationalLockEquation": 25,
                "../math/vec2": 31,
                "./Constraint": 15
            }],
            20 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, d.REVOLUTE, c);
                    var n = this.maxForce = "undefined" != typeof c.maxForce ? c.maxForce: Number.MAX_VALUE;
                    this.pivotA = h.create(),
                    this.pivotB = h.create(),
                    c.worldPivot ? (h.sub(this.pivotA, c.worldPivot, a.position), h.sub(this.pivotB, c.worldPivot, b.position), h.rotate(this.pivotA, this.pivotA, -a.angle), h.rotate(this.pivotB, this.pivotB, -b.angle)) : (h.copy(this.pivotA, c.localPivotA), h.copy(this.pivotB, c.localPivotB));
                    var o = this.equations = [new e(a, b, -n, n), new e(a, b, -n, n)],
                    p = o[0],
                    q = o[1],
                    r = this;
                    p.computeGq = function() {
                        return h.rotate(i, r.pivotA, a.angle),
                        h.rotate(j, r.pivotB, b.angle),
                        h.add(m, b.position, j),
                        h.sub(m, m, a.position),
                        h.sub(m, m, i),
                        h.dot(m, k)
                    },
                    q.computeGq = function() {
                        return h.rotate(i, r.pivotA, a.angle),
                        h.rotate(j, r.pivotB, b.angle),
                        h.add(m, b.position, j),
                        h.sub(m, m, a.position),
                        h.sub(m, m, i),
                        h.dot(m, l)
                    },
                    q.minForce = p.minForce = -n,
                    q.maxForce = p.maxForce = n,
                    this.motorEquation = new f(a, b),
                    this.motorEnabled = !1,
                    this.angle = 0,
                    this.lowerLimitEnabled = !1,
                    this.upperLimitEnabled = !1,
                    this.lowerLimit = 0,
                    this.upperLimit = 0,
                    this.upperLimitEquation = new g(a, b),
                    this.lowerLimitEquation = new g(a, b),
                    this.upperLimitEquation.minForce = 0,
                    this.lowerLimitEquation.maxForce = 0
                }
                var d = a("./Constraint"),
                e = a("../equations/Equation"),
                f = a("../equations/RotationalVelocityEquation"),
                g = a("../equations/RotationalLockEquation"),
                h = a("../math/vec2");
                b.exports = c;
                var i = h.create(),
                j = h.create(),
                k = h.fromValues(1, 0),
                l = h.fromValues(0, 1),
                m = h.create();
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.setLimits = function(a, b) {
                    "number" == typeof a ? (this.lowerLimit = a, this.lowerLimitEnabled = !0) : (this.lowerLimit = a, this.lowerLimitEnabled = !1),
                    "number" == typeof b ? (this.upperLimit = b, this.upperLimitEnabled = !0) : (this.upperLimit = b, this.upperLimitEnabled = !1)
                },
                c.prototype.update = function() {
                    var a = this.bodyA,
                    b = this.bodyB,
                    c = this.pivotA,
                    d = this.pivotB,
                    e = this.equations,
                    f = (e[0], e[1], e[0]),
                    g = e[1],
                    m = this.upperLimit,
                    n = this.lowerLimit,
                    o = this.upperLimitEquation,
                    p = this.lowerLimitEquation,
                    q = this.angle = b.angle - a.angle;
                    if (this.upperLimitEnabled && q > m) o.angle = m,
                    -1 === e.indexOf(o) && e.push(o);
                    else {
                        var r = e.indexOf(o); - 1 !== r && e.splice(r, 1)
                    }
                    if (this.lowerLimitEnabled && n > q) p.angle = n,
                    -1 === e.indexOf(p) && e.push(p);
                    else {
                        var r = e.indexOf(p); - 1 !== r && e.splice(r, 1)
                    }
                    h.rotate(i, c, a.angle),
                    h.rotate(j, d, b.angle),
                    f.G[0] = -1,
                    f.G[1] = 0,
                    f.G[2] = -h.crossLength(i, k),
                    f.G[3] = 1,
                    f.G[4] = 0,
                    f.G[5] = h.crossLength(j, k),
                    g.G[0] = 0,
                    g.G[1] = -1,
                    g.G[2] = -h.crossLength(i, l),
                    g.G[3] = 0,
                    g.G[4] = 1,
                    g.G[5] = h.crossLength(j, l)
                },
                c.prototype.enableMotor = function() {
                    this.motorEnabled || (this.equations.push(this.motorEquation), this.motorEnabled = !0)
                },
                c.prototype.disableMotor = function() {
                    if (this.motorEnabled) {
                        var a = this.equations.indexOf(this.motorEquation);
                        this.equations.splice(a, 1),
                        this.motorEnabled = !1
                    }
                },
                c.prototype.motorIsEnabled = function() {
                    return !! this.motorEnabled
                },
                c.prototype.setMotorSpeed = function(a) {
                    if (this.motorEnabled) {
                        var b = this.equations.indexOf(this.motorEquation);
                        this.equations[b].relativeVelocity = a
                    }
                },
                c.prototype.getMotorSpeed = function() {
                    return this.motorEnabled ? this.motorEquation.relativeVelocity: !1
                }
            },
            {
                "../equations/Equation": 23,
                "../equations/RotationalLockEquation": 25,
                "../equations/RotationalVelocityEquation": 26,
                "../math/vec2": 31,
                "./Constraint": 15
            }],
            21 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, -Number.MAX_VALUE, Number.MAX_VALUE),
                    this.angle = c.angle || 0,
                    this.ratio = "number" == typeof c.ratio ? c.ratio: 1,
                    this.setRatio(this.ratio)
                }
                var d = a("./Equation");
                a("../math/vec2"),
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeGq = function() {
                    return this.ratio * this.bodyA.angle - this.bodyB.angle + this.angle
                },
                c.prototype.setRatio = function(a) {
                    var b = this.G;
                    b[2] = a,
                    b[5] = -1,
                    this.ratio = a
                },
                c.prototype.setMaxTorque = function(a) {
                    this.maxForce = a,
                    this.minForce = -a
                }
            },
            {
                "../math/vec2": 31,
                "./Equation": 23
            }],
            22 : [function(a, b) {
                function c(a, b) {
                    d.call(this, a, b, 0, Number.MAX_VALUE),
                    this.contactPointA = e.create(),
                    this.penetrationVec = e.create(),
                    this.contactPointB = e.create(),
                    this.normalA = e.create(),
                    this.restitution = 0,
                    this.firstImpact = !1,
                    this.shapeA = null,
                    this.shapeB = null
                }
                var d = a("./Equation"),
                e = a("../math/vec2");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeB = function(a, b, c) {
                    var d = this.bodyA,
                    f = this.bodyB,
                    g = this.contactPointA,
                    h = this.contactPointB,
                    i = d.position,
                    j = f.position,
                    k = this.penetrationVec,
                    l = this.normalA,
                    m = this.G,
                    n = e.crossLength(g, l),
                    o = e.crossLength(h, l);
                    m[0] = -l[0],
                    m[1] = -l[1],
                    m[2] = -n,
                    m[3] = l[0],
                    m[4] = l[1],
                    m[5] = o,
                    e.add(k, j, h),
                    e.sub(k, k, i),
                    e.sub(k, k, g);
                    var p, q;
                    this.firstImpact && 0 !== this.restitution ? (q = 0, p = 1 / b * (1 + this.restitution) * this.computeGW()) : (q = e.dot(l, k) + this.offset, p = this.computeGW());
                    var r = this.computeGiMf(),
                    s = -q * a - p * b - c * r;
                    return s
                }
            },
            {
                "../math/vec2": 31,
                "./Equation": 23
            }],
            23 : [function(a, b) {
                function c(a, b, d, f) {
                    this.minForce = "undefined" == typeof d ? -Number.MAX_VALUE: d,
                    this.maxForce = "undefined" == typeof f ? Number.MAX_VALUE: f,
                    this.bodyA = a,
                    this.bodyB = b,
                    this.stiffness = c.DEFAULT_STIFFNESS,
                    this.relaxation = c.DEFAULT_RELAXATION,
                    this.G = new e.ARRAY_TYPE(6);
                    for (var g = 0; 6 > g; g++) this.G[g] = 0;
                    this.offset = 0,
                    this.a = 0,
                    this.b = 0,
                    this.epsilon = 0,
                    this.timeStep = 1 / 60,
                    this.needsUpdate = !0,
                    this.multiplier = 0,
                    this.relativeVelocity = 0,
                    this.enabled = !0
                }
                b.exports = c;
                var d = a("../math/vec2"),
                e = a("../utils/Utils");
                a("../objects/Body"),
                c.prototype.constructor = c,
                c.DEFAULT_STIFFNESS = 1e6,
                c.DEFAULT_RELAXATION = 4,
                c.prototype.update = function() {
                    var a = this.stiffness,
                    b = this.relaxation,
                    c = this.timeStep;
                    this.a = 4 / (c * (1 + 4 * b)),
                    this.b = 4 * b / (1 + 4 * b),
                    this.epsilon = 4 / (c * c * a * (1 + 4 * b)),
                    this.needsUpdate = !1
                },
                c.prototype.gmult = function(a, b, c, d, e) {
                    return a[0] * b[0] + a[1] * b[1] + a[2] * c + a[3] * d[0] + a[4] * d[1] + a[5] * e
                },
                c.prototype.computeB = function(a, b, c) {
                    var d = this.computeGW(),
                    e = this.computeGq(),
                    f = this.computeGiMf();
                    return - e * a - d * b - f * c
                };
                var f = d.create(),
                g = d.create();
                c.prototype.computeGq = function() {
                    var a = this.G,
                    b = this.bodyA,
                    c = this.bodyB,
                    d = (b.position, c.position, b.angle),
                    e = c.angle;
                    return this.gmult(a, f, d, g, e) + this.offset
                },
                c.prototype.computeGW = function() {
                    var a = this.G,
                    b = this.bodyA,
                    c = this.bodyB,
                    d = b.velocity,
                    e = c.velocity,
                    f = b.angularVelocity,
                    g = c.angularVelocity;
                    return this.gmult(a, d, f, e, g) + this.relativeVelocity
                },
                c.prototype.computeGWlambda = function() {
                    var a = this.G,
                    b = this.bodyA,
                    c = this.bodyB,
                    d = b.vlambda,
                    e = c.vlambda,
                    f = b.wlambda,
                    g = c.wlambda;
                    return this.gmult(a, d, f, e, g)
                };
                var h = d.create(),
                i = d.create();
                c.prototype.computeGiMf = function() {
                    var a = this.bodyA,
                    b = this.bodyB,
                    c = a.force,
                    e = a.angularForce,
                    f = b.force,
                    g = b.angularForce,
                    j = a.invMassSolve,
                    k = b.invMassSolve,
                    l = a.invInertiaSolve,
                    m = b.invInertiaSolve,
                    n = this.G;
                    return d.scale(h, c, j),
                    d.scale(i, f, k),
                    this.gmult(n, h, e * l, i, g * m)
                },
                c.prototype.computeGiMGt = function() {
                    var a = this.bodyA,
                    b = this.bodyB,
                    c = a.invMassSolve,
                    d = b.invMassSolve,
                    e = a.invInertiaSolve,
                    f = b.invInertiaSolve,
                    g = this.G;
                    return g[0] * g[0] * c + g[1] * g[1] * c + g[2] * g[2] * e + g[3] * g[3] * d + g[4] * g[4] * d + g[5] * g[5] * f
                };
                var j = d.create(),
                k = d.create(),
                l = d.create();
                d.create(),
                d.create(),
                d.create(),
                c.prototype.addToWlambda = function(a) {
                    var b = this.bodyA,
                    c = this.bodyB,
                    e = j,
                    f = k,
                    g = l,
                    h = b.invMassSolve,
                    i = c.invMassSolve,
                    m = b.invInertiaSolve,
                    n = c.invInertiaSolve,
                    o = this.G;
                    f[0] = o[0],
                    f[1] = o[1],
                    g[0] = o[3],
                    g[1] = o[4],
                    d.scale(e, f, h * a),
                    d.add(b.vlambda, b.vlambda, e),
                    b.wlambda += m * o[2] * a,
                    d.scale(e, g, i * a),
                    d.add(c.vlambda, c.vlambda, e),
                    c.wlambda += n * o[5] * a
                },
                c.prototype.computeInvC = function(a) {
                    return 1 / (this.computeGiMGt() + a)
                }
            },
            {
                "../math/vec2": 31,
                "../objects/Body": 32,
                "../utils/Utils": 50
            }],
            24 : [function(a, b) {
                function c(a, b, c) {
                    e.call(this, a, b, -c, c),
                    this.contactPointA = d.create(),
                    this.contactPointB = d.create(),
                    this.t = d.create(),
                    this.contactEquations = [],
                    this.shapeA = null,
                    this.shapeB = null,
                    this.frictionCoefficient = .3
                }
                var d = a("../math/vec2"),
                e = a("./Equation");
                a("../utils/Utils"),
                b.exports = c,
                c.prototype = new e,
                c.prototype.constructor = c,
                c.prototype.setSlipForce = function(a) {
                    this.maxForce = a,
                    this.minForce = -a
                },
                c.prototype.getSlipForce = function() {
                    return this.maxForce
                },
                c.prototype.computeB = function(a, b, c) {
                    var e = (this.bodyA, this.bodyB, this.contactPointA),
                    f = this.contactPointB,
                    g = this.t,
                    h = this.G;
                    h[0] = -g[0],
                    h[1] = -g[1],
                    h[2] = -d.crossLength(e, g),
                    h[3] = g[0],
                    h[4] = g[1],
                    h[5] = d.crossLength(f, g);
                    var i = this.computeGW(),
                    j = this.computeGiMf(),
                    k = -i * b - c * j;
                    return k
                }
            },
            {
                "../math/vec2": 31,
                "../utils/Utils": 50,
                "./Equation": 23
            }],
            25 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, -Number.MAX_VALUE, Number.MAX_VALUE),
                    this.angle = c.angle || 0;
                    var e = this.G;
                    e[2] = 1,
                    e[5] = -1
                }
                var d = a("./Equation"),
                e = a("../math/vec2");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c;
                var f = e.create(),
                g = e.create(),
                h = e.fromValues(1, 0),
                i = e.fromValues(0, 1);
                c.prototype.computeGq = function() {
                    return e.rotate(f, h, this.bodyA.angle + this.angle),
                    e.rotate(g, i, this.bodyB.angle),
                    e.dot(f, g)
                }
            },
            {
                "../math/vec2": 31,
                "./Equation": 23
            }],
            26 : [function(a, b) {
                function c(a, b) {
                    d.call(this, a, b, -Number.MAX_VALUE, Number.MAX_VALUE),
                    this.relativeVelocity = 1,
                    this.ratio = 1
                }
                var d = a("./Equation");
                a("../math/vec2"),
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeB = function(a, b, c) {
                    var d = this.G;
                    d[2] = -1,
                    d[5] = this.ratio;
                    var e = this.computeGiMf(),
                    f = this.computeGW(),
                    g = -f * b - c * e;
                    return g
                }
            },
            {
                "../math/vec2": 31,
                "./Equation": 23
            }],
            27 : [function(a, b) {
                var c = function() {};
                b.exports = c,
                c.prototype = {
                    constructor: c,
                    on: function(a, b, c) {
                        b.context = c || this,
                        void 0 === this._listeners && (this._listeners = {});
                        var d = this._listeners;
                        return void 0 === d[a] && (d[a] = []),
                        -1 === d[a].indexOf(b) && d[a].push(b),
                        this
                    },
                    has: function(a, b) {
                        if (void 0 === this._listeners) return ! 1;
                        var c = this._listeners;
                        if (b) {
                            if (void 0 !== c[a] && -1 !== c[a].indexOf(b)) return ! 0
                        } else if (void 0 !== c[a]) return ! 0;
                        return ! 1
                    },
                    off: function(a, b) {
                        if (void 0 === this._listeners) return this;
                        var c = this._listeners,
                        d = c[a].indexOf(b);
                        return - 1 !== d && c[a].splice(d, 1),
                        this
                    },
                    emit: function(a) {
                        if (void 0 === this._listeners) return this;
                        var b = this._listeners,
                        c = b[a.type];
                        if (void 0 !== c) {
                            a.target = this;
                            for (var d = 0,
                            e = c.length; e > d; d++) {
                                var f = c[d];
                                f.call(f.context, a)
                            }
                        }
                        return this
                    }
                }
            },
            {}],
            28 : [function(a, b) {
                function c(a, b, f) {
                    if (f = f || {},
                    !(a instanceof d && b instanceof d)) throw new Error("First two arguments must be Material instances.");
                    this.id = c.idCounter++,
                    this.materialA = a,
                    this.materialB = b,
                    this.friction = "undefined" != typeof f.friction ? Number(f.friction) : .3,
                    this.restitution = "undefined" != typeof f.restitution ? Number(f.restitution) : 0,
                    this.stiffness = "undefined" != typeof f.stiffness ? Number(f.stiffness) : e.DEFAULT_STIFFNESS,
                    this.relaxation = "undefined" != typeof f.relaxation ? Number(f.relaxation) : e.DEFAULT_RELAXATION,
                    this.frictionStiffness = "undefined" != typeof f.frictionStiffness ? Number(f.frictionStiffness) : e.DEFAULT_STIFFNESS,
                    this.frictionRelaxation = "undefined" != typeof f.frictionRelaxation ? Number(f.frictionRelaxation) : e.DEFAULT_RELAXATION,
                    this.surfaceVelocity = "undefined" != typeof f.surfaceVelocity ? Number(f.surfaceVelocity) : 0,
                    this.contactSkinSize = .005
                }
                var d = a("./Material"),
                e = a("../equations/Equation");
                b.exports = c,
                c.idCounter = 0
            },
            {
                "../equations/Equation": 23,
                "./Material": 29
            }],
            29 : [function(a, b) {
                function c(a) {
                    this.id = a || c.idCounter++
                }
                b.exports = c,
                c.idCounter = 0
            },
            {}],
            30 : [function(a, b) {
                var c = {};
                c.GetArea = function(a) {
                    if (a.length < 6) return 0;
                    for (var b = a.length - 2,
                    c = 0,
                    d = 0; b > d; d += 2) c += (a[d + 2] - a[d]) * (a[d + 1] + a[d + 3]);
                    return c += (a[0] - a[b]) * (a[b + 1] + a[1]),
                    .5 * -c
                },
                c.Triangulate = function(a) {
                    var b = a.length >> 1;
                    if (3 > b) return [];
                    for (var d = [], e = [], f = 0; b > f; f++) e.push(f);
                    for (var f = 0,
                    g = b; g > 3;) {
                        var h = e[(f + 0) % g],
                        i = e[(f + 1) % g],
                        j = e[(f + 2) % g],
                        k = a[2 * h],
                        l = a[2 * h + 1],
                        m = a[2 * i],
                        n = a[2 * i + 1],
                        o = a[2 * j],
                        p = a[2 * j + 1],
                        q = !1;
                        if (c._convex(k, l, m, n, o, p)) {
                            q = !0;
                            for (var r = 0; g > r; r++) {
                                var s = e[r];
                                if (s != h && s != i && s != j && c._PointInTriangle(a[2 * s], a[2 * s + 1], k, l, m, n, o, p)) {
                                    q = !1;
                                    break
                                }
                            }
                        }
                        if (q) d.push(h, i, j),
                        e.splice((f + 1) % g, 1),
                        g--,
                        f = 0;
                        else if (f++>3 * g) break
                    }
                    return d.push(e[0], e[1], e[2]),
                    d
                },
                c._PointInTriangle = function(a, b, c, d, e, f, g, h) {
                    var i = g - c,
                    j = h - d,
                    k = e - c,
                    l = f - d,
                    m = a - c,
                    n = b - d,
                    o = i * i + j * j,
                    p = i * k + j * l,
                    q = i * m + j * n,
                    r = k * k + l * l,
                    s = k * m + l * n,
                    t = 1 / (o * r - p * p),
                    u = (r * q - p * s) * t,
                    v = (o * s - p * q) * t;
                    return u >= 0 && v >= 0 && 1 > u + v
                },
                c._convex = function(a, b, c, d, e, f) {
                    return (b - d) * (e - c) + (c - a) * (f - d) >= 0
                },
                b.exports = c
            },
            {}],
            31 : [function(a, b) {
                var c = b.exports = {},
                d = a("../utils/Utils");
                c.crossLength = function(a, b) {
                    return a[0] * b[1] - a[1] * b[0]
                },
                c.crossVZ = function(a, b, d) {
                    return c.rotate(a, b, -Math.PI / 2),
                    c.scale(a, a, d),
                    a
                },
                c.crossZV = function(a, b, d) {
                    return c.rotate(a, d, Math.PI / 2),
                    c.scale(a, a, b),
                    a
                },
                c.rotate = function(a, b, c) {
                    if (0 !== c) {
                        var d = Math.cos(c),
                        e = Math.sin(c),
                        f = b[0],
                        g = b[1];
                        a[0] = d * f - e * g,
                        a[1] = e * f + d * g
                    } else a[0] = b[0],
                    a[1] = b[1]
                },
                c.rotate90cw = function(a, b) {
                    var c = b[0],
                    d = b[1];
                    a[0] = d,
                    a[1] = -c
                },
                c.toLocalFrame = function(a, b, d, e) {
                    c.copy(a, b),
                    c.sub(a, a, d),
                    c.rotate(a, a, -e)
                },
                c.toGlobalFrame = function(a, b, d, e) {
                    c.copy(a, b),
                    c.rotate(a, a, e),
                    c.add(a, a, d)
                },
                c.centroid = function(a, b, d, e) {
                    return c.add(a, b, d),
                    c.add(a, a, e),
                    c.scale(a, a, 1 / 3),
                    a
                },
                c.create = function() {
                    var a = new d.ARRAY_TYPE(2);
                    return a[0] = 0,
                    a[1] = 0,
                    a
                },
                c.clone = function(a) {
                    var b = new d.ARRAY_TYPE(2);
                    return b[0] = a[0],
                    b[1] = a[1],
                    b
                },
                c.fromValues = function(a, b) {
                    var c = new d.ARRAY_TYPE(2);
                    return c[0] = a,
                    c[1] = b,
                    c
                },
                c.copy = function(a, b) {
                    return a[0] = b[0],
                    a[1] = b[1],
                    a
                },
                c.set = function(a, b, c) {
                    return a[0] = b,
                    a[1] = c,
                    a
                },
                c.add = function(a, b, c) {
                    return a[0] = b[0] + c[0],
                    a[1] = b[1] + c[1],
                    a
                },
                c.subtract = function(a, b, c) {
                    return a[0] = b[0] - c[0],
                    a[1] = b[1] - c[1],
                    a
                },
                c.sub = c.subtract,
                c.multiply = function(a, b, c) {
                    return a[0] = b[0] * c[0],
                    a[1] = b[1] * c[1],
                    a
                },
                c.mul = c.multiply,
                c.divide = function(a, b, c) {
                    return a[0] = b[0] / c[0],
                    a[1] = b[1] / c[1],
                    a
                },
                c.div = c.divide,
                c.scale = function(a, b, c) {
                    return a[0] = b[0] * c,
                    a[1] = b[1] * c,
                    a
                },
                c.distance = function(a, b) {
                    var c = b[0] - a[0],
                    d = b[1] - a[1];
                    return Math.sqrt(c * c + d * d)
                },
                c.dist = c.distance,
                c.squaredDistance = function(a, b) {
                    var c = b[0] - a[0],
                    d = b[1] - a[1];
                    return c * c + d * d
                },
                c.sqrDist = c.squaredDistance,
                c.length = function(a) {
                    var b = a[0],
                    c = a[1];
                    return Math.sqrt(b * b + c * c)
                },
                c.len = c.length,
                c.squaredLength = function(a) {
                    var b = a[0],
                    c = a[1];
                    return b * b + c * c
                },
                c.sqrLen = c.squaredLength,
                c.negate = function(a, b) {
                    return a[0] = -b[0],
                    a[1] = -b[1],
                    a
                },
                c.normalize = function(a, b) {
                    var c = b[0],
                    d = b[1],
                    e = c * c + d * d;
                    return e > 0 && (e = 1 / Math.sqrt(e), a[0] = b[0] * e, a[1] = b[1] * e),
                    a
                },
                c.dot = function(a, b) {
                    return a[0] * b[0] + a[1] * b[1]
                },
                c.str = function(a) {
                    return "vec2(" + a[0] + ", " + a[1] + ")"
                },
                c.lerp = function(a, b, c, d) {
                    var e = b[0],
                    f = b[1];
                    return a[0] = e + d * (c[0] - e),
                    a[1] = f + d * (c[1] - f),
                    a
                }
            },
            {
                "../utils/Utils": 50
            }],
            32 : [function(a, b) {
                function c(a) {
                    a = a || {},
                    h.call(this),
                    this.id = ++c._idCounter,
                    this.world = null,
                    this.shapes = [],
                    this.shapeOffsets = [],
                    this.shapeAngles = [],
                    this.mass = a.mass || 0,
                    this.invMass = 0,
                    this.inertia = 0,
                    this.invInertia = 0,
                    this.invMassSolve = 0,
                    this.invInertiaSolve = 0,
                    this.fixedRotation = !!a.fixedRotation,
                    this.position = d.fromValues(0, 0),
                    a.position && d.copy(this.position, a.position),
                    this.interpolatedPosition = d.fromValues(0, 0),
                    this.interpolatedAngle = 0,
                    this.previousPosition = d.fromValues(0, 0),
                    this.previousAngle = 0,
                    this.velocity = d.fromValues(0, 0),
                    a.velocity && d.copy(this.velocity, a.velocity),
                    this.vlambda = d.fromValues(0, 0),
                    this.wlambda = 0,
                    this.angle = a.angle || 0,
                    this.angularVelocity = a.angularVelocity || 0,
                    this.force = d.create(),
                    a.force && d.copy(this.force, a.force),
                    this.angularForce = a.angularForce || 0,
                    this.damping = "number" == typeof a.damping ? a.damping: .1,
                    this.angularDamping = "number" == typeof a.angularDamping ? a.angularDamping: .1,
                    this.type = c.STATIC,
                    this.type = "undefined" != typeof a.type ? a.type: a.mass ? c.DYNAMIC: c.STATIC,
                    this.boundingRadius = 0,
                    this.aabb = new g,
                    this.aabbNeedsUpdate = !0,
                    this.allowSleep = !0,
                    this.wantsToSleep = !1,
                    this.sleepState = c.AWAKE,
                    this.sleepSpeedLimit = .2,
                    this.sleepTimeLimit = 1,
                    this.gravityScale = 1,
                    this.collisionResponse = !0,
                    this.idleTime = 0,
                    this.timeLastSleepy = 0,
                    this.ccdSpeedThreshold = void 0 !== a.ccdSpeedThreshold ? a.ccdSpeedThreshold: -1,
                    this.ccdIterations = void 0 !== a.ccdIterations ? a.ccdIterations: 10,
                    this.concavePath = null,
                    this._wakeUpAfterNarrowphase = !1,
                    this.updateMassProperties()
                }
                var d = a("../math/vec2"),
                e = a("poly-decomp"),
                f = a("../shapes/Convex"),
                g = a("../collision/AABB"),
                h = a("../events/EventEmitter");
                b.exports = c,
                c.prototype = new h,
                c.prototype.constructor = c,
                c._idCounter = 0,
                c.prototype.updateSolveMassProperties = function() {
                    this.sleepState === c.SLEEPING || this.type === c.KINEMATIC ? (this.invMassSolve = 0, this.invInertiaSolve = 0) : (this.invMassSolve = this.invMass, this.invInertiaSolve = this.invInertia)
                },
                c.prototype.setDensity = function(a) {
                    var b = this.getArea();
                    this.mass = b * a,
                    this.updateMassProperties()
                },
                c.prototype.getArea = function() {
                    for (var a = 0,
                    b = 0; b < this.shapes.length; b++) a += this.shapes[b].area;
                    return a
                },
                c.prototype.getAABB = function() {
                    return this.aabbNeedsUpdate && this.updateAABB(),
                    this.aabb
                };
                var i = new g,
                j = d.create();
                c.prototype.updateAABB = function() {
                    for (var a = this.shapes,
                    b = this.shapeOffsets,
                    c = this.shapeAngles,
                    e = a.length,
                    f = j,
                    g = this.angle,
                    h = 0; h !== e; h++) {
                        var k = a[h],
                        l = c[h] + g;
                        d.rotate(f, b[h], g),
                        d.add(f, f, this.position),
                        k.computeAABB(i, f, l),
                        0 === h ? this.aabb.copy(i) : this.aabb.extend(i)
                    }
                    this.aabbNeedsUpdate = !1
                },
                c.prototype.updateBoundingRadius = function() {
                    for (var a = this.shapes,
                    b = this.shapeOffsets,
                    c = a.length,
                    e = 0,
                    f = 0; f !== c; f++) {
                        var g = a[f],
                        h = d.length(b[f]),
                        i = g.boundingRadius;
                        h + i > e && (e = h + i)
                    }
                    this.boundingRadius = e
                },
                c.prototype.addShape = function(a, b, c) {
                    c = c || 0,
                    b = b ? d.fromValues(b[0], b[1]) : d.fromValues(0, 0),
                    this.shapes.push(a),
                    this.shapeOffsets.push(b),
                    this.shapeAngles.push(c),
                    this.updateMassProperties(),
                    this.updateBoundingRadius(),
                    this.aabbNeedsUpdate = !0
                },
                c.prototype.removeShape = function(a) {
                    var b = this.shapes.indexOf(a);
                    return - 1 !== b ? (this.shapes.splice(b, 1), this.shapeOffsets.splice(b, 1), this.shapeAngles.splice(b, 1), this.aabbNeedsUpdate = !0, !0) : !1
                },
                c.prototype.updateMassProperties = function() {
                    if (this.type === c.STATIC || this.type === c.KINEMATIC) this.mass = Number.MAX_VALUE,
                    this.invMass = 0,
                    this.inertia = Number.MAX_VALUE,
                    this.invInertia = 0;
                    else {
                        var a = this.shapes,
                        b = a.length,
                        e = this.mass / b,
                        f = 0;
                        if (this.fixedRotation) this.inertia = Number.MAX_VALUE,
                        this.invInertia = 0;
                        else {
                            for (var g = 0; b > g; g++) {
                                var h = a[g],
                                i = d.squaredLength(this.shapeOffsets[g]),
                                j = h.computeMomentOfInertia(e);
                                f += j + e * i
                            }
                            this.inertia = f,
                            this.invInertia = f > 0 ? 1 / f: 0
                        }
                        this.invMass = 1 / this.mass
                    }
                };
                var k = d.create();
                c.prototype.applyForce = function(a, b) {
                    var c = k;
                    d.sub(c, b, this.position),
                    d.add(this.force, this.force, a);
                    var e = d.crossLength(c, a);
                    this.angularForce += e
                },
                c.prototype.toLocalFrame = function(a, b) {
                    d.toLocalFrame(a, b, this.position, this.angle)
                },
                c.prototype.toWorldFrame = function(a, b) {
                    d.toGlobalFrame(a, b, this.position, this.angle)
                },
                c.prototype.fromPolygon = function(a, b) {
                    b = b || {};
                    for (var c = this.shapes.length; c >= 0; --c) this.removeShape(this.shapes[c]);
                    var g = new e.Polygon;
                    if (g.vertices = a, g.makeCCW(), "number" == typeof b.removeCollinearPoints && g.removeCollinearPoints(b.removeCollinearPoints), "undefined" == typeof b.skipSimpleCheck && !g.isSimple()) return ! 1;
                    this.concavePath = g.vertices.slice(0);
                    for (var c = 0; c < this.concavePath.length; c++) {
                        var h = [0, 0];
                        d.copy(h, this.concavePath[c]),
                        this.concavePath[c] = h
                    }
                    var i;
                    i = b.optimalDecomp ? g.decomp() : g.quickDecomp();
                    for (var j = d.create(), c = 0; c !== i.length; c++) {
                        for (var k = new f(i[c].vertices), l = 0; l !== k.vertices.length; l++) {
                            var h = k.vertices[l];
                            d.sub(h, h, k.centerOfMass)
                        }
                        d.scale(j, k.centerOfMass, 1),
                        k.updateTriangles(),
                        k.updateCenterOfMass(),
                        k.updateBoundingRadius(),
                        this.addShape(k, j)
                    }
                    return this.adjustCenterOfMass(),
                    this.aabbNeedsUpdate = !0,
                    !0
                };
                var l = (d.fromValues(0, 0), d.fromValues(0, 0)),
                m = d.fromValues(0, 0),
                n = d.fromValues(0, 0);
                c.prototype.adjustCenterOfMass = function() {
                    var a = l,
                    b = m,
                    c = n,
                    e = 0;
                    d.set(b, 0, 0);
                    for (var f = 0; f !== this.shapes.length; f++) {
                        var g = this.shapes[f],
                        h = this.shapeOffsets[f];
                        d.scale(a, h, g.area),
                        d.add(b, b, a),
                        e += g.area
                    }
                    d.scale(c, b, 1 / e);
                    for (var f = 0; f !== this.shapes.length; f++) {
                        var g = this.shapes[f],
                        h = this.shapeOffsets[f];
                        h || (h = this.shapeOffsets[f] = d.create()),
                        d.sub(h, h, c)
                    }
                    d.add(this.position, this.position, c);
                    for (var f = 0; this.concavePath && f < this.concavePath.length; f++) d.sub(this.concavePath[f], this.concavePath[f], c);
                    this.updateMassProperties(),
                    this.updateBoundingRadius()
                },
                c.prototype.setZeroForce = function() {
                    d.set(this.force, 0, 0),
                    this.angularForce = 0
                },
                c.prototype.resetConstraintVelocity = function() {
                    var a = this,
                    b = a.vlambda;
                    d.set(b, 0, 0),
                    a.wlambda = 0
                },
                c.prototype.addConstraintVelocity = function() {
                    var a = this,
                    b = a.velocity;
                    d.add(b, b, a.vlambda),
                    a.angularVelocity += a.wlambda
                },
                c.prototype.applyDamping = function(a) {
                    if (this.type === c.DYNAMIC) {
                        var b = this.velocity;
                        d.scale(b, b, Math.pow(1 - this.damping, a)),
                        this.angularVelocity *= Math.pow(1 - this.angularDamping, a)
                    }
                },
                c.prototype.wakeUp = function() {
                    var a = this.sleepState;
                    this.sleepState = c.AWAKE,
                    this.idleTime = 0,
                    a !== c.AWAKE && this.emit(c.wakeUpEvent)
                },
                c.prototype.sleep = function() {
                    this.sleepState = c.SLEEPING,
                    this.angularVelocity = 0,
                    this.angularForce = 0,
                    d.set(this.velocity, 0, 0),
                    d.set(this.force, 0, 0),
                    this.emit(c.sleepEvent)
                },
                c.prototype.sleepTick = function(a, b, e) {
                    if (this.allowSleep && this.type !== c.SLEEPING) {
                        this.wantsToSleep = !1;
                        var f = (this.sleepState, d.squaredLength(this.velocity) + Math.pow(this.angularVelocity, 2)),
                        g = Math.pow(this.sleepSpeedLimit, 2);
                        f >= g ? (this.idleTime = 0, this.sleepState = c.AWAKE) : (this.idleTime += e, this.sleepState = c.SLEEPY),
                        this.idleTime > this.sleepTimeLimit && (b ? this.wantsToSleep = !0 : this.sleep())
                    }
                },
                c.prototype.getVelocityFromPosition = function(a, b) {
                    return a = a || d.create(),
                    d.sub(a, this.position, this.previousPosition),
                    d.scale(a, a, 1 / b),
                    a
                },
                c.prototype.getAngularVelocityFromPosition = function(a) {
                    return (this.angle - this.previousAngle) / a
                },
                c.prototype.overlaps = function(a) {
                    return this.world.overlapKeeper.bodiesAreOverlapping(this, a)
                };
                var o = d.create(),
                p = d.create();
                c.prototype.integrate = function(a) {
                    var b = this.invMass,
                    c = this.force,
                    e = this.position,
                    f = this.velocity;
                    d.copy(this.previousPosition, this.position),
                    this.previousAngle = this.angle,
                    this.fixedRotation || (this.angularVelocity += this.angularForce * this.invInertia * a),
                    d.scale(o, c, a * b),
                    d.add(f, o, f),
                    this.integrateToTimeOfImpact(a) || (d.scale(p, f, a), d.add(e, e, p), this.fixedRotation || (this.angle += this.angularVelocity * a)),
                    this.aabbNeedsUpdate = !0
                };
                var q = d.create(),
                r = d.create(),
                s = d.create(),
                t = d.create();
                c.prototype.integrateToTimeOfImpact = function(a) {
                    if (this.ccdSpeedThreshold < 0 || d.squaredLength(this.velocity) < Math.pow(this.ccdSpeedThreshold, 2)) return ! 1;
                    d.normalize(q, this.velocity),
                    d.scale(r, this.velocity, a),
                    d.add(r, r, this.position),
                    d.sub(s, r, this.position);
                    var b, c = this.angularVelocity * a,
                    e = d.length(s),
                    f = 1,
                    g = this;
                    if (this.world.raycastAll(this.position, r, {},
                    function(a) {
                        a.body !== g && (b = a.body, d.copy(r, a.hitPointWorld), d.sub(s, a.hitPointWorld, g.position), f = d.length(s) / e, a.abort())
                    }), !b) return ! 1;
                    var h = this.angle;
                    d.copy(t, this.position);
                    for (var i = 0,
                    j = 0,
                    k = 0,
                    l = f; l >= j && i < this.ccdIterations;) {
                        i++,
                        k = (l - j) / 2,
                        d.scale(p, s, f),
                        d.add(this.position, t, p),
                        this.angle = h + c * f,
                        this.updateAABB();
                        var m = this.aabb.overlaps(b.aabb) && this.world.narrowphase.bodiesOverlap(this, b);
                        m ? j = k: l = k
                    }
                    return f = k,
                    d.copy(this.position, t),
                    this.angle = h,
                    d.scale(p, s, f),
                    d.add(this.position, this.position, p),
                    this.fixedRotation || (this.angle += c * f),
                    !0
                },
                c.sleepyEvent = {
                    type: "sleepy"
                },
                c.sleepEvent = {
                    type: "sleep"
                },
                c.wakeUpEvent = {
                    type: "wakeup"
                },
                c.DYNAMIC = 1,
                c.STATIC = 2,
                c.KINEMATIC = 4,
                c.AWAKE = 0,
                c.SLEEPY = 1,
                c.SLEEPING = 2
            },
            {
                "../collision/AABB": 7,
                "../events/EventEmitter": 27,
                "../math/vec2": 31,
                "../shapes/Convex": 39,
                "poly-decomp": 5
            }],
            33 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    e.call(this, a, b, c),
                    this.localAnchorA = d.fromValues(0, 0),
                    this.localAnchorB = d.fromValues(0, 0),
                    c.localAnchorA && d.copy(this.localAnchorA, c.localAnchorA),
                    c.localAnchorB && d.copy(this.localAnchorB, c.localAnchorB),
                    c.worldAnchorA && this.setWorldAnchorA(c.worldAnchorA),
                    c.worldAnchorB && this.setWorldAnchorB(c.worldAnchorB);
                    var f = d.create(),
                    g = d.create();
                    this.getWorldAnchorA(f),
                    this.getWorldAnchorB(g);
                    var h = d.distance(f, g);
                    this.restLength = "number" == typeof c.restLength ? c.restLength: h
                }
                var d = a("../math/vec2"),
                e = a("./Spring");
                a("../utils/Utils"),
                b.exports = c,
                c.prototype = new e,
                c.prototype.constructor = c,
                c.prototype.setWorldAnchorA = function(a) {
                    this.bodyA.toLocalFrame(this.localAnchorA, a)
                },
                c.prototype.setWorldAnchorB = function(a) {
                    this.bodyB.toLocalFrame(this.localAnchorB, a)
                },
                c.prototype.getWorldAnchorA = function(a) {
                    this.bodyA.toWorldFrame(a, this.localAnchorA)
                },
                c.prototype.getWorldAnchorB = function(a) {
                    this.bodyB.toWorldFrame(a, this.localAnchorB)
                };
                var f = d.create(),
                g = d.create(),
                h = d.create(),
                i = d.create(),
                j = d.create(),
                k = d.create(),
                l = d.create(),
                m = d.create(),
                n = d.create();
                c.prototype.applyForce = function() {
                    var a = this.stiffness,
                    b = this.damping,
                    c = this.restLength,
                    e = this.bodyA,
                    o = this.bodyB,
                    p = f,
                    q = g,
                    r = h,
                    s = i,
                    t = n,
                    u = j,
                    v = k,
                    w = l,
                    x = m;
                    this.getWorldAnchorA(u),
                    this.getWorldAnchorB(v),
                    d.sub(w, u, e.position),
                    d.sub(x, v, o.position),
                    d.sub(p, v, u);
                    var y = d.len(p);
                    d.normalize(q, p),
                    d.sub(r, o.velocity, e.velocity),
                    d.crossZV(t, o.angularVelocity, x),
                    d.add(r, r, t),
                    d.crossZV(t, e.angularVelocity, w),
                    d.sub(r, r, t),
                    d.scale(s, q, -a * (y - c) - b * d.dot(r, q)),
                    d.sub(e.force, e.force, s),
                    d.add(o.force, o.force, s);
                    var z = d.crossLength(w, s),
                    A = d.crossLength(x, s);
                    e.angularForce -= z,
                    o.angularForce += A
                }
            },
            {
                "../math/vec2": 31,
                "../utils/Utils": 50,
                "./Spring": 35
            }],
            34 : [function(a, b) {
                function c(a, b, c) {
                    c = c || {},
                    d.call(this, a, b, c),
                    this.restAngle = "number" == typeof c.restAngle ? c.restAngle: b.angle - a.angle
                }
                var d = (a("../math/vec2"), a("./Spring"));
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.applyForce = function() {
                    var a = this.stiffness,
                    b = this.damping,
                    c = this.restAngle,
                    d = this.bodyA,
                    e = this.bodyB,
                    f = e.angle - d.angle,
                    g = e.angularVelocity - d.angularVelocity,
                    h = -a * (f - c) - b * g * 0;
                    d.angularForce -= h,
                    e.angularForce += h
                }
            },
            {
                "../math/vec2": 31,
                "./Spring": 35
            }],
            35 : [function(a, b) {
                function c(a, b, c) {
                    c = d.defaults(c, {
                        stiffness: 100,
                        damping: 1
                    }),
                    this.stiffness = c.stiffness,
                    this.damping = c.damping,
                    this.bodyA = a,
                    this.bodyB = b
                }
                var d = (a("../math/vec2"), a("../utils/Utils"));
                b.exports = c,
                c.prototype.applyForce = function() {}
            },
            {
                "../math/vec2": 31,
                "../utils/Utils": 50
            }],
            36 : [function(a, b) {
                b.exports = {
                    AABB: a("./collision/AABB"),
                    AngleLockEquation: a("./equations/AngleLockEquation"),
                    Body: a("./objects/Body"),
                    Broadphase: a("./collision/Broadphase"),
                    Capsule: a("./shapes/Capsule"),
                    Circle: a("./shapes/Circle"),
                    Constraint: a("./constraints/Constraint"),
                    ContactEquation: a("./equations/ContactEquation"),
                    ContactMaterial: a("./material/ContactMaterial"),
                    Convex: a("./shapes/Convex"),
                    DistanceConstraint: a("./constraints/DistanceConstraint"),
                    Equation: a("./equations/Equation"),
                    EventEmitter: a("./events/EventEmitter"),
                    FrictionEquation: a("./equations/FrictionEquation"),
                    GearConstraint: a("./constraints/GearConstraint"),
                    GridBroadphase: a("./collision/GridBroadphase"),
                    GSSolver: a("./solver/GSSolver"),
                    Heightfield: a("./shapes/Heightfield"),
                    Line: a("./shapes/Line"),
                    LockConstraint: a("./constraints/LockConstraint"),
                    Material: a("./material/Material"),
                    Narrowphase: a("./collision/Narrowphase"),
                    NaiveBroadphase: a("./collision/NaiveBroadphase"),
                    Particle: a("./shapes/Particle"),
                    Plane: a("./shapes/Plane"),
                    RevoluteConstraint: a("./constraints/RevoluteConstraint"),
                    PrismaticConstraint: a("./constraints/PrismaticConstraint"),
                    Ray: a("./collision/Ray"),
                    RaycastResult: a("./collision/RaycastResult"),
                    Rectangle: a("./shapes/Rectangle"),
                    RotationalVelocityEquation: a("./equations/RotationalVelocityEquation"),
                    SAPBroadphase: a("./collision/SAPBroadphase"),
                    Shape: a("./shapes/Shape"),
                    Solver: a("./solver/Solver"),
                    Spring: a("./objects/Spring"),
                    LinearSpring: a("./objects/LinearSpring"),
                    RotationalSpring: a("./objects/RotationalSpring"),
                    Utils: a("./utils/Utils"),
                    World: a("./world/World"),
                    vec2: a("./math/vec2"),
                    version: a("../package.json").version
                }
            },
            {
                "../package.json": 6,
                "./collision/AABB": 7,
                "./collision/Broadphase": 8,
                "./collision/GridBroadphase": 9,
                "./collision/NaiveBroadphase": 10,
                "./collision/Narrowphase": 11,
                "./collision/Ray": 12,
                "./collision/RaycastResult": 13,
                "./collision/SAPBroadphase": 14,
                "./constraints/Constraint": 15,
                "./constraints/DistanceConstraint": 16,
                "./constraints/GearConstraint": 17,
                "./constraints/LockConstraint": 18,
                "./constraints/PrismaticConstraint": 19,
                "./constraints/RevoluteConstraint": 20,
                "./equations/AngleLockEquation": 21,
                "./equations/ContactEquation": 22,
                "./equations/Equation": 23,
                "./equations/FrictionEquation": 24,
                "./equations/RotationalVelocityEquation": 26,
                "./events/EventEmitter": 27,
                "./material/ContactMaterial": 28,
                "./material/Material": 29,
                "./math/vec2": 31,
                "./objects/Body": 32,
                "./objects/LinearSpring": 33,
                "./objects/RotationalSpring": 34,
                "./objects/Spring": 35,
                "./shapes/Capsule": 37,
                "./shapes/Circle": 38,
                "./shapes/Convex": 39,
                "./shapes/Heightfield": 40,
                "./shapes/Line": 41,
                "./shapes/Particle": 42,
                "./shapes/Plane": 43,
                "./shapes/Rectangle": 44,
                "./shapes/Shape": 45,
                "./solver/GSSolver": 46,
                "./solver/Solver": 47,
                "./utils/Utils": 50,
                "./world/World": 54
            }],
            37 : [function(a, b) {
                function c(a, b) {
                    this.length = a || 1,
                    this.radius = b || 1,
                    d.call(this, d.CAPSULE)
                }
                var d = a("./Shape"),
                e = a("../math/vec2");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function(a) {
                    var b = this.radius,
                    c = this.length + b,
                    d = 2 * b;
                    return a * (d * d + c * c) / 12
                },
                c.prototype.updateBoundingRadius = function() {
                    this.boundingRadius = this.radius + this.length / 2
                },
                c.prototype.updateArea = function() {
                    this.area = Math.PI * this.radius * this.radius + 2 * this.radius * this.length
                };
                var f = e.create();
                c.prototype.computeAABB = function(a, b, c) {
                    var d = this.radius;
                    e.set(f, this.length / 2, 0),
                    0 !== c && e.rotate(f, f, c),
                    e.set(a.upperBound, Math.max(f[0] + d, -f[0] + d), Math.max(f[1] + d, -f[1] + d)),
                    e.set(a.lowerBound, Math.min(f[0] - d, -f[0] - d), Math.min(f[1] - d, -f[1] - d)),
                    e.add(a.lowerBound, a.lowerBound, b),
                    e.add(a.upperBound, a.upperBound, b)
                }
            },
            {
                "../math/vec2": 31,
                "./Shape": 45
            }],
            38 : [function(a, b) {
                function c(a) {
                    this.radius = a || 1,
                    d.call(this, d.CIRCLE)
                }
                var d = a("./Shape"),
                e = a("../math/vec2");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function(a) {
                    var b = this.radius;
                    return a * b * b / 2
                },
                c.prototype.updateBoundingRadius = function() {
                    this.boundingRadius = this.radius
                },
                c.prototype.updateArea = function() {
                    this.area = Math.PI * this.radius * this.radius
                },
                c.prototype.computeAABB = function(a, b) {
                    var c = this.radius;
                    e.set(a.upperBound, c, c),
                    e.set(a.lowerBound, -c, -c),
                    b && (e.add(a.lowerBound, a.lowerBound, b), e.add(a.upperBound, a.upperBound, b))
                }
            },
            {
                "../math/vec2": 31,
                "./Shape": 45
            }],
            39 : [function(a, b) {
                function c(a, b) {
                    this.vertices = [],
                    this.axes = [];
                    for (var c = 0; c < a.length; c++) {
                        var f = e.create();
                        e.copy(f, a[c]),
                        this.vertices.push(f)
                    }
                    if (b) for (var c = 0; c < b.length; c++) {
                        var g = e.create();
                        e.copy(g, b[c]),
                        this.axes.push(g)
                    } else for (var c = 0; c < a.length; c++) {
                        var h = a[c],
                        i = a[(c + 1) % a.length],
                        j = e.create();
                        e.sub(j, i, h),
                        e.rotate90cw(j, j),
                        e.normalize(j, j),
                        this.axes.push(j)
                    }
                    if (this.centerOfMass = e.fromValues(0, 0), this.triangles = [], this.vertices.length && (this.updateTriangles(), this.updateCenterOfMass()), this.boundingRadius = 0, d.call(this, d.CONVEX), this.updateBoundingRadius(), this.updateArea(), this.area < 0) throw new Error("Convex vertices must be given in conter-clockwise winding.")
                }
                var d = a("./Shape"),
                e = a("../math/vec2"),
                f = a("../math/polyk");
                a("poly-decomp"),
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c;
                var g = e.create(),
                h = e.create();
                c.prototype.projectOntoLocalAxis = function(a, b) {
                    for (var c, d, f = null,
                    h = null,
                    a = g,
                    i = 0; i < this.vertices.length; i++) c = this.vertices[i],
                    d = e.dot(c, a),
                    (null === f || d > f) && (f = d),
                    (null === h || h > d) && (h = d);
                    if (h > f) {
                        var j = h;
                        h = f,
                        f = j
                    }
                    e.set(b, h, f)
                },
                c.prototype.projectOntoWorldAxis = function(a, b, c, d) {
                    var f = h;
                    this.projectOntoLocalAxis(a, d),
                    0 !== c ? e.rotate(f, a, c) : f = a;
                    var g = e.dot(b, f);
                    e.set(d, d[0] + g, d[1] + g)
                },
                c.prototype.updateTriangles = function() {
                    this.triangles.length = 0;
                    for (var a = [], b = 0; b < this.vertices.length; b++) {
                        var c = this.vertices[b];
                        a.push(c[0], c[1])
                    }
                    for (var d = f.Triangulate(a), b = 0; b < d.length; b += 3) {
                        var e = d[b],
                        g = d[b + 1],
                        h = d[b + 2];
                        this.triangles.push([e, g, h])
                    }
                };
                var i = e.create(),
                j = e.create(),
                k = e.create(),
                l = e.create(),
                m = e.create();
                e.create(),
                e.create(),
                e.create(),
                e.create(),
                c.prototype.updateCenterOfMass = function() {
                    var a = this.triangles,
                    b = this.vertices,
                    d = this.centerOfMass,
                    f = i,
                    g = k,
                    h = l,
                    n = m,
                    o = j;
                    e.set(d, 0, 0);
                    for (var p = 0,
                    q = 0; q !== a.length; q++) {
                        var r = a[q],
                        g = b[r[0]],
                        h = b[r[1]],
                        n = b[r[2]];
                        e.centroid(f, g, h, n);
                        var s = c.triangleArea(g, h, n);
                        p += s,
                        e.scale(o, f, s),
                        e.add(d, d, o)
                    }
                    e.scale(d, d, 1 / p)
                },
                c.prototype.computeMomentOfInertia = function(a) {
                    for (var b = 0,
                    c = 0,
                    d = this.vertices.length,
                    f = d - 1,
                    g = 0; d > g; f = g, g++) {
                        var h = this.vertices[f],
                        i = this.vertices[g],
                        j = Math.abs(e.crossLength(h, i)),
                        k = e.dot(i, i) + e.dot(i, h) + e.dot(h, h);
                        b += j * k,
                        c += j
                    }
                    return a / 6 * (b / c)
                },
                c.prototype.updateBoundingRadius = function() {
                    for (var a = this.vertices,
                    b = 0,
                    c = 0; c !== a.length; c++) {
                        var d = e.squaredLength(a[c]);
                        d > b && (b = d)
                    }
                    this.boundingRadius = Math.sqrt(b)
                },
                c.triangleArea = function(a, b, c) {
                    return.5 * ((b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]))
                },
                c.prototype.updateArea = function() {
                    this.updateTriangles(),
                    this.area = 0;
                    for (var a = this.triangles,
                    b = this.vertices,
                    d = 0; d !== a.length; d++) {
                        var e = a[d],
                        f = b[e[0]],
                        g = b[e[1]],
                        h = b[e[2]],
                        i = c.triangleArea(f, g, h);
                        this.area += i
                    }
                },
                c.prototype.computeAABB = function(a, b, c) {
                    a.setFromPoints(this.vertices, b, c, 0)
                }
            },
            {
                "../math/polyk": 30,
                "../math/vec2": 31,
                "./Shape": 45,
                "poly-decomp": 5
            }],
            40 : [function(a, b) {
                function c(a, b) {
                    if (b = e.defaults(b, {
                        maxValue: null,
                        minValue: null,
                        elementWidth: .1
                    }), null === b.minValue || null === b.maxValue) {
                        b.maxValue = a[0],
                        b.minValue = a[0];
                        for (var c = 0; c !== a.length; c++) {
                            var f = a[c];
                            f > b.maxValue && (b.maxValue = f),
                            f < b.minValue && (b.minValue = f)
                        }
                    }
                    this.data = a,
                    this.maxValue = b.maxValue,
                    this.minValue = b.minValue,
                    this.elementWidth = b.elementWidth,
                    d.call(this, d.HEIGHTFIELD)
                }
                var d = a("./Shape"),
                e = (a("../math/vec2"), a("../utils/Utils"));
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function() {
                    return Number.MAX_VALUE
                },
                c.prototype.updateBoundingRadius = function() {
                    this.boundingRadius = Number.MAX_VALUE
                },
                c.prototype.updateArea = function() {
                    for (var a = this.data,
                    b = 0,
                    c = 0; c < a.length - 1; c++) b += (a[c] + a[c + 1]) / 2 * this.elementWidth;
                    this.area = b
                },
                c.prototype.computeAABB = function(a, b) {
                    a.upperBound[0] = this.elementWidth * this.data.length + b[0],
                    a.upperBound[1] = this.maxValue + b[1],
                    a.lowerBound[0] = b[0],
                    a.lowerBound[1] = -Number.MAX_VALUE
                }
            },
            {
                "../math/vec2": 31,
                "../utils/Utils": 50,
                "./Shape": 45
            }],
            41 : [function(a, b) {
                function c(a) {
                    this.length = a || 1,
                    d.call(this, d.LINE)
                }
                var d = a("./Shape"),
                e = a("../math/vec2");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function(a) {
                    return a * Math.pow(this.length, 2) / 12
                },
                c.prototype.updateBoundingRadius = function() {
                    this.boundingRadius = this.length / 2
                };
                var f = [e.create(), e.create()];
                c.prototype.computeAABB = function(a, b, c) {
                    var d = this.length / 2;
                    e.set(f[0], -d, 0),
                    e.set(f[1], d, 0),
                    a.setFromPoints(f, b, c, 0)
                }
            },
            {
                "../math/vec2": 31,
                "./Shape": 45
            }],
            42 : [function(a, b) {
                function c() {
                    d.call(this, d.PARTICLE)
                }
                var d = a("./Shape"),
                e = a("../math/vec2");
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function() {
                    return 0
                },
                c.prototype.updateBoundingRadius = function() {
                    this.boundingRadius = 0
                },
                c.prototype.computeAABB = function(a, b) {
                    e.copy(a.lowerBound, b),
                    e.copy(a.upperBound, b)
                }
            },
            {
                "../math/vec2": 31,
                "./Shape": 45
            }],
            43 : [function(a, b) {
                function c() {
                    d.call(this, d.PLANE)
                }
                var d = a("./Shape"),
                e = a("../math/vec2");
                a("../utils/Utils"),
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function() {
                    return 0
                },
                c.prototype.updateBoundingRadius = function() {
                    this.boundingRadius = Number.MAX_VALUE
                },
                c.prototype.computeAABB = function(a, b, c) {
                    var d = 0,
                    f = e.set;
                    "number" == typeof c && (d = c % (2 * Math.PI)),
                    0 === d ? (f(a.lowerBound, -Number.MAX_VALUE, -Number.MAX_VALUE), f(a.upperBound, Number.MAX_VALUE, 0)) : d === Math.PI / 2 ? (f(a.lowerBound, 0, -Number.MAX_VALUE), f(a.upperBound, Number.MAX_VALUE, Number.MAX_VALUE)) : d === Math.PI ? (f(a.lowerBound, -Number.MAX_VALUE, 0), f(a.upperBound, Number.MAX_VALUE, Number.MAX_VALUE)) : d === 3 * Math.PI / 2 ? (f(a.lowerBound, -Number.MAX_VALUE, -Number.MAX_VALUE), f(a.upperBound, 0, Number.MAX_VALUE)) : (f(a.lowerBound, -Number.MAX_VALUE, -Number.MAX_VALUE), f(a.upperBound, Number.MAX_VALUE, Number.MAX_VALUE)),
                    e.add(a.lowerBound, a.lowerBound, b),
                    e.add(a.upperBound, a.upperBound, b)
                },
                c.prototype.updateArea = function() {
                    this.area = Number.MAX_VALUE
                }
            },
            {
                "../math/vec2": 31,
                "../utils/Utils": 50,
                "./Shape": 45
            }],
            44 : [function(a, b) {
                function c(a, b) {
                    this.width = a || 1,
                    this.height = b || 1;
                    var c = [d.fromValues( - a / 2, -b / 2), d.fromValues(a / 2, -b / 2), d.fromValues(a / 2, b / 2), d.fromValues( - a / 2, b / 2)],
                    g = [d.fromValues(1, 0), d.fromValues(0, 1)];
                    f.call(this, c, g),
                    this.type = e.RECTANGLE
                }
                var d = a("../math/vec2"),
                e = a("./Shape"),
                f = a("./Convex");
                b.exports = c,
                c.prototype = new f([]),
                c.prototype.constructor = c,
                c.prototype.computeMomentOfInertia = function(a) {
                    var b = this.width,
                    c = this.height;
                    return a * (c * c + b * b) / 12
                },
                c.prototype.updateBoundingRadius = function() {
                    var a = this.width,
                    b = this.height;
                    this.boundingRadius = Math.sqrt(a * a + b * b) / 2
                },
                d.create(),
                d.create(),
                d.create(),
                d.create(),
                c.prototype.computeAABB = function(a, b, c) {
                    a.setFromPoints(this.vertices, b, c, 0)
                },
                c.prototype.updateArea = function() {
                    this.area = this.width * this.height
                }
            },
            {
                "../math/vec2": 31,
                "./Convex": 39,
                "./Shape": 45
            }],
            45 : [function(a, b) {
                function c(a) {
                    this.type = a,
                    this.id = c.idCounter++,
                    this.boundingRadius = 0,
                    this.collisionGroup = 1,
                    this.collisionResponse = !0,
                    this.collisionMask = 1,
                    a && this.updateBoundingRadius(),
                    this.material = null,
                    this.area = 0,
                    this.sensor = !1,
                    this.updateArea()
                }
                b.exports = c,
                c.idCounter = 0,
                c.CIRCLE = 1,
                c.PARTICLE = 2,
                c.PLANE = 4,
                c.CONVEX = 8,
                c.LINE = 16,
                c.RECTANGLE = 32,
                c.CAPSULE = 64,
                c.HEIGHTFIELD = 128,
                c.prototype.computeMomentOfInertia = function() {
                    throw new Error("Shape.computeMomentOfInertia is not implemented in this Shape...")
                },
                c.prototype.updateBoundingRadius = function() {
                    throw new Error("Shape.updateBoundingRadius is not implemented in this Shape...")
                },
                c.prototype.updateArea = function() {},
                c.prototype.computeAABB = function() {}
            },
            {}],
            46 : [function(a, b) {
                function c(a) {
                    f.call(this, a, f.GS),
                    a = a || {},
                    this.iterations = a.iterations || 10,
                    this.tolerance = a.tolerance || 1e-10,
                    this.arrayStep = 30,
                    this.lambda = new g.ARRAY_TYPE(this.arrayStep),
                    this.Bs = new g.ARRAY_TYPE(this.arrayStep),
                    this.invCs = new g.ARRAY_TYPE(this.arrayStep),
                    this.useZeroRHS = !1,
                    this.frictionIterations = 0,
                    this.usedIterations = 0
                }
                function d(a) {
                    for (var b = a.length; b--;) a[b] = 0
                }
                var e = a("../math/vec2"),
                f = a("./Solver"),
                g = a("../utils/Utils"),
                h = a("../equations/FrictionEquation");
                b.exports = c,
                c.prototype = new f,
                c.prototype.constructor = c,
                c.prototype.solve = function(a, b) {
                    this.sortEquations();
                    var f = 0,
                    i = this.iterations,
                    j = this.frictionIterations,
                    k = this.equations,
                    l = k.length,
                    m = Math.pow(this.tolerance * l, 2),
                    n = b.bodies,
                    o = b.bodies.length,
                    p = (e.add, e.set, this.useZeroRHS),
                    q = this.lambda;
                    if (this.usedIterations = 0, l) for (var r = 0; r !== o; r++) {
                        var s = n[r];
                        s.updateSolveMassProperties()
                    }
                    q.length < l && (q = this.lambda = new g.ARRAY_TYPE(l + this.arrayStep), this.Bs = new g.ARRAY_TYPE(l + this.arrayStep), this.invCs = new g.ARRAY_TYPE(l + this.arrayStep)),
                    d(q);
                    for (var t = this.invCs,
                    u = this.Bs,
                    q = this.lambda,
                    r = 0; r !== k.length; r++) {
                        var v = k[r]; (v.timeStep !== a || v.needsUpdate) && (v.timeStep = a, v.update()),
                        u[r] = v.computeB(v.a, v.b, a),
                        t[r] = v.computeInvC(v.epsilon)
                    }
                    var v, w, r, x;
                    if (0 !== l) {
                        for (r = 0; r !== o; r++) {
                            var s = n[r];
                            s.resetConstraintVelocity()
                        }
                        if (j) {
                            for (f = 0; f !== j; f++) {
                                for (w = 0, x = 0; x !== l; x++) {
                                    v = k[x];
                                    var y = c.iterateEquation(x, v, v.epsilon, u, t, q, p, a, f);
                                    w += Math.abs(y)
                                }
                                if (this.usedIterations++, m >= w * w) break
                            }
                            for (c.updateMultipliers(k, q, 1 / a), x = 0; x !== l; x++) {
                                var z = k[x];
                                if (z instanceof h) {
                                    for (var A = 0,
                                    B = 0; B !== z.contactEquations.length; B++) A += z.contactEquations[B].multiplier;
                                    A *= z.frictionCoefficient / z.contactEquations.length,
                                    z.maxForce = A,
                                    z.minForce = -A
                                }
                            }
                        }
                        for (f = 0; f !== i; f++) {
                            for (w = 0, x = 0; x !== l; x++) {
                                v = k[x];
                                var y = c.iterateEquation(x, v, v.epsilon, u, t, q, p, a, f);
                                w += Math.abs(y)
                            }
                            if (this.usedIterations++, m >= w * w) break
                        }
                        for (r = 0; r !== o; r++) n[r].addConstraintVelocity();
                        c.updateMultipliers(k, q, 1 / a)
                    }
                },
                c.updateMultipliers = function(a, b, c) {
                    for (var d = a.length; d--;) a[d].multiplier = b[d] * c
                },
                c.iterateEquation = function(a, b, c, d, e, f, g, h) {
                    var i = d[a],
                    j = e[a],
                    k = f[a],
                    l = b.computeGWlambda(),
                    m = b.maxForce,
                    n = b.minForce;
                    g && (i = 0);
                    var o = j * (i - l - c * k),
                    p = k + o;
                    return n * h > p ? o = n * h - k: p > m * h && (o = m * h - k),
                    f[a] += o,
                    b.addToWlambda(o),
                    o
                }
            },
            {
                "../equations/FrictionEquation": 24,
                "../math/vec2": 31,
                "../utils/Utils": 50,
                "./Solver": 47
            }],
            47 : [function(a, b) {
                function c(a, b) {
                    a = a || {},
                    d.call(this),
                    this.type = b,
                    this.equations = [],
                    this.equationSortFunction = a.equationSortFunction || !1
                }
                var d = (a("../utils/Utils"), a("../events/EventEmitter"));
                b.exports = c,
                c.prototype = new d,
                c.prototype.constructor = c,
                c.prototype.solve = function() {
                    throw new Error("Solver.solve should be implemented by subclasses!")
                };
                var e = {
                    bodies: []
                };
                c.prototype.solveIsland = function(a, b) {
                    this.removeAllEquations(),
                    b.equations.length && (this.addEquations(b.equations), e.bodies.length = 0, b.getBodies(e.bodies), e.bodies.length && this.solve(a, e))
                },
                c.prototype.sortEquations = function() {
                    this.equationSortFunction && this.equations.sort(this.equationSortFunction)
                },
                c.prototype.addEquation = function(a) {
                    a.enabled && this.equations.push(a)
                },
                c.prototype.addEquations = function(a) {
                    for (var b = 0,
                    c = a.length; b !== c; b++) {
                        var d = a[b];
                        d.enabled && this.equations.push(d)
                    }
                },
                c.prototype.removeEquation = function(a) {
                    var b = this.equations.indexOf(a); - 1 !== b && this.equations.splice(b, 1)
                },
                c.prototype.removeAllEquations = function() {
                    this.equations.length = 0
                },
                c.GS = 1,
                c.ISLAND = 2
            },
            {
                "../events/EventEmitter": 27,
                "../utils/Utils": 50
            }],
            48 : [function(a, b) {
                function c() {
                    this.overlappingShapesLastState = new e,
                    this.overlappingShapesCurrentState = new e,
                    this.recordPool = [],
                    this.tmpDict = new e,
                    this.tmpArray1 = []
                }
                function d(a, b, c, d) {
                    this.shapeA = b,
                    this.shapeB = d,
                    this.bodyA = a,
                    this.bodyB = c
                }
                var e = a("./TupleDictionary");
                a("./Utils"),
                b.exports = c,
                c.prototype.tick = function() {
                    for (var a = this.overlappingShapesLastState,
                    b = this.overlappingShapesCurrentState,
                    c = a.keys.length; c--;) {
                        var d = a.keys[c],
                        e = a.getByKey(d),
                        f = b.getByKey(d);
                        e && !f && this.recordPool.push(e)
                    }
                    a.reset(),
                    a.copy(b),
                    b.reset()
                },
                c.prototype.setOverlapping = function(a, b, c, e) {
                    var f = (this.overlappingShapesLastState, this.overlappingShapesCurrentState);
                    if (!f.get(b.id, e.id)) {
                        var g;
                        this.recordPool.length ? (g = this.recordPool.pop(), g.set(a, b, c, e)) : g = new d(a, b, c, e),
                        f.set(b.id, e.id, g)
                    }
                },
                c.prototype.getNewOverlaps = function(a) {
                    return this.getDiff(this.overlappingShapesLastState, this.overlappingShapesCurrentState, a)
                },
                c.prototype.getEndOverlaps = function(a) {
                    return this.getDiff(this.overlappingShapesCurrentState, this.overlappingShapesLastState, a)
                },
                c.prototype.bodiesAreOverlapping = function(a, b) {
                    for (var c = this.overlappingShapesCurrentState,
                    d = c.keys.length; d--;) {
                        var e = c.keys[d],
                        f = c.data[e];
                        if (f.bodyA === a && f.bodyB === b || f.bodyA === b && f.bodyB === a) return ! 0
                    }
                    return ! 1
                },
                c.prototype.getDiff = function(a, b, c) {
                    var c = c || [],
                    d = a,
                    e = b;
                    c.length = 0;
                    for (var f = e.keys.length; f--;) {
                        var g = e.keys[f],
                        h = e.data[g];
                        if (!h) throw new Error("Key " + g + " had no data!");
                        var i = d.data[g];
                        i || c.push(h)
                    }
                    return c
                },
                c.prototype.isNewOverlap = function(a, b) {
                    var c = 0 | a.id,
                    d = 0 | b.id,
                    e = this.overlappingShapesLastState,
                    f = this.overlappingShapesCurrentState;
                    return ! e.get(c, d) && !!f.get(c, d)
                },
                c.prototype.getNewBodyOverlaps = function(a) {
                    this.tmpArray1.length = 0;
                    var b = this.getNewOverlaps(this.tmpArray1);
                    return this.getBodyDiff(b, a)
                },
                c.prototype.getEndBodyOverlaps = function(a) {
                    this.tmpArray1.length = 0;
                    var b = this.getEndOverlaps(this.tmpArray1);
                    return this.getBodyDiff(b, a)
                },
                c.prototype.getBodyDiff = function(a, b) {
                    b = b || [];
                    for (var c = this.tmpDict,
                    d = a.length; d--;) {
                        var e = a[d];
                        c.set(0 | e.bodyA.id, 0 | e.bodyB.id, e)
                    }
                    for (d = c.keys.length; d--;) {
                        var e = c.getByKey(c.keys[d]);
                        e && b.push(e.bodyA, e.bodyB)
                    }
                    return c.reset(),
                    b
                },
                d.prototype.set = function(a, b, c, e) {
                    d.call(this, a, b, c, e)
                }
            },
            {
                "./TupleDictionary": 49,
                "./Utils": 50
            }],
            49 : [function(a, b) {
                function c() {
                    this.data = {},
                    this.keys = []
                }
                var d = a("./Utils");
                b.exports = c,
                c.prototype.getKey = function(a, b) {
                    return a = 0 | a,
                    b = 0 | b,
                    (0 | a) === (0 | b) ? -1 : 0 | ((0 | a) > (0 | b) ? a << 16 | 65535 & b: b << 16 | 65535 & a)
                },
                c.prototype.getByKey = function(a) {
                    return a = 0 | a,
                    this.data[a]
                },
                c.prototype.get = function(a, b) {
                    return this.data[this.getKey(a, b)]
                },
                c.prototype.set = function(a, b, c) {
                    if (!c) throw new Error("No data!");
                    var d = this.getKey(a, b);
                    return this.data[d] || this.keys.push(d),
                    this.data[d] = c,
                    d
                },
                c.prototype.reset = function() {
                    for (var a = this.data,
                    b = this.keys,
                    c = b.length; c--;) delete a[b[c]];
                    b.length = 0
                },
                c.prototype.copy = function(a) {
                    this.reset(),
                    d.appendArray(this.keys, a.keys);
                    for (var b = a.keys.length; b--;) {
                        var c = a.keys[b];
                        this.data[c] = a.data[c]
                    }
                }
            },
            {
                "./Utils": 50
            }],
            50 : [function(a, b) {
                function c() {}
                b.exports = c,
                c.appendArray = function(a, b) {
                    if (b.length < 15e4) a.push.apply(a, b);
                    else for (var c = 0,
                    d = b.length; c !== d; ++c) a.push(b[c])
                },
                c.splice = function(a, b, c) {
                    c = c || 1;
                    for (var d = b,
                    e = a.length - c; e > d; d++) a[d] = a[d + c];
                    a.length = e
                },
                c.ARRAY_TYPE = window.Float32Array || Array,
                c.extend = function(a, b) {
                    for (var c in b) a[c] = b[c]
                },
                c.defaults = function(a, b) {
                    a = a || {};
                    for (var c in b) c in a || (a[c] = b[c]);
                    return a
                }
            },
            {}],
            51 : [function(a, b) {
                function c() {
                    this.equations = [],
                    this.bodies = []
                }
                var d = a("../objects/Body");
                b.exports = c,
                c.prototype.reset = function() {
                    this.equations.length = this.bodies.length = 0
                };
                var e = [];
                c.prototype.getBodies = function(a) {
                    var b = a || [],
                    c = this.equations;
                    e.length = 0;
                    for (var d = 0; d !== c.length; d++) {
                        var f = c[d]; - 1 === e.indexOf(f.bodyA.id) && (b.push(f.bodyA), e.push(f.bodyA.id)),
                        -1 === e.indexOf(f.bodyB.id) && (b.push(f.bodyB), e.push(f.bodyB.id))
                    }
                    return b
                },
                c.prototype.wantsToSleep = function() {
                    for (var a = 0; a < this.bodies.length; a++) {
                        var b = this.bodies[a];
                        if (b.type === d.DYNAMIC && !b.wantsToSleep) return ! 1
                    }
                    return ! 0
                },
                c.prototype.sleep = function() {
                    for (var a = 0; a < this.bodies.length; a++) {
                        var b = this.bodies[a];
                        b.sleep()
                    }
                    return ! 0
                }
            },
            {
                "../objects/Body": 32
            }],
            52 : [function(a, b) {
                function c() {
                    this._nodePool = [],
                    this._islandPool = [],
                    this.equations = [],
                    this.islands = [],
                    this.nodes = [],
                    this.queue = []
                }
                var d = (a("../math/vec2"), a("./Island")),
                e = a("./IslandNode"),
                f = a("../objects/Body");
                b.exports = c,
                c.getUnvisitedNode = function(a) {
                    for (var b = a.length,
                    c = 0; c !== b; c++) {
                        var d = a[c];
                        if (!d.visited && d.body.type === f.DYNAMIC) return d
                    }
                    return ! 1
                },
                c.prototype.visit = function(a, b, c) {
                    b.push(a.body);
                    for (var d = a.equations.length,
                    e = 0; e !== d; e++) {
                        var f = a.equations[e]; - 1 === c.indexOf(f) && c.push(f)
                    }
                },
                c.prototype.bfs = function(a, b, d) {
                    var e = this.queue;
                    for (e.length = 0, e.push(a), a.visited = !0, this.visit(a, b, d); e.length;) for (var g, h = e.pop(); g = c.getUnvisitedNode(h.neighbors);) g.visited = !0,
                    this.visit(g, b, d),
                    g.body.type === f.DYNAMIC && e.push(g)
                },
                c.prototype.split = function(a) {
                    for (var b = a.bodies,
                    f = this.nodes,
                    g = this.equations; f.length;) this._nodePool.push(f.pop());
                    for (var h = 0; h !== b.length; h++) if (this._nodePool.length) {
                        var i = this._nodePool.pop();
                        i.reset(),
                        i.body = b[h],
                        f.push(i)
                    } else f.push(new e(b[h]));
                    for (var j = 0; j !== g.length; j++) {
                        var k = g[j],
                        h = b.indexOf(k.bodyA),
                        l = b.indexOf(k.bodyB),
                        m = f[h],
                        n = f[l];
                        m.neighbors.push(n),
                        n.neighbors.push(m),
                        m.equations.push(k),
                        n.equations.push(k)
                    }
                    for (var o = this.islands; o.length;) {
                        var p = o.pop();
                        p.reset(),
                        this._islandPool.push(p)
                    }
                    for (var q; q = c.getUnvisitedNode(f);) {
                        var p = this._islandPool.length ? this._islandPool.pop() : new d;
                        this.bfs(q, p.bodies, p.equations),
                        o.push(p)
                    }
                    return o
                }
            },
            {
                "../math/vec2": 31,
                "../objects/Body": 32,
                "./Island": 51,
                "./IslandNode": 53
            }],
            53 : [function(a, b) {
                function c(a) {
                    this.body = a,
                    this.neighbors = [],
                    this.equations = [],
                    this.visited = !1
                }
                b.exports = c,
                c.prototype.reset = function() {
                    this.equations.length = 0,
                    this.neighbors.length = 0,
                    this.visited = !1,
                    this.body = null
                }
            },
            {}],
            54 : [function(a, b) {
                function c(a) {
                    l.apply(this),
                    a = a || {},
                    this.springs = [],
                    this.bodies = [],
                    this.disabledBodyCollisionPairs = [],
                    this.solver = a.solver || new d,
                    this.narrowphase = new q(this),
                    this.islandManager = new t,
                    this.gravity = f.fromValues(0, -9.78),
                    a.gravity && f.copy(this.gravity, a.gravity),
                    this.frictionGravity = f.length(this.gravity) || 10,
                    this.useWorldGravityAsFrictionGravity = !0,
                    this.useFrictionGravityOnZeroGravity = !0,
                    this.doProfiling = a.doProfiling || !1,
                    this.lastStepTime = 0,
                    this.broadphase = a.broadphase || new p,
                    this.broadphase.setWorld(this),
                    this.constraints = [],
                    this.defaultMaterial = new n,
                    this.defaultContactMaterial = new o(this.defaultMaterial, this.defaultMaterial),
                    this.lastTimeStep = 1 / 60,
                    this.applySpringForces = !0,
                    this.applyDamping = !0,
                    this.applyGravity = !0,
                    this.solveConstraints = !0,
                    this.contactMaterials = [],
                    this.time = 0,
                    this.stepping = !1,
                    this.bodiesToBeRemoved = [],
                    this.fixedStepTime = 0,
                    this.islandSplit = "undefined" != typeof a.islandSplit ? !!a.islandSplit: !1,
                    this.emitImpactEvent = !0,
                    this._constraintIdCounter = 0,
                    this._bodyIdCounter = 0,
                    this.postStepEvent = {
                        type: "postStep"
                    },
                    this.addBodyEvent = {
                        type: "addBody",
                        body: null
                    },
                    this.removeBodyEvent = {
                        type: "removeBody",
                        body: null
                    },
                    this.addSpringEvent = {
                        type: "addSpring",
                        spring: null
                    },
                    this.impactEvent = {
                        type: "impact",
                        bodyA: null,
                        bodyB: null,
                        shapeA: null,
                        shapeB: null,
                        contactEquation: null
                    },
                    this.postBroadphaseEvent = {
                        type: "postBroadphase",
                        pairs: null
                    },
                    this.sleepMode = c.NO_SLEEPING,
                    this.beginContactEvent = {
                        type: "beginContact",
                        shapeA: null,
                        shapeB: null,
                        bodyA: null,
                        bodyB: null,
                        contactEquations: []
                    },
                    this.endContactEvent = {
                        type: "endContact",
                        shapeA: null,
                        shapeB: null,
                        bodyA: null,
                        bodyB: null
                    },
                    this.preSolveEvent = {
                        type: "preSolve",
                        contactEquations: null,
                        frictionEquations: null
                    },
                    this.overlappingShapesLastState = {
                        keys: []
                    },
                    this.overlappingShapesCurrentState = {
                        keys: []
                    },
                    this.overlapKeeper = new s
                }
                var d = a("../solver/GSSolver"),
                e = (a("../solver/Solver"), a("../collision/NaiveBroadphase"), a("../collision/Ray")),
                f = a("../math/vec2"),
                g = a("../shapes/Circle"),
                h = (a("../shapes/Rectangle"), a("../shapes/Convex")),
                i = (a("../shapes/Line"), a("../shapes/Plane")),
                j = a("../shapes/Capsule"),
                k = a("../shapes/Particle"),
                l = a("../events/EventEmitter"),
                m = a("../objects/Body"),
                n = (a("../shapes/Shape"), a("../objects/LinearSpring"), a("../material/Material")),
                o = a("../material/ContactMaterial"),
                p = (a("../constraints/DistanceConstraint"), a("../constraints/Constraint"), a("../constraints/LockConstraint"), a("../constraints/RevoluteConstraint"), a("../constraints/PrismaticConstraint"), a("../constraints/GearConstraint"), a("../../package.json"), a("../collision/Broadphase"), a("../collision/SAPBroadphase")),
                q = a("../collision/Narrowphase"),
                r = a("../utils/Utils"),
                s = a("../utils/OverlapKeeper"),
                t = a("./IslandManager");
                if (a("../objects/RotationalSpring"), b.exports = c, "undefined" == typeof performance && (performance = {}), !performance.now) {
                    var u = Date.now();
                    performance.timing && performance.timing.navigationStart && (u = performance.timing.navigationStart),
                    performance.now = function() {
                        return Date.now() - u
                    }
                }
                c.prototype = new Object(l.prototype),
                c.prototype.constructor = c,
                c.NO_SLEEPING = 1,
                c.BODY_SLEEPING = 2,
                c.ISLAND_SLEEPING = 4,
                c.prototype.addConstraint = function(a) {
                    this.constraints.push(a)
                },
                c.prototype.addContactMaterial = function(a) {
                    this.contactMaterials.push(a)
                },
                c.prototype.removeContactMaterial = function(a) {
                    var b = this.contactMaterials.indexOf(a); - 1 !== b && r.splice(this.contactMaterials, b, 1)
                },
                c.prototype.getContactMaterial = function(a, b) {
                    for (var c = this.contactMaterials,
                    d = 0,
                    e = c.length; d !== e; d++) {
                        var f = c[d];
                        if (f.materialA.id === a.id && f.materialB.id === b.id || f.materialA.id === b.id && f.materialB.id === a.id) return f
                    }
                    return ! 1
                },
                c.prototype.removeConstraint = function(a) {
                    var b = this.constraints.indexOf(a); - 1 !== b && r.splice(this.constraints, b, 1)
                };
                var v = (f.create(), f.create(), f.create(), f.create(), f.create(), f.create(), f.create()),
                w = f.fromValues(0, 0),
                x = f.fromValues(0, 0),
                y = (f.fromValues(0, 0), f.fromValues(0, 0));
                c.prototype.step = function(a, b, c) {
                    if (c = c || 10, b = b || 0, 0 === b) this.internalStep(a),
                    this.time += a;
                    else {
                        var d = Math.floor((this.time + b) / a) - Math.floor(this.time / a);
                        d = Math.min(d, c);
                        for (var e = performance.now(), g = 0; g !== d && (this.internalStep(a), !(performance.now() - e > 1e3 * a)); g++);
                        this.time += b;
                        for (var h = this.time % a,
                        i = h / a,
                        j = 0; j !== this.bodies.length; j++) {
                            var k = this.bodies[j];
                            k.type !== m.STATIC && k.sleepState !== m.SLEEPING ? (f.sub(y, k.position, k.previousPosition), f.scale(y, y, i), f.add(k.interpolatedPosition, k.position, y), k.interpolatedAngle = k.angle + (k.angle - k.previousAngle) * i) : (f.copy(k.interpolatedPosition, k.position), k.interpolatedAngle = k.angle)
                        }
                    }
                };
                var z = [];
                c.prototype.internalStep = function(a) {
                    this.stepping = !0;
                    var b, d, e = this,
                    g = this.doProfiling,
                    h = this.springs.length,
                    i = this.springs,
                    j = this.bodies,
                    k = this.gravity,
                    l = this.solver,
                    n = this.bodies.length,
                    o = this.broadphase,
                    p = this.narrowphase,
                    q = this.constraints,
                    s = v,
                    t = (f.scale, f.add),
                    u = (f.rotate, this.islandManager);
                    if (this.overlapKeeper.tick(), this.lastTimeStep = a, g && (b = performance.now()), this.useWorldGravityAsFrictionGravity) {
                        var w = f.length(this.gravity);
                        0 === w && this.useFrictionGravityOnZeroGravity || (this.frictionGravity = w)
                    }
                    if (this.applyGravity) for (var x = 0; x !== n; x++) {
                        var y = j[x],
                        A = y.force;
                        y.type === m.DYNAMIC && y.sleepState !== m.SLEEPING && (f.scale(s, k, y.mass * y.gravityScale), t(A, A, s))
                    }
                    if (this.applySpringForces) for (var x = 0; x !== h; x++) {
                        var B = i[x];
                        B.applyForce()
                    }
                    if (this.applyDamping) for (var x = 0; x !== n; x++) {
                        var y = j[x];
                        y.type === m.DYNAMIC && y.applyDamping(a)
                    }
                    for (var C = o.getCollisionPairs(this), D = this.disabledBodyCollisionPairs, x = D.length - 2; x >= 0; x -= 2) for (var E = C.length - 2; E >= 0; E -= 2)(D[x] === C[E] && D[x + 1] === C[E + 1] || D[x + 1] === C[E] && D[x] === C[E + 1]) && C.splice(E, 2);
                    var F = q.length;
                    for (x = 0; x !== F; x++) {
                        var G = q[x];
                        if (!G.collideConnected) for (var E = C.length - 2; E >= 0; E -= 2)(G.bodyA === C[E] && G.bodyB === C[E + 1] || G.bodyB === C[E] && G.bodyA === C[E + 1]) && C.splice(E, 2)
                    }
                    this.postBroadphaseEvent.pairs = C,
                    this.emit(this.postBroadphaseEvent),
                    p.reset(this);
                    for (var x = 0,
                    H = C.length; x !== H; x += 2) for (var I = C[x], J = C[x + 1], K = 0, L = I.shapes.length; K !== L; K++) for (var M = I.shapes[K], N = I.shapeOffsets[K], O = I.shapeAngles[K], P = 0, Q = J.shapes.length; P !== Q; P++) {
                        var R = J.shapes[P],
                        S = J.shapeOffsets[P],
                        T = J.shapeAngles[P],
                        U = this.defaultContactMaterial;
                        if (M.material && R.material) {
                            var V = this.getContactMaterial(M.material, R.material);
                            V && (U = V)
                        }
                        this.runNarrowphase(p, I, M, N, O, J, R, S, T, U, this.frictionGravity)
                    }
                    for (var x = 0; x !== n; x++) {
                        var W = j[x];
                        W._wakeUpAfterNarrowphase && (W.wakeUp(), W._wakeUpAfterNarrowphase = !1)
                    }
                    if (this.has("endContact")) {
                        this.overlapKeeper.getEndOverlaps(z);
                        for (var X = this.endContactEvent,
                        P = z.length; P--;) {
                            var Y = z[P];
                            X.shapeA = Y.shapeA,
                            X.shapeB = Y.shapeB,
                            X.bodyA = Y.bodyA,
                            X.bodyB = Y.bodyB,
                            this.emit(X)
                        }
                    }
                    var Z = this.preSolveEvent;
                    Z.contactEquations = p.contactEquations,
                    Z.frictionEquations = p.frictionEquations,
                    this.emit(Z);
                    var F = q.length;
                    for (x = 0; x !== F; x++) q[x].update();
                    if (p.contactEquations.length || p.frictionEquations.length || q.length) if (this.islandSplit) {
                        for (u.equations.length = 0, r.appendArray(u.equations, p.contactEquations), r.appendArray(u.equations, p.frictionEquations), x = 0; x !== F; x++) r.appendArray(u.equations, q[x].equations);
                        u.split(this);
                        for (var x = 0; x !== u.islands.length; x++) {
                            var $ = u.islands[x];
                            $.equations.length && l.solveIsland(a, $)
                        }
                    } else {
                        for (l.addEquations(p.contactEquations), l.addEquations(p.frictionEquations), x = 0; x !== F; x++) l.addEquations(q[x].equations);
                        this.solveConstraints && l.solve(a, this),
                        l.removeAllEquations()
                    }
                    for (var x = 0; x !== n; x++) {
                        var W = j[x];
                        W.sleepState !== m.SLEEPING && W.type !== m.STATIC && W.integrate(a)
                    }
                    for (var x = 0; x !== n; x++) j[x].setZeroForce();
                    if (g && (d = performance.now(), e.lastStepTime = d - b), this.emitImpactEvent && this.has("impact")) for (var _ = this.impactEvent,
                    x = 0; x !== p.contactEquations.length; x++) {
                        var aa = p.contactEquations[x];
                        aa.firstImpact && (_.bodyA = aa.bodyA, _.bodyB = aa.bodyB, _.shapeA = aa.shapeA, _.shapeB = aa.shapeB, _.contactEquation = aa, this.emit(_))
                    }
                    if (this.sleepMode === c.BODY_SLEEPING) for (x = 0; x !== n; x++) j[x].sleepTick(this.time, !1, a);
                    else if (this.sleepMode === c.ISLAND_SLEEPING && this.islandSplit) {
                        for (x = 0; x !== n; x++) j[x].sleepTick(this.time, !0, a);
                        for (var x = 0; x < this.islandManager.islands.length; x++) {
                            var $ = this.islandManager.islands[x];
                            $.wantsToSleep() && $.sleep()
                        }
                    }
                    if (this.stepping = !1, this.bodiesToBeRemoved.length) {
                        for (var x = 0; x !== this.bodiesToBeRemoved.length; x++) this.removeBody(this.bodiesToBeRemoved[x]);
                        this.bodiesToBeRemoved.length = 0
                    }
                    this.emit(this.postStepEvent)
                },
                c.prototype.runNarrowphase = function(a, b, c, d, e, g, h, i, j, k, l) {
                    if (0 !== (c.collisionGroup & h.collisionMask) && 0 !== (h.collisionGroup & c.collisionMask)) {
                        f.rotate(w, d, b.angle),
                        f.rotate(x, i, g.angle),
                        f.add(w, w, b.position),
                        f.add(x, x, g.position);
                        var n = e + b.angle,
                        o = j + g.angle;
                        a.enableFriction = k.friction > 0,
                        a.frictionCoefficient = k.friction;
                        var p;
                        p = b.type === m.STATIC || b.type === m.KINEMATIC ? g.mass: g.type === m.STATIC || g.type === m.KINEMATIC ? b.mass: b.mass * g.mass / (b.mass + g.mass),
                        a.slipForce = k.friction * l * p,
                        a.restitution = k.restitution,
                        a.surfaceVelocity = k.surfaceVelocity,
                        a.frictionStiffness = k.frictionStiffness,
                        a.frictionRelaxation = k.frictionRelaxation,
                        a.stiffness = k.stiffness,
                        a.relaxation = k.relaxation,
                        a.contactSkinSize = k.contactSkinSize,
                        a.enabledEquations = b.collisionResponse && g.collisionResponse && c.collisionResponse && h.collisionResponse;
                        var q = a[c.type | h.type],
                        r = 0;
                        if (q) {
                            var s = c.sensor || h.sensor,
                            t = a.frictionEquations.length;
                            r = c.type < h.type ? q.call(a, b, c, w, n, g, h, x, o, s) : q.call(a, g, h, x, o, b, c, w, n, s);
                            var u = a.frictionEquations.length - t;
                            if (r) {
                                if (b.allowSleep && b.type === m.DYNAMIC && b.sleepState === m.SLEEPING && g.sleepState === m.AWAKE && g.type !== m.STATIC) {
                                    var v = f.squaredLength(g.velocity) + Math.pow(g.angularVelocity, 2),
                                    y = Math.pow(g.sleepSpeedLimit, 2);
                                    v >= 2 * y && (b._wakeUpAfterNarrowphase = !0)
                                }
                                if (g.allowSleep && g.type === m.DYNAMIC && g.sleepState === m.SLEEPING && b.sleepState === m.AWAKE && b.type !== m.STATIC) {
                                    var z = f.squaredLength(b.velocity) + Math.pow(b.angularVelocity, 2),
                                    A = Math.pow(b.sleepSpeedLimit, 2);
                                    z >= 2 * A && (g._wakeUpAfterNarrowphase = !0)
                                }
                                if (this.overlapKeeper.setOverlapping(b, c, g, h), this.has("beginContact") && this.overlapKeeper.isNewOverlap(c, h)) {
                                    var B = this.beginContactEvent;
                                    if (B.shapeA = c, B.shapeB = h, B.bodyA = b, B.bodyB = g, B.contactEquations.length = 0, "number" == typeof r) for (var C = a.contactEquations.length - r; C < a.contactEquations.length; C++) B.contactEquations.push(a.contactEquations[C]);
                                    this.emit(B)
                                }
                                if ("number" == typeof r && u > 1) for (var C = a.frictionEquations.length - u; C < a.frictionEquations.length; C++) {
                                    var D = a.frictionEquations[C];
                                    D.setSlipForce(D.getSlipForce() / u)
                                }
                            }
                        }
                    }
                },
                c.prototype.addSpring = function(a) {
                    this.springs.push(a),
                    this.addSpringEvent.spring = a,
                    this.emit(this.addSpringEvent)
                },
                c.prototype.removeSpring = function(a) {
                    var b = this.springs.indexOf(a); - 1 !== b && r.splice(this.springs, b, 1)
                },
                c.prototype.addBody = function(a) { - 1 === this.bodies.indexOf(a) && (this.bodies.push(a), a.world = this, this.addBodyEvent.body = a, this.emit(this.addBodyEvent))
                },
                c.prototype.removeBody = function(a) {
                    if (this.stepping) this.bodiesToBeRemoved.push(a);
                    else {
                        a.world = null;
                        var b = this.bodies.indexOf(a); - 1 !== b && (r.splice(this.bodies, b, 1), this.removeBodyEvent.body = a, a.resetConstraintVelocity(), this.emit(this.removeBodyEvent))
                    }
                },
                c.prototype.getBodyById = function(a) {
                    for (var b = this.bodies,
                    c = 0; c < b.length; c++) {
                        var d = b[c];
                        if (d.id === a) return d
                    }
                    return ! 1
                },
                c.prototype.disableBodyCollision = function(a, b) {
                    this.disabledBodyCollisionPairs.push(a, b)
                },
                c.prototype.enableBodyCollision = function(a, b) {
                    for (var c = this.disabledBodyCollisionPairs,
                    d = 0; d < c.length; d += 2) if (c[d] === a && c[d + 1] === b || c[d + 1] === a && c[d] === b) return void c.splice(d, 2)
                },
                c.prototype.clear = function() {
                    this.time = 0,
                    this.fixedStepTime = 0,
                    this.solver && this.solver.equations.length && this.solver.removeAllEquations();
                    for (var a = this.constraints,
                    b = a.length - 1; b >= 0; b--) this.removeConstraint(a[b]);
                    for (var d = this.bodies,
                    b = d.length - 1; b >= 0; b--) this.removeBody(d[b]);
                    for (var e = this.springs,
                    b = e.length - 1; b >= 0; b--) this.removeSpring(e[b]);
                    for (var f = this.contactMaterials,
                    b = f.length - 1; b >= 0; b--) this.removeContactMaterial(f[b]);
                    c.apply(this)
                },
                c.prototype.clone = function() {
                    var a = new c;
                    return a.fromJSON(this.toJSON()),
                    a
                };
                var A = f.create(),
                B = f.fromValues(0, 0),
                C = f.fromValues(0, 0);
                c.prototype.hitTest = function(a, b, c) {
                    c = c || 0;
                    var d = new m({
                        position: a
                    }),
                    e = new k,
                    l = a,
                    n = 0,
                    o = A,
                    p = B,
                    q = C;
                    d.addShape(e);
                    for (var r = this.narrowphase,
                    s = [], t = 0, u = b.length; t !== u; t++) for (var v = b[t], w = 0, x = v.shapes.length; w !== x; w++) {
                        var y = v.shapes[w],
                        z = v.shapeOffsets[w] || p,
                        D = v.shapeAngles[w] || 0;
                        f.rotate(o, z, v.angle),
                        f.add(o, o, v.position);
                        var E = D + v.angle; (y instanceof g && r.circleParticle(v, y, o, E, d, e, l, n, !0) || y instanceof h && r.particleConvex(d, e, l, n, v, y, o, E, !0) || y instanceof i && r.particlePlane(d, e, l, n, v, y, o, E, !0) || y instanceof j && r.particleCapsule(d, e, l, n, v, y, o, E, !0) || y instanceof k && f.squaredLength(f.sub(q, o, a)) < c * c) && s.push(v)
                    }
                    return s
                },
                c.prototype.setGlobalEquationParameters = function(a) {
                    a = a || {};
                    for (var b = 0; b !== this.constraints.length; b++) for (var c = this.constraints[b], d = 0; d !== c.equations.length; d++) {
                        var e = c.equations[d];
                        "undefined" != typeof a.stiffness && (e.stiffness = a.stiffness),
                        "undefined" != typeof a.relaxation && (e.relaxation = a.relaxation),
                        e.needsUpdate = !0
                    }
                    for (var b = 0; b !== this.contactMaterials.length; b++) {
                        var c = this.contactMaterials[b];
                        "undefined" != typeof a.stiffness && (c.stiffness = a.stiffness, c.frictionStiffness = a.stiffness),
                        "undefined" != typeof a.relaxation && (c.relaxation = a.relaxation, c.frictionRelaxation = a.relaxation)
                    }
                    var c = this.defaultContactMaterial;
                    "undefined" != typeof a.stiffness && (c.stiffness = a.stiffness, c.frictionStiffness = a.stiffness),
                    "undefined" != typeof a.relaxation && (c.relaxation = a.relaxation, c.frictionRelaxation = a.relaxation)
                },
                c.prototype.setGlobalStiffness = function(a) {
                    this.setGlobalEquationParameters({
                        stiffness: a
                    })
                },
                c.prototype.setGlobalRelaxation = function(a) {
                    this.setGlobalEquationParameters({
                        relaxation: a
                    })
                };
                var D = new e;
                c.prototype.raycastAll = function(a, b, c, d) {
                    return c.mode = e.ALL,
                    c.from = a,
                    c.to = b,
                    c.callback = d,
                    D.intersectWorld(this, c)
                },
                c.prototype.raycastAny = function(a, b, c, d) {
                    return c.mode = e.ANY,
                    c.from = a,
                    c.to = b,
                    c.result = d,
                    D.intersectWorld(this, c)
                },
                c.prototype.raycastClosest = function(a, b, c, d) {
                    return c.mode = e.CLOSEST,
                    c.from = a,
                    c.to = b,
                    c.result = d,
                    D.intersectWorld(this, c)
                }
            },
            {
                "../../package.json": 6,
                "../collision/Broadphase": 8,
                "../collision/NaiveBroadphase": 10,
                "../collision/Narrowphase": 11,
                "../collision/Ray": 12,
                "../collision/SAPBroadphase": 14,
                "../constraints/Constraint": 15,
                "../constraints/DistanceConstraint": 16,
                "../constraints/GearConstraint": 17,
                "../constraints/LockConstraint": 18,
                "../constraints/PrismaticConstraint": 19,
                "../constraints/RevoluteConstraint": 20,
                "../events/EventEmitter": 27,
                "../material/ContactMaterial": 28,
                "../material/Material": 29,
                "../math/vec2": 31,
                "../objects/Body": 32,
                "../objects/LinearSpring": 33,
                "../objects/RotationalSpring": 34,
                "../shapes/Capsule": 37,
                "../shapes/Circle": 38,
                "../shapes/Convex": 39,
                "../shapes/Line": 41,
                "../shapes/Particle": 42,
                "../shapes/Plane": 43,
                "../shapes/Rectangle": 44,
                "../shapes/Shape": 45,
                "../solver/GSSolver": 46,
                "../solver/Solver": 47,
                "../utils/OverlapKeeper": 48,
                "../utils/Utils": 50,
                "./IslandManager": 52
            }]
        },
        {},
        [36])(36)
    }),
    p2.Body.prototype.parent = null,
    p2.Spring.prototype.parent = null,
    c.Physics.P2 = function(a, b) {
        this.game = a,
        "undefined" == typeof b ? b = {
            gravity: [0, 0],
            broadphase: new p2.SAPBroadphase
        }: (b.hasOwnProperty("gravity") || (b.gravity = [0, 0]), b.hasOwnProperty("broadphase") || (b.broadphase = new p2.SAPBroadphase)),
        this.config = b,
        this.world = new p2.World(this.config),
        this.frameRate = 1 / 60,
        this.useElapsedTime = !1,
        this.paused = !1,
        this.materials = [],
        this.gravity = new c.Physics.P2.InversePointProxy(this, this.world.gravity),
        this.walls = {
            left: null,
            right: null,
            top: null,
            bottom: null
        },
        this.onBodyAdded = new c.Signal,
        this.onBodyRemoved = new c.Signal,
        this.onSpringAdded = new c.Signal,
        this.onSpringRemoved = new c.Signal,
        this.onConstraintAdded = new c.Signal,
        this.onConstraintRemoved = new c.Signal,
        this.onContactMaterialAdded = new c.Signal,
        this.onContactMaterialRemoved = new c.Signal,
        this.postBroadphaseCallback = null,
        this.callbackContext = null,
        this.onBeginContact = new c.Signal,
        this.onEndContact = new c.Signal,
        b.hasOwnProperty("mpx") && b.hasOwnProperty("pxm") && b.hasOwnProperty("mpxi") && b.hasOwnProperty("pxmi") && (this.mpx = b.mpx, this.mpxi = b.mpxi, this.pxm = b.pxm, this.pxmi = b.pxmi),
        this.world.on("beginContact", this.beginContactHandler, this),
        this.world.on("endContact", this.endContactHandler, this),
        this.collisionGroups = [],
        this.nothingCollisionGroup = new c.Physics.P2.CollisionGroup(1),
        this.boundsCollisionGroup = new c.Physics.P2.CollisionGroup(2),
        this.everythingCollisionGroup = new c.Physics.P2.CollisionGroup(2147483648),
        this.boundsCollidesWith = [],
        this._toRemove = [],
        this._collisionGroupID = 2,
        this._boundsLeft = !0,
        this._boundsRight = !0,
        this._boundsTop = !0,
        this._boundsBottom = !0,
        this._boundsOwnGroup = !1,
        this.setBoundsToWorld(!0, !0, !0, !0, !1)
    },
    c.Physics.P2.prototype = {
        removeBodyNextStep: function(a) {
            this._toRemove.push(a)
        },
        preUpdate: function() {
            for (var a = this._toRemove.length; a--;) this.removeBody(this._toRemove[a]);
            this._toRemove.length = 0
        },
        enable: function(a, b, d) {
            "undefined" == typeof b && (b = !1),
            "undefined" == typeof d && (d = !0);
            var e = 1;
            if (Array.isArray(a)) for (e = a.length; e--;) a[e] instanceof c.Group ? this.enable(a[e].children, b, d) : (this.enableBody(a[e], b), d && a[e].hasOwnProperty("children") && a[e].children.length > 0 && this.enable(a[e], b, !0));
            else a instanceof c.Group ? this.enable(a.children, b, d) : (this.enableBody(a, b), d && a.hasOwnProperty("children") && a.children.length > 0 && this.enable(a.children, b, !0))
        },
        enableBody: function(a, b) {
            a.hasOwnProperty("body") && null === a.body && (a.body = new c.Physics.P2.Body(this.game, a, a.x, a.y, 1), a.body.debug = b, a.anchor.set(.5))
        },
        setImpactEvents: function(a) {
            a ? this.world.on("impact", this.impactHandler, this) : this.world.off("impact", this.impactHandler, this)
        },
        setPostBroadphaseCallback: function(a, b) {
            this.postBroadphaseCallback = a,
            this.callbackContext = b,
            null !== a ? this.world.on("postBroadphase", this.postBroadphaseHandler, this) : this.world.off("postBroadphase", this.postBroadphaseHandler, this)
        },
        postBroadphaseHandler: function(a) {
            if (this.postBroadphaseCallback && 0 !== a.pairs.length) for (var b = a.pairs.length - 2; b >= 0; b -= 2) a.pairs[b].parent && a.pairs[b + 1].parent && !this.postBroadphaseCallback.call(this.callbackContext, a.pairs[b].parent, a.pairs[b + 1].parent) && a.pairs.splice(b, 2)
        },
        impactHandler: function(a) {
            if (a.bodyA.parent && a.bodyB.parent) {
                var b = a.bodyA.parent,
                c = a.bodyB.parent;
                b._bodyCallbacks[a.bodyB.id] && b._bodyCallbacks[a.bodyB.id].call(b._bodyCallbackContext[a.bodyB.id], b, c, a.shapeA, a.shapeB),
                c._bodyCallbacks[a.bodyA.id] && c._bodyCallbacks[a.bodyA.id].call(c._bodyCallbackContext[a.bodyA.id], c, b, a.shapeB, a.shapeA),
                b._groupCallbacks[a.shapeB.collisionGroup] && b._groupCallbacks[a.shapeB.collisionGroup].call(b._groupCallbackContext[a.shapeB.collisionGroup], b, c, a.shapeA, a.shapeB),
                c._groupCallbacks[a.shapeA.collisionGroup] && c._groupCallbacks[a.shapeA.collisionGroup].call(c._groupCallbackContext[a.shapeA.collisionGroup], c, b, a.shapeB, a.shapeA)
            }
        },
        beginContactHandler: function(a) {
            this.onBeginContact.dispatch(a.bodyA, a.bodyB, a.shapeA, a.shapeB, a.contactEquations),
            a.bodyA.parent && a.bodyA.parent.onBeginContact.dispatch(a.bodyB.parent, a.shapeA, a.shapeB, a.contactEquations),
            a.bodyB.parent && a.bodyB.parent.onBeginContact.dispatch(a.bodyA.parent, a.shapeB, a.shapeA, a.contactEquations)
        },
        endContactHandler: function(a) {
            this.onEndContact.dispatch(a.bodyA, a.bodyB, a.shapeA, a.shapeB),
            a.bodyA.parent && a.bodyA.parent.onEndContact.dispatch(a.bodyB.parent, a.shapeA, a.shapeB),
            a.bodyB.parent && a.bodyB.parent.onEndContact.dispatch(a.bodyA.parent, a.shapeB, a.shapeA)
        },
        setBoundsToWorld: function(a, b, c, d, e) {
            this.setBounds(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, a, b, c, d, e)
        },
        setWorldMaterial: function(a, b, c, d, e) {
            "undefined" == typeof b && (b = !0),
            "undefined" == typeof c && (c = !0),
            "undefined" == typeof d && (d = !0),
            "undefined" == typeof e && (e = !0),
            b && this.walls.left && (this.walls.left.shapes[0].material = a),
            c && this.walls.right && (this.walls.right.shapes[0].material = a),
            d && this.walls.top && (this.walls.top.shapes[0].material = a),
            e && this.walls.bottom && (this.walls.bottom.shapes[0].material = a)
        },
        updateBoundsCollisionGroup: function(a) {
            var b = this.everythingCollisionGroup.mask;
            "undefined" == typeof a && (b = this.boundsCollisionGroup.mask),
            this.walls.left && (this.walls.left.shapes[0].collisionGroup = b),
            this.walls.right && (this.walls.right.shapes[0].collisionGroup = b),
            this.walls.top && (this.walls.top.shapes[0].collisionGroup = b),
            this.walls.bottom && (this.walls.bottom.shapes[0].collisionGroup = b)
        },
        setBounds: function(a, b, c, d, e, f, g, h, i) {
            "undefined" == typeof e && (e = this._boundsLeft),
            "undefined" == typeof f && (f = this._boundsRight),
            "undefined" == typeof g && (g = this._boundsTop),
            "undefined" == typeof h && (h = this._boundsBottom),
            "undefined" == typeof i && (i = this._boundsOwnGroup),
            this.walls.left && this.world.removeBody(this.walls.left),
            this.walls.right && this.world.removeBody(this.walls.right),
            this.walls.top && this.world.removeBody(this.walls.top),
            this.walls.bottom && this.world.removeBody(this.walls.bottom),
            e && (this.walls.left = new p2.Body({
                mass: 0,
                position: [this.pxmi(a), this.pxmi(b)],
                angle: 1.5707963267948966
            }), this.walls.left.addShape(new p2.Plane), i && (this.walls.left.shapes[0].collisionGroup = this.boundsCollisionGroup.mask), this.world.addBody(this.walls.left)),
            f && (this.walls.right = new p2.Body({
                mass: 0,
                position: [this.pxmi(a + c), this.pxmi(b)],
                angle: -1.5707963267948966
            }), this.walls.right.addShape(new p2.Plane), i && (this.walls.right.shapes[0].collisionGroup = this.boundsCollisionGroup.mask), this.world.addBody(this.walls.right)),
            g && (this.walls.top = new p2.Body({
                mass: 0,
                position: [this.pxmi(a), this.pxmi(b)],
                angle: -3.141592653589793
            }), this.walls.top.addShape(new p2.Plane), i && (this.walls.top.shapes[0].collisionGroup = this.boundsCollisionGroup.mask), this.world.addBody(this.walls.top)),
            h && (this.walls.bottom = new p2.Body({
                mass: 0,
                position: [this.pxmi(a), this.pxmi(b + d)]
            }), this.walls.bottom.addShape(new p2.Plane), i && (this.walls.bottom.shapes[0].collisionGroup = this.boundsCollisionGroup.mask), this.world.addBody(this.walls.bottom)),
            this._boundsLeft = e,
            this._boundsRight = f,
            this._boundsTop = g,
            this._boundsBottom = h,
            this._boundsOwnGroup = i
        },
        pause: function() {
            this.paused = !0
        },
        resume: function() {
            this.paused = !1
        },
        update: function() {
            this.paused || this.world.step(this.useElapsedTime ? this.game.time.physicsElapsed: this.frameRate)
        },
        reset: function() {
            this.world.on("beginContact", this.beginContactHandler, this),
            this.world.on("endContact", this.endContactHandler, this),
            this.nothingCollisionGroup = new c.Physics.P2.CollisionGroup(1),
            this.boundsCollisionGroup = new c.Physics.P2.CollisionGroup(2),
            this.everythingCollisionGroup = new c.Physics.P2.CollisionGroup(2147483648),
            this._collisionGroupID = 2,
            this.setBoundsToWorld(!0, !0, !0, !0, !1)
        },
        clear: function() {
            this.world.time = 0,
            this.world.fixedStepTime = 0,
            this.world.solver && this.world.solver.equations.length && this.world.solver.removeAllEquations();
            for (var a = this.world.constraints,
            b = a.length - 1; b >= 0; b--) this.world.removeConstraint(a[b]);
            for (var c = this.world.bodies,
            b = c.length - 1; b >= 0; b--) this.world.removeBody(c[b]);
            for (var d = this.world.springs,
            b = d.length - 1; b >= 0; b--) this.world.removeSpring(d[b]);
            for (var e = this.world.contactMaterials,
            b = e.length - 1; b >= 0; b--) this.world.removeContactMaterial(e[b]);
            this.world.off("beginContact", this.beginContactHandler, this),
            this.world.off("endContact", this.endContactHandler, this),
            this.postBroadphaseCallback = null,
            this.callbackContext = null,
            this.impactCallback = null,
            this.collisionGroups = [],
            this._toRemove = [],
            this.boundsCollidesWith = []
        },
        destroy: function() {
            this.clear(),
            this.game = null
        },
        addBody: function(a) {
            return a.data.world ? !1 : (this.world.addBody(a.data), this.onBodyAdded.dispatch(a), !0)
        },
        removeBody: function(a) {
            return a.data.world == this.world && (this.world.removeBody(a.data), this.onBodyRemoved.dispatch(a)),
            a
        },
        addSpring: function(a) {
            return this.world.addSpring(a instanceof c.Physics.P2.Spring || a instanceof c.Physics.P2.RotationalSpring ? a.data: a),
            this.onSpringAdded.dispatch(a),
            a
        },
        removeSpring: function(a) {
            return this.world.removeSpring(a instanceof c.Physics.P2.Spring || a instanceof c.Physics.P2.RotationalSpring ? a.data: a),
            this.onSpringRemoved.dispatch(a),
            a
        },
        createDistanceConstraint: function(a, b, d, e, f, g) {
            return a = this.getBody(a),
            b = this.getBody(b),
            a && b ? this.addConstraint(new c.Physics.P2.DistanceConstraint(this, a, b, d, e, f, g)) : void console.warn("Cannot create Constraint, invalid body objects given")
        },
        createGearConstraint: function(a, b, d, e) {
            return a = this.getBody(a),
            b = this.getBody(b),
            a && b ? this.addConstraint(new c.Physics.P2.GearConstraint(this, a, b, d, e)) : void console.warn("Cannot create Constraint, invalid body objects given")
        },
        createRevoluteConstraint: function(a, b, d, e, f, g) {
            return a = this.getBody(a),
            d = this.getBody(d),
            a && d ? this.addConstraint(new c.Physics.P2.RevoluteConstraint(this, a, b, d, e, f, g)) : void console.warn("Cannot create Constraint, invalid body objects given")
        },
        createLockConstraint: function(a, b, d, e, f) {
            return a = this.getBody(a),
            b = this.getBody(b),
            a && b ? this.addConstraint(new c.Physics.P2.LockConstraint(this, a, b, d, e, f)) : void console.warn("Cannot create Constraint, invalid body objects given")
        },
        createPrismaticConstraint: function(a, b, d, e, f, g, h) {
            return a = this.getBody(a),
            b = this.getBody(b),
            a && b ? this.addConstraint(new c.Physics.P2.PrismaticConstraint(this, a, b, d, e, f, g, h)) : void console.warn("Cannot create Constraint, invalid body objects given")
        },
        addConstraint: function(a) {
            return this.world.addConstraint(a),
            this.onConstraintAdded.dispatch(a),
            a
        },
        removeConstraint: function(a) {
            return this.world.removeConstraint(a),
            this.onConstraintRemoved.dispatch(a),
            a
        },
        addContactMaterial: function(a) {
            return this.world.addContactMaterial(a),
            this.onContactMaterialAdded.dispatch(a),
            a
        },
        removeContactMaterial: function(a) {
            return this.world.removeContactMaterial(a),
            this.onContactMaterialRemoved.dispatch(a),
            a
        },
        getContactMaterial: function(a, b) {
            return this.world.getContactMaterial(a, b)
        },
        setMaterial: function(a, b) {
            for (var c = b.length; c--;) b[c].setMaterial(a)
        },
        createMaterial: function(a, b) {
            a = a || "";
            var d = new c.Physics.P2.Material(a);
            return this.materials.push(d),
            "undefined" != typeof b && b.setMaterial(d),
            d
        },
        createContactMaterial: function(a, b, d) {
            "undefined" == typeof a && (a = this.createMaterial()),
            "undefined" == typeof b && (b = this.createMaterial());
            var e = new c.Physics.P2.ContactMaterial(a, b, d);
            return this.addContactMaterial(e)
        },
        getBodies: function() {
            for (var a = [], b = this.world.bodies.length; b--;) a.push(this.world.bodies[b].parent);
            return a
        },
        getBody: function(a) {
            return a instanceof p2.Body ? a: a instanceof c.Physics.P2.Body ? a.data: a.body && a.body.type === c.Physics.P2JS ? a.body.data: null
        },
        getSprings: function() {
            for (var a = [], b = this.world.springs.length; b--;) a.push(this.world.springs[b].parent);
            return a
        },
        getConstraints: function() {
            for (var a = [], b = this.world.constraints.length; b--;) a.push(this.world.constraints[b].parent);
            return a
        },
        hitTest: function(a, b, d, e) {
            "undefined" == typeof b && (b = this.world.bodies),
            "undefined" == typeof d && (d = 5),
            "undefined" == typeof e && (e = !1);
            for (var f = [this.pxmi(a.x), this.pxmi(a.y)], g = [], h = b.length; h--;) b[h] instanceof c.Physics.P2.Body && (!e || b[h].data.type !== p2.Body.STATIC) ? g.push(b[h].data) : b[h] instanceof p2.Body && b[h].parent && (!e || b[h].type !== p2.Body.STATIC) ? g.push(b[h]) : b[h] instanceof c.Sprite && b[h].hasOwnProperty("body") && (!e || b[h].body.data.type !== p2.Body.STATIC) && g.push(b[h].body.data);
            return this.world.hitTest(f, g, d)
        },
        toJSON: function() {
            return this.world.toJSON()
        },
        createCollisionGroup: function(a) {
            var b = Math.pow(2, this._collisionGroupID);
            this.walls.left && (this.walls.left.shapes[0].collisionMask = this.walls.left.shapes[0].collisionMask | b),
            this.walls.right && (this.walls.right.shapes[0].collisionMask = this.walls.right.shapes[0].collisionMask | b),
            this.walls.top && (this.walls.top.shapes[0].collisionMask = this.walls.top.shapes[0].collisionMask | b),
            this.walls.bottom && (this.walls.bottom.shapes[0].collisionMask = this.walls.bottom.shapes[0].collisionMask | b),
            this._collisionGroupID++;
            var d = new c.Physics.P2.CollisionGroup(b);
            return this.collisionGroups.push(d),
            a && this.setCollisionGroup(a, d),
            d
        },
        setCollisionGroup: function(a, b) {
            if (a instanceof c.Group) for (var d = 0; d < a.total; d++) a.children[d].body && a.children[d].body.type === c.Physics.P2JS && a.children[d].body.setCollisionGroup(b);
            else a.body.setCollisionGroup(b)
        },
        createSpring: function(a, b, d, e, f, g, h, i, j) {
            return a = this.getBody(a),
            b = this.getBody(b),
            a && b ? this.addSpring(new c.Physics.P2.Spring(this, a, b, d, e, f, g, h, i, j)) : void console.warn("Cannot create Spring, invalid body objects given")
        },
        createRotationalSpring: function(a, b, d, e, f) {
            return a = this.getBody(a),
            b = this.getBody(b),
            a && b ? this.addSpring(new c.Physics.P2.RotationalSpring(this, a, b, d, e, f)) : void console.warn("Cannot create Rotational Spring, invalid body objects given")
        },
        createBody: function(a, b, d, e, f, g) {
            "undefined" == typeof e && (e = !1);
            var h = new c.Physics.P2.Body(this.game, null, a, b, d);
            if (g) {
                var i = h.addPolygon(f, g);
                if (!i) return ! 1
            }
            return e && this.world.addBody(h.data),
            h
        },
        createParticle: function(a, b, d, e, f, g) {
            "undefined" == typeof e && (e = !1);
            var h = new c.Physics.P2.Body(this.game, null, a, b, d);
            if (g) {
                var i = h.addPolygon(f, g);
                if (!i) return ! 1
            }
            return e && this.world.addBody(h.data),
            h
        },
        convertCollisionObjects: function(a, b, c) {
            "undefined" == typeof c && (c = !0);
            for (var d = [], e = 0, f = a.collision[b].length; f > e; e++) {
                var g = a.collision[b][e],
                h = this.createBody(g.x, g.y, 0, c, {},
                g.polyline);
                h && d.push(h)
            }
            return d
        },
        clearTilemapLayerBodies: function(a, b) {
            b = a.getLayer(b);
            for (var c = a.layers[b].bodies.length; c--;) a.layers[b].bodies[c].destroy();
            a.layers[b].bodies.length = 0
        },
        convertTilemap: function(a, b, c, d) {
            b = a.getLayer(b),
            "undefined" == typeof c && (c = !0),
            "undefined" == typeof d && (d = !0),
            this.clearTilemapLayerBodies(a, b);
            for (var e = 0,
            f = 0,
            g = 0,
            h = 0,
            i = a.layers[b].height; i > h; h++) {
                e = 0;
                for (var j = 0,
                k = a.layers[b].width; k > j; j++) {
                    var l = a.layers[b].data[h][j];
                    if (l && l.index > -1 && l.collides) if (d) {
                        var m = a.getTileRight(b, j, h);
                        if (0 === e && (f = l.x * l.width, g = l.y * l.height, e = l.width), m && m.collides) e += l.width;
                        else {
                            var n = this.createBody(f, g, 0, !1);
                            n.addRectangle(e, l.height, e / 2, l.height / 2, 0),
                            c && this.addBody(n),
                            a.layers[b].bodies.push(n),
                            e = 0
                        }
                    } else {
                        var n = this.createBody(l.x * l.width, l.y * l.height, 0, !1);
                        n.addRectangle(l.width, l.height, l.width / 2, l.height / 2, 0),
                        c && this.addBody(n),
                        a.layers[b].bodies.push(n)
                    }
                }
            }
            return a.layers[b].bodies
        },
        mpx: function(a) {
            return a *= 20
        },
        pxm: function(a) {
            return.05 * a
        },
        mpxi: function(a) {
            return a *= -20
        },
        pxmi: function(a) {
            return a * -.05
        }
    },
    Object.defineProperty(c.Physics.P2.prototype, "friction", {
        get: function() {
            return this.world.defaultContactMaterial.friction
        },
        set: function(a) {
            this.world.defaultContactMaterial.friction = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "restitution", {
        get: function() {
            return this.world.defaultContactMaterial.restitution
        },
        set: function(a) {
            this.world.defaultContactMaterial.restitution = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "contactMaterial", {
        get: function() {
            return this.world.defaultContactMaterial
        },
        set: function(a) {
            this.world.defaultContactMaterial = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "applySpringForces", {
        get: function() {
            return this.world.applySpringForces
        },
        set: function(a) {
            this.world.applySpringForces = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "applyDamping", {
        get: function() {
            return this.world.applyDamping
        },
        set: function(a) {
            this.world.applyDamping = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "applyGravity", {
        get: function() {
            return this.world.applyGravity
        },
        set: function(a) {
            this.world.applyGravity = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "solveConstraints", {
        get: function() {
            return this.world.solveConstraints
        },
        set: function(a) {
            this.world.solveConstraints = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "time", {
        get: function() {
            return this.world.time
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "emitImpactEvent", {
        get: function() {
            return this.world.emitImpactEvent
        },
        set: function(a) {
            this.world.emitImpactEvent = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "sleepMode", {
        get: function() {
            return this.world.sleepMode
        },
        set: function(a) {
            this.world.sleepMode = a
        }
    }),
    Object.defineProperty(c.Physics.P2.prototype, "total", {
        get: function() {
            return this.world.bodies.length
        }
    }),
    c.Physics.P2.FixtureList = function(a) {
        Array.isArray(a) || (a = [a]),
        this.rawList = a,
        this.init(),
        this.parse(this.rawList)
    },
    c.Physics.P2.FixtureList.prototype = {
        init: function() {
            this.namedFixtures = {},
            this.groupedFixtures = [],
            this.allFixtures = []
        },
        setCategory: function(a, b) {
            var c = function(b) {
                b.collisionGroup = a
            };
            this.getFixtures(b).forEach(c)
        },
        setMask: function(a, b) {
            var c = function(b) {
                b.collisionMask = a
            };
            this.getFixtures(b).forEach(c)
        },
        setSensor: function(a, b) {
            var c = function(b) {
                b.sensor = a
            };
            this.getFixtures(b).forEach(c)
        },
        setMaterial: function(a, b) {
            var c = function(b) {
                b.material = a
            };
            this.getFixtures(b).forEach(c)
        },
        getFixtures: function(a) {
            var b = [];
            if (a) {
                a instanceof Array || (a = [a]);
                var c = this;
                return a.forEach(function(a) {
                    c.namedFixtures[a] && b.push(c.namedFixtures[a])
                }),
                this.flatten(b)
            }
            return this.allFixtures
        },
        getFixtureByKey: function(a) {
            return this.namedFixtures[a]
        },
        getGroup: function(a) {
            return this.groupedFixtures[a]
        },
        parse: function() {
            var a, b, c, d;
            c = this.rawList,
            d = [];
            for (a in c) b = c[a],
            isNaN(a - 0) ? this.namedFixtures[a] = this.flatten(b) : (this.groupedFixtures[a] = this.groupedFixtures[a] || [], this.groupedFixtures[a] = this.groupedFixtures[a].concat(b)),
            d.push(this.allFixtures = this.flatten(this.groupedFixtures))
        },
        flatten: function(a) {
            var b, c;
            return b = [],
            c = arguments.callee,
            a.forEach(function(a) {
                return Array.prototype.push.apply(b, Array.isArray(a) ? c(a) : [a])
            }),
            b
        }
    },
    c.Physics.P2.PointProxy = function(a, b) {
        this.world = a,
        this.destination = b
    },
    c.Physics.P2.PointProxy.prototype.constructor = c.Physics.P2.PointProxy,
    Object.defineProperty(c.Physics.P2.PointProxy.prototype, "x", {
        get: function() {
            return this.world.mpx(this.destination[0])
        },
        set: function(a) {
            this.destination[0] = this.world.pxm(a)
        }
    }),
    Object.defineProperty(c.Physics.P2.PointProxy.prototype, "y", {
        get: function() {
            return this.world.mpx(this.destination[1])
        },
        set: function(a) {
            this.destination[1] = this.world.pxm(a)
        }
    }),
    Object.defineProperty(c.Physics.P2.PointProxy.prototype, "mx", {
        get: function() {
            return this.destination[0]
        },
        set: function(a) {
            this.destination[0] = a;
        }
    }),
    Object.defineProperty(c.Physics.P2.PointProxy.prototype, "my", {
        get: function() {
            return this.destination[1]
        },
        set: function(a) {
            this.destination[1] = a
        }
    }),
    c.Physics.P2.InversePointProxy = function(a, b) {
        this.world = a,
        this.destination = b
    },
    c.Physics.P2.InversePointProxy.prototype.constructor = c.Physics.P2.InversePointProxy,
    Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "x", {
        get: function() {
            return this.world.mpxi(this.destination[0])
        },
        set: function(a) {
            this.destination[0] = this.world.pxmi(a)
        }
    }),
    Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "y", {
        get: function() {
            return this.world.mpxi(this.destination[1])
        },
        set: function(a) {
            this.destination[1] = this.world.pxmi(a)
        }
    }),
    Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "mx", {
        get: function() {
            return this.destination[0]
        },
        set: function(a) {
            this.destination[0] = -a
        }
    }),
    Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "my", {
        get: function() {
            return this.destination[1]
        },
        set: function(a) {
            this.destination[1] = -a
        }
    }),
    c.Physics.P2.Body = function(a, b, d, e, f) {
        b = b || null,
        d = d || 0,
        e = e || 0,
        "undefined" == typeof f && (f = 1),
        this.game = a,
        this.world = a.physics.p2,
        this.sprite = b,
        this.type = c.Physics.P2JS,
        this.offset = new c.Point,
        this.data = new p2.Body({
            position: [this.world.pxmi(d), this.world.pxmi(e)],
            mass: f
        }),
        this.data.parent = this,
        this.velocity = new c.Physics.P2.InversePointProxy(this.world, this.data.velocity),
        this.force = new c.Physics.P2.InversePointProxy(this.world, this.data.force),
        this.gravity = new c.Point,
        this.onBeginContact = new c.Signal,
        this.onEndContact = new c.Signal,
        this.collidesWith = [],
        this.removeNextStep = !1,
        this.debugBody = null,
        this.dirty = !1,
        this._collideWorldBounds = !0,
        this._bodyCallbacks = {},
        this._bodyCallbackContext = {},
        this._groupCallbacks = {},
        this._groupCallbackContext = {},
        this._reset = !1,
        b && (this.setRectangleFromSprite(b), b.exists && this.game.physics.p2.addBody(this))
    },
    c.Physics.P2.Body.prototype = {
        createBodyCallback: function(a, b, c) {
            var d = -1;
            a.id ? d = a.id: a.body && (d = a.body.id),
            d > -1 && (null === b ? (delete this._bodyCallbacks[d], delete this._bodyCallbackContext[d]) : (this._bodyCallbacks[d] = b, this._bodyCallbackContext[d] = c))
        },
        createGroupCallback: function(a, b, c) {
            null === b ? (delete this._groupCallbacks[a.mask], delete this._groupCallbacksContext[a.mask]) : (this._groupCallbacks[a.mask] = b, this._groupCallbackContext[a.mask] = c)
        },
        getCollisionMask: function() {
            var a = 0;
            this._collideWorldBounds && (a = this.game.physics.p2.boundsCollisionGroup.mask);
            for (var b = 0; b < this.collidesWith.length; b++) a |= this.collidesWith[b].mask;
            return a
        },
        updateCollisionMask: function(a) {
            var b = this.getCollisionMask();
            if ("undefined" == typeof a) for (var c = this.data.shapes.length - 1; c >= 0; c--) this.data.shapes[c].collisionMask = b;
            else a.collisionMask = b
        },
        setCollisionGroup: function(a, b) {
            var c = this.getCollisionMask();
            if ("undefined" == typeof b) for (var d = this.data.shapes.length - 1; d >= 0; d--) this.data.shapes[d].collisionGroup = a.mask,
            this.data.shapes[d].collisionMask = c;
            else b.collisionGroup = a.mask,
            b.collisionMask = c
        },
        clearCollision: function(a, b, c) {
            if ("undefined" == typeof a && (a = !0), "undefined" == typeof b && (b = !0), "undefined" == typeof c) for (var d = this.data.shapes.length - 1; d >= 0; d--) a && (this.data.shapes[d].collisionGroup = null),
            b && (this.data.shapes[d].collisionMask = null);
            else a && (c.collisionGroup = null),
            b && (c.collisionMask = null);
            a && (this.collidesWith.length = 0)
        },
        collides: function(a, b, c, d) {
            if (Array.isArray(a)) for (var e = 0; e < a.length; e++) - 1 === this.collidesWith.indexOf(a[e]) && (this.collidesWith.push(a[e]), b && this.createGroupCallback(a[e], b, c));
            else - 1 === this.collidesWith.indexOf(a) && (this.collidesWith.push(a), b && this.createGroupCallback(a, b, c));
            var f = this.getCollisionMask();
            if ("undefined" == typeof d) for (var e = this.data.shapes.length - 1; e >= 0; e--) this.data.shapes[e].collisionMask = f;
            else d.collisionMask = f
        },
        adjustCenterOfMass: function() {
            this.data.adjustCenterOfMass(),
            this.shapeChanged()
        },
        applyDamping: function(a) {
            this.data.applyDamping(a)
        },
        applyForce: function(a, b, c) {
            this.data.applyForce(a, [this.world.pxmi(b), this.world.pxmi(c)])
        },
        setZeroForce: function() {
            this.data.setZeroForce()
        },
        setZeroRotation: function() {
            this.data.angularVelocity = 0
        },
        setZeroVelocity: function() {
            this.data.velocity[0] = 0,
            this.data.velocity[1] = 0
        },
        setZeroDamping: function() {
            this.data.damping = 0,
            this.data.angularDamping = 0
        },
        toLocalFrame: function(a, b) {
            return this.data.toLocalFrame(a, b)
        },
        toWorldFrame: function(a, b) {
            return this.data.toWorldFrame(a, b)
        },
        rotateLeft: function(a) {
            this.data.angularVelocity = this.world.pxm( - a)
        },
        rotateRight: function(a) {
            this.data.angularVelocity = this.world.pxm(a)
        },
        moveForward: function(a) {
            var b = this.world.pxmi( - a),
            c = this.data.angle + Math.PI / 2;
            this.data.velocity[0] = b * Math.cos(c),
            this.data.velocity[1] = b * Math.sin(c)
        },
        moveBackward: function(a) {
            var b = this.world.pxmi( - a),
            c = this.data.angle + Math.PI / 2;
            this.data.velocity[0] = -(b * Math.cos(c)),
            this.data.velocity[1] = -(b * Math.sin(c))
        },
        thrust: function(a) {
            var b = this.world.pxmi( - a),
            c = this.data.angle + Math.PI / 2;
            this.data.force[0] += b * Math.cos(c),
            this.data.force[1] += b * Math.sin(c)
        },
        reverse: function(a) {
            var b = this.world.pxmi( - a),
            c = this.data.angle + Math.PI / 2;
            this.data.force[0] -= b * Math.cos(c),
            this.data.force[1] -= b * Math.sin(c)
        },
        moveLeft: function(a) {
            this.data.velocity[0] = this.world.pxmi( - a)
        },
        moveRight: function(a) {
            this.data.velocity[0] = this.world.pxmi(a)
        },
        moveUp: function(a) {
            this.data.velocity[1] = this.world.pxmi( - a)
        },
        moveDown: function(a) {
            this.data.velocity[1] = this.world.pxmi(a)
        },
        preUpdate: function() {
            this.dirty = !0,
            this.removeNextStep && (this.removeFromWorld(), this.removeNextStep = !1)
        },
        postUpdate: function() {
            this.sprite.x = this.world.mpxi(this.data.position[0]),
            this.sprite.y = this.world.mpxi(this.data.position[1]),
            this.fixedRotation || (this.sprite.rotation = this.data.angle),
            this.debugBody && this.debugBody.updateSpriteTransform(),
            this.dirty = !1
        },
        reset: function(a, b, c, d) {
            "undefined" == typeof c && (c = !1),
            "undefined" == typeof d && (d = !1),
            this.setZeroForce(),
            this.setZeroVelocity(),
            this.setZeroRotation(),
            c && this.setZeroDamping(),
            d && (this.mass = 1),
            this.x = a,
            this.y = b
        },
        addToWorld: function() {
            if (this.game.physics.p2._toRemove) for (var a = 0; a < this.game.physics.p2._toRemove.length; a++) this.game.physics.p2._toRemove[a] === this && this.game.physics.p2._toRemove.splice(a, 1);
            this.data.world !== this.game.physics.p2.world && this.game.physics.p2.addBody(this)
        },
        removeFromWorld: function() {
            this.data.world === this.game.physics.p2.world && this.game.physics.p2.removeBodyNextStep(this)
        },
        destroy: function() {
            this.removeFromWorld(),
            this.clearShapes(),
            this._bodyCallbacks = {},
            this._bodyCallbackContext = {},
            this._groupCallbacks = {},
            this._groupCallbackContext = {},
            this.debugBody && this.debugBody.destroy(!0, !0),
            this.debugBody = null,
            this.sprite.body = null,
            this.sprite = null
        },
        clearShapes: function() {
            for (var a = this.data.shapes.length; a--;) this.data.removeShape(this.data.shapes[a]);
            this.shapeChanged()
        },
        addShape: function(a, b, c, d) {
            return "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = 0),
            "undefined" == typeof d && (d = 0),
            this.data.addShape(a, [this.world.pxmi(b), this.world.pxmi(c)], d),
            this.shapeChanged(),
            a
        },
        addCircle: function(a, b, c, d) {
            var e = new p2.Circle(this.world.pxm(a));
            return this.addShape(e, b, c, d)
        },
        addRectangle: function(a, b, c, d, e) {
            var f = new p2.Rectangle(this.world.pxm(a), this.world.pxm(b));
            return this.addShape(f, c, d, e)
        },
        addPlane: function(a, b, c) {
            var d = new p2.Plane;
            return this.addShape(d, a, b, c)
        },
        addParticle: function(a, b, c) {
            var d = new p2.Particle;
            return this.addShape(d, a, b, c)
        },
        addLine: function(a, b, c, d) {
            var e = new p2.Line(this.world.pxm(a));
            return this.addShape(e, b, c, d)
        },
        addCapsule: function(a, b, c, d, e) {
            var f = new p2.Capsule(this.world.pxm(a), this.world.pxm(b));
            return this.addShape(f, c, d, e)
        },
        addPolygon: function(a, b) {
            a = a || {},
            Array.isArray(b) || (b = Array.prototype.slice.call(arguments, 1));
            var c = [];
            if (1 === b.length && Array.isArray(b[0])) c = b[0].slice(0);
            else if (Array.isArray(b[0])) c = b.slice();
            else if ("number" == typeof b[0]) for (var d = 0,
            e = b.length; e > d; d += 2) c.push([b[d], b[d + 1]]);
            var f = c.length - 1;
            c[f][0] === c[0][0] && c[f][1] === c[0][1] && c.pop();
            for (var g = 0; g < c.length; g++) c[g][0] = this.world.pxmi(c[g][0]),
            c[g][1] = this.world.pxmi(c[g][1]);
            var h = this.data.fromPolygon(c, a);
            return this.shapeChanged(),
            h
        },
        removeShape: function(a) {
            var b = this.data.removeShape(a);
            return this.shapeChanged(),
            b
        },
        setCircle: function(a, b, c, d) {
            return this.clearShapes(),
            this.addCircle(a, b, c, d)
        },
        setRectangle: function(a, b, c, d, e) {
            return "undefined" == typeof a && (a = 16),
            "undefined" == typeof b && (b = 16),
            this.clearShapes(),
            this.addRectangle(a, b, c, d, e)
        },
        setRectangleFromSprite: function(a) {
            return "undefined" == typeof a && (a = this.sprite),
            this.clearShapes(),
            this.addRectangle(a.width, a.height, 0, 0, a.rotation)
        },
        setMaterial: function(a, b) {
            if ("undefined" == typeof b) for (var c = this.data.shapes.length - 1; c >= 0; c--) this.data.shapes[c].material = a;
            else b.material = a
        },
        shapeChanged: function() {
            this.debugBody && this.debugBody.draw()
        },
        addPhaserPolygon: function(a, b) {
            for (var c = this.game.cache.getPhysicsData(a, b), d = [], e = 0; e < c.length; e++) {
                var f = c[e],
                g = this.addFixture(f);
                d[f.filter.group] = d[f.filter.group] || [],
                d[f.filter.group] = d[f.filter.group].concat(g),
                f.fixtureKey && (d[f.fixtureKey] = g)
            }
            return this.data.aabbNeedsUpdate = !0,
            this.shapeChanged(),
            d
        },
        addFixture: function(a) {
            var b = [];
            if (a.circle) {
                var c = new p2.Circle(this.world.pxm(a.circle.radius));
                c.collisionGroup = a.filter.categoryBits,
                c.collisionMask = a.filter.maskBits,
                c.sensor = a.isSensor;
                var d = p2.vec2.create();
                d[0] = this.world.pxmi(a.circle.position[0] - this.sprite.width / 2),
                d[1] = this.world.pxmi(a.circle.position[1] - this.sprite.height / 2),
                this.data.addShape(c, d),
                b.push(c)
            } else for (var e = a.polygons,
            f = p2.vec2.create(), g = 0; g < e.length; g++) {
                for (var h = e[g], i = [], j = 0; j < h.length; j += 2) i.push([this.world.pxmi(h[j]), this.world.pxmi(h[j + 1])]);
                for (var c = new p2.Convex(i), k = 0; k !== c.vertices.length; k++) {
                    var l = c.vertices[k];
                    p2.vec2.sub(l, l, c.centerOfMass)
                }
                p2.vec2.scale(f, c.centerOfMass, 1),
                f[0] -= this.world.pxmi(this.sprite.width / 2),
                f[1] -= this.world.pxmi(this.sprite.height / 2),
                c.updateTriangles(),
                c.updateCenterOfMass(),
                c.updateBoundingRadius(),
                c.collisionGroup = a.filter.categoryBits,
                c.collisionMask = a.filter.maskBits,
                c.sensor = a.isSensor,
                this.data.addShape(c, f),
                b.push(c)
            }
            return b
        },
        loadPolygon: function(a, b) {
            for (var c = this.game.cache.getPhysicsData(a, b), d = p2.vec2.create(), e = 0; e < c.length; e++) {
                for (var f = [], g = 0; g < c[e].shape.length; g += 2) f.push([this.world.pxmi(c[e].shape[g]), this.world.pxmi(c[e].shape[g + 1])]);
                for (var h = new p2.Convex(f), i = 0; i !== h.vertices.length; i++) {
                    var j = h.vertices[i];
                    p2.vec2.sub(j, j, h.centerOfMass)
                }
                p2.vec2.scale(d, h.centerOfMass, 1),
                d[0] -= this.world.pxmi(this.sprite.width / 2),
                d[1] -= this.world.pxmi(this.sprite.height / 2),
                h.updateTriangles(),
                h.updateCenterOfMass(),
                h.updateBoundingRadius(),
                this.data.addShape(h, d)
            }
            return this.data.aabbNeedsUpdate = !0,
            this.shapeChanged(),
            !0
        }
    },
    c.Physics.P2.Body.prototype.constructor = c.Physics.P2.Body,
    c.Physics.P2.Body.DYNAMIC = 1,
    c.Physics.P2.Body.STATIC = 2,
    c.Physics.P2.Body.KINEMATIC = 4,
    Object.defineProperty(c.Physics.P2.Body.prototype, "static", {
        get: function() {
            return this.data.type === c.Physics.P2.Body.STATIC
        },
        set: function(a) {
            a && this.data.type !== c.Physics.P2.Body.STATIC ? (this.data.type = c.Physics.P2.Body.STATIC, this.mass = 0) : a || this.data.type !== c.Physics.P2.Body.STATIC || (this.data.type = c.Physics.P2.Body.DYNAMIC, 0 === this.mass && (this.mass = 1))
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "dynamic", {
        get: function() {
            return this.data.type === c.Physics.P2.Body.DYNAMIC
        },
        set: function(a) {
            a && this.data.type !== c.Physics.P2.Body.DYNAMIC ? (this.data.type = c.Physics.P2.Body.DYNAMIC, 0 === this.mass && (this.mass = 1)) : a || this.data.type !== c.Physics.P2.Body.DYNAMIC || (this.data.type = c.Physics.P2.Body.STATIC, this.mass = 0)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "kinematic", {
        get: function() {
            return this.data.type === c.Physics.P2.Body.KINEMATIC
        },
        set: function(a) {
            a && this.data.type !== c.Physics.P2.Body.KINEMATIC ? (this.data.type = c.Physics.P2.Body.KINEMATIC, this.mass = 4) : a || this.data.type !== c.Physics.P2.Body.KINEMATIC || (this.data.type = c.Physics.P2.Body.STATIC, this.mass = 0)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "allowSleep", {
        get: function() {
            return this.data.allowSleep
        },
        set: function(a) {
            a !== this.data.allowSleep && (this.data.allowSleep = a)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "angle", {
        get: function() {
            return c.Math.wrapAngle(c.Math.radToDeg(this.data.angle))
        },
        set: function(a) {
            this.data.angle = c.Math.degToRad(c.Math.wrapAngle(a))
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "angularDamping", {
        get: function() {
            return this.data.angularDamping
        },
        set: function(a) {
            this.data.angularDamping = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "angularForce", {
        get: function() {
            return this.data.angularForce
        },
        set: function(a) {
            this.data.angularForce = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "angularVelocity", {
        get: function() {
            return this.data.angularVelocity
        },
        set: function(a) {
            this.data.angularVelocity = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "damping", {
        get: function() {
            return this.data.damping
        },
        set: function(a) {
            this.data.damping = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "fixedRotation", {
        get: function() {
            return this.data.fixedRotation
        },
        set: function(a) {
            a !== this.data.fixedRotation && (this.data.fixedRotation = a)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "inertia", {
        get: function() {
            return this.data.inertia
        },
        set: function(a) {
            this.data.inertia = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "mass", {
        get: function() {
            return this.data.mass
        },
        set: function(a) {
            a !== this.data.mass && (this.data.mass = a, this.data.updateMassProperties())
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "motionState", {
        get: function() {
            return this.data.type
        },
        set: function(a) {
            a !== this.data.type && (this.data.type = a)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "rotation", {
        get: function() {
            return this.data.angle
        },
        set: function(a) {
            this.data.angle = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "sleepSpeedLimit", {
        get: function() {
            return this.data.sleepSpeedLimit
        },
        set: function(a) {
            this.data.sleepSpeedLimit = a
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "x", {
        get: function() {
            return this.world.mpxi(this.data.position[0])
        },
        set: function(a) {
            this.data.position[0] = this.world.pxmi(a)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "y", {
        get: function() {
            return this.world.mpxi(this.data.position[1])
        },
        set: function(a) {
            this.data.position[1] = this.world.pxmi(a)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "id", {
        get: function() {
            return this.data.id
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "debug", {
        get: function() {
            return null !== this.debugBody
        },
        set: function(a) {
            a && !this.debugBody ? this.debugBody = new c.Physics.P2.BodyDebug(this.game, this.data) : !a && this.debugBody && (this.debugBody.destroy(), this.debugBody = null)
        }
    }),
    Object.defineProperty(c.Physics.P2.Body.prototype, "collideWorldBounds", {
        get: function() {
            return this._collideWorldBounds
        },
        set: function(a) {
            a && !this._collideWorldBounds ? (this._collideWorldBounds = !0, this.updateCollisionMask()) : !a && this._collideWorldBounds && (this._collideWorldBounds = !1, this.updateCollisionMask())
        }
    }),
    c.Physics.P2.BodyDebug = function(a, b, d) {
        c.Group.call(this, a);
        var e = {
            pixelsPerLengthUnit: 20,
            debugPolygons: !1,
            lineWidth: 1,
            alpha: .5
        };
        this.settings = c.Utils.extend(e, d),
        this.ppu = this.settings.pixelsPerLengthUnit,
        this.ppu = -1 * this.ppu,
        this.body = b,
        this.canvas = new c.Graphics(a),
        this.canvas.alpha = this.settings.alpha,
        this.add(this.canvas),
        this.draw(),
        this.updateSpriteTransform()
    },
    c.Physics.P2.BodyDebug.prototype = Object.create(c.Group.prototype),
    c.Physics.P2.BodyDebug.prototype.constructor = c.Physics.P2.BodyDebug,
    c.Utils.extend(c.Physics.P2.BodyDebug.prototype, {
        updateSpriteTransform: function() {
            this.position.x = this.body.position[0] * this.ppu,
            this.position.y = this.body.position[1] * this.ppu,
            this.rotation = this.body.angle
        },
        draw: function() {
            var a, b, c, d, e, f, g, h, i, j, k, l, m, n, o;
            if (h = this.body, j = this.canvas, j.clear(), c = parseInt(this.randomPastelHex(), 16), f = 16711680, g = this.lineWidth, h instanceof p2.Body && h.shapes.length) {
                var p = h.shapes.length;
                for (d = 0; d !== p;) {
                    if (b = h.shapes[d], i = h.shapeOffsets[d], a = h.shapeAngles[d], i = i || 0, a = a || 0, b instanceof p2.Circle) this.drawCircle(j, i[0] * this.ppu, i[1] * this.ppu, a, b.radius * this.ppu, c, g);
                    else if (b instanceof p2.Capsule) this.drawCapsule(j, i[0] * this.ppu, i[1] * this.ppu, a, b.length * this.ppu, b.radius * this.ppu, f, c, g);
                    else if (b instanceof p2.Plane) this.drawPlane(j, i[0] * this.ppu, -i[1] * this.ppu, c, f, 5 * g, 10 * g, 10 * g, 100 * this.ppu, a);
                    else if (b instanceof p2.Line) this.drawLine(j, b.length * this.ppu, f, g);
                    else if (b instanceof p2.Rectangle) this.drawRectangle(j, i[0] * this.ppu, i[1] * this.ppu, a, b.width * this.ppu, b.height * this.ppu, f, c, g);
                    else if (b instanceof p2.Convex) {
                        for (l = [], m = p2.vec2.create(), e = n = 0, o = b.vertices.length; o >= 0 ? o > n: n > o; e = o >= 0 ? ++n: --n) k = b.vertices[e],
                        p2.vec2.rotate(m, k, a),
                        l.push([(m[0] + i[0]) * this.ppu, -(m[1] + i[1]) * this.ppu]);
                        this.drawConvex(j, l, b.triangles, f, c, g, this.settings.debugPolygons, [i[0] * this.ppu, -i[1] * this.ppu])
                    }
                    d++
                }
            }
        },
        drawRectangle: function(a, b, c, d, e, f, g, h, i) {
            "undefined" == typeof i && (i = 1),
            "undefined" == typeof g && (g = 0),
            a.lineStyle(i, g, 1),
            a.beginFill(h),
            a.drawRect(b - e / 2, c - f / 2, e, f)
        },
        drawCircle: function(a, b, c, d, e, f, g) {
            "undefined" == typeof g && (g = 1),
            "undefined" == typeof f && (f = 16777215),
            a.lineStyle(g, 0, 1),
            a.beginFill(f, 1),
            a.drawCircle(b, c, 2 * -e),
            a.endFill(),
            a.moveTo(b, c),
            a.lineTo(b + e * Math.cos( - d), c + e * Math.sin( - d))
        },
        drawLine: function(a, b, c, d) {
            "undefined" == typeof d && (d = 1),
            "undefined" == typeof c && (c = 0),
            a.lineStyle(5 * d, c, 1),
            a.moveTo( - b / 2, 0),
            a.lineTo(b / 2, 0)
        },
        drawConvex: function(a, b, c, d, e, f, g, h) {
            var i, j, k, l, m, n, o, p, q, r, s;
            if ("undefined" == typeof f && (f = 1), "undefined" == typeof d && (d = 0), g) {
                for (i = [16711680, 65280, 255], j = 0; j !== b.length + 1;) l = b[j % b.length],
                m = b[(j + 1) % b.length],
                o = l[0],
                r = l[1],
                p = m[0],
                s = m[1],
                a.lineStyle(f, i[j % i.length], 1),
                a.moveTo(o, -r),
                a.lineTo(p, -s),
                a.drawCircle(o, -r, 2 * f),
                j++;
                return a.lineStyle(f, 0, 1),
                a.drawCircle(h[0], h[1], 2 * f)
            }
            for (a.lineStyle(f, d, 1), a.beginFill(e), j = 0; j !== b.length;) k = b[j],
            n = k[0],
            q = k[1],
            0 === j ? a.moveTo(n, -q) : a.lineTo(n, -q),
            j++;
            return a.endFill(),
            b.length > 2 ? (a.moveTo(b[b.length - 1][0], -b[b.length - 1][1]), a.lineTo(b[0][0], -b[0][1])) : void 0
        },
        drawPath: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q, r;
            for ("undefined" == typeof e && (e = 1), "undefined" == typeof c && (c = 0), a.lineStyle(e, c, 1), "number" == typeof d && a.beginFill(d), h = null, i = null, g = 0; g < b.length;) p = b[g],
            q = p[0],
            r = p[1],
            (q !== h || r !== i) && (0 === g ? a.moveTo(q, r) : (j = h, k = i, l = q, m = r, n = b[(g + 1) % b.length][0], o = b[(g + 1) % b.length][1], f = (l - j) * (o - k) - (n - j) * (m - k), 0 !== f && a.lineTo(q, r)), h = q, i = r),
            g++;
            "number" == typeof d && a.endFill(),
            b.length > 2 && "number" == typeof d && (a.moveTo(b[b.length - 1][0], b[b.length - 1][1]), a.lineTo(b[0][0], b[0][1]))
        },
        drawPlane: function(a, b, c, d, e, f, g, h, i, j) {
            var k, l, m;
            "undefined" == typeof f && (f = 1),
            "undefined" == typeof d && (d = 16777215),
            a.lineStyle(f, e, 11),
            a.beginFill(d),
            k = i,
            a.moveTo(b, -c),
            l = b + Math.cos(j) * this.game.width,
            m = c + Math.sin(j) * this.game.height,
            a.lineTo(l, -m),
            a.moveTo(b, -c),
            l = b + Math.cos(j) * -this.game.width,
            m = c + Math.sin(j) * -this.game.height,
            a.lineTo(l, -m)
        },
        drawCapsule: function(a, b, c, d, e, f, g, h, i) {
            "undefined" == typeof i && (i = 1),
            "undefined" == typeof g && (g = 0),
            a.lineStyle(i, g, 1);
            var j = Math.cos(d),
            k = Math.sin(d);
            a.beginFill(h, 1),
            a.drawCircle( - e / 2 * j + b, -e / 2 * k + c, 2 * -f),
            a.drawCircle(e / 2 * j + b, e / 2 * k + c, 2 * -f),
            a.endFill(),
            a.lineStyle(i, g, 0),
            a.beginFill(h, 1),
            a.moveTo( - e / 2 * j + f * k + b, -e / 2 * k + f * j + c),
            a.lineTo(e / 2 * j + f * k + b, e / 2 * k + f * j + c),
            a.lineTo(e / 2 * j - f * k + b, e / 2 * k - f * j + c),
            a.lineTo( - e / 2 * j - f * k + b, -e / 2 * k - f * j + c),
            a.endFill(),
            a.lineStyle(i, g, 1),
            a.moveTo( - e / 2 * j + f * k + b, -e / 2 * k + f * j + c),
            a.lineTo(e / 2 * j + f * k + b, e / 2 * k + f * j + c),
            a.moveTo( - e / 2 * j - f * k + b, -e / 2 * k - f * j + c),
            a.lineTo(e / 2 * j - f * k + b, e / 2 * k - f * j + c)
        },
        randomPastelHex: function() {
            var a, b, c, d;
            return c = [255, 255, 255],
            d = Math.floor(256 * Math.random()),
            b = Math.floor(256 * Math.random()),
            a = Math.floor(256 * Math.random()),
            d = Math.floor((d + 3 * c[0]) / 4),
            b = Math.floor((b + 3 * c[1]) / 4),
            a = Math.floor((a + 3 * c[2]) / 4),
            this.rgbToHex(d, b, a)
        },
        rgbToHex: function(a, b, c) {
            return this.componentToHex(a) + this.componentToHex(b) + this.componentToHex(c)
        },
        componentToHex: function(a) {
            var b;
            return b = a.toString(16),
            2 === b.len ? b: b + "0"
        }
    }),
    c.Physics.P2.Spring = function(a, b, c, d, e, f, g, h, i, j) {
        this.game = a.game,
        this.world = a,
        "undefined" == typeof d && (d = 1),
        "undefined" == typeof e && (e = 100),
        "undefined" == typeof f && (f = 1),
        d = a.pxm(d);
        var k = {
            restLength: d,
            stiffness: e,
            damping: f
        };
        "undefined" != typeof g && null !== g && (k.worldAnchorA = [a.pxm(g[0]), a.pxm(g[1])]),
        "undefined" != typeof h && null !== h && (k.worldAnchorB = [a.pxm(h[0]), a.pxm(h[1])]),
        "undefined" != typeof i && null !== i && (k.localAnchorA = [a.pxm(i[0]), a.pxm(i[1])]),
        "undefined" != typeof j && null !== j && (k.localAnchorB = [a.pxm(j[0]), a.pxm(j[1])]),
        this.data = new p2.LinearSpring(b, c, k),
        this.data.parent = this
    },
    c.Physics.P2.Spring.prototype.constructor = c.Physics.P2.Spring,
    c.Physics.P2.RotationalSpring = function(a, b, c, d, e, f) {
        this.game = a.game,
        this.world = a,
        "undefined" == typeof d && (d = null),
        "undefined" == typeof e && (e = 100),
        "undefined" == typeof f && (f = 1),
        d && (d = a.pxm(d));
        var g = {
            restAngle: d,
            stiffness: e,
            damping: f
        };
        this.data = new p2.RotationalSpring(b, c, g),
        this.data.parent = this
    },
    c.Physics.P2.Spring.prototype.constructor = c.Physics.P2.Spring,
    c.Physics.P2.Material = function(a) {
        this.name = a,
        p2.Material.call(this)
    },
    c.Physics.P2.Material.prototype = Object.create(p2.Material.prototype),
    c.Physics.P2.Material.prototype.constructor = c.Physics.P2.Material,
    c.Physics.P2.ContactMaterial = function(a, b, c) {
        p2.ContactMaterial.call(this, a, b, c)
    },
    c.Physics.P2.ContactMaterial.prototype = Object.create(p2.ContactMaterial.prototype),
    c.Physics.P2.ContactMaterial.prototype.constructor = c.Physics.P2.ContactMaterial,
    c.Physics.P2.CollisionGroup = function(a) {
        this.mask = a
    },
    c.Physics.P2.DistanceConstraint = function(a, b, c, d, e, f, g) {
        "undefined" == typeof d && (d = 100),
        "undefined" == typeof e && (e = [0, 0]),
        "undefined" == typeof f && (f = [0, 0]),
        "undefined" == typeof g && (g = Number.MAX_VALUE),
        this.game = a.game,
        this.world = a,
        d = a.pxm(d),
        e = [a.pxmi(e[0]), a.pxmi(e[1])],
        f = [a.pxmi(f[0]), a.pxmi(f[1])];
        var h = {
            distance: d,
            localAnchorA: e,
            localAnchorB: f,
            maxForce: g
        };
        p2.DistanceConstraint.call(this, b, c, h)
    },
    c.Physics.P2.DistanceConstraint.prototype = Object.create(p2.DistanceConstraint.prototype),
    c.Physics.P2.DistanceConstraint.prototype.constructor = c.Physics.P2.DistanceConstraint,
    c.Physics.P2.GearConstraint = function(a, b, c, d, e) {
        "undefined" == typeof d && (d = 0),
        "undefined" == typeof e && (e = 1),
        this.game = a.game,
        this.world = a;
        var f = {
            angle: d,
            ratio: e
        };
        p2.GearConstraint.call(this, b, c, f)
    },
    c.Physics.P2.GearConstraint.prototype = Object.create(p2.GearConstraint.prototype),
    c.Physics.P2.GearConstraint.prototype.constructor = c.Physics.P2.GearConstraint,
    c.Physics.P2.LockConstraint = function(a, b, c, d, e, f) {
        "undefined" == typeof d && (d = [0, 0]),
        "undefined" == typeof e && (e = 0),
        "undefined" == typeof f && (f = Number.MAX_VALUE),
        this.game = a.game,
        this.world = a,
        d = [a.pxm(d[0]), a.pxm(d[1])];
        var g = {
            localOffsetB: d,
            localAngleB: e,
            maxForce: f
        };
        p2.LockConstraint.call(this, b, c, g)
    },
    c.Physics.P2.LockConstraint.prototype = Object.create(p2.LockConstraint.prototype),
    c.Physics.P2.LockConstraint.prototype.constructor = c.Physics.P2.LockConstraint,
    c.Physics.P2.PrismaticConstraint = function(a, b, c, d, e, f, g, h) {
        "undefined" == typeof d && (d = !0),
        "undefined" == typeof e && (e = [0, 0]),
        "undefined" == typeof f && (f = [0, 0]),
        "undefined" == typeof g && (g = [0, 0]),
        "undefined" == typeof h && (h = Number.MAX_VALUE),
        this.game = a.game,
        this.world = a,
        e = [a.pxmi(e[0]), a.pxmi(e[1])],
        f = [a.pxmi(f[0]), a.pxmi(f[1])];
        var i = {
            localAnchorA: e,
            localAnchorB: f,
            localAxisA: g,
            maxForce: h,
            disableRotationalLock: !d
        };
        p2.PrismaticConstraint.call(this, b, c, i)
    },
    c.Physics.P2.PrismaticConstraint.prototype = Object.create(p2.PrismaticConstraint.prototype),
    c.Physics.P2.PrismaticConstraint.prototype.constructor = c.Physics.P2.PrismaticConstraint,
    c.Physics.P2.RevoluteConstraint = function(a, b, c, d, e, f, g) {
        "undefined" == typeof f && (f = Number.MAX_VALUE),
        "undefined" == typeof g && (g = null),
        this.game = a.game,
        this.world = a,
        c = [a.pxmi(c[0]), a.pxmi(c[1])],
        e = [a.pxmi(e[0]), a.pxmi(e[1])],
        g && (g = [a.pxmi(g[0]), a.pxmi(g[1])]);
        var h = {
            worldPivot: g,
            localPivotA: c,
            localPivotB: e,
            maxForce: f
        };
        p2.RevoluteConstraint.call(this, b, d, h)
    },
    c.Physics.P2.RevoluteConstraint.prototype = Object.create(p2.RevoluteConstraint.prototype),
    c.Physics.P2.RevoluteConstraint.prototype.constructor = c.Physics.P2.RevoluteConstraint,
    c.Tile = function(a, b, c, d, e, f) {
        this.layer = a,
        this.index = b,
        this.x = c,
        this.y = d,
        this.rotation = 0,
        this.flipped = !1,
        this.worldX = c * e,
        this.worldY = d * f,
        this.width = e,
        this.height = f,
        this.centerX = Math.abs(e / 2),
        this.centerY = Math.abs(f / 2),
        this.alpha = 1,
        this.properties = {},
        this.scanned = !1,
        this.faceTop = !1,
        this.faceBottom = !1,
        this.faceLeft = !1,
        this.faceRight = !1,
        this.collideLeft = !1,
        this.collideRight = !1,
        this.collideUp = !1,
        this.collideDown = !1,
        this.collisionCallback = null,
        this.collisionCallbackContext = this
    },
    c.Tile.prototype = {
        containsPoint: function(a, b) {
            return ! (a < this.worldX || b < this.worldY || a > this.right || b > this.bottom)
        },
        intersects: function(a, b, c, d) {
            return c <= this.worldX ? !1 : d <= this.worldY ? !1 : a >= this.worldX + this.width ? !1 : b >= this.worldY + this.height ? !1 : !0
        },
        setCollisionCallback: function(a, b) {
            this.collisionCallback = a,
            this.collisionCallbackContext = b
        },
        destroy: function() {
            this.collisionCallback = null,
            this.collisionCallbackContext = null,
            this.properties = null
        },
        setCollision: function(a, b, c, d) {
            this.collideLeft = a,
            this.collideRight = b,
            this.collideUp = c,
            this.collideDown = d,
            this.faceLeft = a,
            this.faceRight = b,
            this.faceTop = c,
            this.faceBottom = d
        },
        resetCollision: function() {
            this.collideLeft = !1,
            this.collideRight = !1,
            this.collideUp = !1,
            this.collideDown = !1,
            this.faceTop = !1,
            this.faceBottom = !1,
            this.faceLeft = !1,
            this.faceRight = !1
        },
        isInteresting: function(a, b) {
            return a && b ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.faceTop || this.faceBottom || this.faceLeft || this.faceRight || this.collisionCallback: a ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown: b ? this.faceTop || this.faceBottom || this.faceLeft || this.faceRight: !1
        },
        copy: function(a) {
            this.index = a.index,
            this.alpha = a.alpha,
            this.properties = a.properties,
            this.collideUp = a.collideUp,
            this.collideDown = a.collideDown,
            this.collideLeft = a.collideLeft,
            this.collideRight = a.collideRight,
            this.collisionCallback = a.collisionCallback,
            this.collisionCallbackContext = a.collisionCallbackContext
        }
    },
    c.Tile.prototype.constructor = c.Tile,
    Object.defineProperty(c.Tile.prototype, "collides", {
        get: function() {
            return this.collideLeft || this.collideRight || this.collideUp || this.collideDown
        }
    }),
    Object.defineProperty(c.Tile.prototype, "canCollide", {
        get: function() {
            return this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.collisionCallback
        }
    }),
    Object.defineProperty(c.Tile.prototype, "left", {
        get: function() {
            return this.worldX
        }
    }),
    Object.defineProperty(c.Tile.prototype, "right", {
        get: function() {
            return this.worldX + this.width
        }
    }),
    Object.defineProperty(c.Tile.prototype, "top", {
        get: function() {
            return this.worldY
        }
    }),
    Object.defineProperty(c.Tile.prototype, "bottom", {
        get: function() {
            return this.worldY + this.height
        }
    }),
    c.Tilemap = function(a, b, d, e, f, g) {
        this.game = a,
        this.key = b;
        var h = c.TilemapParser.parse(this.game, b, d, e, f, g);
        null !== h && (this.width = h.width, this.height = h.height, this.tileWidth = h.tileWidth, this.tileHeight = h.tileHeight, this.orientation = h.orientation, this.format = h.format, this.version = h.version, this.properties = h.properties, this.widthInPixels = h.widthInPixels, this.heightInPixels = h.heightInPixels, this.layers = h.layers, this.tilesets = h.tilesets, this.tiles = h.tiles, this.objects = h.objects, this.collideIndexes = [], this.collision = h.collision, this.images = h.images, this.currentLayer = 0, this.debugMap = [], this._results = [], this._tempA = 0, this._tempB = 0)
    },
    c.Tilemap.CSV = 0,
    c.Tilemap.TILED_JSON = 1,
    c.Tilemap.NORTH = 0,
    c.Tilemap.EAST = 1,
    c.Tilemap.SOUTH = 2,
    c.Tilemap.WEST = 3,
    c.Tilemap.prototype = {
        create: function(a, b, c, d, e, f) {
            return "undefined" == typeof f && (f = this.game.world),
            this.width = b,
            this.height = c,
            this.setTileSize(d, e),
            this.layers.length = 0,
            this.createBlankLayer(a, b, c, d, e, f)
        },
        setTileSize: function(a, b) {
            this.tileWidth = a,
            this.tileHeight = b,
            this.widthInPixels = this.width * a,
            this.heightInPixels = this.height * b
        },
        addTilesetImage: function(a, b, d, e, f, g, h) {
            if ("undefined" == typeof d && (d = this.tileWidth), "undefined" == typeof e && (e = this.tileHeight), "undefined" == typeof f && (f = 0), "undefined" == typeof g && (g = 0), "undefined" == typeof h && (h = 0), 0 === d && (d = 32), 0 === e && (e = 32), "undefined" == typeof b) {
                if ("string" != typeof a) return null;
                if (b = a, !this.game.cache.checkImageKey(b)) return console.warn('Phaser.Tilemap.addTilesetImage: Invalid image key given: "' + b + '"'),
                null
            }
            if ("string" == typeof a && (a = this.getTilesetIndex(a), null === a && this.format === c.Tilemap.TILED_JSON)) return console.warn('Phaser.Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "' + b + '"'),
            null;
            if (this.tilesets[a]) return this.tilesets[a].setImage(this.game.cache.getImage(b)),
            this.tilesets[a];
            var i = new c.Tileset(b, h, d, e, f, g, {});
            i.setImage(this.game.cache.getImage(b)),
            this.tilesets.push(i);
            for (var j = this.tilesets.length - 1,
            k = f,
            l = f,
            m = 0,
            n = 0,
            o = 0,
            p = h; p < h + i.total && (this.tiles[p] = [k, l, j], k += d + g, m++, m !== i.total) && (n++, n !== i.columns || (k = f, l += e + g, n = 0, o++, o !== i.rows)); p++);
            return i
        },
        createFromObjects: function(a, b, d, e, f, g, h, i, j) {
            if ("undefined" == typeof f && (f = !0), "undefined" == typeof g && (g = !1), "undefined" == typeof h && (h = this.game.world), "undefined" == typeof i && (i = c.Sprite), "undefined" == typeof j && (j = !0), !this.objects[a]) return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: " + a);
            for (var k, l = 0,
            m = this.objects[a].length; m > l; l++) if (this.objects[a][l].gid === b) {
                k = new i(this.game, this.objects[a][l].x, this.objects[a][l].y, d, e),
                k.name = this.objects[a][l].name,
                k.visible = this.objects[a][l].visible,
                k.autoCull = g,
                k.exists = f,
                this.objects[a][l].rotation && (k.angle = this.objects[a][l].rotation),
                j && (k.y -= k.height),
                h.add(k);
                for (var n in this.objects[a][l].properties) h.set(k, n, this.objects[a][l].properties[n], !1, !1, 0, !0)
            }
        },
        createFromTiles: function(a, b, d, e, f, g) {
            "number" == typeof a && (a = [a]),
            "undefined" == typeof b || null === b ? b = [] : "number" == typeof b && (b = [b]),
            e = this.getLayer(e),
            "undefined" == typeof f && (f = this.game.world),
            "undefined" == typeof g && (g = {}),
            void 0 === g.customClass && (g.customClass = c.Sprite),
            void 0 === g.adjustY && (g.adjustY = !0);
            var h = this.layers[e].width,
            i = this.layers[e].height;
            if (this.copy(0, 0, h, i, e), this._results.length < 2) return 0;
            for (var j, k = 0,
            l = 1,
            m = this._results.length; m > l; l++) if ( - 1 !== a.indexOf(this._results[l].index)) {
                j = new g.customClass(this.game, this._results[l].worldX, this._results[l].worldY, d);
                for (var n in g) j[n] = g[n];
                f.add(j),
                k++
            }
            if (1 === b.length) for (l = 0; l < a.length; l++) this.replace(a[l], b[0], 0, 0, h, i, e);
            else if (b.length > 1) for (l = 0; l < a.length; l++) this.replace(a[l], b[l], 0, 0, h, i, e);
            return k
        },
        createLayer: function(a, b, d, e) {
            "undefined" == typeof b && (b = this.game.width),
            "undefined" == typeof d && (d = this.game.height),
            "undefined" == typeof e && (e = this.game.world);
            var f = a;
            return "string" == typeof a && (f = this.getLayerIndex(a)),
            null === f || f > this.layers.length ? void console.warn("Tilemap.createLayer: Invalid layer ID given: " + f) : e.add(new c.TilemapLayer(this.game, this, f, b, d))
        },
        createBlankLayer: function(a, b, d, e, f, g) {
            if ("undefined" == typeof g && (g = this.game.world), null !== this.getLayerIndex(a)) return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");
            for (var h, i = {
                name: a,
                x: 0,
                y: 0,
                width: b,
                height: d,
                widthInPixels: b * e,
                heightInPixels: d * f,
                alpha: 1,
                visible: !0,
                properties: {},
                indexes: [],
                callbacks: [],
                bodies: [],
                data: null
            },
            j = [], k = 0; d > k; k++) {
                h = [];
                for (var l = 0; b > l; l++) h.push(new c.Tile(i, -1, l, k, e, f));
                j.push(h)
            }
            i.data = j,
            this.layers.push(i),
            this.currentLayer = this.layers.length - 1;
            var m = i.widthInPixels,
            n = i.heightInPixels;
            m > this.game.width && (m = this.game.width),
            n > this.game.height && (n = this.game.height);
            var j = new c.TilemapLayer(this.game, this, this.layers.length - 1, m, n);
            return j.name = a,
            g.add(j)
        },
        getIndex: function(a, b) {
            for (var c = 0; c < a.length; c++) if (a[c].name === b) return c;
            return null
        },
        getLayerIndex: function(a) {
            return this.getIndex(this.layers, a)
        },
        getTilesetIndex: function(a) {
            return this.getIndex(this.tilesets, a)
        },
        getImageIndex: function(a) {
            return this.getIndex(this.images, a)
        },
        getObjectIndex: function(a) {
            return this.getIndex(this.objects, a)
        },
        setTileIndexCallback: function(a, b, c, d) {
            if (d = this.getLayer(d), "number" == typeof a) this.layers[d].callbacks[a] = {
                callback: b,
                callbackContext: c
            };
            else for (var e = 0,
            f = a.length; f > e; e++) this.layers[d].callbacks[a[e]] = {
                callback: b,
                callbackContext: c
            }
        },
        setTileLocationCallback: function(a, b, c, d, e, f, g) {
            if (g = this.getLayer(g), this.copy(a, b, c, d, g), !(this._results.length < 2)) for (var h = 1; h < this._results.length; h++) this._results[h].setCollisionCallback(e, f)
        },
        setCollision: function(a, b, c, d) {
            if ("undefined" == typeof b && (b = !0), "undefined" == typeof d && (d = !0), c = this.getLayer(c), "number" == typeof a) return this.setCollisionByIndex(a, b, c, !0);
            if (Array.isArray(a)) {
                for (var e = 0; e < a.length; e++) this.setCollisionByIndex(a[e], b, c, !1);
                d && this.calculateFaces(c)
            }
        },
        setCollisionBetween: function(a, b, c, d, e) {
            if ("undefined" == typeof c && (c = !0), "undefined" == typeof e && (e = !0), d = this.getLayer(d), !(a > b)) {
                for (var f = a; b >= f; f++) this.setCollisionByIndex(f, c, d, !1);
                e && this.calculateFaces(d)
            }
        },
        setCollisionByExclusion: function(a, b, c, d) {
            "undefined" == typeof b && (b = !0),
            "undefined" == typeof d && (d = !0),
            c = this.getLayer(c);
            for (var e = 0,
            f = this.tiles.length; f > e; e++) - 1 === a.indexOf(e) && this.setCollisionByIndex(e, b, c, !1);
            d && this.calculateFaces(c)
        },
        setCollisionByIndex: function(a, b, c, d) {
            if ("undefined" == typeof b && (b = !0), "undefined" == typeof c && (c = this.currentLayer), "undefined" == typeof d && (d = !0), b) this.collideIndexes.push(a);
            else {
                var e = this.collideIndexes.indexOf(a);
                e > -1 && this.collideIndexes.splice(e, 1)
            }
            for (var f = 0; f < this.layers[c].height; f++) for (var g = 0; g < this.layers[c].width; g++) {
                var h = this.layers[c].data[f][g];
                h && h.index === a && (b ? h.setCollision(!0, !0, !0, !0) : h.resetCollision(), h.faceTop = b, h.faceBottom = b, h.faceLeft = b, h.faceRight = b)
            }
            return d && this.calculateFaces(c),
            c
        },
        getLayer: function(a) {
            return "undefined" == typeof a ? a = this.currentLayer: "string" == typeof a ? a = this.getLayerIndex(a) : a instanceof c.TilemapLayer && (a = a.index),
            a
        },
        setPreventRecalculate: function(a) {
            if (a === !0 && this.preventingRecalculate !== !0 && (this.preventingRecalculate = !0, this.needToRecalculate = {}), a === !1 && this.preventingRecalculate === !0) {
                this.preventingRecalculate = !1;
                for (var b in this.needToRecalculate) this.calculateFaces(b);
                this.needToRecalculate = !1
            }
        },
        calculateFaces: function(a) {
            if (this.preventingRecalculate) return void(this.needToRecalculate[a] = !0);
            for (var b = null,
            c = null,
            d = null,
            e = null,
            f = 0,
            g = this.layers[a].height; g > f; f++) for (var h = 0,
            i = this.layers[a].width; i > h; h++) {
                var j = this.layers[a].data[f][h];
                j && (b = this.getTileAbove(a, h, f), c = this.getTileBelow(a, h, f), d = this.getTileLeft(a, h, f), e = this.getTileRight(a, h, f), j.collides && (j.faceTop = !0, j.faceBottom = !0, j.faceLeft = !0, j.faceRight = !0), b && b.collides && (j.faceTop = !1), c && c.collides && (j.faceBottom = !1), d && d.collides && (j.faceLeft = !1), e && e.collides && (j.faceRight = !1))
            }
        },
        getTileAbove: function(a, b, c) {
            return c > 0 ? this.layers[a].data[c - 1][b] : null
        },
        getTileBelow: function(a, b, c) {
            return c < this.layers[a].height - 1 ? this.layers[a].data[c + 1][b] : null
        },
        getTileLeft: function(a, b, c) {
            return b > 0 ? this.layers[a].data[c][b - 1] : null
        },
        getTileRight: function(a, b, c) {
            return b < this.layers[a].width - 1 ? this.layers[a].data[c][b + 1] : null
        },
        setLayer: function(a) {
            a = this.getLayer(a),
            this.layers[a] && (this.currentLayer = a)
        },
        hasTile: function(a, b, c) {
            return c = this.getLayer(c),
            this.layers[c].data[b][a].index > -1
        },
        removeTile: function(a, b, d) {
            if (d = this.getLayer(d), a >= 0 && a < this.layers[d].width && b >= 0 && b < this.layers[d].height && this.hasTile(a, b, d)) {
                var e = this.layers[d].data[b][a];
                return this.layers[d].data[b][a] = new c.Tile(this.layers[d], -1, a, b, this.tileWidth, this.tileHeight),
                this.layers[d].dirty = !0,
                this.calculateFaces(d),
                e
            }
        },
        removeTileWorldXY: function(a, b, c, d, e) {
            return e = this.getLayer(e),
            a = this.game.math.snapToFloor(a, c) / c,
            b = this.game.math.snapToFloor(b, d) / d,
            this.removeTile(a, b, e)
        },
        putTile: function(a, b, d, e) {
            if (null === a) return this.removeTile(b, d, e);
            if (e = this.getLayer(e), b >= 0 && b < this.layers[e].width && d >= 0 && d < this.layers[e].height) {
                var f;
                return a instanceof c.Tile ? (f = a.index, this.hasTile(b, d, e) ? this.layers[e].data[d][b].copy(a) : this.layers[e].data[d][b] = new c.Tile(e, f, b, d, a.width, a.height)) : (f = a, this.hasTile(b, d, e) ? this.layers[e].data[d][b].index = f: this.layers[e].data[d][b] = new c.Tile(this.layers[e], f, b, d, this.tileWidth, this.tileHeight)),
                this.collideIndexes.indexOf(f) > -1 ? this.layers[e].data[d][b].setCollision(!0, !0, !0, !0) : this.layers[e].data[d][b].resetCollision(),
                this.layers[e].dirty = !0,
                this.calculateFaces(e),
                this.layers[e].data[d][b]
            }
            return null
        },
        putTileWorldXY: function(a, b, c, d, e, f) {
            return f = this.getLayer(f),
            b = this.game.math.snapToFloor(b, d) / d,
            c = this.game.math.snapToFloor(c, e) / e,
            this.putTile(a, b, c, f)
        },
        searchTileIndex: function(a, b, c, d) {
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = !1),
            d = this.getLayer(d);
            var e = 0;
            if (c) {
                for (var f = this.layers[d].height - 1; f >= 0; f--) for (var g = this.layers[d].width - 1; g >= 0; g--) if (this.layers[d].data[f][g].index === a) {
                    if (e === b) return this.layers[d].data[f][g];
                    e++
                }
            } else for (var f = 0; f < this.layers[d].height; f++) for (var g = 0; g < this.layers[d].width; g++) if (this.layers[d].data[f][g].index === a) {
                if (e === b) return this.layers[d].data[f][g];
                e++
            }
            return null
        },
        getTile: function(a, b, c, d) {
            return "undefined" == typeof d && (d = !1),
            c = this.getLayer(c),
            a >= 0 && a < this.layers[c].width && b >= 0 && b < this.layers[c].height ? -1 === this.layers[c].data[b][a].index ? d ? this.layers[c].data[b][a] : null: this.layers[c].data[b][a] : null
        },
        getTileWorldXY: function(a, b, c, d, e) {
            return "undefined" == typeof c && (c = this.tileWidth),
            "undefined" == typeof d && (d = this.tileHeight),
            e = this.getLayer(e),
            a = this.game.math.snapToFloor(a, c) / c,
            b = this.game.math.snapToFloor(b, d) / d,
            this.getTile(a, b, e)
        },
        copy: function(a, b, c, d, e) {
            if (e = this.getLayer(e), !this.layers[e]) return void(this._results.length = 0);
            "undefined" == typeof a && (a = 0),
            "undefined" == typeof b && (b = 0),
            "undefined" == typeof c && (c = this.layers[e].width),
            "undefined" == typeof d && (d = this.layers[e].height),
            0 > a && (a = 0),
            0 > b && (b = 0),
            c > this.layers[e].width && (c = this.layers[e].width),
            d > this.layers[e].height && (d = this.layers[e].height),
            this._results.length = 0,
            this._results.push({
                x: a,
                y: b,
                width: c,
                height: d,
                layer: e
            });
            for (var f = b; b + d > f; f++) for (var g = a; a + c > g; g++) this._results.push(this.layers[e].data[f][g]);
            return this._results
        },
        paste: function(a, b, c, d) {
            if ("undefined" == typeof a && (a = 0), "undefined" == typeof b && (b = 0), d = this.getLayer(d), c && !(c.length < 2)) {
                for (var e = a - c[1].x, f = b - c[1].y, g = 1; g < c.length; g++) this.layers[d].data[f + c[g].y][e + c[g].x].copy(c[g]);
                this.layers[d].dirty = !0,
                this.calculateFaces(d)
            }
        },
        swap: function(a, b, c, d, e, f, g) {
            g = this.getLayer(g),
            this.copy(c, d, e, f, g),
            this._results.length < 2 || (this._tempA = a, this._tempB = b, this._results.forEach(this.swapHandler, this), this.paste(c, d, this._results, g))
        },
        swapHandler: function(a) {
            a.index === this._tempA ? a.index = this._tempB: a.index === this._tempB && (a.index = this._tempA)
        },
        forEach: function(a, b, c, d, e, f, g) {
            g = this.getLayer(g),
            this.copy(c, d, e, f, g),
            this._results.length < 2 || (this._results.forEach(a, b), this.paste(c, d, this._results, g))
        },
        replace: function(a, b, c, d, e, f, g) {
            if (g = this.getLayer(g), this.copy(c, d, e, f, g), !(this._results.length < 2)) {
                for (var h = 1; h < this._results.length; h++) this._results[h].index === a && (this._results[h].index = b);
                this.paste(c, d, this._results, g)
            }
        },
        random: function(a, b, c, d, e) {
            if (e = this.getLayer(e), this.copy(a, b, c, d, e), !(this._results.length < 2)) {
                for (var f = [], g = 1; g < this._results.length; g++) if (this._results[g].index) {
                    var h = this._results[g].index; - 1 === f.indexOf(h) && f.push(h)
                }
                for (var i = 1; i < this._results.length; i++) this._results[i].index = this.game.rnd.pick(f);
                this.paste(a, b, this._results, e)
            }
        },
        shuffle: function(a, b, d, e, f) {
            if (f = this.getLayer(f), this.copy(a, b, d, e, f), !(this._results.length < 2)) {
                for (var g = [], h = 1; h < this._results.length; h++) this._results[h].index && g.push(this._results[h].index);
                c.Utils.shuffle(g);
                for (var i = 1; i < this._results.length; i++) this._results[i].index = g[i - 1];
                this.paste(a, b, this._results, f)
            }
        },
        fill: function(a, b, c, d, e, f) {
            if (f = this.getLayer(f), this.copy(b, c, d, e, f), !(this._results.length < 2)) {
                for (var g = 1; g < this._results.length; g++) this._results[g].index = a;
                this.paste(b, c, this._results, f)
            }
        },
        removeAllLayers: function() {
            this.layers.length = 0,
            this.currentLayer = 0
        },
        dump: function() {
            for (var a = "",
            b = [""], c = 0; c < this.layers[this.currentLayer].height; c++) {
                for (var d = 0; d < this.layers[this.currentLayer].width; d++) a += "%c  ",
                b.push(this.layers[this.currentLayer].data[c][d] > 1 ? this.debugMap[this.layers[this.currentLayer].data[c][d]] ? "background: " + this.debugMap[this.layers[this.currentLayer].data[c][d]] : "background: #ffffff": "background: rgb(0, 0, 0)");
                a += "\n"
            }
            b[0] = a,
            console.log.apply(console, b)
        },
        destroy: function() {
            this.removeAllLayers(),
            this.data = [],
            this.game = null
        }
    },
    c.Tilemap.prototype.constructor = c.Tilemap,
    Object.defineProperty(c.Tilemap.prototype, "layer", {
        get: function() {
            return this.layers[this.currentLayer]
        },
        set: function(a) {
            a !== this.currentLayer && this.setLayer(a)
        }
    }),
    c.TilemapLayer = function(a, b, d, e, f) {
        e |= 0,
        f |= 0,
        PIXI.Sprite.call(this, PIXI.TextureCache.__default),
        c.Component.Core.init.call(this, a, 0, 0, null, null),
        this.map = b,
        this.index = d,
        this.layer = b.layers[d],
        this.canvas = c.Canvas.create(e, f),
        this.context = this.canvas.getContext("2d"),
        this.baseTexture = new PIXI.BaseTexture(this.canvas),
        this.texture = new PIXI.Texture(this.baseTexture),
        this.textureFrame = new c.Frame(0, 0, 0, e, f, "tilemapLayer", a.rnd.uuid()),
        this.type = c.TILEMAPLAYER,
        this.physicsType = c.TILEMAPLAYER,
        this.renderSettings = {
            enableScrollDelta: !0,
            overdrawRatio: .2,
            copyCanvas: null
        },
        this.debug = !1,
        this.exists = !0,
        this.debugSettings = {
            missingImageFill: "rgb(255,255,255)",
            debuggedTileOverfill: "rgba(0,255,0,0.4)",
            forceFullRedraw: !0,
            debugAlpha: .5,
            facingEdgeStroke: "rgba(0,255,0,1)",
            collidingTileOverfill: "rgba(0,255,0,0.2)"
        },
        this.scrollFactorX = 1,
        this.scrollFactorY = 1,
        this.dirty = !0,
        this.rayStepRate = 4,
        this._wrap = !1,
        this._mc = {
            scrollX: 0,
            scrollY: 0,
            renderWidth: 0,
            renderHeight: 0,
            tileWidth: b.tileWidth,
            tileHeight: b.tileHeight,
            cw: b.tileWidth,
            ch: b.tileHeight,
            tilesets: []
        },
        this._scrollX = 0,
        this._scrollY = 0,
        this._results = [],
        a.device.canvasBitBltShift || (this.renderSettings.copyCanvas = c.TilemapLayer.ensureSharedCopyCanvas()),
        this.fixedToCamera = !0
    },
    c.TilemapLayer.prototype = Object.create(PIXI.Sprite.prototype),
    c.TilemapLayer.prototype.constructor = c.TilemapLayer;
    var l = ["Bounds", "Destroy", "FixedToCamera", "Reset", "Smoothed"];
    c.Component.Core.install.call(c.TilemapLayer.prototype, l),
    c.TilemapLayer.sharedCopyCanvas = null,
    c.TilemapLayer.ensureSharedCopyCanvas = function() {
        return this.sharedCopyCanvas || (this.sharedCopyCanvas = c.Canvas.create(2, 2)),
        this.sharedCopyCanvas
    },
    c.TilemapLayer.prototype.preUpdate = function() {
        return c.Component.Core.preUpdate.call(this),
        !0
    },
    c.TilemapLayer.prototype.postUpdate = function() {
        c.Component.Core.prototype.postUpdate.call(this);
        var a = this.game.camera;
        this.scrollX = a.x * this.scrollFactorX / this.scale.x,
        this.scrollY = a.y * this.scrollFactorY / this.scale.y,
        this.render()
    },
    c.TilemapLayer.prototype.resizeWorld = function() {
        this.game.world.setBounds(0, 0, this.layer.widthInPixels * this.scale.x, this.layer.heightInPixels * this.scale.y)
    },
    c.TilemapLayer.prototype._fixX = function(a) {
        return 0 > a && (a = 0),
        1 === this.scrollFactorX ? a: this._scrollX + (a - this._scrollX / this.scrollFactorX)
    },
    c.TilemapLayer.prototype._unfixX = function(a) {
        return 1 === this.scrollFactorX ? a: this._scrollX / this.scrollFactorX + (a - this._scrollX)
    },
    c.TilemapLayer.prototype._fixY = function(a) {
        return 0 > a && (a = 0),
        1 === this.scrollFactorY ? a: this._scrollY + (a - this._scrollY / this.scrollFactorY)
    },
    c.TilemapLayer.prototype._unfixY = function(a) {
        return 1 === this.scrollFactorY ? a: this._scrollY / this.scrollFactorY + (a - this._scrollY)
    },
    c.TilemapLayer.prototype.getTileX = function(a) {
        return Math.floor(this._fixX(a) / this._mc.tileWidth)
    },
    c.TilemapLayer.prototype.getTileY = function(a) {
        return Math.floor(this._fixY(a) / this._mc.tileHeight)
    },
    c.TilemapLayer.prototype.getTileXY = function(a, b, c) {
        return c.x = this.getTileX(a),
        c.y = this.getTileY(b),
        c
    },
    c.TilemapLayer.prototype.getRayCastTiles = function(a, b, c, d) {
        b || (b = this.rayStepRate),
        "undefined" == typeof c && (c = !1),
        "undefined" == typeof d && (d = !1);
        var e = this.getTiles(a.x, a.y, a.width, a.height, c, d);
        if (0 === e.length) return [];
        for (var f = a.coordinatesOnLine(b), g = [], h = 0; h < e.length; h++) for (var i = 0; i < f.length; i++) {
            var j = e[h],
            k = f[i];
            if (j.containsPoint(k[0], k[1])) {
                g.push(j);
                break
            }
        }
        return g
    },
    c.TilemapLayer.prototype.getTiles = function(a, b, c, d, e, f) {
        "undefined" == typeof e && (e = !1),
        "undefined" == typeof f && (f = !1);
        var g = !(e || f);
        a = this._fixX(a),
        b = this._fixY(b);
        for (var h = Math.floor(a / (this._mc.cw * this.scale.x)), i = Math.floor(b / (this._mc.ch * this.scale.y)), j = Math.ceil((a + c) / (this._mc.cw * this.scale.x)) - h, k = Math.ceil((b + d) / (this._mc.ch * this.scale.y)) - i; this._results.length;) this._results.pop();
        for (var l = i; i + k > l; l++) for (var m = h; h + j > m; m++) {
            var n = this.layer.data[l];
            n && n[m] && (g || n[m].isInteresting(e, f)) && this._results.push(n[m])
        }
        return this._results.slice()
    },
    Object.defineProperty(c.TilemapLayer.prototype, "tileColor", {
        get: function() {
            return this.debugSettings.missingImageFill
        },
        set: function(a) {
            this.debugSettings.missingImageFill = a
        }
    }),
    Object.defineProperty(c.TilemapLayer.prototype, "wrap", {
        get: function() {
            return this._wrap
        },
        set: function(a) {
            this._wrap = a,
            this.dirty = !0
        }
    }),
    c.TilemapLayer.prototype.resolveTileset = function(a) {
        var b = this._mc.tilesets;
        if (2e3 > a) for (; b.length < a;) b.push(void 0);
        var c = this.map.tiles[a] && this.map.tiles[a][2];
        if (null != c) {
            var d = this.map.tilesets[c];
            if (d && d.containsTileIndex(a)) return b[a] = d
        }
        return b[a] = null
    },
    c.TilemapLayer.prototype.resetTilesetCache = function() {
        for (var a = this._mc.tilesets; a.length;) a.pop()
    },
    c.TilemapLayer.prototype.setScale = function(a, b) {
        a = a || 1,
        b = b || a;
        for (var c = 0; c < this.layer.data.length; c++) for (var d = this.layer.data[c], e = 0; e < d.length; e++) {
            var f = d[e];
            f.width = this.map.tileWidth * a,
            f.height = this.map.tileHeight * b,
            f.worldX = f.x * f.width,
            f.worldY = f.y * f.height
        }
        this.scale.setTo(a, b)
    },
    c.TilemapLayer.prototype.shiftCanvas = function(a, b, c) {
        var d = a.canvas,
        e = d.width - Math.abs(b),
        f = d.height - Math.abs(c),
        g = 0,
        h = 0,
        i = b,
        j = c;
        0 > b && (g = -b, i = 0),
        0 > c && (h = -c, j = 0);
        var k = this.renderSettings.copyCanvas;
        if (k) { (k.width < e || k.height < f) && (k.width = e, k.height = f);
            var l = k.getContext("2d");
            l.clearRect(0, 0, e, f),
            l.drawImage(d, g, h, e, f, 0, 0, e, f),
            a.clearRect(i, j, e, f),
            a.drawImage(k, 0, 0, e, f, i, j, e, f)
        } else a.save(),
        a.globalCompositeOperation = "copy",
        a.drawImage(d, g, h, e, f, i, j, e, f),
        a.restore()
    },
    c.TilemapLayer.prototype.renderRegion = function(a, b, c, d, e, f) {
        var g = this.context,
        h = this.layer.width,
        i = this.layer.height,
        j = this._mc.tileWidth,
        k = this._mc.tileHeight,
        l = this._mc.tilesets,
        m = NaN;
        this._wrap || (e >= c && (c = Math.max(0, c), e = Math.min(h - 1, e)), f >= d && (d = Math.max(0, d), f = Math.min(i - 1, f)));
        var n, o, p, q, r, s, t = c * j - a,
        u = d * k - b,
        v = (c + (1 << 20) * h) % h,
        w = (d + (1 << 20) * i) % i;
        for (g.fillStyle = this.tileColor, q = w, s = f - d, o = u; s >= 0; q++, s--, o += k) {
            q >= i && (q -= i);
            var x = this.layer.data[q];
            for (p = v, r = e - c, n = t; r >= 0; p++, r--, n += j) {
                p >= h && (p -= h);
                var y = x[p];
                if (y && !(y.index < 0)) {
                    var z = y.index,
                    A = l[z];
                    void 0 === A && (A = this.resolveTileset(z)),
                    y.alpha === m || this.debug || (g.globalAlpha = y.alpha, m = y.alpha),
                    A ? y.rotation || y.flipped ? (g.save(), g.translate(n + y.centerX, o + y.centerY), g.rotate(y.rotation), y.flipped && g.scale( - 1, 1), A.draw(g, -y.centerX, -y.centerY, z), g.restore()) : A.draw(g, n, o, z) : this.debugSettings.missingImageFill && (g.fillStyle = this.debugSettings.missingImageFill, g.fillRect(n, o, j, k)),
                    y.debug && this.debugSettings.debuggedTileOverfill && (g.fillStyle = this.debugSettings.debuggedTileOverfill, g.fillRect(n, o, j, k))
                }
            }
        }
    },
    c.TilemapLayer.prototype.renderDeltaScroll = function(a, b) {
        var c = this._mc.scrollX,
        d = this._mc.scrollY,
        e = this.canvas.width,
        f = this.canvas.height,
        g = this._mc.tileWidth,
        h = this._mc.tileHeight,
        i = 0,
        j = -g,
        k = 0,
        l = -h;
        if (0 > a ? (i = e + a, j = e - 1) : a > 0 && (j = a), 0 > b ? (k = f + b, l = f - 1) : b > 0 && (l = b), this.shiftCanvas(this.context, a, b), i = Math.floor((i + c) / g), j = Math.floor((j + c) / g), k = Math.floor((k + d) / h), l = Math.floor((l + d) / h), j >= i) {
            this.context.clearRect(i * g - c, 0, (j - i + 1) * g, f);
            var m = Math.floor((0 + d) / h),
            n = Math.floor((f - 1 + d) / h);
            this.renderRegion(c, d, i, m, j, n)
        }
        if (l >= k) {
            this.context.clearRect(0, k * h - d, e, (l - k + 1) * h);
            var o = Math.floor((0 + c) / g),
            p = Math.floor((e - 1 + c) / g);
            this.renderRegion(c, d, o, k, p, l)
        }
    },
    c.TilemapLayer.prototype.renderFull = function() {
        var a = this._mc.scrollX,
        b = this._mc.scrollY,
        c = this.canvas.width,
        d = this.canvas.height,
        e = this._mc.tileWidth,
        f = this._mc.tileHeight,
        g = Math.floor(a / e),
        h = Math.floor((c - 1 + a) / e),
        i = Math.floor(b / f),
        j = Math.floor((d - 1 + b) / f);
        this.context.clearRect(0, 0, c, d),
        this.renderRegion(a, b, g, i, h, j)
    },
    c.TilemapLayer.prototype.render = function() {
        var a = !1;
        if (this.visible) {
            this.context.save(),
            (this.dirty || this.layer.dirty) && (this.layer.dirty = !1, a = !0);
            var b = this.canvas.width,
            c = this.canvas.height,
            d = 0 | this._scrollX,
            e = 0 | this._scrollY,
            f = this._mc,
            g = f.scrollX - d,
            h = f.scrollY - e;
            if (a || 0 !== g || 0 !== h || f.renderWidth !== b || f.renderHeight !== c) return f.scrollX = d,
            f.scrollY = e,
            (f.renderWidth !== b || f.renderHeight !== c) && (f.renderWidth = b, f.renderHeight = c),
            this.debug && (this.context.globalAlpha = this.debugSettings.debugAlpha, this.debugSettings.forceFullRedraw && (a = !0)),
            !a && this.renderSettings.enableScrollDelta && Math.abs(g) + Math.abs(h) < Math.min(b, c) ? this.renderDeltaScroll(g, h) : this.renderFull(),
            this.debug && (this.context.globalAlpha = 1, this.renderDebug()),
            this.baseTexture.dirty(),
            this.dirty = !1,
            this.context.restore(),
            !0
        }
    },
    c.TilemapLayer.prototype.renderDebug = function() {
        var a, b, c, d, e, f, g = this._mc.scrollX,
        h = this._mc.scrollY,
        i = this.context,
        j = this.canvas.width,
        k = this.canvas.height,
        l = this.layer.width,
        m = this.layer.height,
        n = this._mc.tileWidth,
        o = this._mc.tileHeight,
        p = Math.floor(g / n),
        q = Math.floor((j - 1 + g) / n),
        r = Math.floor(h / o),
        s = Math.floor((k - 1 + h) / o),
        t = p * n - g,
        u = r * o - h,
        v = (p + (1 << 20) * l) % l,
        w = (r + (1 << 20) * m) % m;
        for (i.strokeStyle = this.debugSettings.facingEdgeStroke, d = w, f = s - r, b = u; f >= 0; d++, f--, b += o) {
            d >= m && (d -= m);
            var x = this.layer.data[d];
            for (c = v, e = q - p, a = t; e >= 0; c++, e--, a += n) {
                c >= l && (c -= l);
                var y = x[c]; ! y || y.index < 0 || !y.collides || (this.debugSettings.collidingTileOverfill && (i.fillStyle = this.debugSettings.collidingTileOverfill, i.fillRect(a, b, this._mc.cw, this._mc.ch)), this.debugSettings.facingEdgeStroke && (i.beginPath(), y.faceTop && (i.moveTo(a, b), i.lineTo(a + this._mc.cw, b)), y.faceBottom && (i.moveTo(a, b + this._mc.ch), i.lineTo(a + this._mc.cw, b + this._mc.ch)), y.faceLeft && (i.moveTo(a, b), i.lineTo(a, b + this._mc.ch)), y.faceRight && (i.moveTo(a + this._mc.cw, b), i.lineTo(a + this._mc.cw, b + this._mc.ch)), i.stroke()))
            }
        }
    },
    Object.defineProperty(c.TilemapLayer.prototype, "scrollX", {
        get: function() {
            return this._scrollX
        },
        set: function(a) {
            this._scrollX = a
        }
    }),
    Object.defineProperty(c.TilemapLayer.prototype, "scrollY", {
        get: function() {
            return this._scrollY
        },
        set: function(a) {
            this._scrollY = a
        }
    }),
    Object.defineProperty(c.TilemapLayer.prototype, "collisionWidth", {
        get: function() {
            return this._mc.cw
        },
        set: function(a) {
            this._mc.cw = 0 | a,
            this.dirty = !0
        }
    }),
    Object.defineProperty(c.TilemapLayer.prototype, "collisionHeight", {
        get: function() {
            return this._mc.ch
        },
        set: function(a) {
            this._mc.ch = 0 | a,
            this.dirty = !0
        }
    }),
    c.TilemapParser = {
        parse: function(a, b, d, e, f, g) {
            if ("undefined" == typeof d && (d = 32), "undefined" == typeof e && (e = 32), "undefined" == typeof f && (f = 10), "undefined" == typeof g && (g = 10), "undefined" == typeof b) return this.getEmptyData();
            if (null === b) return this.getEmptyData(d, e, f, g);
            var h = a.cache.getTilemapData(b);
            if (h) {
                if (h.format === c.Tilemap.CSV) return this.parseCSV(b, h.data, d, e);
                if (!h.format || h.format === c.Tilemap.TILED_JSON) return this.parseTiledJSON(h.data)
            } else console.warn("Phaser.TilemapParser.parse - No map data found for key " + b)
        },
        parseCSV: function(a, b, d, e) {
            var f = this.getEmptyData();
            b = b.trim();
            for (var g = [], h = b.split("\n"), i = h.length, j = 0, k = 0; k < h.length; k++) {
                g[k] = [];
                for (var l = h[k].split(","), m = 0; m < l.length; m++) g[k][m] = new c.Tile(f.layers[0], parseInt(l[m], 10), m, k, d, e);
                0 === j && (j = l.length)
            }
            return f.format = c.Tilemap.CSV,
            f.name = a,
            f.width = j,
            f.height = i,
            f.tileWidth = d,
            f.tileHeight = e,
            f.widthInPixels = j * d,
            f.heightInPixels = i * e,
            f.layers[0].width = j,
            f.layers[0].height = i,
            f.layers[0].widthInPixels = f.widthInPixels,
            f.layers[0].heightInPixels = f.heightInPixels,
            f.layers[0].data = g,
            f
        },
        getEmptyData: function(a, b, c, d) {
            var e = {};
            e.width = 0,
            e.height = 0,
            e.tileWidth = 0,
            e.tileHeight = 0,
            "undefined" != typeof a && null !== a && (e.tileWidth = a),
            "undefined" != typeof b && null !== b && (e.tileHeight = b),
            "undefined" != typeof c && null !== c && (e.width = c),
            "undefined" != typeof d && null !== d && (e.height = d),
            e.orientation = "orthogonal",
            e.version = "1",
            e.properties = {},
            e.widthInPixels = 0,
            e.heightInPixels = 0;
            var f = [],
            g = {
                name: "layer",
                x: 0,
                y: 0,
                width: 0,
                height: 0,
                widthInPixels: 0,
                heightInPixels: 0,
                alpha: 1,
                visible: !0,
                properties: {},
                indexes: [],
                callbacks: [],
                bodies: [],
                data: []
            };
            return f.push(g),
            e.layers = f,
            e.images = [],
            e.objects = {},
            e.collision = {},
            e.tilesets = [],
            e.tiles = [],
            e
        },
        parseTiledJSON: function(a) {
            function b(a, b) {
                var c = {};
                for (var d in b) {
                    var e = b[d];
                    a[e] && (c[e] = a[e])
                }
                return c
            }
            if ("orthogonal" !== a.orientation) return console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser"),
            null;
            var d = {};
            d.width = a.width,
            d.height = a.height,
            d.tileWidth = a.tilewidth,
            d.tileHeight = a.tileheight,
            d.orientation = a.orientation,
            d.format = c.Tilemap.TILED_JSON,
            d.version = a.version,
            d.properties = a.properties,
            d.widthInPixels = d.width * d.tileWidth,
            d.heightInPixels = d.height * d.tileHeight;
            for (var e = [], f = 0; f < a.layers.length; f++) if ("tilelayer" === a.layers[f].type) {
                var g = {
                    name: a.layers[f].name,
                    x: a.layers[f].x,
                    y: a.layers[f].y,
                    width: a.layers[f].width,
                    height: a.layers[f].height,
                    widthInPixels: a.layers[f].width * a.tilewidth,
                    heightInPixels: a.layers[f].height * a.tileheight,
                    alpha: a.layers[f].opacity,
                    visible: a.layers[f].visible,
                    properties: {},
                    indexes: [],
                    callbacks: [],
                    bodies: []
                };
                a.layers[f].properties && (g.properties = a.layers[f].properties);
                for (var h, i, j, k, l = 0,
                m = [], n = [], o = 0, p = a.layers[f].data.length; p > o; o++) {
                    if (h = 0, i = !1, k = a.layers[f].data[o], k > 536870912) switch (j = 0, k > 2147483648 && (k -= 2147483648, j += 4), k > 1073741824 && (k -= 1073741824, j += 2), k > 536870912 && (k -= 536870912, j += 1), j) {
                    case 5:
                        h = Math.PI / 2;
                        break;
                    case 6:
                        h = Math.PI;
                        break;
                    case 3:
                        h = 3 * Math.PI / 2;
                        break;
                    case 4:
                        h = 0,
                        i = !0;
                        break;
                    case 7:
                        h = Math.PI / 2,
                        i = !0;
                        break;
                    case 2:
                        h = Math.PI,
                        i = !0;
                        break;
                    case 1:
                        h = 3 * Math.PI / 2,
                        i = !0
                    }
                    k > 0 ? (m.push(new c.Tile(g, k, l, n.length, a.tilewidth, a.tileheight)), m[m.length - 1].rotation = h, m[m.length - 1].flipped = i) : m.push(new c.Tile(g, -1, l, n.length, a.tilewidth, a.tileheight)),
                    l++,
                    l === a.layers[f].width && (n.push(m), l = 0, m = [])
                }
                g.data = n,
                e.push(g)
            }
            d.layers = e;
            for (var q = [], f = 0; f < a.layers.length; f++) if ("imagelayer" === a.layers[f].type) {
                var r = {
                    name: a.layers[f].name,
                    image: a.layers[f].image,
                    x: a.layers[f].x,
                    y: a.layers[f].y,
                    alpha: a.layers[f].opacity,
                    visible: a.layers[f].visible,
                    properties: {}
                };
                a.layers[f].properties && (r.properties = a.layers[f].properties),
                q.push(r)
            }
            d.images = q;
            for (var s = [], f = 0; f < a.tilesets.length; f++) {
                var t = a.tilesets[f];
                if (t.image) {
                    var u = new c.Tileset(t.name, t.firstgid, t.tilewidth, t.tileheight, t.margin, t.spacing, t.properties);
                    t.tileproperties && (u.tileProperties = t.tileproperties),
                    u.updateTileData(t.imagewidth, t.imageheight),
                    s.push(u)
                } else console.warn("Phaser.TilemapParser - Image Collection Tilesets are not support")
            }
            d.tilesets = s;
            for (var v = {},
            w = {},
            f = 0; f < a.layers.length; f++) if ("objectgroup" === a.layers[f].type) {
                v[a.layers[f].name] = [],
                w[a.layers[f].name] = [];
                for (var x = 0,
                p = a.layers[f].objects.length; p > x; x++) if (a.layers[f].objects[x].gid) {
                    var y = {
                        gid: a.layers[f].objects[x].gid,
                        name: a.layers[f].objects[x].name,
                        type: a.layers[f].objects[x].hasOwnProperty("type") ? a.layers[f].objects[x].type: "",
                        x: a.layers[f].objects[x].x,
                        y: a.layers[f].objects[x].y,
                        visible: a.layers[f].objects[x].visible,
                        properties: a.layers[f].objects[x].properties
                    };
                    a.layers[f].objects[x].rotation && (y.rotation = a.layers[f].objects[x].rotation),
                    v[a.layers[f].name].push(y)
                } else if (a.layers[f].objects[x].polyline) {
                    var y = {
                        name: a.layers[f].objects[x].name,
                        type: a.layers[f].objects[x].type,
                        x: a.layers[f].objects[x].x,
                        y: a.layers[f].objects[x].y,
                        width: a.layers[f].objects[x].width,
                        height: a.layers[f].objects[x].height,
                        visible: a.layers[f].objects[x].visible,
                        properties: a.layers[f].objects[x].properties
                    };
                    a.layers[f].objects[x].rotation && (y.rotation = a.layers[f].objects[x].rotation),
                    y.polyline = [];
                    for (var z = 0; z < a.layers[f].objects[x].polyline.length; z++) y.polyline.push([a.layers[f].objects[x].polyline[z].x, a.layers[f].objects[x].polyline[z].y]);
                    w[a.layers[f].name].push(y),
                    v[a.layers[f].name].push(y)
                } else if (a.layers[f].objects[x].polygon) {
                    var y = b(a.layers[f].objects[x], ["name", "type", "x", "y", "visible", "rotation", "properties"]);
                    y.polygon = [];
                    for (var z = 0; z < a.layers[f].objects[x].polygon.length; z++) y.polygon.push([a.layers[f].objects[x].polygon[z].x, a.layers[f].objects[x].polygon[z].y]);
                    v[a.layers[f].name].push(y)
                } else if (a.layers[f].objects[x].ellipse) {
                    var y = b(a.layers[f].objects[x], ["name", "type", "ellipse", "x", "y", "width", "height", "visible", "rotation", "properties"]);
                    v[a.layers[f].name].push(y)
                } else {
                    var y = b(a.layers[f].objects[x], ["name", "type", "x", "y", "width", "height", "visible", "rotation", "properties"]);
                    y.rectangle = !0,
                    v[a.layers[f].name].push(y)
                }
            }
            d.objects = v,
            d.collision = w,
            d.tiles = [];
            for (var f = 0; f < d.tilesets.length; f++) for (var t = d.tilesets[f], l = t.tileMargin, A = t.tileMargin, B = 0, C = 0, D = 0, o = t.firstgid; o < t.firstgid + t.total && (d.tiles[o] = [l, A, f], l += t.tileWidth + t.tileSpacing, B++, B !== t.total) && (C++, C !== t.columns || (l = t.tileMargin, A += t.tileHeight + t.tileSpacing, C = 0, D++, D !== t.rows)); o++);
            for (var g, E, F, t, f = 0; f < d.layers.length; f++) {
                g = d.layers[f];
                for (var G = 0; G < g.data.length; G++) {
                    m = g.data[G];
                    for (var H = 0; H < m.length; H++) E = m[H],
                    E.index < 0 || (F = d.tiles[E.index][2], t = d.tilesets[F], t.tileProperties && t.tileProperties[E.index - t.firstgid] && (E.properties = c.Utils.mixin(t.tileProperties[E.index - t.firstgid], E.properties)))
                }
            }
            return d
        }
    },
    c.Tileset = function(a, b, c, d, e, f, g) { ("undefined" == typeof c || 0 >= c) && (c = 32),
        ("undefined" == typeof d || 0 >= d) && (d = 32),
        "undefined" == typeof e && (e = 0),
        "undefined" == typeof f && (f = 0),
        this.name = a,
        this.firstgid = 0 | b,
        this.tileWidth = 0 | c,
        this.tileHeight = 0 | d,
        this.tileMargin = 0 | e,
        this.tileSpacing = 0 | f,
        this.properties = g || {},
        this.image = null,
        this.rows = 0,
        this.columns = 0,
        this.total = 0,
        this.drawCoords = []
    },
    c.Tileset.prototype = {
        draw: function(a, b, c, d) {
            var e = d - this.firstgid << 1;
            e >= 0 && e + 1 < this.drawCoords.length && a.drawImage(this.image, this.drawCoords[e], this.drawCoords[e + 1], this.tileWidth, this.tileHeight, b, c, this.tileWidth, this.tileHeight)
        },
        containsTileIndex: function(a) {
            return a >= this.firstgid && a < this.firstgid + this.total
        },
        setImage: function(a) {
            this.image = a,
            this.updateTileData(a.width, a.height)
        },
        setSpacing: function(a, b) {
            this.tileMargin = 0 | a,
            this.tileSpacing = 0 | b,
            this.image && this.updateTileData(this.image.width, this.image.height)
        },
        updateTileData: function(a, b) {
            var c = (b - 2 * this.tileMargin + this.tileSpacing) / (this.tileHeight + this.tileSpacing),
            d = (a - 2 * this.tileMargin + this.tileSpacing) / (this.tileWidth + this.tileSpacing); (c % 1 !== 0 || d % 1 !== 0) && console.warn("Phaser.Tileset - image tile area is not an even multiple of tile size"),
            c = Math.floor(c),
            d = Math.floor(d),
            (this.rows && this.rows !== c || this.columns && this.columns !== d) && console.warn("Phaser.Tileset - actual and expected number of tile rows and columns differ"),
            this.rows = c,
            this.columns = d,
            this.total = c * d,
            this.drawCoords.length = 0;
            for (var e = this.tileMargin,
            f = this.tileMargin,
            g = 0; g < this.rows; g++) {
                for (var h = 0; h < this.columns; h++) this.drawCoords.push(e),
                this.drawCoords.push(f),
                e += this.tileWidth + this.tileSpacing;
                e = this.tileMargin,
                f += this.tileHeight + this.tileSpacing
            }
        }
    },
    c.Tileset.prototype.constructor = c.Tileset,
    c.Particles = function(a) {
        this.game = a,
        this.emitters = {},
        this.ID = 0
    },
    c.Particles.prototype = {
        add: function(a) {
            return this.emitters[a.name] = a,
            a
        },
        remove: function(a) {
            delete this.emitters[a.name]
        },
        update: function() {
            for (var a in this.emitters) this.emitters[a].exists && this.emitters[a].update()
        }
    },
    c.Particles.prototype.constructor = c.Particles,
    c.Particles.Arcade = {},
    c.Particles.Arcade.Emitter = function(a, b, d, e) {
        this.maxParticles = e || 50,
        c.Group.call(this, a),
        this.name = "emitter" + this.game.particles.ID++,
        this.type = c.EMITTER,
        this.physicsType = c.GROUP,
        this.area = new c.Rectangle(b, d, 1, 1),
        this.minParticleSpeed = new c.Point( - 100, -100),
        this.maxParticleSpeed = new c.Point(100, 100),
        this.minParticleScale = 1,
        this.maxParticleScale = 1,
        this.scaleData = null,
        this.minRotation = -360,
        this.maxRotation = 360,
        this.minParticleAlpha = 1,
        this.maxParticleAlpha = 1,
        this.alphaData = null,
        this.gravity = 100,
        this.particleClass = c.Particle,
        this.particleDrag = new c.Point,
        this.angularDrag = 0,
        this.frequency = 100,
        this.lifespan = 2e3,
        this.bounce = new c.Point,
        this.on = !1,
        this.particleAnchor = new c.Point(.5, .5),
        this.blendMode = c.blendModes.NORMAL,
        this.emitX = b,
        this.emitY = d,
        this.autoScale = !1,
        this.autoAlpha = !1,
        this.particleBringToTop = !1,
        this.particleSendToBack = !1,
        this._minParticleScale = new c.Point(1, 1),
        this._maxParticleScale = new c.Point(1, 1),
        this._quantity = 0,
        this._timer = 0,
        this._counter = 0,
        this._flowQuantity = 0,
        this._flowTotal = 0,
        this._explode = !0,
        this._frames = null
    },
    c.Particles.Arcade.Emitter.prototype = Object.create(c.Group.prototype),
    c.Particles.Arcade.Emitter.prototype.constructor = c.Particles.Arcade.Emitter,
    c.Particles.Arcade.Emitter.prototype.update = function() {
        if (this.on && this.game.time.time >= this._timer) if (this._timer = this.game.time.time + this.frequency * this.game.time.slowMotion, 0 !== this._flowTotal) if (this._flowQuantity > 0) {
            for (var a = 0; a < this._flowQuantity; a++) if (this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal)) {
                this.on = !1;
                break
            }
        } else this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal && (this.on = !1));
        else this.emitParticle() && (this._counter++, this._quantity > 0 && this._counter >= this._quantity && (this.on = !1));
        for (var a = this.children.length; a--;) this.children[a].exists && this.children[a].update()
    },
    c.Particles.Arcade.Emitter.prototype.makeParticles = function(a, b, c, d, e) {
        "undefined" == typeof b && (b = 0),
        "undefined" == typeof c && (c = this.maxParticles),
        "undefined" == typeof d && (d = !1),
        "undefined" == typeof e && (e = !1);
        var f, g = 0,
        h = a,
        i = b;
        for (this._frames = b, c > this.maxParticles && (this.maxParticles = c); c > g;) Array.isArray(a) && (h = this.game.rnd.pick(a)),
        Array.isArray(b) && (i = this.game.rnd.pick(b)),
        f = new this.particleClass(this.game, 0, 0, h, i),
        this.game.physics.arcade.enable(f, !1),
        d ? (f.body.checkCollision.any = !0, f.body.checkCollision.none = !1) : f.body.checkCollision.none = !0,
        f.body.collideWorldBounds = e,
        f.body.skipQuadTree = !0,
        f.exists = !1,
        f.visible = !1,
        f.anchor.copyFrom(this.particleAnchor),
        this.add(f),
        g++;
        return this
    },
    c.Particles.Arcade.Emitter.prototype.kill = function() {
        this.on = !1,
        this.alive = !1,
        this.exists = !1
    },
    c.Particles.Arcade.Emitter.prototype.revive = function() {
        this.alive = !0,
        this.exists = !0
    },
    c.Particles.Arcade.Emitter.prototype.explode = function(a, b) {
        this._flowTotal = 0,
        this.start(!0, a, 0, b, !1)
    },
    c.Particles.Arcade.Emitter.prototype.flow = function(a, b, c, d, e) { ("undefined" == typeof c || 0 === c) && (c = 1),
        "undefined" == typeof d && (d = -1),
        "undefined" == typeof e && (e = !0),
        c > this.maxParticles && (c = this.maxParticles),
        this._counter = 0,
        this._flowQuantity = c,
        this._flowTotal = d,
        e ? (this.start(!0, a, b, c), this._counter += c, this.on = !0, this._timer = this.game.time.time + b * this.game.time.slowMotion) : this.start(!1, a, b, c)
    },
    c.Particles.Arcade.Emitter.prototype.start = function(a, b, c, d, e) {
        if ("undefined" == typeof a && (a = !0), "undefined" == typeof b && (b = 0), ("undefined" == typeof c || null === c) && (c = 250), "undefined" == typeof d && (d = 0), "undefined" == typeof e && (e = !1), d > this.maxParticles && (d = this.maxParticles), this.revive(), this.visible = !0, this.lifespan = b, this.frequency = c, a || e) for (var f = 0; d > f; f++) this.emitParticle();
        else this.on = !0,
        this._quantity += d,
        this._counter = 0,
        this._timer = this.game.time.time + c * this.game.time.slowMotion
    },
    c.Particles.Arcade.Emitter.prototype.emitParticle = function() {
        var a = this.getFirstExists(!1);
        return null === a ? !1 : (this.width > 1 || this.height > 1 ? a.reset(this.game.rnd.integerInRange(this.left, this.right), this.game.rnd.integerInRange(this.top, this.bottom)) : a.reset(this.emitX, this.emitY), a.angle = 0, a.lifespan = this.lifespan, this.particleBringToTop ? this.bringToTop(a) : this.particleSendToBack && this.sendToBack(a), this.autoScale ? a.setScaleData(this.scaleData) : 1 !== this.minParticleScale || 1 !== this.maxParticleScale ? a.scale.set(this.game.rnd.realInRange(this.minParticleScale, this.maxParticleScale)) : (this._minParticleScale.x !== this._maxParticleScale.x || this._minParticleScale.y !== this._maxParticleScale.y) && a.scale.set(this.game.rnd.realInRange(this._minParticleScale.x, this._maxParticleScale.x), this.game.rnd.realInRange(this._minParticleScale.y, this._maxParticleScale.y)), a.frame = Array.isArray("object" === this._frames) ? this.game.rnd.pick(this._frames) : this._frames, this.autoAlpha ? a.setAlphaData(this.alphaData) : a.alpha = this.game.rnd.realInRange(this.minParticleAlpha, this.maxParticleAlpha), a.blendMode = this.blendMode, a.body.updateBounds(), a.body.bounce.setTo(this.bounce.x, this.bounce.y), a.body.velocity.x = this.game.rnd.between(this.minParticleSpeed.x, this.maxParticleSpeed.x), a.body.velocity.y = this.game.rnd.between(this.minParticleSpeed.y, this.maxParticleSpeed.y), a.body.angularVelocity = this.game.rnd.between(this.minRotation, this.maxRotation), a.body.gravity.y = this.gravity, a.body.drag.x = this.particleDrag.x, a.body.drag.y = this.particleDrag.y, a.body.angularDrag = this.angularDrag, a.onEmit(), !0)
    },
    c.Particles.Arcade.Emitter.prototype.destroy = function() {
        this.game.particles.remove(this),
        c.Group.prototype.destroy.call(this, !0, !1);
    },
    c.Particles.Arcade.Emitter.prototype.setSize = function(a, b) {
        this.area.width = a,
        this.area.height = b
    },
    c.Particles.Arcade.Emitter.prototype.setXSpeed = function(a, b) {
        a = a || 0,
        b = b || 0,
        this.minParticleSpeed.x = a,
        this.maxParticleSpeed.x = b
    },
    c.Particles.Arcade.Emitter.prototype.setYSpeed = function(a, b) {
        a = a || 0,
        b = b || 0,
        this.minParticleSpeed.y = a,
        this.maxParticleSpeed.y = b
    },
    c.Particles.Arcade.Emitter.prototype.setRotation = function(a, b) {
        a = a || 0,
        b = b || 0,
        this.minRotation = a,
        this.maxRotation = b
    },
    c.Particles.Arcade.Emitter.prototype.setAlpha = function(a, b, d, e, f) {
        if ("undefined" == typeof a && (a = 1), "undefined" == typeof b && (b = 1), "undefined" == typeof d && (d = 0), "undefined" == typeof e && (e = c.Easing.Linear.None), "undefined" == typeof f && (f = !1), this.minParticleAlpha = a, this.maxParticleAlpha = b, this.autoAlpha = !1, d > 0 && a !== b) {
            var g = {
                v: a
            },
            h = this.game.make.tween(g).to({
                v: b
            },
            d, e);
            h.yoyo(f),
            this.alphaData = h.generateData(60),
            this.alphaData.reverse(),
            this.autoAlpha = !0
        }
    },
    c.Particles.Arcade.Emitter.prototype.setScale = function(a, b, d, e, f, g, h) {
        if ("undefined" == typeof a && (a = 1), "undefined" == typeof b && (b = 1), "undefined" == typeof d && (d = 1), "undefined" == typeof e && (e = 1), "undefined" == typeof f && (f = 0), "undefined" == typeof g && (g = c.Easing.Linear.None), "undefined" == typeof h && (h = !1), this.minParticleScale = 1, this.maxParticleScale = 1, this._minParticleScale.set(a, d), this._maxParticleScale.set(b, e), this.autoScale = !1, f > 0 && (a !== b || d !== e)) {
            var i = {
                x: a,
                y: d
            },
            j = this.game.make.tween(i).to({
                x: b,
                y: e
            },
            f, g);
            j.yoyo(h),
            this.scaleData = j.generateData(60),
            this.scaleData.reverse(),
            this.autoScale = !0
        }
    },
    c.Particles.Arcade.Emitter.prototype.at = function(a) {
        a.center ? (this.emitX = a.center.x, this.emitY = a.center.y) : (this.emitX = a.world.x + a.anchor.x * a.width, this.emitY = a.world.y + a.anchor.y * a.height)
    },
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "width", {
        get: function() {
            return this.area.width
        },
        set: function(a) {
            this.area.width = a
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "height", {
        get: function() {
            return this.area.height
        },
        set: function(a) {
            this.area.height = a
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "x", {
        get: function() {
            return this.emitX
        },
        set: function(a) {
            this.emitX = a
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "y", {
        get: function() {
            return this.emitY
        },
        set: function(a) {
            this.emitY = a
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "left", {
        get: function() {
            return Math.floor(this.x - this.area.width / 2)
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "right", {
        get: function() {
            return Math.floor(this.x + this.area.width / 2)
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "top", {
        get: function() {
            return Math.floor(this.y - this.area.height / 2)
        }
    }),
    Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "bottom", {
        get: function() {
            return Math.floor(this.y + this.area.height / 2)
        }
    }),
    void 0 === PIXI.blendModes && (PIXI.blendModes = c.blendModes),
    void 0 === PIXI.scaleModes && (PIXI.scaleModes = c.scaleModes),
    void 0 === PIXI.Texture.emptyTexture && (PIXI.Texture.emptyTexture = new PIXI.Texture(new PIXI.BaseTexture)),
    void 0 === PIXI.DisplayObject._tempMatrix && (PIXI.DisplayObject._tempMatrix = new PIXI.Matrix),
    void 0 === PIXI.RenderTexture.tempMatrix && (PIXI.RenderTexture.tempMatrix = new PIXI.Matrix),
    void 0 === PIXI.Graphics.POLY && (PIXI.Graphics.POLY = c.POLYGON, PIXI.Graphics.RECT = c.RECTANGLE, PIXI.Graphics.CIRC = c.CIRCLE, PIXI.Graphics.ELIP = c.ELLIPSE, PIXI.Graphics.RREC = c.ROUNDEDRECTANGLE),
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = c), exports.Phaser = c) : "undefined" != typeof define && define.amd ? define("Phaser",
    function() {
        return b.Phaser = c
    } ()) : b.Phaser = c
}.call(this),
!
function() {
    "use strict";
    function a() {
        try {
            "undefined" != typeof AudioContext ? b = new AudioContext: "undefined" != typeof webkitAudioContext ? b = new webkitAudioContext: c = !1
        } catch(a) {
            c = !1
        }
        if (!c) if ("undefined" != typeof Audio) try {
            new Audio
        } catch(a) {
            d = !0
        } else d = !0
    }
    var b = null,
    c = !0,
    d = !1;
    if (a(), c) {
        var e = "undefined" == typeof b.createGain ? b.createGainNode() : b.createGain();
        e.gain.value = 1,
        e.connect(b.destination)
    }
    var f = function() {
        this.init()
    };
    f.prototype = {
        init: function() {
            var a = this || g;
            return a._codecs = {},
            a._howls = [],
            a._muted = !1,
            a._volume = 1,
            a.iOSAutoEnable = !0,
            a.noAudio = d,
            a.usingWebAudio = c,
            a.ctx = b,
            d || a._setupCodecs(),
            a
        },
        volume: function(a) {
            var b = this || g;
            if (a = parseFloat(a), "undefined" != typeof a && a >= 0 && 1 >= a) {
                b._volume = a,
                c && (e.gain.value = a);
                for (var d = 0; d < b._howls.length; d++) if (!b._howls[d]._webAudio) for (var f = b._howls[d]._getSoundIds(), h = 0; h < f.length; h++) {
                    var i = b._howls[d]._soundById(f[h]);
                    i && i._node && (i._node.volume = i._volume * a)
                }
                return b
            }
            return b._volume
        },
        mute: function(a) {
            var b = this || g;
            b._muted = a,
            c && (e.gain.value = a ? 0 : b._volume);
            for (var d = 0; d < b._howls.length; d++) if (!b._howls[d]._webAudio) for (var f = b._howls[d]._getSoundIds(), h = 0; h < f.length; h++) {
                var i = b._howls[d]._soundById(f[h]);
                i && i._node && (i._node.muted = a ? !0 : i._muted)
            }
            return b
        },
        codecs: function(a) {
            return (this || g)._codecs[a]
        },
        _setupCodecs: function() {
            var a = this || g,
            b = new Audio,
            c = b.canPlayType("audio/mpeg;").replace(/^no$/, "");
            return a._codecs = {
                mp3: !(!c && !b.canPlayType("audio/mp3;").replace(/^no$/, "")),
                mpeg: !!c,
                opus: !!b.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
                ogg: !!b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                wav: !!b.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
                aac: !!b.canPlayType("audio/aac;").replace(/^no$/, ""),
                m4a: !!(b.canPlayType("audio/x-m4a;") || b.canPlayType("audio/m4a;") || b.canPlayType("audio/aac;")).replace(/^no$/, ""),
                mp4: !!(b.canPlayType("audio/x-mp4;") || b.canPlayType("audio/mp4;") || b.canPlayType("audio/aac;")).replace(/^no$/, ""),
                weba: !!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                webm: !!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")
            },
            a
        },
        _enableiOSAudio: function() {
            var a = this || g;
            if (!b || !a._iOSEnabled && /iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                a._iOSEnabled = !1;
                var c = function() {
                    var d = b.createBuffer(1, 1, 22050),
                    e = b.createBufferSource();
                    e.buffer = d,
                    e.connect(b.destination),
                    "undefined" == typeof e.start ? e.noteOn(0) : e.start(0),
                    setTimeout(function() { (e.playbackState === e.PLAYING_STATE || e.playbackState === e.FINISHED_STATE) && (a._iOSEnabled = !0, a.iOSAutoEnable = !1, document.removeEventListener("touchstart", c, !1))
                    },
                    0)
                };
                return document.addEventListener("touchstart", c, !1),
                a
            }
        }
    };
    var g = new f,
    h = function(a) {
        var b = this;
        return a.src && 0 !== a.src.length ? void b.init(a) : void console.error("An array of source files must be passed with any new Howl.")
    };
    h.prototype = {
        init: function(a) {
            var d = this;
            return d._autoplay = a.autoplay || !1,
            d._ext = a.ext || null,
            d._html5 = a.html5 || !1,
            d._muted = a.mute || !1,
            d._loop = a.loop || !1,
            d._pool = a.pool || 5,
            d._preload = "boolean" == typeof a.preload ? a.preload: !0,
            d._rate = a.rate || 1,
            d._sprite = a.sprite || {},
            d._src = "string" != typeof a.src ? a.src: [a.src],
            d._volume = void 0 !== a.volume ? a.volume: 1,
            d._duration = 0,
            d._loaded = !1,
            d._sounds = [],
            d._endTimers = {},
            d._onend = a.onend ? [{
                fn: a.onend
            }] : [],
            d._onfaded = a.onfaded ? [{
                fn: a.onfaded
            }] : [],
            d._onload = a.onload ? [{
                fn: a.onload
            }] : [],
            d._onloaderror = a.onloaderror ? [{
                fn: a.onloaderror
            }] : [],
            d._onpause = a.onpause ? [{
                fn: a.onpause
            }] : [],
            d._onplay = a.onplay ? [{
                fn: a.onplay
            }] : [],
            d._webAudio = c && !d._html5,
            "undefined" != typeof b && b && g.iOSAutoEnable && g._enableiOSAudio(),
            g._howls.push(d),
            d._preload && d.load(),
            d
        },
        load: function() {
            var a = this,
            b = null;
            if (d) return void a._emit("loaderror");
            "string" == typeof a._src && (a._src = [a._src]);
            for (var c = 0; c < a._src.length; c++) {
                var e, f;
                if (a._ext && a._ext[c] ? e = a._ext[c] : (f = a._src[c], e = /^data:audio\/([^;,]+);/i.exec(f), e || (e = /\.([^.]+)$/.exec(f.split("?", 1)[0])), e && (e = e[1].toLowerCase())), g.codecs(e)) {
                    b = a._src[c];
                    break
                }
            }
            return b ? (a._src = b, new i(a), a._webAudio && k(a), a) : void a._emit("loaderror")
        },
        play: function(a) {
            var c = this,
            d = arguments,
            e = null;
            if ("number" == typeof a) e = a,
            a = null;
            else if ("undefined" == typeof a) {
                a = "__default";
                for (var f = 0,
                h = 0; h < c._sounds.length; h++) c._sounds[h]._paused && !c._sounds[h]._ended && (f++, e = c._sounds[h]._id);
                1 === f ? a = null: e = null
            }
            var i = e ? c._soundById(e) : c._inactiveSound();
            if (!i) return null;
            if (e && !a && (a = i._sprite || "__default"), !c._loaded && !c._sprite[a]) return c.once("load",
            function() {
                c.play(c._soundById(i._id) ? i._id: void 0)
            }),
            i._id;
            if (e && !i._paused) return i._id;
            var j = i._seek > 0 ? i._seek: c._sprite[a][0] / 1e3,
            k = (c._sprite[a][0] + c._sprite[a][1]) / 1e3 - j,
            l = function() {
                var d = !(!i._loop && !c._sprite[a][2]);
                c._emit("end", i._id),
                !c._webAudio && d && c.stop(i._id).play(i._id),
                c._webAudio && d && (c._emit("play", i._id), i._seek = i._start || 0, i._playStart = b.currentTime, c._endTimers[i._id] = setTimeout(l, 1e3 * (i._stop - i._start) / Math.abs(c._rate))),
                c._webAudio && !d && (i._paused = !0, i._ended = !0, i._seek = i._start || 0, c._clearTimer(i._id), i._node.bufferSource = null),
                c._webAudio || d || c.stop(i._id)
            };
            c._endTimers[i._id] = setTimeout(l, 1e3 * k / Math.abs(c._rate)),
            i._paused = !1,
            i._ended = !1,
            i._sprite = a,
            i._seek = j,
            i._start = c._sprite[a][0] / 1e3,
            i._stop = (c._sprite[a][0] + c._sprite[a][1]) / 1e3,
            i._loop = !(!i._loop && !c._sprite[a][2]);
            var m = i._node;
            if (c._webAudio) {
                var n = function() {
                    c._refreshBuffer(i);
                    var a = i._muted || c._muted ? 0 : i._volume * g.volume();
                    m.gain.setValueAtTime(a, b.currentTime),
                    i._playStart = b.currentTime,
                    "undefined" == typeof m.bufferSource.start ? i._loop ? m.bufferSource.noteGrainOn(0, j, 86400) : m.bufferSource.noteGrainOn(0, j, k) : i._loop ? m.bufferSource.start(0, j, 86400) : m.bufferSource.start(0, j, k),
                    c._endTimers[i._id] || (c._endTimers[i._id] = setTimeout(l, 1e3 * k / Math.abs(c._rate))),
                    d[1] || setTimeout(function() {
                        c._emit("play", i._id)
                    },
                    0)
                };
                c._loaded ? n() : (c.once("load", n), c._clearTimer(i._id))
            } else {
                var o = function() {
                    m.currentTime = j,
                    m.muted = i._muted || c._muted || g._muted || m.muted,
                    m.volume = i._volume * g.volume(),
                    m.playbackRate = c._rate,
                    setTimeout(function() {
                        m.play(),
                        d[1] || c._emit("play", i._id)
                    },
                    0)
                };
                if (4 === m.readyState || !m.readyState && navigator.isCocoonJS) o();
                else {
                    var p = function() {
                        c._endTimers[i._id] = setTimeout(l, 1e3 * k / Math.abs(c._rate)),
                        o(),
                        m.removeEventListener("canplaythrough", p, !1)
                    };
                    m.addEventListener("canplaythrough", p, !1),
                    c._clearTimer(i._id)
                }
            }
            return i._id
        },
        pause: function(a) {
            var b = this;
            if (!b._loaded) return b.once("play",
            function() {
                b.pause(a)
            }),
            b;
            for (var c = b._getSoundIds(a), d = 0; d < c.length; d++) {
                b._clearTimer(c[d]);
                var e = b._soundById(c[d]);
                if (e && !e._paused) {
                    if (e._seek = b.seek(c[d]), e._paused = !0, b._webAudio) {
                        if (!e._node.bufferSource) return b;
                        "undefined" == typeof e._node.bufferSource.stop ? e._node.bufferSource.noteOff(0) : e._node.bufferSource.stop(0),
                        e._node.bufferSource = null
                    } else isNaN(e._node.duration) || e._node.pause();
                    arguments[1] || b._emit("pause", e._id)
                }
            }
            return b
        },
        stop: function(a) {
            var b = this;
            if (!b._loaded) return "undefined" != typeof b._sounds[0]._sprite && b.once("play",
            function() {
                b.stop(a)
            }),
            b;
            for (var c = b._getSoundIds(a), d = 0; d < c.length; d++) {
                b._clearTimer(c[d]);
                var e = b._soundById(c[d]);
                if (e && !e._paused) if (e._seek = e._start || 0, e._paused = !0, e._ended = !0, b._webAudio && e._node) {
                    if (!e._node.bufferSource) return b;
                    "undefined" == typeof e._node.bufferSource.stop ? e._node.bufferSource.noteOff(0) : e._node.bufferSource.stop(0),
                    e._node.bufferSource = null
                } else e._node && !isNaN(e._node.duration) && (e._node.pause(), e._node.currentTime = e._start || 0)
            }
            return b
        },
        mute: function(a, c) {
            var d = this;
            if (!d._loaded) return d.once("play",
            function() {
                d.mute(a, c)
            }),
            d;
            if ("undefined" == typeof c) {
                if ("boolean" != typeof a) return d._muted;
                d._muted = a
            }
            for (var e = d._getSoundIds(c), f = 0; f < e.length; f++) {
                var h = d._soundById(e[f]);
                h && (h._muted = a, d._webAudio && h._node ? h._node.gain.setValueAtTime(a ? 0 : h._volume * g.volume(), b.currentTime) : h._node && (h._node.muted = g._muted ? !0 : a))
            }
            return d
        },
        volume: function() {
            var a, c, d = this,
            e = arguments;
            if (0 === e.length) return d._volume;
            if (1 === e.length) {
                var f = d._getSoundIds(),
                h = f.indexOf(e[0]);
                h >= 0 ? c = parseInt(e[0], 10) : a = parseFloat(e[0])
            } else 2 === e.length && (a = parseFloat(e[0]), c = parseInt(e[1], 10));
            var i;
            if (! ("undefined" != typeof a && a >= 0 && 1 >= a)) return i = c ? d._soundById(c) : d._sounds[0],
            i ? i._volume: 0;
            if (!d._loaded) return d.once("play",
            function() {
                d.volume.apply(d, e)
            }),
            d;
            "undefined" == typeof c && (d._volume = a),
            c = d._getSoundIds(c);
            for (var j = 0; j < c.length; j++) i = d._soundById(c[j]),
            i && (i._volume = a, d._webAudio && i._node ? i._node.gain.setValueAtTime(a * g.volume(), b.currentTime) : i._node && (i._node.volume = a * g.volume()));
            return d
        },
        fade: function(a, c, d, e) {
            var f = this;
            if (!f._loaded) return f.once("play",
            function() {
                f.fade(a, c, d, e)
            }),
            f;
            f.volume(a, e);
            for (var g = f._getSoundIds(e), h = 0; h < g.length; h++) {
                var i = f._soundById(g[h]);
                if (i) if (f._webAudio) {
                    var j = b.currentTime,
                    k = j + d / 1e3;
                    i._volume = a,
                    i._node.gain.setValueAtTime(a, j),
                    i._node.gain.linearRampToValueAtTime(c, k),
                    setTimeout(function(a, d) {
                        setTimeout(function() {
                            d._volume = c,
                            f._emit("faded", a)
                        },
                        k - b.currentTime > 0 ? Math.ceil(1e3 * (k - b.currentTime)) : 0)
                    }.bind(f, g[h], i), d)
                } else {
                    var l = Math.abs(a - c),
                    m = a > c ? "out": "in",
                    n = l / .01,
                    o = d / n; !
                    function() {
                        var b = a,
                        d = setInterval(function(a) {
                            b += "in" === m ? .01 : -.01,
                            b = Math.max(0, b),
                            b = Math.min(1, b),
                            b = Math.round(100 * b) / 100,
                            f.volume(b, a),
                            b === c && (clearInterval(d), f._emit("faded", a))
                        }.bind(f, g[h]), o)
                    } ()
                }
            }
            return f
        },
        loop: function() {
            var a, b, c, d = this,
            e = arguments;
            if (0 === e.length) return d._loop;
            if (1 === e.length) {
                if ("boolean" != typeof e[0]) return c = d._soundById(parseInt(e[0], 10)),
                c ? c._loop: !1;
                a = e[0],
                d._loop = a
            } else 2 === e.length && (a = e[0], b = parseInt(e[1], 10));
            for (var f = d._getSoundIds(b), g = 0; g < f.length; g++) c = d._soundById(f[g]),
            c && (c._loop = a, d._webAudio && c._node && (c._node.bufferSource.loop = a));
            return d
        },
        seek: function() {
            var a, c, d = this,
            e = arguments;
            if (0 === e.length) c = d._sounds[0]._id;
            else if (1 === e.length) {
                var f = d._getSoundIds(),
                g = f.indexOf(e[0]);
                g >= 0 ? c = parseInt(e[0], 10) : (c = d._sounds[0]._id, a = parseFloat(e[0]))
            } else 2 === e.length && (a = parseFloat(e[0]), c = parseInt(e[1], 10));
            if ("undefined" == typeof c) return d;
            if (!d._loaded) return d.once("load",
            function() {
                d.seek.apply(d, e)
            }),
            d;
            var h = d._soundById(c);
            if (h) {
                if (! (a >= 0)) return d._webAudio ? h._seek + d.playing(c) ? b.currentTime - h._playStart: 0 : h._node.currentTime;
                var i = d.playing(c);
                i && d.pause(c, !0),
                h._seek = a,
                d._clearTimer(c),
                i && d.play(c, !0)
            }
            return d
        },
        playing: function(a) {
            var b = this,
            c = b._soundById(a) || b._sounds[0];
            return c ? !c._paused: !1
        },
        duration: function() {
            return this._duration
        },
        unload: function() {
            for (var a = this,
            b = a._sounds,
            c = 0; c < b.length; c++) {
                b[c]._paused || (a.stop(b[c]._id), a._emit("end", b[c]._id)),
                a._webAudio || (b[c]._node.src = "", b[c]._node.removeEventListener("error", b[c]._errorFn, !1), b[c]._node.removeEventListener("canplaythrough", b[c]._loadFn, !1)),
                delete b[c]._node,
                a._clearTimer(b[c]._id);
                var d = g._howls.indexOf(a);
                d >= 0 && g._howls.splice(d, 1)
            }
            return j && delete j[a._src],
            a = null,
            null
        },
        on: function(a, b, c) {
            var d = this,
            e = d["_on" + a];
            return "function" == typeof b && e.push({
                id: c,
                fn: b
            }),
            d
        },
        off: function(a, b, c) {
            var d = this,
            e = d["_on" + a];
            if (b) {
                for (var f = 0; f < e.length; f++) if (b === e[f].fn && c === e[f].id) {
                    e.splice(f, 1);
                    break
                }
            } else e = [];
            return d
        },
        once: function(a, b, c) {
            var d = this,
            e = function() {
                b.apply(d, arguments),
                d.off(a, e, c)
            };
            return d.on(a, e, c),
            d
        },
        _emit: function(a, b, c) {
            for (var d = this,
            e = d["_on" + a], f = 0; f < e.length; f++) e[f].id && e[f].id !== b || setTimeout(function(a) {
                a.call(this, b, c)
            }.bind(d, e[f].fn), 0);
            return d
        },
        _clearTimer: function(a) {
            var b = this;
            return b._endTimers[a] && (clearTimeout(b._endTimers[a]), delete b._endTimers[a]),
            b
        },
        _soundById: function(a) {
            for (var b = this,
            c = 0; c < b._sounds.length; c++) if (a === b._sounds[c]._id) return b._sounds[c];
            return null
        },
        _inactiveSound: function() {
            var a = this;
            a._drain();
            for (var b = 0; b < a._sounds.length; b++) if (a._sounds[b]._ended) return a._sounds[b].reset();
            return new i(a)
        },
        _drain: function() {
            var a = this,
            b = a._pool,
            c = 0,
            d = 0;
            if (! (a._sounds.length < b)) {
                for (d = 0; d < a._sounds.length; d++) a._sounds[d]._ended && c++;
                for (d = a._sounds.length - 1; d >= 0; d--) {
                    if (b >= c) return;
                    a._sounds[d]._ended && (a._webAudio && a._sounds[d]._node && a._sounds[d]._node.disconnect(0), a._sounds.splice(d, 1), c--)
                }
            }
        },
        _getSoundIds: function(a) {
            var b = this;
            if ("undefined" == typeof a) {
                for (var c = [], d = 0; d < b._sounds.length; d++) c.push(b._sounds[d]._id);
                return c
            }
            return [a]
        },
        _refreshBuffer: function(a) {
            var c = this;
            return a._node.bufferSource = b.createBufferSource(),
            a._node.bufferSource.buffer = j[c._src],
            a._node.bufferSource.connect(a._panner ? a._panner: a._node),
            a._node.bufferSource.loop = a._loop,
            a._loop && (a._node.bufferSource.loopStart = a._start || 0, a._node.bufferSource.loopEnd = a._stop),
            a._node.bufferSource.playbackRate.value = c._rate,
            c
        }
    };
    var i = function(a) {
        this._parent = a,
        this.init()
    };
    if (i.prototype = {
        init: function() {
            var a = this,
            b = a._parent;
            return a._muted = b._muted,
            a._loop = b._loop,
            a._volume = b._volume,
            a._muted = b._muted,
            a._seek = 0,
            a._paused = !0,
            a._ended = !0,
            a._id = Math.round(Date.now() * Math.random()),
            b._sounds.push(a),
            a.create(),
            a
        },
        create: function() {
            var a = this,
            c = a._parent,
            d = g._muted || a._muted || a._parent._muted ? 0 : a._volume * g.volume();
            return c._webAudio ? (a._node = "undefined" == typeof b.createGain ? b.createGainNode() : b.createGain(), a._node.gain.setValueAtTime(d, b.currentTime), a._node.paused = !0, a._node.connect(e)) : (a._node = new Audio, a._errorFn = a._errorListener.bind(a), a._node.addEventListener("error", a._errorFn, !1), a._loadFn = a._loadListener.bind(a), a._node.addEventListener("canplaythrough", a._loadFn, !1), a._node.src = c._src, a._node.preload = "auto", a._node.volume = d, a._node.load()),
            a
        },
        reset: function() {
            var a = this,
            b = a._parent;
            return a._muted = b._muted,
            a._loop = b._loop,
            a._volume = b._volume,
            a._muted = b._muted,
            a._seek = 0,
            a._paused = !0,
            a._ended = !0,
            a._sprite = null,
            a._id = Math.round(Date.now() * Math.random()),
            a
        },
        _errorListener: function() {
            var a = this;
            a._node.error && 4 === a._node.error.code && (g.noAudio = !0),
            a._parent._emit("loaderror", a._id, a._node.error ? a._node.error.code: 0),
            a._node.removeEventListener("error", a._errorListener, !1)
        },
        _loadListener: function() {
            var a = this,
            b = a._parent;
            b._duration = Math.ceil(10 * a._node.duration) / 10,
            0 === Object.keys(b._sprite).length && (b._sprite = {
                __default: [0, 1e3 * b._duration]
            }),
            b._loaded || (b._loaded = !0, b._emit("load")),
            b._autoplay && b.play(),
            a._node.removeEventListener("canplaythrough", a._loadFn, !1)
        }
    },
    c) var j = {},
    k = function(a) {
        var b = a._src;
        if (j[b]) return a._duration = j[b].duration,
        void n(a);
        if (/^data:[^;]+;base64,/.test(b)) {
            window.atob = window.atob ||
            function(a) {
                for (var b, c, d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                e = String(a).replace(/=+$/, ""), f = 0, g = 0, h = ""; c = e.charAt(g++);~c && (b = f % 4 ? 64 * b + c: c, f++%4) ? h += String.fromCharCode(255 & b >> ( - 2 * f & 6)) : 0) c = d.indexOf(c);
                return h
            };
            for (var c = atob(b.split(",")[1]), d = new Uint8Array(c.length), e = 0; e < c.length; ++e) d[e] = c.charCodeAt(e);
            m(d.buffer, a)
        } else {
            var f = new XMLHttpRequest;
            f.open("GET", b, !0),
            f.responseType = "arraybuffer",
            f.onload = function() {
                m(f.response, a)
            },
            f.onerror = function() {
                a._webAudio && (a._html5 = !0, a._webAudio = !1, a._sounds = [], delete j[b], a.load())
            },
            l(f)
        }
    },
    l = function(a) {
        try {
            a.send()
        } catch(b) {
            a.onerror()
        }
    },
    m = function(a, c) {
        b.decodeAudioData(a,
        function(a) {
            a && (j[c._src] = a, n(c, a))
        },
        function() {
            c._emit("loaderror")
        })
    },
    n = function(a, b) {
        b && !a._duration && (a._duration = b.duration),
        0 === Object.keys(a._sprite).length && (a._sprite = {
            __default: [0, 1e3 * a._duration]
        }),
        a._loaded || (a._loaded = !0, a._emit("load")),
        a._autoplay && a.play()
    };
    "function" == typeof define && define.amd && define("howler",
    function() {
        return {
            Howler: g,
            Howl: h
        }
    }),
    "undefined" != typeof exports && (exports.Howler = g, exports.Howl = h),
    "undefined" != typeof window && (window.HowlerGlobal = f, window.Howler = g, window.Howl = h, window.Sound = i)
} (),
!
function() {
    "use strict";
    HowlerGlobal.prototype.init = function(a) {
        return function() {
            var b = this;
            return b._pos = [0, 0, 0],
            b._orientation = [0, 0, -1, 0, 1, 0],
            b._velocity = [0, 0, 0],
            b._listenerAttr = {
                dopplerFactor: 1,
                speedOfSound: 343.3
            },
            a.call(this, o)
        }
    } (HowlerGlobal.prototype.init),
    HowlerGlobal.prototype.pos = function(a, b, c) {
        var d = this;
        return d.ctx && d.ctx.listener ? (b = "number" != typeof b ? d._pos[1] : b, c = "number" != typeof c ? d._pos[2] : c, "number" != typeof a ? d._pos: (d._pos = [a, b, c], d.ctx.listener.setPosition(d._pos[0], d._pos[1], d._pos[2]), d)) : d
    },
    HowlerGlobal.prototype.orientation = function(a, b, c, d, e, f) {
        var g = this;
        if (!g.ctx || !g.ctx.listener) return g;
        var h = g._orientation;
        return b = "number" != typeof b ? h[1] : b,
        c = "number" != typeof c ? h[2] : c,
        d = "number" != typeof d ? h[3] : d,
        e = "number" != typeof e ? h[4] : e,
        f = "number" != typeof f ? h[5] : f,
        "number" != typeof a ? h: (g._orientation = [a, b, c, d, e, f], g.ctx.listener.setOrientation(h[0], h[1], h[2], h[3], h[4], h[5]), g)
    },
    HowlerGlobal.prototype.velocity = function(a, b, c) {
        var d = this;
        return d.ctx && d.ctx.listener ? (b = "number" != typeof b ? d._velocity[1] : b, c = "number" != typeof c ? d._velocity[2] : c, "number" != typeof a ? d._velocity: (d._velocity = [a, b, c], d.ctx.listener.setVelocity(d._velocity[0], d._velocity[1], d._velocity[2]), d)) : d
    },
    HowlerGlobal.prototype.listenerAttr = function(a) {
        var b = this;
        if (!b.ctx || !b.ctx.listener) return b;
        var c = b._listenerAttr;
        return a ? (b._listenerAttr = {
            dopplerFactor: "undefined" != typeof a.dopplerFactor ? a.dopplerFactor: c.dopplerFactor,
            speedOfSound: "undefined" != typeof a.speedOfSound ? a.speedOfSound: c.speedOfSound
        },
        b.ctx.listener.dopplerFactor = c.dopplerFactor, b.ctx.listener.speedOfSound = c.speedOfSound, b) : c
    },
    Howl.prototype.init = function(a) {
        return function(b) {
            var c = this;
            return c._orientation = b.orientation || [1, 0, 0],
            c._pos = b.pos || null,
            c._velocity = b.velocity || [0, 0, 0],
            c._pannerAttr = {
                coneInnerAngle: "undefined" != typeof b.coneInnerAngle ? b.coneInnerAngle: 360,
                coneOUterAngle: "undefined" != typeof b.coneOUterAngle ? b.coneOUterAngle: 360,
                coneOuterGain: "undefined" != typeof b.coneOuterGain ? b.coneOuterGain: 0,
                distanceModel: "undefined" != typeof b.distanceModel ? b.distanceModel: "inverse",
                maxDistance: "undefined" != typeof b.maxDistance ? b.maxDistance: 1e4,
                panningModel: "undefined" != typeof b.panningModel ? b.panningModel: "HRTF",
                refDistance: "undefined" != typeof b.refDistance ? b.refDistance: 1,
                rolloffFactor: "undefined" != typeof b.rolloffFactor ? b.rolloffFactor: 1
            },
            a.call(this, b)
        }
    } (Howl.prototype.init),
    Howl.prototype.pos = function(b, c, d, e) {
        var f = this;
        if (!f._webAudio) return f;
        if (!f._loaded) return f.once("play",
        function() {
            f.pos(b, c, d, e)
        }),
        f;
        if (c = "number" != typeof c ? 0 : c, d = "number" != typeof d ? -.5 : d, "undefined" == typeof e) {
            if ("number" != typeof b) return f._pos;
            f._pos = [b, c, d]
        }
        for (var g = f._getSoundIds(e), h = 0; h < g.length; h++) {
            var i = f._soundById(g[h]);
            if (i) {
                if ("number" != typeof b) return i._pos;
                i._pos = [b, c, d],
                i._node && (i._panner || a(i), i._panner.setPosition(b, c, d))
            }
        }
        return f
    },
    Howl.prototype.orientation = function(b, c, d, e) {
        var f = this;
        if (!f._webAudio) return f;
        if (!f._loaded) return f.once("play",
        function() {
            f.orientation(b, c, d, e)
        }),
        f;
        if (c = "number" != typeof c ? f._orientation[1] : c, d = "number" != typeof d ? f._orientation[1] : d, "undefined" == typeof e) {
            if ("number" != typeof b) return f._orientation;
            f._orientation = [b, c, d]
        }
        for (var g = f._getSoundIds(e), h = 0; h < g.length; h++) {
            var i = f._soundById(g[h]);
            if (i) {
                if ("number" != typeof b) return i._orientation;
                i._orientation = [b, c, d],
                i._node && (i._panner || a(i), i._panner.setOrientation(b, c, d))
            }
        }
        return f
    },
    Howl.prototype.velocity = function(b, c, d, e) {
        var f = this;
        if (!f._webAudio) return f;
        if (!f._loaded) return f.once("play",
        function() {
            f.velocity(b, c, d, e)
        }),
        f;
        if (c = "number" != typeof c ? f._velocity[1] : c, d = "number" != typeof d ? f._velocity[1] : d, "undefined" == typeof e) {
            if ("number" != typeof b) return f._velocity;
            f._velocity = [b, c, d]
        }
        for (var g = f._getSoundIds(e), h = 0; h < g.length; h++) {
            var i = f._soundById(g[h]);
            if (i) {
                if ("number" != typeof b) return i._velocity;
                i._velocity = [b, c, d],
                i._node && (i._panner || a(i), i._panner.setVelocity(b, c, d))
            }
        }
        return f
    },
    Howl.prototype.pannerAttr = function() {
        var b, c, d, e = this,
        f = arguments;
        if (!e._webAudio) return e;
        if (0 === f.length) return e._pannerAttr;
        if (1 === f.length) {
            if ("object" != typeof f[0]) return d = e._soundById(parseInt(f[0], 10)),
            d ? d._pannerAttr: e._pannerAttr;
            b = f[0],
            "undefined" == typeof c && (e._pannerAttr = {
                coneInnerAngle: "undefined" != typeof b.coneInnerAngle ? b.coneInnerAngle: e._coneInnerAngle,
                coneOUterAngle: "undefined" != typeof b.coneOUterAngle ? b.coneOUterAngle: e._coneOUterAngle,
                coneOuterGain: "undefined" != typeof b.coneOuterGain ? b.coneOuterGain: e._coneOuterGain,
                distanceModel: "undefined" != typeof b.distanceModel ? b.distanceModel: e._distanceModel,
                maxDistance: "undefined" != typeof b.maxDistance ? b.maxDistance: e._maxDistance,
                panningModel: "undefined" != typeof b.panningModel ? b.panningModel: e._panningModel,
                refDistance: "undefined" != typeof b.refDistance ? b.refDistance: e._refDistance,
                rolloffFactor: "undefined" != typeof b.rolloffFactor ? b.rolloffFactor: e._rolloffFactor
            })
        } else 2 === f.length && (b = f[0], c = parseInt(f[1], 10));
        for (var g = e._getSoundIds(c), h = 0; h < g.length; h++) if (d = e._soundById(g[h])) {
            var i = d._pannerAttr;
            i = {
                coneInnerAngle: "undefined" != typeof b.coneInnerAngle ? b.coneInnerAngle: i.coneInnerAngle,
                coneOUterAngle: "undefined" != typeof b.coneOUterAngle ? b.coneOUterAngle: i.coneOUterAngle,
                coneOuterGain: "undefined" != typeof b.coneOuterGain ? b.coneOuterGain: i.coneOuterGain,
                distanceModel: "undefined" != typeof b.distanceModel ? b.distanceModel: i.distanceModel,
                maxDistance: "undefined" != typeof b.maxDistance ? b.maxDistance: i.maxDistance,
                panningModel: "undefined" != typeof b.panningModel ? b.panningModel: i.panningModel,
                refDistance: "undefined" != typeof b.refDistance ? b.refDistance: i.refDistance,
                rolloffFactor: "undefined" != typeof b.rolloffFactor ? b.rolloffFactor: i.rolloffFactor
            };
            var j = d._panner;
            j ? (j.coneInnerAngle = i.coneInnerAngle, j.coneOUterAngle = i.coneOUterAngle, j.coneOuterGain = i.coneOuterGain, j.distanceModel = i.distanceModel, j.maxDistance = i.maxDistance, j.panningModel = i.panningModel, j.refDistance = i.refDistance, j.rolloffFactor = i.rolloffFactor) : (d._pos || (d._pos = e._pos || [0, 0, -.5]), a(d))
        }
        return e
    },
    Sound.prototype.init = function(a) {
        return function() {
            var b = this,
            c = b._parent;
            b._orientation = c._orientation,
            b._pos = c._pos,
            b._velocity = c._velocity,
            b._pannerAttr = c._pannerAttr,
            a.call(this),
            b._pos && c.pos(b._pos[0], b._pos[1], b._pos[2], b._id)
        }
    } (Sound.prototype.init),
    Sound.prototype.reset = function(a) {
        return function() {
            var b = this,
            c = b._parent;
            return b._orientation = c._orientation,
            b._pos = c._pos,
            b._velocity = c._velocity,
            b._pannerAttr = c._pannerAttr,
            a.call(this)
        }
    } (Sound.prototype.reset);
    var a = function(a) {
        a._panner = Howler.ctx.createPanner(),
        a._panner.coneInnerAngle = a._pannerAttr.coneInnerAngle,
        a._panner.coneOUterAngle = a._pannerAttr.coneOUterAngle,
        a._panner.coneOuterGain = a._pannerAttr.coneOuterGain,
        a._panner.distanceModel = a._pannerAttr.distanceModel,
        a._panner.maxDistance = a._pannerAttr.maxDistance,
        a._panner.panningModel = a._pannerAttr.panningModel,
        a._panner.refDistance = a._pannerAttr.refDistance,
        a._panner.rolloffFactor = a._pannerAttr.rolloffFactor,
        a._panner.setPosition(a._pos[0], a._pos[1], a._pos[2]),
        a._panner.setOrientation(a._orientation[0], a._orientation[1], a._orientation[2]),
        a._panner.setVelocity(a._velocity[0], a._velocity[1], a._velocity[2]),
        a._panner.connect(a._node),
        a._paused || a._parent.pause(a._id).play(a._id)
    }
} (),
!
function(a, b) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
        if (!a.document) throw new Error("jQuery requires a window with a document");
        return b(a)
    }: b(a)
} ("undefined" != typeof window ? window: this,
function(a, b) {
    function c(a) {
        var b = a.length,
        c = ea.type(a);
        return "function" === c || ea.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
    }
    function d(a, b, c) {
        if (ea.isFunction(b)) return ea.grep(a,
        function(a, d) {
            return !! b.call(a, d, a) !== c
        });
        if (b.nodeType) return ea.grep(a,
        function(a) {
            return a === b !== c
        });
        if ("string" == typeof b) {
            if (ma.test(b)) return ea.filter(b, a, c);
            b = ea.filter(b, a)
        }
        return ea.grep(a,
        function(a) {
            return ea.inArray(a, b) >= 0 !== c
        })
    }
    function e(a, b) {
        do a = a[b];
        while (a && 1 !== a.nodeType);
        return a
    }
    function f(a) {
        var b = ua[a] = {};
        return ea.each(a.match(ta) || [],
        function(a, c) {
            b[c] = !0
        }),
        b
    }
    function g() {
        oa.addEventListener ? (oa.removeEventListener("DOMContentLoaded", h, !1), a.removeEventListener("load", h, !1)) : (oa.detachEvent("onreadystatechange", h), a.detachEvent("onload", h))
    }
    function h() { (oa.addEventListener || "load" === event.type || "complete" === oa.readyState) && (g(), ea.ready())
    }
    function i(a, b, c) {
        if (void 0 === c && 1 === a.nodeType) {
            var d = "data-" + b.replace(za, "-$1").toLowerCase();
            if (c = a.getAttribute(d), "string" == typeof c) {
                try {
                    c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null: +c + "" === c ? +c: ya.test(c) ? ea.parseJSON(c) : c
                } catch(e) {}
                ea.data(a, b, c)
            } else c = void 0
        }
        return c
    }
    function j(a) {
        var b;
        for (b in a) if (("data" !== b || !ea.isEmptyObject(a[b])) && "toJSON" !== b) return ! 1;
        return ! 0
    }
    function k(a, b, c, d) {
        if (ea.acceptData(a)) {
            var e, f, g = ea.expando,
            h = a.nodeType,
            i = h ? ea.cache: a,
            j = h ? a[g] : a[g] && g;
            if (j && i[j] && (d || i[j].data) || void 0 !== c || "string" != typeof b) return j || (j = h ? a[g] = W.pop() || ea.guid++:g),
            i[j] || (i[j] = h ? {}: {
                toJSON: ea.noop
            }),
            ("object" == typeof b || "function" == typeof b) && (d ? i[j] = ea.extend(i[j], b) : i[j].data = ea.extend(i[j].data, b)),
            f = i[j],
            d || (f.data || (f.data = {}), f = f.data),
            void 0 !== c && (f[ea.camelCase(b)] = c),
            "string" == typeof b ? (e = f[b], null == e && (e = f[ea.camelCase(b)])) : e = f,
            e
        }
    }
    function l(a, b, c) {
        if (ea.acceptData(a)) {
            var d, e, f = a.nodeType,
            g = f ? ea.cache: a,
            h = f ? a[ea.expando] : ea.expando;
            if (g[h]) {
                if (b && (d = c ? g[h] : g[h].data)) {
                    ea.isArray(b) ? b = b.concat(ea.map(b, ea.camelCase)) : b in d ? b = [b] : (b = ea.camelCase(b), b = b in d ? [b] : b.split(" ")),
                    e = b.length;
                    for (; e--;) delete d[b[e]];
                    if (c ? !j(d) : !ea.isEmptyObject(d)) return
                } (c || (delete g[h].data, j(g[h]))) && (f ? ea.cleanData([a], !0) : ca.deleteExpando || g != g.window ? delete g[h] : g[h] = null)
            }
        }
    }
    function m() {
        return ! 0
    }
    function n() {
        return ! 1
    }
    function o() {
        try {
            return oa.activeElement
        } catch(a) {}
    }
    function p(a) {
        var b = Ka.split("|"),
        c = a.createDocumentFragment();
        if (c.createElement) for (; b.length;) c.createElement(b.pop());
        return c
    }
    function q(a, b) {
        var c, d, e = 0,
        f = typeof a.getElementsByTagName !== xa ? a.getElementsByTagName(b || "*") : typeof a.querySelectorAll !== xa ? a.querySelectorAll(b || "*") : void 0;
        if (!f) for (f = [], c = a.childNodes || a; null != (d = c[e]); e++) ! b || ea.nodeName(d, b) ? f.push(d) : ea.merge(f, q(d, b));
        return void 0 === b || b && ea.nodeName(a, b) ? ea.merge([a], f) : f
    }
    function r(a) {
        Ea.test(a.type) && (a.defaultChecked = a.checked)
    }
    function s(a, b) {
        return ea.nodeName(a, "table") && ea.nodeName(11 !== b.nodeType ? b: b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
    }
    function t(a) {
        return a.type = (null !== ea.find.attr(a, "type")) + "/" + a.type,
        a
    }
    function u(a) {
        var b = Va.exec(a.type);
        return b ? a.type = b[1] : a.removeAttribute("type"),
        a
    }
    function v(a, b) {
        for (var c, d = 0; null != (c = a[d]); d++) ea._data(c, "globalEval", !b || ea._data(b[d], "globalEval"))
    }
    function w(a, b) {
        if (1 === b.nodeType && ea.hasData(a)) {
            var c, d, e, f = ea._data(a),
            g = ea._data(b, f),
            h = f.events;
            if (h) {
                delete g.handle,
                g.events = {};
                for (c in h) for (d = 0, e = h[c].length; e > d; d++) ea.event.add(b, c, h[c][d])
            }
            g.data && (g.data = ea.extend({},
            g.data))
        }
    }
    function x(a, b) {
        var c, d, e;
        if (1 === b.nodeType) {
            if (c = b.nodeName.toLowerCase(), !ca.noCloneEvent && b[ea.expando]) {
                e = ea._data(b);
                for (d in e.events) ea.removeEvent(b, d, e.handle);
                b.removeAttribute(ea.expando)
            }
            "script" === c && b.text !== a.text ? (t(b).text = a.text, u(b)) : "object" === c ? (b.parentNode && (b.outerHTML = a.outerHTML), ca.html5Clone && a.innerHTML && !ea.trim(b.innerHTML) && (b.innerHTML = a.innerHTML)) : "input" === c && Ea.test(a.type) ? (b.defaultChecked = b.checked = a.checked, b.value !== a.value && (b.value = a.value)) : "option" === c ? b.defaultSelected = b.selected = a.defaultSelected: ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue)
        }
    }
    function y(b, c) {
        var d, e = ea(c.createElement(b)).appendTo(c.body),
        f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display: ea.css(e[0], "display");
        return e.detach(),
        f
    }
    function z(a) {
        var b = oa,
        c = _a[a];
        return c || (c = y(a, b), "none" !== c && c || ($a = ($a || ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = ($a[0].contentWindow || $a[0].contentDocument).document, b.write(), b.close(), c = y(a, b), $a.detach()), _a[a] = c),
        c
    }
    function A(a, b) {
        return {
            get: function() {
                var c = a();
                return null != c ? c ? void delete this.get: (this.get = b).apply(this, arguments) : void 0
            }
        }
    }
    function B(a, b) {
        if (b in a) return b;
        for (var c = b.charAt(0).toUpperCase() + b.slice(1), d = b, e = mb.length; e--;) if (b = mb[e] + c, b in a) return b;
        return d
    }
    function C(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g],
        d.style && (f[g] = ea._data(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && Ca(d) && (f[g] = ea._data(d, "olddisplay", z(d.nodeName)))) : (e = Ca(d), (c && "none" !== c || !e) && ea._data(d, "olddisplay", e ? c: ea.css(d, "display"))));
        for (g = 0; h > g; g++) d = a[g],
        d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "": "none"));
        return a
    }
    function D(a, b, c) {
        var d = ib.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
    }
    function E(a, b, c, d, e) {
        for (var f = c === (d ? "border": "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2)"margin" === c && (g += ea.css(a, c + Ba[f], !0, e)),
        d ? ("content" === c && (g -= ea.css(a, "padding" + Ba[f], !0, e)), "margin" !== c && (g -= ea.css(a, "border" + Ba[f] + "Width", !0, e))) : (g += ea.css(a, "padding" + Ba[f], !0, e), "padding" !== c && (g += ea.css(a, "border" + Ba[f] + "Width", !0, e)));
        return g
    }
    function F(a, b, c) {
        var d = !0,
        e = "width" === b ? a.offsetWidth: a.offsetHeight,
        f = ab(a),
        g = ca.boxSizing && "border-box" === ea.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
            if (e = bb(a, b, f), (0 > e || null == e) && (e = a.style[b]), db.test(e)) return e;
            d = g && (ca.boxSizingReliable() || e === a.style[b]),
            e = parseFloat(e) || 0
        }
        return e + E(a, b, c || (g ? "border": "content"), d, f) + "px"
    }
    function G(a, b, c, d, e) {
        return new G.prototype.init(a, b, c, d, e)
    }
    function H() {
        return setTimeout(function() {
            nb = void 0
        }),
        nb = ea.now()
    }
    function I(a, b) {
        var c, d = {
            height: a
        },
        e = 0;
        for (b = b ? 1 : 0; 4 > e; e += 2 - b) c = Ba[e],
        d["margin" + c] = d["padding" + c] = a;
        return b && (d.opacity = d.width = a),
        d
    }
    function J(a, b, c) {
        for (var d, e = (tb[b] || []).concat(tb["*"]), f = 0, g = e.length; g > f; f++) if (d = e[f].call(c, b, a)) return d
    }
    function K(a, b, c) {
        var d, e, f, g, h, i, j, k, l = this,
        m = {},
        n = a.style,
        o = a.nodeType && Ca(a),
        p = ea._data(a, "fxshow");
        c.queue || (h = ea._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function() {
            h.unqueued || i()
        }), h.unqueued++, l.always(function() {
            l.always(function() {
                h.unqueued--,
                ea.queue(a, "fx").length || h.empty.fire()
            })
        })),
        1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [n.overflow, n.overflowX, n.overflowY], j = ea.css(a, "display"), k = "none" === j ? ea._data(a, "olddisplay") || z(a.nodeName) : j, "inline" === k && "none" === ea.css(a, "float") && (ca.inlineBlockNeedsLayout && "inline" !== z(a.nodeName) ? n.zoom = 1 : n.display = "inline-block")),
        c.overflow && (n.overflow = "hidden", ca.shrinkWrapBlocks() || l.always(function() {
            n.overflow = c.overflow[0],
            n.overflowX = c.overflow[1],
            n.overflowY = c.overflow[2]
        }));
        for (d in b) if (e = b[d], pb.exec(e)) {
            if (delete b[d], f = f || "toggle" === e, e === (o ? "hide": "show")) {
                if ("show" !== e || !p || void 0 === p[d]) continue;
                o = !0
            }
            m[d] = p && p[d] || ea.style(a, d)
        } else j = void 0;
        if (ea.isEmptyObject(m))"inline" === ("none" === j ? z(a.nodeName) : j) && (n.display = j);
        else {
            p ? "hidden" in p && (o = p.hidden) : p = ea._data(a, "fxshow", {}),
            f && (p.hidden = !o),
            o ? ea(a).show() : l.done(function() {
                ea(a).hide()
            }),
            l.done(function() {
                var b;
                ea._removeData(a, "fxshow");
                for (b in m) ea.style(a, b, m[b])
            });
            for (d in m) g = J(o ? p[d] : 0, d, l),
            d in p || (p[d] = g.start, o && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
        }
    }
    function L(a, b) {
        var c, d, e, f, g;
        for (c in a) if (d = ea.camelCase(c), e = b[d], f = a[c], ea.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = ea.cssHooks[d], g && "expand" in g) {
            f = g.expand(f),
            delete a[d];
            for (c in f) c in a || (a[c] = f[c], b[c] = e)
        } else b[d] = e
    }
    function M(a, b, c) {
        var d, e, f = 0,
        g = sb.length,
        h = ea.Deferred().always(function() {
            delete i.elem
        }),
        i = function() {
            if (e) return ! 1;
            for (var b = nb || H(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
            return h.notifyWith(a, [j, f, c]),
            1 > f && i ? c: (h.resolveWith(a, [j]), !1)
        },
        j = h.promise({
            elem: a,
            props: ea.extend({},
            b),
            opts: ea.extend(!0, {
                specialEasing: {}
            },
            c),
            originalProperties: b,
            originalOptions: c,
            startTime: nb || H(),
            duration: c.duration,
            tweens: [],
            createTween: function(b, c) {
                var d = ea.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                return j.tweens.push(d),
                d
            },
            stop: function(b) {
                var c = 0,
                d = b ? j.tweens.length: 0;
                if (e) return this;
                for (e = !0; d > c; c++) j.tweens[c].run(1);
                return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]),
                this
            }
        }),
        k = j.props;
        for (L(k, j.opts.specialEasing); g > f; f++) if (d = sb[f].call(j, a, k, j.opts)) return d;
        return ea.map(k, J, j),
        ea.isFunction(j.opts.start) && j.opts.start.call(a, j),
        ea.fx.timer(ea.extend(i, {
            elem: a,
            anim: j,
            queue: j.opts.queue
        })),
        j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
    }
    function N(a) {
        return function(b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e = 0,
            f = b.toLowerCase().match(ta) || [];
            if (ea.isFunction(c)) for (; d = f[e++];)"+" === d.charAt(0) ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
        }
    }
    function O(a, b, c, d) {
        function e(h) {
            var i;
            return f[h] = !0,
            ea.each(a[h] || [],
            function(a, h) {
                var j = h(b, c, d);
                return "string" != typeof j || g || f[j] ? g ? !(i = j) : void 0 : (b.dataTypes.unshift(j), e(j), !1)
            }),
            i
        }
        var f = {},
        g = a === Rb;
        return e(b.dataTypes[0]) || !f["*"] && e("*")
    }
    function P(a, b) {
        var c, d, e = ea.ajaxSettings.flatOptions || {};
        for (d in b) void 0 !== b[d] && ((e[d] ? a: c || (c = {}))[d] = b[d]);
        return c && ea.extend(!0, a, c),
        a
    }
    function Q(a, b, c) {
        for (var d, e, f, g, h = a.contents,
        i = a.dataTypes;
        "*" === i[0];) i.shift(),
        void 0 === e && (e = a.mimeType || b.getResponseHeader("Content-Type"));
        if (e) for (g in h) if (h[g] && h[g].test(e)) {
            i.unshift(g);
            break
        }
        if (i[0] in c) f = i[0];
        else {
            for (g in c) {
                if (!i[0] || a.converters[g + " " + i[0]]) {
                    f = g;
                    break
                }
                d || (d = g)
            }
            f = f || d
        }
        return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0
    }
    function R(a, b, c, d) {
        var e, f, g, h, i, j = {},
        k = a.dataTypes.slice();
        if (k[1]) for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
        for (f = k.shift(); f;) if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift()) if ("*" === f) f = i;
        else if ("*" !== i && i !== f) {
            if (g = j[i + " " + f] || j["* " + f], !g) for (e in j) if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                break
            }
            if (g !== !0) if (g && a["throws"]) b = g(b);
            else try {
                b = g(b)
            } catch(l) {
                return {
                    state: "parsererror",
                    error: g ? l: "No conversion from " + i + " to " + f
                }
            }
        }
        return {
            state: "success",
            data: b
        }
    }
    function S(a, b, c, d) {
        var e;
        if (ea.isArray(b)) ea.each(b,
        function(b, e) {
            c || Vb.test(a) ? d(a, e) : S(a + "[" + ("object" == typeof e ? b: "") + "]", e, c, d)
        });
        else if (c || "object" !== ea.type(b)) d(a, b);
        else for (e in b) S(a + "[" + e + "]", b[e], c, d)
    }
    function T() {
        try {
            return new a.XMLHttpRequest
        } catch(b) {}
    }
    function U() {
        try {
            return new a.ActiveXObject("Microsoft.XMLHTTP")
        } catch(b) {}
    }
    function V(a) {
        return ea.isWindow(a) ? a: 9 === a.nodeType ? a.defaultView || a.parentWindow: !1
    }
    var W = [],
    X = W.slice,
    Y = W.concat,
    Z = W.push,
    $ = W.indexOf,
    _ = {},
    aa = _.toString,
    ba = _.hasOwnProperty,
    ca = {},
    da = "1.11.1",
    ea = function(a, b) {
        return new ea.fn.init(a, b)
    },
    fa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    ga = /^-ms-/,
    ha = /-([\da-z])/gi,
    ia = function(a, b) {
        return b.toUpperCase()
    };
    ea.fn = ea.prototype = {
        jquery: da,
        constructor: ea,
        selector: "",
        length: 0,
        toArray: function() {
            return X.call(this)
        },
        get: function(a) {
            return null != a ? 0 > a ? this[a + this.length] : this[a] : X.call(this)
        },
        pushStack: function(a) {
            var b = ea.merge(this.constructor(), a);
            return b.prevObject = this,
            b.context = this.context,
            b
        },
        each: function(a, b) {
            return ea.each(this, a, b)
        },
        map: function(a) {
            return this.pushStack(ea.map(this,
            function(b, c) {
                return a.call(b, c, b)
            }))
        },
        slice: function() {
            return this.pushStack(X.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq( - 1)
        },
        eq: function(a) {
            var b = this.length,
            c = +a + (0 > a ? b: 0);
            return this.pushStack(c >= 0 && b > c ? [this[c]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: Z,
        sort: W.sort,
        splice: W.splice
    },
    ea.extend = ea.fn.extend = function() {
        var a, b, c, d, e, f, g = arguments[0] || {},
        h = 1,
        i = arguments.length,
        j = !1;
        for ("boolean" == typeof g && (j = g, g = arguments[h] || {},
        h++), "object" == typeof g || ea.isFunction(g) || (g = {}), h === i && (g = this, h--); i > h; h++) if (null != (e = arguments[h])) for (d in e) a = g[d],
        c = e[d],
        g !== c && (j && c && (ea.isPlainObject(c) || (b = ea.isArray(c))) ? (b ? (b = !1, f = a && ea.isArray(a) ? a: []) : f = a && ea.isPlainObject(a) ? a: {},
        g[d] = ea.extend(j, f, c)) : void 0 !== c && (g[d] = c));
        return g
    },
    ea.extend({
        expando: "jQuery" + (da + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(a) {
            throw new Error(a)
        },
        noop: function() {},
        isFunction: function(a) {
            return "function" === ea.type(a)
        },
        isArray: Array.isArray ||
        function(a) {
            return "array" === ea.type(a)
        },
        isWindow: function(a) {
            return null != a && a == a.window
        },
        isNumeric: function(a) {
            return ! ea.isArray(a) && a - parseFloat(a) >= 0
        },
        isEmptyObject: function(a) {
            var b;
            for (b in a) return ! 1;
            return ! 0
        },
        isPlainObject: function(a) {
            var b;
            if (!a || "object" !== ea.type(a) || a.nodeType || ea.isWindow(a)) return ! 1;
            try {
                if (a.constructor && !ba.call(a, "constructor") && !ba.call(a.constructor.prototype, "isPrototypeOf")) return ! 1
            } catch(c) {
                return ! 1
            }
            if (ca.ownLast) for (b in a) return ba.call(a, b);
            for (b in a);
            return void 0 === b || ba.call(a, b)
        },
        type: function(a) {
            return null == a ? a + "": "object" == typeof a || "function" == typeof a ? _[aa.call(a)] || "object": typeof a
        },
        globalEval: function(b) {
            b && ea.trim(b) && (a.execScript ||
            function(b) {
                a.eval.call(a, b)
            })(b)
        },
        camelCase: function(a) {
            return a.replace(ga, "ms-").replace(ha, ia)
        },
        nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
        },
        each: function(a, b, d) {
            var e, f = 0,
            g = a.length,
            h = c(a);
            if (d) {
                if (h) for (; g > f && (e = b.apply(a[f], d), e !== !1); f++);
                else for (f in a) if (e = b.apply(a[f], d), e === !1) break
            } else if (h) for (; g > f && (e = b.call(a[f], f, a[f]), e !== !1); f++);
            else for (f in a) if (e = b.call(a[f], f, a[f]), e === !1) break;
            return a
        },
        trim: function(a) {
            return null == a ? "": (a + "").replace(fa, "")
        },
        makeArray: function(a, b) {
            var d = b || [];
            return null != a && (c(Object(a)) ? ea.merge(d, "string" == typeof a ? [a] : a) : Z.call(d, a)),
            d
        },
        inArray: function(a, b, c) {
            var d;
            if (b) {
                if ($) return $.call(b, a, c);
                for (d = b.length, c = c ? 0 > c ? Math.max(0, d + c) : c: 0; d > c; c++) if (c in b && b[c] === a) return c
            }
            return - 1
        },
        merge: function(a, b) {
            for (var c = +b.length,
            d = 0,
            e = a.length; c > d;) a[e++] = b[d++];
            if (c !== c) for (; void 0 !== b[d];) a[e++] = b[d++];
            return a.length = e,
            a
        },
        grep: function(a, b, c) {
            for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f),
            d !== h && e.push(a[f]);
            return e
        },
        map: function(a, b, d) {
            var e, f = 0,
            g = a.length,
            h = c(a),
            i = [];
            if (h) for (; g > f; f++) e = b(a[f], f, d),
            null != e && i.push(e);
            else for (f in a) e = b(a[f], f, d),
            null != e && i.push(e);
            return Y.apply([], i)
        },
        guid: 1,
        proxy: function(a, b) {
            var c, d, e;
            return "string" == typeof b && (e = a[b], b = a, a = e),
            ea.isFunction(a) ? (c = X.call(arguments, 2), d = function() {
                return a.apply(b || this, c.concat(X.call(arguments)))
            },
            d.guid = a.guid = a.guid || ea.guid++, d) : void 0
        },
        now: function() {
            return + new Date
        },
        support: ca
    }),
    ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
    function(a, b) {
        _["[object " + b + "]"] = b.toLowerCase()
    });
    var ja = function(a) {
        function b(a, b, c, d) {
            var e, f, g, h, i, j, l, n, o, p;
            if ((b ? b.ownerDocument || b: O) !== G && F(b), b = b || G, c = c || [], !a || "string" != typeof a) return c;
            if (1 !== (h = b.nodeType) && 9 !== h) return [];
            if (I && !d) {
                if (e = sa.exec(a)) if (g = e[1]) {
                    if (9 === h) {
                        if (f = b.getElementById(g), !f || !f.parentNode) return c;
                        if (f.id === g) return c.push(f),
                        c
                    } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g) return c.push(f),
                    c
                } else {
                    if (e[2]) return _.apply(c, b.getElementsByTagName(a)),
                    c;
                    if ((g = e[3]) && v.getElementsByClassName && b.getElementsByClassName) return _.apply(c, b.getElementsByClassName(g)),
                    c
                }
                if (v.qsa && (!J || !J.test(a))) {
                    if (n = l = N, o = b, p = 9 === h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
                        for (j = z(a), (l = b.getAttribute("id")) ? n = l.replace(ua, "\\$&") : b.setAttribute("id", n), n = "[id='" + n + "'] ", i = j.length; i--;) j[i] = n + m(j[i]);
                        o = ta.test(a) && k(b.parentNode) || b,
                        p = j.join(",")
                    }
                    if (p) try {
                        return _.apply(c, o.querySelectorAll(p)),
                        c
                    } catch(q) {} finally {
                        l || b.removeAttribute("id")
                    }
                }
            }
            return B(a.replace(ia, "$1"), b, c, d)
        }
        function c() {
            function a(c, d) {
                return b.push(c + " ") > w.cacheLength && delete a[b.shift()],
                a[c + " "] = d
            }
            var b = [];
            return a
        }
        function d(a) {
            return a[N] = !0,
            a
        }
        function e(a) {
            var b = G.createElement("div");
            try {
                return !! a(b)
            } catch(c) {
                return ! 1
            } finally {
                b.parentNode && b.parentNode.removeChild(b),
                b = null
            }
        }
        function f(a, b) {
            for (var c = a.split("|"), d = a.length; d--;) w.attrHandle[c[d]] = b
        }
        function g(a, b) {
            var c = b && a,
            d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || W) - (~a.sourceIndex || W);
            if (d) return d;
            if (c) for (; c = c.nextSibling;) if (c === b) return - 1;
            return a ? 1 : -1
        }
        function h(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a
            }
        }
        function i(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a
            }
        }
        function j(a) {
            return d(function(b) {
                return b = +b,
                d(function(c, d) {
                    for (var e, f = a([], c.length, b), g = f.length; g--;) c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                })
            })
        }
        function k(a) {
            return a && typeof a.getElementsByTagName !== V && a
        }
        function l() {}
        function m(a) {
            for (var b = 0,
            c = a.length,
            d = ""; c > b; b++) d += a[b].value;
            return d
        }
        function n(a, b, c) {
            var d = b.dir,
            e = c && "parentNode" === d,
            f = Q++;
            return b.first ?
            function(b, c, f) {
                for (; b = b[d];) if (1 === b.nodeType || e) return a(b, c, f)
            }: function(b, c, g) {
                var h, i, j = [P, f];
                if (g) {
                    for (; b = b[d];) if ((1 === b.nodeType || e) && a(b, c, g)) return ! 0
                } else for (; b = b[d];) if (1 === b.nodeType || e) {
                    if (i = b[N] || (b[N] = {}), (h = i[d]) && h[0] === P && h[1] === f) return j[2] = h[2];
                    if (i[d] = j, j[2] = a(b, c, g)) return ! 0
                }
            }
        }
        function o(a) {
            return a.length > 1 ?
            function(b, c, d) {
                for (var e = a.length; e--;) if (!a[e](b, c, d)) return ! 1;
                return ! 0
            }: a[0]
        }
        function p(a, c, d) {
            for (var e = 0,
            f = c.length; f > e; e++) b(a, c[e], d);
            return d
        }
        function q(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
            return g
        }
        function r(a, b, c, e, f, g) {
            return e && !e[N] && (e = r(e)),
            f && !f[N] && (f = r(f, g)),
            d(function(d, g, h, i) {
                var j, k, l, m = [],
                n = [],
                o = g.length,
                r = d || p(b || "*", h.nodeType ? [h] : h, []),
                s = !a || !d && b ? r: q(r, m, a, h, i),
                t = c ? f || (d ? a: o || e) ? [] : g: s;
                if (c && c(s, t, h, i), e) for (j = q(t, n), e(j, [], h, i), k = j.length; k--;)(l = j[k]) && (t[n[k]] = !(s[n[k]] = l));
                if (d) {
                    if (f || a) {
                        if (f) {
                            for (j = [], k = t.length; k--;)(l = t[k]) && j.push(s[k] = l);
                            f(null, t = [], j, i)
                        }
                        for (k = t.length; k--;)(l = t[k]) && (j = f ? ba.call(d, l) : m[k]) > -1 && (d[j] = !(g[j] = l))
                    }
                } else t = q(t === g ? t.splice(o, t.length) : t),
                f ? f(null, g, t, i) : _.apply(g, t)
            })
        }
        function s(a) {
            for (var b, c, d, e = a.length,
            f = w.relative[a[0].type], g = f || w.relative[" "], h = f ? 1 : 0, i = n(function(a) {
                return a === b
            },
            g, !0), j = n(function(a) {
                return ba.call(b, a) > -1
            },
            g, !0), k = [function(a, c, d) {
                return ! f && (d || c !== C) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d))
            }]; e > h; h++) if (c = w.relative[a[h].type]) k = [n(o(k), c)];
            else {
                if (c = w.filter[a[h].type].apply(null, a[h].matches), c[N]) {
                    for (d = ++h; e > d && !w.relative[a[d].type]; d++);
                    return r(h > 1 && o(k), h > 1 && m(a.slice(0, h - 1).concat({
                        value: " " === a[h - 2].type ? "*": ""
                    })).replace(ia, "$1"), c, d > h && s(a.slice(h, d)), e > d && s(a = a.slice(d)), e > d && m(a))
                }
                k.push(c)
            }
            return o(k)
        }
        function t(a, c) {
            var e = c.length > 0,
            f = a.length > 0,
            g = function(d, g, h, i, j) {
                var k, l, m, n = 0,
                o = "0",
                p = d && [],
                r = [],
                s = C,
                t = d || f && w.find.TAG("*", j),
                u = P += null == s ? 1 : Math.random() || .1,
                v = t.length;
                for (j && (C = g !== G && g); o !== v && null != (k = t[o]); o++) {
                    if (f && k) {
                        for (l = 0; m = a[l++];) if (m(k, g, h)) {
                            i.push(k);
                            break
                        }
                        j && (P = u)
                    }
                    e && ((k = !m && k) && n--, d && p.push(k))
                }
                if (n += o, e && o !== n) {
                    for (l = 0; m = c[l++];) m(p, r, g, h);
                    if (d) {
                        if (n > 0) for (; o--;) p[o] || r[o] || (r[o] = Z.call(i));
                        r = q(r)
                    }
                    _.apply(i, r),
                    j && !d && r.length > 0 && n + c.length > 1 && b.uniqueSort(i)
                }
                return j && (P = u, C = s),
                p
            };
            return e ? d(g) : g
        }
        var u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N = "sizzle" + -new Date,
        O = a.document,
        P = 0,
        Q = 0,
        R = c(),
        S = c(),
        T = c(),
        U = function(a, b) {
            return a === b && (E = !0),
            0
        },
        V = "undefined",
        W = 1 << 31,
        X = {}.hasOwnProperty,
        Y = [],
        Z = Y.pop,
        $ = Y.push,
        _ = Y.push,
        aa = Y.slice,
        ba = Y.indexOf ||
        function(a) {
            for (var b = 0,
            c = this.length; c > b; b++) if (this[b] === a) return b;
            return - 1
        },
        ca = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
        da = "[\\x20\\t\\r\\n\\f]",
        ea = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
        fa = ea.replace("w", "w#"),
        ga = "\\[" + da + "*(" + ea + ")(?:" + da + "*([*^$|!~]?=)" + da + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + fa + "))|)" + da + "*\\]",
        ha = ":(" + ea + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ga + ")*)|.*)\\)|)",
        ia = new RegExp("^" + da + "+|((?:^|[^\\\\])(?:\\\\.)*)" + da + "+$", "g"),
        ja = new RegExp("^" + da + "*," + da + "*"),
        ka = new RegExp("^" + da + "*([>+~]|" + da + ")" + da + "*"),
        la = new RegExp("=" + da + "*([^\\]'\"]*?)" + da + "*\\]", "g"),
        ma = new RegExp(ha),
        na = new RegExp("^" + fa + "$"),
        oa = {
            ID: new RegExp("^#(" + ea + ")"),
            CLASS: new RegExp("^\\.(" + ea + ")"),
            TAG: new RegExp("^(" + ea.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + ga),
            PSEUDO: new RegExp("^" + ha),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + da + "*(even|odd|(([+-]|)(\\d*)n|)" + da + "*(?:([+-]|)" + da + "*(\\d+)|))" + da + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + ca + ")$", "i"),
            needsContext: new RegExp("^" + da + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + da + "*((?:-\\d)?\\d*)" + da + "*\\)|)(?=[^-]|$)", "i")
        },
        pa = /^(?:input|select|textarea|button)$/i,
        qa = /^h\d$/i,
        ra = /^[^{]+\{\s*\[native \w/,
        sa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        ta = /[+~]/,
        ua = /'|\\/g,
        va = new RegExp("\\\\([\\da-f]{1,6}" + da + "?|(" + da + ")|.)", "ig"),
        wa = function(a, b, c) {
            var d = "0x" + b - 65536;
            return d !== d || c ? b: 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
        };
        try {
            _.apply(Y = aa.call(O.childNodes), O.childNodes),
            Y[O.childNodes.length].nodeType
        } catch(xa) {
            _ = {
                apply: Y.length ?
                function(a, b) {
                    $.apply(a, aa.call(b))
                }: function(a, b) {
                    for (var c = a.length,
                    d = 0; a[c++] = b[d++];);
                    a.length = c - 1
                }
            }
        }
        v = b.support = {},
        y = b.isXML = function(a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName: !1
        },
        F = b.setDocument = function(a) {
            var b, c = a ? a.ownerDocument || a: O,
            d = c.defaultView;
            return c !== G && 9 === c.nodeType && c.documentElement ? (G = c, H = c.documentElement, I = !y(c), d && d !== d.top && (d.addEventListener ? d.addEventListener("unload",
            function() {
                F()
            },
            !1) : d.attachEvent && d.attachEvent("onunload",
            function() {
                F()
            })), v.attributes = e(function(a) {
                return a.className = "i",
                !a.getAttribute("className")
            }), v.getElementsByTagName = e(function(a) {
                return a.appendChild(c.createComment("")),
                !a.getElementsByTagName("*").length
            }), v.getElementsByClassName = ra.test(c.getElementsByClassName) && e(function(a) {
                return a.innerHTML = "<div class='a'></div><div class='a i'></div>",
                a.firstChild.className = "i",
                2 === a.getElementsByClassName("i").length
            }), v.getById = e(function(a) {
                return H.appendChild(a).id = N,
                !c.getElementsByName || !c.getElementsByName(N).length
            }), v.getById ? (w.find.ID = function(a, b) {
                if (typeof b.getElementById !== V && I) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [c] : []
                }
            },
            w.filter.ID = function(a) {
                var b = a.replace(va, wa);
                return function(a) {
                    return a.getAttribute("id") === b
                }
            }) : (delete w.find.ID, w.filter.ID = function(a) {
                var b = a.replace(va, wa);
                return function(a) {
                    var c = typeof a.getAttributeNode !== V && a.getAttributeNode("id");
                    return c && c.value === b
                }
            }), w.find.TAG = v.getElementsByTagName ?
            function(a, b) {
                return typeof b.getElementsByTagName !== V ? b.getElementsByTagName(a) : void 0
            }: function(a, b) {
                var c, d = [],
                e = 0,
                f = b.getElementsByTagName(a);
                if ("*" === a) {
                    for (; c = f[e++];) 1 === c.nodeType && d.push(c);
                    return d
                }
                return f
            },
            w.find.CLASS = v.getElementsByClassName &&
            function(a, b) {
                return typeof b.getElementsByClassName !== V && I ? b.getElementsByClassName(a) : void 0
            },
            K = [], J = [], (v.qsa = ra.test(c.querySelectorAll)) && (e(function(a) {
                a.innerHTML = "<select msallowclip=''><option selected=''></option></select>",
                a.querySelectorAll("[msallowclip^='']").length && J.push("[*^$]=" + da + "*(?:''|\"\")"),
                a.querySelectorAll("[selected]").length || J.push("\\[" + da + "*(?:value|" + ca + ")"),
                a.querySelectorAll(":checked").length || J.push(":checked")
            }), e(function(a) {
                var b = c.createElement("input");
                b.setAttribute("type", "hidden"),
                a.appendChild(b).setAttribute("name", "D"),
                a.querySelectorAll("[name=d]").length && J.push("name" + da + "*[*^$|!~]?="),
                a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"),
                a.querySelectorAll("*,:x"),
                J.push(",.*:")
            })), (v.matchesSelector = ra.test(L = H.matches || H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && e(function(a) {
                v.disconnectedMatch = L.call(a, "div"),
                L.call(a, "[s!='']:x"),
                K.push("!=", ha)
            }), J = J.length && new RegExp(J.join("|")), K = K.length && new RegExp(K.join("|")), b = ra.test(H.compareDocumentPosition), M = b || ra.test(H.contains) ?
            function(a, b) {
                var c = 9 === a.nodeType ? a.documentElement: a,
                d = b && b.parentNode;
                return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
            }: function(a, b) {
                if (b) for (; b = b.parentNode;) if (b === a) return ! 0;
                return ! 1
            },
            U = b ?
            function(a, b) {
                if (a === b) return E = !0,
                0;
                var d = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return d ? d: (d = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & d || !v.sortDetached && b.compareDocumentPosition(a) === d ? a === c || a.ownerDocument === O && M(O, a) ? -1 : b === c || b.ownerDocument === O && M(O, b) ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0 : 4 & d ? -1 : 1)
            }: function(a, b) {
                if (a === b) return E = !0,
                0;
                var d, e = 0,
                f = a.parentNode,
                h = b.parentNode,
                i = [a],
                j = [b];
                if (!f || !h) return a === c ? -1 : b === c ? 1 : f ? -1 : h ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0;
                if (f === h) return g(a, b);
                for (d = a; d = d.parentNode;) i.unshift(d);
                for (d = b; d = d.parentNode;) j.unshift(d);
                for (; i[e] === j[e];) e++;
                return e ? g(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0
            },
            c) : G
        },
        b.matches = function(a, c) {
            return b(a, null, null, c)
        },
        b.matchesSelector = function(a, c) {
            if ((a.ownerDocument || a) !== G && F(a), c = c.replace(la, "='$1']"), !(!v.matchesSelector || !I || K && K.test(c) || J && J.test(c))) try {
                var d = L.call(a, c);
                if (d || v.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d
            } catch(e) {}
            return b(c, G, null, [a]).length > 0
        },
        b.contains = function(a, b) {
            return (a.ownerDocument || a) !== G && F(a),
            M(a, b)
        },
        b.attr = function(a, b) { (a.ownerDocument || a) !== G && F(a);
            var c = w.attrHandle[b.toLowerCase()],
            d = c && X.call(w.attrHandle, b.toLowerCase()) ? c(a, b, !I) : void 0;
            return void 0 !== d ? d: v.attributes || !I ? a.getAttribute(b) : (d = a.getAttributeNode(b)) && d.specified ? d.value: null
        },
        b.error = function(a) {
            throw new Error("Syntax error, unrecognized expression: " + a)
        },
        b.uniqueSort = function(a) {
            var b, c = [],
            d = 0,
            e = 0;
            if (E = !v.detectDuplicates, D = !v.sortStable && a.slice(0), a.sort(U), E) {
                for (; b = a[e++];) b === a[e] && (d = c.push(e));
                for (; d--;) a.splice(c[d], 1)
            }
            return D = null,
            a
        },
        x = b.getText = function(a) {
            var b, c = "",
            d = 0,
            e = a.nodeType;
            if (e) {
                if (1 === e || 9 === e || 11 === e) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += x(a)
                } else if (3 === e || 4 === e) return a.nodeValue
            } else for (; b = a[d++];) c += x(b);
            return c
        },
        w = b.selectors = {
            cacheLength: 50,
            createPseudo: d,
            match: oa,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(a) {
                    return a[1] = a[1].replace(va, wa),
                    a[3] = (a[3] || a[4] || a[5] || "").replace(va, wa),
                    "~=" === a[2] && (a[3] = " " + a[3] + " "),
                    a.slice(0, 4)
                },
                CHILD: function(a) {
                    return a[1] = a[1].toLowerCase(),
                    "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]),
                    a
                },
                PSEUDO: function(a) {
                    var b, c = !a[6] && a[2];
                    return oa.CHILD.test(a[0]) ? null: (a[3] ? a[2] = a[4] || a[5] || "": c && ma.test(c) && (b = z(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
                }
            },
            filter: {
                TAG: function(a) {
                    var b = a.replace(va, wa).toLowerCase();
                    return "*" === a ?
                    function() {
                        return ! 0
                    }: function(a) {
                        return a.nodeName && a.nodeName.toLowerCase() === b
                    }
                },
                CLASS: function(a) {
                    var b = R[a + " "];
                    return b || (b = new RegExp("(^|" + da + ")" + a + "(" + da + "|$)")) && R(a,
                    function(a) {
                        return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== V && a.getAttribute("class") || "")
                    })
                },
                ATTR: function(a, c, d) {
                    return function(e) {
                        var f = b.attr(e, a);
                        return null == f ? "!=" === c: c ? (f += "", "=" === c ? f === d: "!=" === c ? f !== d: "^=" === c ? d && 0 === f.indexOf(d) : "*=" === c ? d && f.indexOf(d) > -1 : "$=" === c ? d && f.slice( - d.length) === d: "~=" === c ? (" " + f + " ").indexOf(d) > -1 : "|=" === c ? f === d || f.slice(0, d.length + 1) === d + "-": !1) : !0
                    }
                },
                CHILD: function(a, b, c, d, e) {
                    var f = "nth" !== a.slice(0, 3),
                    g = "last" !== a.slice( - 4),
                    h = "of-type" === b;
                    return 1 === d && 0 === e ?
                    function(a) {
                        return !! a.parentNode
                    }: function(b, c, i) {
                        var j, k, l, m, n, o, p = f !== g ? "nextSibling": "previousSibling",
                        q = b.parentNode,
                        r = h && b.nodeName.toLowerCase(),
                        s = !i && !h;
                        if (q) {
                            if (f) {
                                for (; p;) {
                                    for (l = b; l = l[p];) if (h ? l.nodeName.toLowerCase() === r: 1 === l.nodeType) return ! 1;
                                    o = p = "only" === a && !o && "nextSibling"
                                }
                                return ! 0
                            }
                            if (o = [g ? q.firstChild: q.lastChild], g && s) {
                                for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop();) if (1 === l.nodeType && ++m && l === b) {
                                    k[a] = [P, n, m];
                                    break
                                }
                            } else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P) m = j[1];
                            else for (; (l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r: 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [P, m]), l !== b)););
                            return m -= e,
                            m === d || m % d === 0 && m / d >= 0
                        }
                    }
                },
                PSEUDO: function(a, c) {
                    var e, f = w.pseudos[a] || w.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
                    return f[N] ? f(c) : f.length > 1 ? (e = [a, a, "", c], w.setFilters.hasOwnProperty(a.toLowerCase()) ? d(function(a, b) {
                        for (var d, e = f(a, c), g = e.length; g--;) d = ba.call(a, e[g]),
                        a[d] = !(b[d] = e[g])
                    }) : function(a) {
                        return f(a, 0, e)
                    }) : f
                }
            },
            pseudos: {
                not: d(function(a) {
                    var b = [],
                    c = [],
                    e = A(a.replace(ia, "$1"));
                    return e[N] ? d(function(a, b, c, d) {
                        for (var f, g = e(a, null, d, []), h = a.length; h--;)(f = g[h]) && (a[h] = !(b[h] = f))
                    }) : function(a, d, f) {
                        return b[0] = a,
                        e(b, null, f, c),
                        !c.pop()
                    }
                }),
                has: d(function(a) {
                    return function(c) {
                        return b(a, c).length > 0
                    }
                }),
                contains: d(function(a) {
                    return function(b) {
                        return (b.textContent || b.innerText || x(b)).indexOf(a) > -1
                    }
                }),
                lang: d(function(a) {
                    return na.test(a || "") || b.error("unsupported lang: " + a),
                    a = a.replace(va, wa).toLowerCase(),
                    function(b) {
                        var c;
                        do
                        if (c = I ? b.lang: b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(),
                        c === a || 0 === c.indexOf(a + "-");
                        while ((b = b.parentNode) && 1 === b.nodeType);
                        return ! 1
                    }
                }),
                target: function(b) {
                    var c = a.location && a.location.hash;
                    return c && c.slice(1) === b.id
                },
                root: function(a) {
                    return a === H
                },
                focus: function(a) {
                    return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                },
                enabled: function(a) {
                    return a.disabled === !1
                },
                disabled: function(a) {
                    return a.disabled === !0
                },
                checked: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected
                },
                selected: function(a) {
                    return a.parentNode && a.parentNode.selectedIndex,
                    a.selected === !0
                },
                empty: function(a) {
                    for (a = a.firstChild; a; a = a.nextSibling) if (a.nodeType < 6) return ! 1;
                    return ! 0
                },
                parent: function(a) {
                    return ! w.pseudos.empty(a)
                },
                header: function(a) {
                    return qa.test(a.nodeName)
                },
                input: function(a) {
                    return pa.test(a.nodeName)
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b
                },
                text: function(a) {
                    var b;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
                },
                first: j(function() {
                    return [0]
                }),
                last: j(function(a, b) {
                    return [b - 1]
                }),
                eq: j(function(a, b, c) {
                    return [0 > c ? c + b: c]
                }),
                even: j(function(a, b) {
                    for (var c = 0; b > c; c += 2) a.push(c);
                    return a
                }),
                odd: j(function(a, b) {
                    for (var c = 1; b > c; c += 2) a.push(c);
                    return a
                }),
                lt: j(function(a, b, c) {
                    for (var d = 0 > c ? c + b: c; --d >= 0;) a.push(d);
                    return a
                }),
                gt: j(function(a, b, c) {
                    for (var d = 0 > c ? c + b: c; ++d < b;) a.push(d);
                    return a
                })
            }
        },
        w.pseudos.nth = w.pseudos.eq;
        for (u in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) w.pseudos[u] = h(u);
        for (u in {
            submit: !0,
            reset: !0
        }) w.pseudos[u] = i(u);
        return l.prototype = w.filters = w.pseudos,
        w.setFilters = new l,
        z = b.tokenize = function(a, c) {
            var d, e, f, g, h, i, j, k = S[a + " "];
            if (k) return c ? 0 : k.slice(0);
            for (h = a, i = [], j = w.preFilter; h;) { (!d || (e = ja.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])),
                d = !1,
                (e = ka.exec(h)) && (d = e.shift(), f.push({
                    value: d,
                    type: e[0].replace(ia, " ")
                }), h = h.slice(d.length));
                for (g in w.filter) ! (e = oa[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), f.push({
                    value: d,
                    type: g,
                    matches: e
                }), h = h.slice(d.length));
                if (!d) break
            }
            return c ? h.length: h ? b.error(a) : S(a, i).slice(0)
        },
        A = b.compile = function(a, b) {
            var c, d = [],
            e = [],
            f = T[a + " "];
            if (!f) {
                for (b || (b = z(a)), c = b.length; c--;) f = s(b[c]),
                f[N] ? d.push(f) : e.push(f);
                f = T(a, t(e, d)),
                f.selector = a
            }
            return f
        },
        B = b.select = function(a, b, c, d) {
            var e, f, g, h, i, j = "function" == typeof a && a,
            l = !d && z(a = j.selector || a);
            if (c = c || [], 1 === l.length) {
                if (f = l[0] = l[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && v.getById && 9 === b.nodeType && I && w.relative[f[1].type]) {
                    if (b = (w.find.ID(g.matches[0].replace(va, wa), b) || [])[0], !b) return c;
                    j && (b = b.parentNode),
                    a = a.slice(f.shift().value.length)
                }
                for (e = oa.needsContext.test(a) ? 0 : f.length; e--&&(g = f[e], !w.relative[h = g.type]);) if ((i = w.find[h]) && (d = i(g.matches[0].replace(va, wa), ta.test(f[0].type) && k(b.parentNode) || b))) {
                    if (f.splice(e, 1), a = d.length && m(f), !a) return _.apply(c, d),
                    c;
                    break
                }
            }
            return (j || A(a, l))(d, b, !I, c, ta.test(a) && k(b.parentNode) || b),
            c
        },
        v.sortStable = N.split("").sort(U).join("") === N,
        v.detectDuplicates = !!E,
        F(),
        v.sortDetached = e(function(a) {
            return 1 & a.compareDocumentPosition(G.createElement("div"))
        }),
        e(function(a) {
            return a.innerHTML = "<a href='#'></a>",
            "#" === a.firstChild.getAttribute("href")
        }) || f("type|href|height|width",
        function(a, b, c) {
            return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
        }),
        v.attributes && e(function(a) {
            return a.innerHTML = "<input/>",
            a.firstChild.setAttribute("value", ""),
            "" === a.firstChild.getAttribute("value")
        }) || f("value",
        function(a, b, c) {
            return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue
        }),
        e(function(a) {
            return null == a.getAttribute("disabled")
        }) || f(ca,
        function(a, b, c) {
            var d;
            return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value: null
        }),
        b
    } (a);
    ea.find = ja,
    ea.expr = ja.selectors,
    ea.expr[":"] = ea.expr.pseudos,
    ea.unique = ja.uniqueSort,
    ea.text = ja.getText,
    ea.isXMLDoc = ja.isXML,
    ea.contains = ja.contains;
    var ka = ea.expr.match.needsContext,
    la = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    ma = /^.[^:#\[\.,]*$/;
    ea.filter = function(a, b, c) {
        var d = b[0];
        return c && (a = ":not(" + a + ")"),
        1 === b.length && 1 === d.nodeType ? ea.find.matchesSelector(d, a) ? [d] : [] : ea.find.matches(a, ea.grep(b,
        function(a) {
            return 1 === a.nodeType
        }))
    },
    ea.fn.extend({
        find: function(a) {
            var b, c = [],
            d = this,
            e = d.length;
            if ("string" != typeof a) return this.pushStack(ea(a).filter(function() {
                for (b = 0; e > b; b++) if (ea.contains(d[b], this)) return ! 0
            }));
            for (b = 0; e > b; b++) ea.find(a, d[b], c);
            return c = this.pushStack(e > 1 ? ea.unique(c) : c),
            c.selector = this.selector ? this.selector + " " + a: a,
            c
        },
        filter: function(a) {
            return this.pushStack(d(this, a || [], !1))
        },
        not: function(a) {
            return this.pushStack(d(this, a || [], !0))
        },
        is: function(a) {
            return !! d(this, "string" == typeof a && ka.test(a) ? ea(a) : a || [], !1).length
        }
    });
    var na, oa = a.document,
    pa = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
    qa = ea.fn.init = function(a, b) {
        var c, d;
        if (!a) return this;
        if ("string" == typeof a) {
            if (c = "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && a.length >= 3 ? [null, a, null] : pa.exec(a), !c || !c[1] && b) return ! b || b.jquery ? (b || na).find(a) : this.constructor(b).find(a);
            if (c[1]) {
                if (b = b instanceof ea ? b[0] : b, ea.merge(this, ea.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b: oa, !0)), la.test(c[1]) && ea.isPlainObject(b)) for (c in b) ea.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                return this
            }
            if (d = oa.getElementById(c[2]), d && d.parentNode) {
                if (d.id !== c[2]) return na.find(a);
                this.length = 1,
                this[0] = d
            }
            return this.context = oa,
            this.selector = a,
            this
        }
        return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : ea.isFunction(a) ? "undefined" != typeof na.ready ? na.ready(a) : a(ea) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), ea.makeArray(a, this))
    };
    qa.prototype = ea.fn,
    na = ea(oa);
    var ra = /^(?:parents|prev(?:Until|All))/,
    sa = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    ea.extend({
        dir: function(a, b, c) {
            for (var d = [], e = a[b]; e && 9 !== e.nodeType && (void 0 === c || 1 !== e.nodeType || !ea(e).is(c));) 1 === e.nodeType && d.push(e),
            e = e[b];
            return d
        },
        sibling: function(a, b) {
            for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
            return c
        }
    }),
    ea.fn.extend({
        has: function(a) {
            var b, c = ea(a, this),
            d = c.length;
            return this.filter(function() {
                for (b = 0; d > b; b++) if (ea.contains(this, c[b])) return ! 0
            })
        },
        closest: function(a, b) {
            for (var c, d = 0,
            e = this.length,
            f = [], g = ka.test(a) || "string" != typeof a ? ea(a, b || this.context) : 0; e > d; d++) for (c = this[d]; c && c !== b; c = c.parentNode) if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && ea.find.matchesSelector(c, a))) {
                f.push(c);
                break
            }
            return this.pushStack(f.length > 1 ? ea.unique(f) : f)
        },
        index: function(a) {
            return a ? "string" == typeof a ? ea.inArray(this[0], ea(a)) : ea.inArray(a.jquery ? a[0] : a, this) : this[0] && this[0].parentNode ? this.first().prevAll().length: -1
        },
        add: function(a, b) {
            return this.pushStack(ea.unique(ea.merge(this.get(), ea(a, b))))
        },
        addBack: function(a) {
            return this.add(null == a ? this.prevObject: this.prevObject.filter(a))
        }
    }),
    ea.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b: null
        },
        parents: function(a) {
            return ea.dir(a, "parentNode")
        },
        parentsUntil: function(a, b, c) {
            return ea.dir(a, "parentNode", c)
        },
        next: function(a) {
            return e(a, "nextSibling")
        },
        prev: function(a) {
            return e(a, "previousSibling")
        },
        nextAll: function(a) {
            return ea.dir(a, "nextSibling")
        },
        prevAll: function(a) {
            return ea.dir(a, "previousSibling")
        },
        nextUntil: function(a, b, c) {
            return ea.dir(a, "nextSibling", c)
        },
        prevUntil: function(a, b, c) {
            return ea.dir(a, "previousSibling", c)
        },
        siblings: function(a) {
            return ea.sibling((a.parentNode || {}).firstChild, a)
        },
        children: function(a) {
            return ea.sibling(a.firstChild)
        },
        contents: function(a) {
            return ea.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document: ea.merge([], a.childNodes)
        }
    },
    function(a, b) {
        ea.fn[a] = function(c, d) {
            var e = ea.map(this, b, c);
            return "Until" !== a.slice( - 5) && (d = c),
            d && "string" == typeof d && (e = ea.filter(d, e)),
            this.length > 1 && (sa[a] || (e = ea.unique(e)), ra.test(a) && (e = e.reverse())),
            this.pushStack(e)
        }
    });
    var ta = /\S+/g,
    ua = {};
    ea.Callbacks = function(a) {
        a = "string" == typeof a ? ua[a] || f(a) : ea.extend({},
        a);
        var b, c, d, e, g, h, i = [],
        j = !a.once && [],
        k = function(f) {
            for (c = a.memory && f, d = !0, g = h || 0, h = 0, e = i.length, b = !0; i && e > g; g++) if (i[g].apply(f[0], f[1]) === !1 && a.stopOnFalse) {
                c = !1;
                break
            }
            b = !1,
            i && (j ? j.length && k(j.shift()) : c ? i = [] : l.disable())
        },
        l = {
            add: function() {
                if (i) {
                    var d = i.length; !
                    function f(b) {
                        ea.each(b,
                        function(b, c) {
                            var d = ea.type(c);
                            "function" === d ? a.unique && l.has(c) || i.push(c) : c && c.length && "string" !== d && f(c);
                        })
                    } (arguments),
                    b ? e = i.length: c && (h = d, k(c))
                }
                return this
            },
            remove: function() {
                return i && ea.each(arguments,
                function(a, c) {
                    for (var d; (d = ea.inArray(c, i, d)) > -1;) i.splice(d, 1),
                    b && (e >= d && e--, g >= d && g--)
                }),
                this
            },
            has: function(a) {
                return a ? ea.inArray(a, i) > -1 : !(!i || !i.length)
            },
            empty: function() {
                return i = [],
                e = 0,
                this
            },
            disable: function() {
                return i = j = c = void 0,
                this
            },
            disabled: function() {
                return ! i
            },
            lock: function() {
                return j = void 0,
                c || l.disable(),
                this
            },
            locked: function() {
                return ! j
            },
            fireWith: function(a, c) {
                return ! i || d && !j || (c = c || [], c = [a, c.slice ? c.slice() : c], b ? j.push(c) : k(c)),
                this
            },
            fire: function() {
                return l.fireWith(this, arguments),
                this
            },
            fired: function() {
                return !! d
            }
        };
        return l
    },
    ea.extend({
        Deferred: function(a) {
            var b = [["resolve", "done", ea.Callbacks("once memory"), "resolved"], ["reject", "fail", ea.Callbacks("once memory"), "rejected"], ["notify", "progress", ea.Callbacks("memory")]],
            c = "pending",
            d = {
                state: function() {
                    return c
                },
                always: function() {
                    return e.done(arguments).fail(arguments),
                    this
                },
                then: function() {
                    var a = arguments;
                    return ea.Deferred(function(c) {
                        ea.each(b,
                        function(b, f) {
                            var g = ea.isFunction(a[b]) && a[b];
                            e[f[1]](function() {
                                var a = g && g.apply(this, arguments);
                                a && ea.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
                            })
                        }),
                        a = null
                    }).promise()
                },
                promise: function(a) {
                    return null != a ? ea.extend(a, d) : d
                }
            },
            e = {};
            return d.pipe = d.then,
            ea.each(b,
            function(a, f) {
                var g = f[2],
                h = f[3];
                d[f[1]] = g.add,
                h && g.add(function() {
                    c = h
                },
                b[1 ^ a][2].disable, b[2][2].lock),
                e[f[0]] = function() {
                    return e[f[0] + "With"](this === e ? d: this, arguments),
                    this
                },
                e[f[0] + "With"] = g.fireWith
            }),
            d.promise(e),
            a && a.call(e, e),
            e
        },
        when: function(a) {
            var b, c, d, e = 0,
            f = X.call(arguments),
            g = f.length,
            h = 1 !== g || a && ea.isFunction(a.promise) ? g: 0,
            i = 1 === h ? a: ea.Deferred(),
            j = function(a, c, d) {
                return function(e) {
                    c[a] = this,
                    d[a] = arguments.length > 1 ? X.call(arguments) : e,
                    d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d)
                }
            };
            if (g > 1) for (b = new Array(g), c = new Array(g), d = new Array(g); g > e; e++) f[e] && ea.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
            return h || i.resolveWith(d, f),
            i.promise()
        }
    });
    var va;
    ea.fn.ready = function(a) {
        return ea.ready.promise().done(a),
        this
    },
    ea.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(a) {
            a ? ea.readyWait++:ea.ready(!0)
        },
        ready: function(a) {
            if (a === !0 ? !--ea.readyWait: !ea.isReady) {
                if (!oa.body) return setTimeout(ea.ready);
                ea.isReady = !0,
                a !== !0 && --ea.readyWait > 0 || (va.resolveWith(oa, [ea]), ea.fn.triggerHandler && (ea(oa).triggerHandler("ready"), ea(oa).off("ready")))
            }
        }
    }),
    ea.ready.promise = function(b) {
        if (!va) if (va = ea.Deferred(), "complete" === oa.readyState) setTimeout(ea.ready);
        else if (oa.addEventListener) oa.addEventListener("DOMContentLoaded", h, !1),
        a.addEventListener("load", h, !1);
        else {
            oa.attachEvent("onreadystatechange", h),
            a.attachEvent("onload", h);
            var c = !1;
            try {
                c = null == a.frameElement && oa.documentElement
            } catch(d) {}
            c && c.doScroll && !
            function e() {
                if (!ea.isReady) {
                    try {
                        c.doScroll("left")
                    } catch(a) {
                        return setTimeout(e, 50)
                    }
                    g(),
                    ea.ready()
                }
            } ()
        }
        return va.promise(b)
    };
    var wa, xa = "undefined";
    for (wa in ea(ca)) break;
    ca.ownLast = "0" !== wa,
    ca.inlineBlockNeedsLayout = !1,
    ea(function() {
        var a, b, c, d;
        c = oa.getElementsByTagName("body")[0],
        c && c.style && (b = oa.createElement("div"), d = oa.createElement("div"), d.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", c.appendChild(d).appendChild(b), typeof b.style.zoom !== xa && (b.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1", ca.inlineBlockNeedsLayout = a = 3 === b.offsetWidth, a && (c.style.zoom = 1)), c.removeChild(d))
    }),
    function() {
        var a = oa.createElement("div");
        if (null == ca.deleteExpando) {
            ca.deleteExpando = !0;
            try {
                delete a.test
            } catch(b) {
                ca.deleteExpando = !1
            }
        }
        a = null
    } (),
    ea.acceptData = function(a) {
        var b = ea.noData[(a.nodeName + " ").toLowerCase()],
        c = +a.nodeType || 1;
        return 1 !== c && 9 !== c ? !1 : !b || b !== !0 && a.getAttribute("classid") === b
    };
    var ya = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
    za = /([A-Z])/g;
    ea.extend({
        cache: {},
        noData: {
            "applet ": !0,
            "embed ": !0,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        },
        hasData: function(a) {
            return a = a.nodeType ? ea.cache[a[ea.expando]] : a[ea.expando],
            !!a && !j(a)
        },
        data: function(a, b, c) {
            return k(a, b, c)
        },
        removeData: function(a, b) {
            return l(a, b)
        },
        _data: function(a, b, c) {
            return k(a, b, c, !0)
        },
        _removeData: function(a, b) {
            return l(a, b, !0)
        }
    }),
    ea.fn.extend({
        data: function(a, b) {
            var c, d, e, f = this[0],
            g = f && f.attributes;
            if (void 0 === a) {
                if (this.length && (e = ea.data(f), 1 === f.nodeType && !ea._data(f, "parsedAttrs"))) {
                    for (c = g.length; c--;) g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = ea.camelCase(d.slice(5)), i(f, d, e[d])));
                    ea._data(f, "parsedAttrs", !0)
                }
                return e
            }
            return "object" == typeof a ? this.each(function() {
                ea.data(this, a)
            }) : arguments.length > 1 ? this.each(function() {
                ea.data(this, a, b)
            }) : f ? i(f, a, ea.data(f, a)) : void 0
        },
        removeData: function(a) {
            return this.each(function() {
                ea.removeData(this, a)
            })
        }
    }),
    ea.extend({
        queue: function(a, b, c) {
            var d;
            return a ? (b = (b || "fx") + "queue", d = ea._data(a, b), c && (!d || ea.isArray(c) ? d = ea._data(a, b, ea.makeArray(c)) : d.push(c)), d || []) : void 0
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = ea.queue(a, b),
            d = c.length,
            e = c.shift(),
            f = ea._queueHooks(a, b),
            g = function() {
                ea.dequeue(a, b)
            };
            "inprogress" === e && (e = c.shift(), d--),
            e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)),
            !d && f && f.empty.fire()
        },
        _queueHooks: function(a, b) {
            var c = b + "queueHooks";
            return ea._data(a, c) || ea._data(a, c, {
                empty: ea.Callbacks("once memory").add(function() {
                    ea._removeData(a, b + "queue"),
                    ea._removeData(a, c)
                })
            })
        }
    }),
    ea.fn.extend({
        queue: function(a, b) {
            var c = 2;
            return "string" != typeof a && (b = a, a = "fx", c--),
            arguments.length < c ? ea.queue(this[0], a) : void 0 === b ? this: this.each(function() {
                var c = ea.queue(this, a, b);
                ea._queueHooks(this, a),
                "fx" === a && "inprogress" !== c[0] && ea.dequeue(this, a)
            })
        },
        dequeue: function(a) {
            return this.each(function() {
                ea.dequeue(this, a)
            })
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", [])
        },
        promise: function(a, b) {
            var c, d = 1,
            e = ea.Deferred(),
            f = this,
            g = this.length,
            h = function() {--d || e.resolveWith(f, [f])
            };
            for ("string" != typeof a && (b = a, a = void 0), a = a || "fx"; g--;) c = ea._data(f[g], a + "queueHooks"),
            c && c.empty && (d++, c.empty.add(h));
            return h(),
            e.promise(b)
        }
    });
    var Aa = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    Ba = ["Top", "Right", "Bottom", "Left"],
    Ca = function(a, b) {
        return a = b || a,
        "none" === ea.css(a, "display") || !ea.contains(a.ownerDocument, a)
    },
    Da = ea.access = function(a, b, c, d, e, f, g) {
        var h = 0,
        i = a.length,
        j = null == c;
        if ("object" === ea.type(c)) {
            e = !0;
            for (h in c) ea.access(a, b, h, c[h], !0, f, g)
        } else if (void 0 !== d && (e = !0, ea.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function(a, b, c) {
            return j.call(ea(a), c)
        })), b)) for (; i > h; h++) b(a[h], c, g ? d: d.call(a[h], h, b(a[h], c)));
        return e ? a: j ? b.call(a) : i ? b(a[0], c) : f
    },
    Ea = /^(?:checkbox|radio)$/i; !
    function() {
        var a = oa.createElement("input"),
        b = oa.createElement("div"),
        c = oa.createDocumentFragment();
        if (b.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", ca.leadingWhitespace = 3 === b.firstChild.nodeType, ca.tbody = !b.getElementsByTagName("tbody").length, ca.htmlSerialize = !!b.getElementsByTagName("link").length, ca.html5Clone = "<:nav></:nav>" !== oa.createElement("nav").cloneNode(!0).outerHTML, a.type = "checkbox", a.checked = !0, c.appendChild(a), ca.appendChecked = a.checked, b.innerHTML = "<textarea>x</textarea>", ca.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue, c.appendChild(b), b.innerHTML = "<input type='radio' checked='checked' name='t'/>", ca.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, ca.noCloneEvent = !0, b.attachEvent && (b.attachEvent("onclick",
        function() {
            ca.noCloneEvent = !1
        }), b.cloneNode(!0).click()), null == ca.deleteExpando) {
            ca.deleteExpando = !0;
            try {
                delete b.test
            } catch(d) {
                ca.deleteExpando = !1
            }
        }
    } (),
    function() {
        var b, c, d = oa.createElement("div");
        for (b in {
            submit: !0,
            change: !0,
            focusin: !0
        }) c = "on" + b,
        (ca[b + "Bubbles"] = c in a) || (d.setAttribute(c, "t"), ca[b + "Bubbles"] = d.attributes[c].expando === !1);
        d = null
    } ();
    var Fa = /^(?:input|select|textarea)$/i,
    Ga = /^key/,
    Ha = /^(?:mouse|pointer|contextmenu)|click/,
    Ia = /^(?:focusinfocus|focusoutblur)$/,
    Ja = /^([^.]*)(?:\.(.+)|)$/;
    ea.event = {
        global: {},
        add: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = ea._data(a);
            if (q) {
                for (c.handler && (i = c, c = i.handler, e = i.selector), c.guid || (c.guid = ea.guid++), (g = q.events) || (g = q.events = {}), (k = q.handle) || (k = q.handle = function(a) {
                    return typeof ea === xa || a && ea.event.triggered === a.type ? void 0 : ea.event.dispatch.apply(k.elem, arguments)
                },
                k.elem = a), b = (b || "").match(ta) || [""], h = b.length; h--;) f = Ja.exec(b[h]) || [],
                n = p = f[1],
                o = (f[2] || "").split(".").sort(),
                n && (j = ea.event.special[n] || {},
                n = (e ? j.delegateType: j.bindType) || n, j = ea.event.special[n] || {},
                l = ea.extend({
                    type: n,
                    origType: p,
                    data: d,
                    handler: c,
                    guid: c.guid,
                    selector: e,
                    needsContext: e && ea.expr.match.needsContext.test(e),
                    namespace: o.join(".")
                },
                i), (m = g[n]) || (m = g[n] = [], m.delegateCount = 0, j.setup && j.setup.call(a, d, o, k) !== !1 || (a.addEventListener ? a.addEventListener(n, k, !1) : a.attachEvent && a.attachEvent("on" + n, k))), j.add && (j.add.call(a, l), l.handler.guid || (l.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, l) : m.push(l), ea.event.global[n] = !0);
                a = null
            }
        },
        remove: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q = ea.hasData(a) && ea._data(a);
            if (q && (k = q.events)) {
                for (b = (b || "").match(ta) || [""], j = b.length; j--;) if (h = Ja.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
                    for (l = ea.event.special[n] || {},
                    n = (d ? l.delegateType: l.bindType) || n, m = k[n] || [], h = h[2] && new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), i = f = m.length; f--;) g = m[f],
                    !e && p !== g.origType || c && c.guid !== g.guid || h && !h.test(g.namespace) || d && d !== g.selector && ("**" !== d || !g.selector) || (m.splice(f, 1), g.selector && m.delegateCount--, l.remove && l.remove.call(a, g));
                    i && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || ea.removeEvent(a, n, q.handle), delete k[n])
                } else for (n in k) ea.event.remove(a, n + b[j], c, d, !0);
                ea.isEmptyObject(k) && (delete q.handle, ea._removeData(a, "events"))
            }
        },
        trigger: function(b, c, d, e) {
            var f, g, h, i, j, k, l, m = [d || oa],
            n = ba.call(b, "type") ? b.type: b,
            o = ba.call(b, "namespace") ? b.namespace.split(".") : [];
            if (h = k = d = d || oa, 3 !== d.nodeType && 8 !== d.nodeType && !Ia.test(n + ea.event.triggered) && (n.indexOf(".") >= 0 && (o = n.split("."), n = o.shift(), o.sort()), g = n.indexOf(":") < 0 && "on" + n, b = b[ea.expando] ? b: new ea.Event(n, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = o.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : ea.makeArray(c, [b]), j = ea.event.special[n] || {},
            e || !j.trigger || j.trigger.apply(d, c) !== !1)) {
                if (!e && !j.noBubble && !ea.isWindow(d)) {
                    for (i = j.delegateType || n, Ia.test(i + n) || (h = h.parentNode); h; h = h.parentNode) m.push(h),
                    k = h;
                    k === (d.ownerDocument || oa) && m.push(k.defaultView || k.parentWindow || a)
                }
                for (l = 0; (h = m[l++]) && !b.isPropagationStopped();) b.type = l > 1 ? i: j.bindType || n,
                f = (ea._data(h, "events") || {})[b.type] && ea._data(h, "handle"),
                f && f.apply(h, c),
                f = g && h[g],
                f && f.apply && ea.acceptData(h) && (b.result = f.apply(h, c), b.result === !1 && b.preventDefault());
                if (b.type = n, !e && !b.isDefaultPrevented() && (!j._default || j._default.apply(m.pop(), c) === !1) && ea.acceptData(d) && g && d[n] && !ea.isWindow(d)) {
                    k = d[g],
                    k && (d[g] = null),
                    ea.event.triggered = n;
                    try {
                        d[n]()
                    } catch(p) {}
                    ea.event.triggered = void 0,
                    k && (d[g] = k)
                }
                return b.result
            }
        },
        dispatch: function(a) {
            a = ea.event.fix(a);
            var b, c, d, e, f, g = [],
            h = X.call(arguments),
            i = (ea._data(this, "events") || {})[a.type] || [],
            j = ea.event.special[a.type] || {};
            if (h[0] = a, a.delegateTarget = this, !j.preDispatch || j.preDispatch.call(this, a) !== !1) {
                for (g = ea.event.handlers.call(this, a, i), b = 0; (e = g[b++]) && !a.isPropagationStopped();) for (a.currentTarget = e.elem, f = 0; (d = e.handlers[f++]) && !a.isImmediatePropagationStopped();)(!a.namespace_re || a.namespace_re.test(d.namespace)) && (a.handleObj = d, a.data = d.data, c = ((ea.event.special[d.origType] || {}).handle || d.handler).apply(e.elem, h), void 0 !== c && (a.result = c) === !1 && (a.preventDefault(), a.stopPropagation()));
                return j.postDispatch && j.postDispatch.call(this, a),
                a.result
            }
        },
        handlers: function(a, b) {
            var c, d, e, f, g = [],
            h = b.delegateCount,
            i = a.target;
            if (h && i.nodeType && (!a.button || "click" !== a.type)) for (; i != this; i = i.parentNode || this) if (1 === i.nodeType && (i.disabled !== !0 || "click" !== a.type)) {
                for (e = [], f = 0; h > f; f++) d = b[f],
                c = d.selector + " ",
                void 0 === e[c] && (e[c] = d.needsContext ? ea(c, this).index(i) >= 0 : ea.find(c, this, null, [i]).length),
                e[c] && e.push(d);
                e.length && g.push({
                    elem: i,
                    handlers: e
                })
            }
            return h < b.length && g.push({
                elem: this,
                handlers: b.slice(h)
            }),
            g
        },
        fix: function(a) {
            if (a[ea.expando]) return a;
            var b, c, d, e = a.type,
            f = a,
            g = this.fixHooks[e];
            for (g || (this.fixHooks[e] = g = Ha.test(e) ? this.mouseHooks: Ga.test(e) ? this.keyHooks: {}), d = g.props ? this.props.concat(g.props) : this.props, a = new ea.Event(f), b = d.length; b--;) c = d[b],
            a[c] = f[c];
            return a.target || (a.target = f.srcElement || oa),
            3 === a.target.nodeType && (a.target = a.target.parentNode),
            a.metaKey = !!a.metaKey,
            g.filter ? g.filter(a, f) : a
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode: b.keyCode),
                a
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, b) {
                var c, d, e, f = b.button,
                g = b.fromElement;
                return null == a.pageX && null != b.clientX && (d = a.target.ownerDocument || oa, e = d.documentElement, c = d.body, a.pageX = b.clientX + (e && e.scrollLeft || c && c.scrollLeft || 0) - (e && e.clientLeft || c && c.clientLeft || 0), a.pageY = b.clientY + (e && e.scrollTop || c && c.scrollTop || 0) - (e && e.clientTop || c && c.clientTop || 0)),
                !a.relatedTarget && g && (a.relatedTarget = g === a.target ? b.toElement: g),
                a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0),
                a
            }
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== o() && this.focus) try {
                        return this.focus(),
                        !1
                    } catch(a) {}
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === o() && this.blur ? (this.blur(), !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return ea.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : void 0
                },
                _default: function(a) {
                    return ea.nodeName(a.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(a) {
                    void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = ea.extend(new ea.Event, c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? ea.event.trigger(e, null, b) : ea.event.dispatch.call(b, e),
            e.isDefaultPrevented() && c.preventDefault()
        }
    },
    ea.removeEvent = oa.removeEventListener ?
    function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1)
    }: function(a, b, c) {
        var d = "on" + b;
        a.detachEvent && (typeof a[d] === xa && (a[d] = null), a.detachEvent(d, c))
    },
    ea.Event = function(a, b) {
        return this instanceof ea.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? m: n) : this.type = a, b && ea.extend(this, b), this.timeStamp = a && a.timeStamp || ea.now(), void(this[ea.expando] = !0)) : new ea.Event(a, b)
    },
    ea.Event.prototype = {
        isDefaultPrevented: n,
        isPropagationStopped: n,
        isImmediatePropagationStopped: n,
        preventDefault: function() {
            var a = this.originalEvent;
            this.isDefaultPrevented = m,
            a && (a.preventDefault ? a.preventDefault() : a.returnValue = !1)
        },
        stopPropagation: function() {
            var a = this.originalEvent;
            this.isPropagationStopped = m,
            a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
            var a = this.originalEvent;
            this.isImmediatePropagationStopped = m,
            a && a.stopImmediatePropagation && a.stopImmediatePropagation(),
            this.stopPropagation()
        }
    },
    ea.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    },
    function(a, b) {
        ea.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c, d = this,
                e = a.relatedTarget,
                f = a.handleObj;
                return (!e || e !== d && !ea.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b),
                c
            }
        }
    }),
    ca.submitBubbles || (ea.event.special.submit = {
        setup: function() {
            return ea.nodeName(this, "form") ? !1 : void ea.event.add(this, "click._submit keypress._submit",
            function(a) {
                var b = a.target,
                c = ea.nodeName(b, "input") || ea.nodeName(b, "button") ? b.form: void 0;
                c && !ea._data(c, "submitBubbles") && (ea.event.add(c, "submit._submit",
                function(a) {
                    a._submit_bubble = !0
                }), ea._data(c, "submitBubbles", !0))
            })
        },
        postDispatch: function(a) {
            a._submit_bubble && (delete a._submit_bubble, this.parentNode && !a.isTrigger && ea.event.simulate("submit", this.parentNode, a, !0))
        },
        teardown: function() {
            return ea.nodeName(this, "form") ? !1 : void ea.event.remove(this, "._submit")
        }
    }),
    ca.changeBubbles || (ea.event.special.change = {
        setup: function() {
            return Fa.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (ea.event.add(this, "propertychange._change",
            function(a) {
                "checked" === a.originalEvent.propertyName && (this._just_changed = !0)
            }), ea.event.add(this, "click._change",
            function(a) {
                this._just_changed && !a.isTrigger && (this._just_changed = !1),
                ea.event.simulate("change", this, a, !0)
            })), !1) : void ea.event.add(this, "beforeactivate._change",
            function(a) {
                var b = a.target;
                Fa.test(b.nodeName) && !ea._data(b, "changeBubbles") && (ea.event.add(b, "change._change",
                function(a) { ! this.parentNode || a.isSimulated || a.isTrigger || ea.event.simulate("change", this.parentNode, a, !0)
                }), ea._data(b, "changeBubbles", !0))
            })
        },
        handle: function(a) {
            var b = a.target;
            return this !== b || a.isSimulated || a.isTrigger || "radio" !== b.type && "checkbox" !== b.type ? a.handleObj.handler.apply(this, arguments) : void 0
        },
        teardown: function() {
            return ea.event.remove(this, "._change"),
            !Fa.test(this.nodeName)
        }
    }),
    ca.focusinBubbles || ea.each({
        focus: "focusin",
        blur: "focusout"
    },
    function(a, b) {
        var c = function(a) {
            ea.event.simulate(b, a.target, ea.event.fix(a), !0)
        };
        ea.event.special[b] = {
            setup: function() {
                var d = this.ownerDocument || this,
                e = ea._data(d, b);
                e || d.addEventListener(a, c, !0),
                ea._data(d, b, (e || 0) + 1)
            },
            teardown: function() {
                var d = this.ownerDocument || this,
                e = ea._data(d, b) - 1;
                e ? ea._data(d, b, e) : (d.removeEventListener(a, c, !0), ea._removeData(d, b))
            }
        }
    }),
    ea.fn.extend({
        on: function(a, b, c, d, e) {
            var f, g;
            if ("object" == typeof a) {
                "string" != typeof b && (c = c || b, b = void 0);
                for (f in a) this.on(f, b, c, a[f], e);
                return this
            }
            if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = n;
            else if (!d) return this;
            return 1 === e && (g = d, d = function(a) {
                return ea().off(a),
                g.apply(this, arguments)
            },
            d.guid = g.guid || (g.guid = ea.guid++)),
            this.each(function() {
                ea.event.add(this, a, d, c, b)
            })
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1)
        },
        off: function(a, b, c) {
            var d, e;
            if (a && a.preventDefault && a.handleObj) return d = a.handleObj,
            ea(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace: d.origType, d.selector, d.handler),
            this;
            if ("object" == typeof a) {
                for (e in a) this.off(e, b, a[e]);
                return this
            }
            return (b === !1 || "function" == typeof b) && (c = b, b = void 0),
            c === !1 && (c = n),
            this.each(function() {
                ea.event.remove(this, a, c, b)
            })
        },
        trigger: function(a, b) {
            return this.each(function() {
                ea.event.trigger(a, b, this)
            })
        },
        triggerHandler: function(a, b) {
            var c = this[0];
            return c ? ea.event.trigger(a, b, c, !0) : void 0
        }
    });
    var Ka = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
    La = / jQuery\d+="(?:null|\d+)"/g,
    Ma = new RegExp("<(?:" + Ka + ")[\\s/>]", "i"),
    Na = /^\s+/,
    Oa = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    Pa = /<([\w:]+)/,
    Qa = /<tbody/i,
    Ra = /<|&#?\w+;/,
    Sa = /<(?:script|style|link)/i,
    Ta = /checked\s*(?:[^=]|=\s*.checked.)/i,
    Ua = /^$|\/(?:java|ecma)script/i,
    Va = /^true\/(.*)/,
    Wa = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
    Xa = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        legend: [1, "<fieldset>", "</fieldset>"],
        area: [1, "<map>", "</map>"],
        param: [1, "<object>", "</object>"],
        thead: [1, "<table>", "</table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        _default: ca.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
    },
    Ya = p(oa),
    Za = Ya.appendChild(oa.createElement("div"));
    Xa.optgroup = Xa.option,
    Xa.tbody = Xa.tfoot = Xa.colgroup = Xa.caption = Xa.thead,
    Xa.th = Xa.td,
    ea.extend({
        clone: function(a, b, c) {
            var d, e, f, g, h, i = ea.contains(a.ownerDocument, a);
            if (ca.html5Clone || ea.isXMLDoc(a) || !Ma.test("<" + a.nodeName + ">") ? f = a.cloneNode(!0) : (Za.innerHTML = a.outerHTML, Za.removeChild(f = Za.firstChild)), !(ca.noCloneEvent && ca.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || ea.isXMLDoc(a))) for (d = q(f), h = q(a), g = 0; null != (e = h[g]); ++g) d[g] && x(e, d[g]);
            if (b) if (c) for (h = h || q(a), d = d || q(f), g = 0; null != (e = h[g]); g++) w(e, d[g]);
            else w(a, f);
            return d = q(f, "script"),
            d.length > 0 && v(d, !i && q(a, "script")),
            d = h = e = null,
            f
        },
        buildFragment: function(a, b, c, d) {
            for (var e, f, g, h, i, j, k, l = a.length,
            m = p(b), n = [], o = 0; l > o; o++) if (f = a[o], f || 0 === f) if ("object" === ea.type(f)) ea.merge(n, f.nodeType ? [f] : f);
            else if (Ra.test(f)) {
                for (h = h || m.appendChild(b.createElement("div")), i = (Pa.exec(f) || ["", ""])[1].toLowerCase(), k = Xa[i] || Xa._default, h.innerHTML = k[1] + f.replace(Oa, "<$1></$2>") + k[2], e = k[0]; e--;) h = h.lastChild;
                if (!ca.leadingWhitespace && Na.test(f) && n.push(b.createTextNode(Na.exec(f)[0])), !ca.tbody) for (f = "table" !== i || Qa.test(f) ? "<table>" !== k[1] || Qa.test(f) ? 0 : h: h.firstChild, e = f && f.childNodes.length; e--;) ea.nodeName(j = f.childNodes[e], "tbody") && !j.childNodes.length && f.removeChild(j);
                for (ea.merge(n, h.childNodes), h.textContent = ""; h.firstChild;) h.removeChild(h.firstChild);
                h = m.lastChild
            } else n.push(b.createTextNode(f));
            for (h && m.removeChild(h), ca.appendChecked || ea.grep(q(n, "input"), r), o = 0; f = n[o++];) if ((!d || -1 === ea.inArray(f, d)) && (g = ea.contains(f.ownerDocument, f), h = q(m.appendChild(f), "script"), g && v(h), c)) for (e = 0; f = h[e++];) Ua.test(f.type || "") && c.push(f);
            return h = null,
            m
        },
        cleanData: function(a, b) {
            for (var c, d, e, f, g = 0,
            h = ea.expando,
            i = ea.cache,
            j = ca.deleteExpando,
            k = ea.event.special; null != (c = a[g]); g++) if ((b || ea.acceptData(c)) && (e = c[h], f = e && i[e])) {
                if (f.events) for (d in f.events) k[d] ? ea.event.remove(c, d) : ea.removeEvent(c, d, f.handle);
                i[e] && (delete i[e], j ? delete c[h] : typeof c.removeAttribute !== xa ? c.removeAttribute(h) : c[h] = null, W.push(e))
            }
        }
    }),
    ea.fn.extend({
        text: function(a) {
            return Da(this,
            function(a) {
                return void 0 === a ? ea.text(this) : this.empty().append((this[0] && this[0].ownerDocument || oa).createTextNode(a))
            },
            null, a, arguments.length)
        },
        append: function() {
            return this.domManip(arguments,
            function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = s(this, a);
                    b.appendChild(a)
                }
            })
        },
        prepend: function() {
            return this.domManip(arguments,
            function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = s(this, a);
                    b.insertBefore(a, b.firstChild)
                }
            })
        },
        before: function() {
            return this.domManip(arguments,
            function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this)
            })
        },
        after: function() {
            return this.domManip(arguments,
            function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
            })
        },
        remove: function(a, b) {
            for (var c, d = a ? ea.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || ea.cleanData(q(c)),
            c.parentNode && (b && ea.contains(c.ownerDocument, c) && v(q(c, "script")), c.parentNode.removeChild(c));
            return this
        },
        empty: function() {
            for (var a, b = 0; null != (a = this[b]); b++) {
                for (1 === a.nodeType && ea.cleanData(q(a, !1)); a.firstChild;) a.removeChild(a.firstChild);
                a.options && ea.nodeName(a, "select") && (a.options.length = 0)
            }
            return this
        },
        clone: function(a, b) {
            return a = null == a ? !1 : a,
            b = null == b ? a: b,
            this.map(function() {
                return ea.clone(this, a, b)
            })
        },
        html: function(a) {
            return Da(this,
            function(a) {
                var b = this[0] || {},
                c = 0,
                d = this.length;
                if (void 0 === a) return 1 === b.nodeType ? b.innerHTML.replace(La, "") : void 0;
                if (! ("string" != typeof a || Sa.test(a) || !ca.htmlSerialize && Ma.test(a) || !ca.leadingWhitespace && Na.test(a) || Xa[(Pa.exec(a) || ["", ""])[1].toLowerCase()])) {
                    a = a.replace(Oa, "<$1></$2>");
                    try {
                        for (; d > c; c++) b = this[c] || {},
                        1 === b.nodeType && (ea.cleanData(q(b, !1)), b.innerHTML = a);
                        b = 0
                    } catch(e) {}
                }
                b && this.empty().append(a)
            },
            null, a, arguments.length)
        },
        replaceWith: function() {
            var a = arguments[0];
            return this.domManip(arguments,
            function(b) {
                a = this.parentNode,
                ea.cleanData(q(this)),
                a && a.replaceChild(b, this)
            }),
            a && (a.length || a.nodeType) ? this: this.remove()
        },
        detach: function(a) {
            return this.remove(a, !0)
        },
        domManip: function(a, b) {
            a = Y.apply([], a);
            var c, d, e, f, g, h, i = 0,
            j = this.length,
            k = this,
            l = j - 1,
            m = a[0],
            n = ea.isFunction(m);
            if (n || j > 1 && "string" == typeof m && !ca.checkClone && Ta.test(m)) return this.each(function(c) {
                var d = k.eq(c);
                n && (a[0] = m.call(this, c, d.html())),
                d.domManip(a, b)
            });
            if (j && (h = ea.buildFragment(a, this[0].ownerDocument, !1, this), c = h.firstChild, 1 === h.childNodes.length && (h = c), c)) {
                for (f = ea.map(q(h, "script"), t), e = f.length; j > i; i++) d = h,
                i !== l && (d = ea.clone(d, !0, !0), e && ea.merge(f, q(d, "script"))),
                b.call(this[i], d, i);
                if (e) for (g = f[f.length - 1].ownerDocument, ea.map(f, u), i = 0; e > i; i++) d = f[i],
                Ua.test(d.type || "") && !ea._data(d, "globalEval") && ea.contains(g, d) && (d.src ? ea._evalUrl && ea._evalUrl(d.src) : ea.globalEval((d.text || d.textContent || d.innerHTML || "").replace(Wa, "")));
                h = c = null
            }
            return this
        }
    }),
    ea.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    },
    function(a, b) {
        ea.fn[a] = function(a) {
            for (var c, d = 0,
            e = [], f = ea(a), g = f.length - 1; g >= d; d++) c = d === g ? this: this.clone(!0),
            ea(f[d])[b](c),
            Z.apply(e, c.get());
            return this.pushStack(e)
        }
    });
    var $a, _a = {}; !
    function() {
        var a;
        ca.shrinkWrapBlocks = function() {
            if (null != a) return a;
            a = !1;
            var b, c, d;
            return c = oa.getElementsByTagName("body")[0],
            c && c.style ? (b = oa.createElement("div"), d = oa.createElement("div"), d.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", c.appendChild(d).appendChild(b), typeof b.style.zoom !== xa && (b.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1", b.appendChild(oa.createElement("div")).style.width = "5px", a = 3 !== b.offsetWidth), c.removeChild(d), a) : void 0
        }
    } ();
    var ab, bb, cb = /^margin/,
    db = new RegExp("^(" + Aa + ")(?!px)[a-z%]+$", "i"),
    eb = /^(top|right|bottom|left)$/;
    a.getComputedStyle ? (ab = function(a) {
        return a.ownerDocument.defaultView.getComputedStyle(a, null)
    },
    bb = function(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || ab(a),
        g = c ? c.getPropertyValue(b) || c[b] : void 0,
        c && ("" !== g || ea.contains(a.ownerDocument, a) || (g = ea.style(a, b)), db.test(g) && cb.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)),
        void 0 === g ? g: g + ""
    }) : oa.documentElement.currentStyle && (ab = function(a) {
        return a.currentStyle
    },
    bb = function(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || ab(a),
        g = c ? c[b] : void 0,
        null == g && h && h[b] && (g = h[b]),
        db.test(g) && !eb.test(b) && (d = h.left, e = a.runtimeStyle, f = e && e.left, f && (e.left = a.currentStyle.left), h.left = "fontSize" === b ? "1em": g, g = h.pixelLeft + "px", h.left = d, f && (e.left = f)),
        void 0 === g ? g: g + "" || "auto"
    }),
    !
    function() {
        function b() {
            var b, c, d, e;
            c = oa.getElementsByTagName("body")[0],
            c && c.style && (b = oa.createElement("div"), d = oa.createElement("div"), d.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", c.appendChild(d).appendChild(b), b.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", f = g = !1, i = !0, a.getComputedStyle && (f = "1%" !== (a.getComputedStyle(b, null) || {}).top, g = "4px" === (a.getComputedStyle(b, null) || {
                width: "4px"
            }).width, e = b.appendChild(oa.createElement("div")), e.style.cssText = b.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", e.style.marginRight = e.style.width = "0", b.style.width = "1px", i = !parseFloat((a.getComputedStyle(e, null) || {}).marginRight)), b.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", e = b.getElementsByTagName("td"), e[0].style.cssText = "margin:0;border:0;padding:0;display:none", h = 0 === e[0].offsetHeight, h && (e[0].style.display = "", e[1].style.display = "none", h = 0 === e[0].offsetHeight), c.removeChild(d))
        }
        var c, d, e, f, g, h, i;
        c = oa.createElement("div"),
        c.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        e = c.getElementsByTagName("a")[0],
        (d = e && e.style) && (d.cssText = "float:left;opacity:.5", ca.opacity = "0.5" === d.opacity, ca.cssFloat = !!d.cssFloat, c.style.backgroundClip = "content-box", c.cloneNode(!0).style.backgroundClip = "", ca.clearCloneStyle = "content-box" === c.style.backgroundClip, ca.boxSizing = "" === d.boxSizing || "" === d.MozBoxSizing || "" === d.WebkitBoxSizing, ea.extend(ca, {
            reliableHiddenOffsets: function() {
                return null == h && b(),
                h
            },
            boxSizingReliable: function() {
                return null == g && b(),
                g
            },
            pixelPosition: function() {
                return null == f && b(),
                f
            },
            reliableMarginRight: function() {
                return null == i && b(),
                i
            }
        }))
    } (),
    ea.swap = function(a, b, c, d) {
        var e, f, g = {};
        for (f in b) g[f] = a.style[f],
        a.style[f] = b[f];
        e = c.apply(a, d || []);
        for (f in b) a.style[f] = g[f];
        return e
    };
    var fb = /alpha\([^)]*\)/i,
    gb = /opacity\s*=\s*([^)]*)/,
    hb = /^(none|table(?!-c[ea]).+)/,
    ib = new RegExp("^(" + Aa + ")(.*)$", "i"),
    jb = new RegExp("^([+-])=(" + Aa + ")", "i"),
    kb = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    },
    lb = {
        letterSpacing: "0",
        fontWeight: "400"
    },
    mb = ["Webkit", "O", "Moz", "ms"];
    ea.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = bb(a, "opacity");
                        return "" === c ? "1": c
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": ca.cssFloat ? "cssFloat": "styleFloat"
        },
        style: function(a, b, c, d) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var e, f, g, h = ea.camelCase(b),
                i = a.style;
                if (b = ea.cssProps[h] || (ea.cssProps[h] = B(i, h)), g = ea.cssHooks[b] || ea.cssHooks[h], void 0 === c) return g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e: i[b];
                if (f = typeof c, "string" === f && (e = jb.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(ea.css(a, b)), f = "number"), null != c && c === c && ("number" !== f || ea.cssNumber[h] || (c += "px"), ca.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), !(g && "set" in g && void 0 === (c = g.set(a, c, d))))) try {
                    i[b] = c
                } catch(j) {}
            }
        },
        css: function(a, b, c, d) {
            var e, f, g, h = ea.camelCase(b);
            return b = ea.cssProps[h] || (ea.cssProps[h] = B(a.style, h)),
            g = ea.cssHooks[b] || ea.cssHooks[h],
            g && "get" in g && (f = g.get(a, !0, c)),
            void 0 === f && (f = bb(a, b, d)),
            "normal" === f && b in lb && (f = lb[b]),
            "" === c || c ? (e = parseFloat(f), c === !0 || ea.isNumeric(e) ? e || 0 : f) : f
        }
    }),
    ea.each(["height", "width"],
    function(a, b) {
        ea.cssHooks[b] = {
            get: function(a, c, d) {
                return c ? hb.test(ea.css(a, "display")) && 0 === a.offsetWidth ? ea.swap(a, kb,
                function() {
                    return F(a, b, d)
                }) : F(a, b, d) : void 0
            },
            set: function(a, c, d) {
                var e = d && ab(a);
                return D(a, c, d ? E(a, b, d, ca.boxSizing && "border-box" === ea.css(a, "boxSizing", !1, e), e) : 0)
            }
        }
    }),
    ca.opacity || (ea.cssHooks.opacity = {
        get: function(a, b) {
            return gb.test((b && a.currentStyle ? a.currentStyle.filter: a.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "": b ? "1": ""
        },
        set: function(a, b) {
            var c = a.style,
            d = a.currentStyle,
            e = ea.isNumeric(b) ? "alpha(opacity=" + 100 * b + ")": "",
            f = d && d.filter || c.filter || "";
            c.zoom = 1,
            (b >= 1 || "" === b) && "" === ea.trim(f.replace(fb, "")) && c.removeAttribute && (c.removeAttribute("filter"), "" === b || d && !d.filter) || (c.filter = fb.test(f) ? f.replace(fb, e) : f + " " + e)
        }
    }),
    ea.cssHooks.marginRight = A(ca.reliableMarginRight,
    function(a, b) {
        return b ? ea.swap(a, {
            display: "inline-block"
        },
        bb, [a, "marginRight"]) : void 0
    }),
    ea.each({
        margin: "",
        padding: "",
        border: "Width"
    },
    function(a, b) {
        ea.cssHooks[a + b] = {
            expand: function(c) {
                for (var d = 0,
                e = {},
                f = "string" == typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + Ba[d] + b] = f[d] || f[d - 2] || f[0];
                return e
            }
        },
        cb.test(a) || (ea.cssHooks[a + b].set = D)
    }),
    ea.fn.extend({
        css: function(a, b) {
            return Da(this,
            function(a, b, c) {
                var d, e, f = {},
                g = 0;
                if (ea.isArray(b)) {
                    for (d = ab(a), e = b.length; e > g; g++) f[b[g]] = ea.css(a, b[g], !1, d);
                    return f
                }
                return void 0 !== c ? ea.style(a, b, c) : ea.css(a, b)
            },
            a, b, arguments.length > 1)
        },
        show: function() {
            return C(this, !0)
        },
        hide: function() {
            return C(this)
        },
        toggle: function(a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                Ca(this) ? ea(this).show() : ea(this).hide()
            })
        }
    }),
    ea.Tween = G,
    G.prototype = {
        constructor: G,
        init: function(a, b, c, d, e, f) {
            this.elem = a,
            this.prop = c,
            this.easing = e || "swing",
            this.options = b,
            this.start = this.now = this.cur(),
            this.end = d,
            this.unit = f || (ea.cssNumber[c] ? "": "px")
        },
        cur: function() {
            var a = G.propHooks[this.prop];
            return a && a.get ? a.get(this) : G.propHooks._default.get(this)
        },
        run: function(a) {
            var b, c = G.propHooks[this.prop];
            return this.pos = b = this.options.duration ? ea.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a,
            this.now = (this.end - this.start) * b + this.start,
            this.options.step && this.options.step.call(this.elem, this.now, this),
            c && c.set ? c.set(this) : G.propHooks._default.set(this),
            this
        }
    },
    G.prototype.init.prototype = G.prototype,
    G.propHooks = {
        _default: {
            get: function(a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = ea.css(a.elem, a.prop, ""), b && "auto" !== b ? b: 0) : a.elem[a.prop]
            },
            set: function(a) {
                ea.fx.step[a.prop] ? ea.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[ea.cssProps[a.prop]] || ea.cssHooks[a.prop]) ? ea.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
            }
        }
    },
    G.propHooks.scrollTop = G.propHooks.scrollLeft = {
        set: function(a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
        }
    },
    ea.easing = {
        linear: function(a) {
            return a
        },
        swing: function(a) {
            return.5 - Math.cos(a * Math.PI) / 2
        }
    },
    ea.fx = G.prototype.init,
    ea.fx.step = {};
    var nb, ob, pb = /^(?:toggle|show|hide)$/,
    qb = new RegExp("^(?:([+-])=|)(" + Aa + ")([a-z%]*)$", "i"),
    rb = /queueHooks$/,
    sb = [K],
    tb = {
        "*": [function(a, b) {
            var c = this.createTween(a, b),
            d = c.cur(),
            e = qb.exec(b),
            f = e && e[3] || (ea.cssNumber[a] ? "": "px"),
            g = (ea.cssNumber[a] || "px" !== f && +d) && qb.exec(ea.css(c.elem, a)),
            h = 1,
            i = 20;
            if (g && g[3] !== f) {
                f = f || g[3],
                e = e || [],
                g = +d || 1;
                do h = h || ".5",
                g /= h,
                ea.style(c.elem, a, g + f);
                while (h !== (h = c.cur() / d) && 1 !== h && --i)
            }
            return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]),
            c
        }]
    };
    ea.Animation = ea.extend(M, {
        tweener: function(a, b) {
            ea.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
            for (var c, d = 0,
            e = a.length; e > d; d++) c = a[d],
            tb[c] = tb[c] || [],
            tb[c].unshift(b)
        },
        prefilter: function(a, b) {
            b ? sb.unshift(a) : sb.push(a)
        }
    }),
    ea.speed = function(a, b, c) {
        var d = a && "object" == typeof a ? ea.extend({},
        a) : {
            complete: c || !c && b || ea.isFunction(a) && a,
            duration: a,
            easing: c && b || b && !ea.isFunction(b) && b
        };
        return d.duration = ea.fx.off ? 0 : "number" == typeof d.duration ? d.duration: d.duration in ea.fx.speeds ? ea.fx.speeds[d.duration] : ea.fx.speeds._default,
        (null == d.queue || d.queue === !0) && (d.queue = "fx"),
        d.old = d.complete,
        d.complete = function() {
            ea.isFunction(d.old) && d.old.call(this),
            d.queue && ea.dequeue(this, d.queue)
        },
        d
    },
    ea.fn.extend({
        fadeTo: function(a, b, c, d) {
            return this.filter(Ca).css("opacity", 0).show().end().animate({
                opacity: b
            },
            a, c, d)
        },
        animate: function(a, b, c, d) {
            var e = ea.isEmptyObject(a),
            f = ea.speed(b, c, d),
            g = function() {
                var b = M(this, ea.extend({},
                a), f); (e || ea._data(this, "finish")) && b.stop(!0)
            };
            return g.finish = g,
            e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
        },
        stop: function(a, b, c) {
            var d = function(a) {
                var b = a.stop;
                delete a.stop,
                b(c)
            };
            return "string" != typeof a && (c = b, b = a, a = void 0),
            b && a !== !1 && this.queue(a || "fx", []),
            this.each(function() {
                var b = !0,
                e = null != a && a + "queueHooks",
                f = ea.timers,
                g = ea._data(this);
                if (e) g[e] && g[e].stop && d(g[e]);
                else for (e in g) g[e] && g[e].stop && rb.test(e) && d(g[e]);
                for (e = f.length; e--;) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1)); (b || !c) && ea.dequeue(this, a)
            })
        },
        finish: function(a) {
            return a !== !1 && (a = a || "fx"),
            this.each(function() {
                var b, c = ea._data(this),
                d = c[a + "queue"],
                e = c[a + "queueHooks"],
                f = ea.timers,
                g = d ? d.length: 0;
                for (c.finish = !0, ea.queue(this, a, []), e && e.stop && e.stop.call(this, !0), b = f.length; b--;) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
                for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                delete c.finish
            })
        }
    }),
    ea.each(["toggle", "show", "hide"],
    function(a, b) {
        var c = ea.fn[b];
        ea.fn[b] = function(a, d, e) {
            return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(I(b, !0), a, d, e)
        }
    }),
    ea.each({
        slideDown: I("show"),
        slideUp: I("hide"),
        slideToggle: I("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    },
    function(a, b) {
        ea.fn[a] = function(a, c, d) {
            return this.animate(b, a, c, d)
        }
    }),
    ea.timers = [],
    ea.fx.tick = function() {
        var a, b = ea.timers,
        c = 0;
        for (nb = ea.now(); c < b.length; c++) a = b[c],
        a() || b[c] !== a || b.splice(c--, 1);
        b.length || ea.fx.stop(),
        nb = void 0
    },
    ea.fx.timer = function(a) {
        ea.timers.push(a),
        a() ? ea.fx.start() : ea.timers.pop()
    },
    ea.fx.interval = 13,
    ea.fx.start = function() {
        ob || (ob = setInterval(ea.fx.tick, ea.fx.interval))
    },
    ea.fx.stop = function() {
        clearInterval(ob),
        ob = null
    },
    ea.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    },
    ea.fn.delay = function(a, b) {
        return a = ea.fx ? ea.fx.speeds[a] || a: a,
        b = b || "fx",
        this.queue(b,
        function(b, c) {
            var d = setTimeout(b, a);
            c.stop = function() {
                clearTimeout(d)
            }
        })
    },
    function() {
        var a, b, c, d, e;
        b = oa.createElement("div"),
        b.setAttribute("className", "t"),
        b.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        d = b.getElementsByTagName("a")[0],
        c = oa.createElement("select"),
        e = c.appendChild(oa.createElement("option")),
        a = b.getElementsByTagName("input")[0],
        d.style.cssText = "top:1px",
        ca.getSetAttribute = "t" !== b.className,
        ca.style = /top/.test(d.getAttribute("style")),
        ca.hrefNormalized = "/a" === d.getAttribute("href"),
        ca.checkOn = !!a.value,
        ca.optSelected = e.selected,
        ca.enctype = !!oa.createElement("form").enctype,
        c.disabled = !0,
        ca.optDisabled = !e.disabled,
        a = oa.createElement("input"),
        a.setAttribute("value", ""),
        ca.input = "" === a.getAttribute("value"),
        a.value = "t",
        a.setAttribute("type", "radio"),
        ca.radioValue = "t" === a.value
    } ();
    var ub = /\r/g;
    ea.fn.extend({
        val: function(a) {
            var b, c, d, e = this[0];
            return arguments.length ? (d = ea.isFunction(a), this.each(function(c) {
                var e;
                1 === this.nodeType && (e = d ? a.call(this, c, ea(this).val()) : a, null == e ? e = "": "number" == typeof e ? e += "": ea.isArray(e) && (e = ea.map(e,
                function(a) {
                    return null == a ? "": a + ""
                })), b = ea.valHooks[this.type] || ea.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
            })) : e ? (b = ea.valHooks[e.type] || ea.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c: (c = e.value, "string" == typeof c ? c.replace(ub, "") : null == c ? "": c)) : void 0
        }
    }),
    ea.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = ea.find.attr(a, "value");
                    return null != b ? b: ea.trim(ea.text(a))
                }
            },
            select: {
                get: function(a) {
                    for (var b, c, d = a.options,
                    e = a.selectedIndex,
                    f = "select-one" === a.type || 0 > e,
                    g = f ? null: [], h = f ? e + 1 : d.length, i = 0 > e ? h: f ? e: 0; h > i; i++) if (c = d[i], !(!c.selected && i !== e || (ca.optDisabled ? c.disabled: null !== c.getAttribute("disabled")) || c.parentNode.disabled && ea.nodeName(c.parentNode, "optgroup"))) {
                        if (b = ea(c).val(), f) return b;
                        g.push(b)
                    }
                    return g
                },
                set: function(a, b) {
                    for (var c, d, e = a.options,
                    f = ea.makeArray(b), g = e.length; g--;) if (d = e[g], ea.inArray(ea.valHooks.option.get(d), f) >= 0) try {
                        d.selected = c = !0
                    } catch(h) {
                        d.scrollHeight
                    } else d.selected = !1;
                    return c || (a.selectedIndex = -1),
                    e
                }
            }
        }
    }),
    ea.each(["radio", "checkbox"],
    function() {
        ea.valHooks[this] = {
            set: function(a, b) {
                return ea.isArray(b) ? a.checked = ea.inArray(ea(a).val(), b) >= 0 : void 0
            }
        },
        ca.checkOn || (ea.valHooks[this].get = function(a) {
            return null === a.getAttribute("value") ? "on": a.value
        })
    });
    var vb, wb, xb = ea.expr.attrHandle,
    yb = /^(?:checked|selected)$/i,
    zb = ca.getSetAttribute,
    Ab = ca.input;
    ea.fn.extend({
        attr: function(a, b) {
            return Da(this, ea.attr, a, b, arguments.length > 1)
        },
        removeAttr: function(a) {
            return this.each(function() {
                ea.removeAttr(this, a)
            })
        }
    }),
    ea.extend({
        attr: function(a, b, c) {
            var d, e, f = a.nodeType;
            return a && 3 !== f && 8 !== f && 2 !== f ? typeof a.getAttribute === xa ? ea.prop(a, b, c) : (1 === f && ea.isXMLDoc(a) || (b = b.toLowerCase(), d = ea.attrHooks[b] || (ea.expr.match.bool.test(b) ? wb: vb)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e: (e = ea.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e: (a.setAttribute(b, c + ""), c) : void ea.removeAttr(a, b)) : void 0
        },
        removeAttr: function(a, b) {
            var c, d, e = 0,
            f = b && b.match(ta);
            if (f && 1 === a.nodeType) for (; c = f[e++];) d = ea.propFix[c] || c,
            ea.expr.match.bool.test(c) ? Ab && zb || !yb.test(c) ? a[d] = !1 : a[ea.camelCase("default-" + c)] = a[d] = !1 : ea.attr(a, c, ""),
            a.removeAttribute(zb ? c: d)
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (!ca.radioValue && "radio" === b && ea.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b),
                        c && (a.value = c),
                        b
                    }
                }
            }
        }
    }),
    wb = {
        set: function(a, b, c) {
            return b === !1 ? ea.removeAttr(a, c) : Ab && zb || !yb.test(c) ? a.setAttribute(!zb && ea.propFix[c] || c, c) : a[ea.camelCase("default-" + c)] = a[c] = !0,
            c
        }
    },
    ea.each(ea.expr.match.bool.source.match(/\w+/g),
    function(a, b) {
        var c = xb[b] || ea.find.attr;
        xb[b] = Ab && zb || !yb.test(b) ?
        function(a, b, d) {
            var e, f;
            return d || (f = xb[b], xb[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, xb[b] = f),
            e
        }: function(a, b, c) {
            return c ? void 0 : a[ea.camelCase("default-" + b)] ? b.toLowerCase() : null
        }
    }),
    Ab && zb || (ea.attrHooks.value = {
        set: function(a, b, c) {
            return ea.nodeName(a, "input") ? void(a.defaultValue = b) : vb && vb.set(a, b, c)
        }
    }),
    zb || (vb = {
        set: function(a, b, c) {
            var d = a.getAttributeNode(c);
            return d || a.setAttributeNode(d = a.ownerDocument.createAttribute(c)),
            d.value = b += "",
            "value" === c || b === a.getAttribute(c) ? b: void 0
        }
    },
    xb.id = xb.name = xb.coords = function(a, b, c) {
        var d;
        return c ? void 0 : (d = a.getAttributeNode(b)) && "" !== d.value ? d.value: null
    },
    ea.valHooks.button = {
        get: function(a, b) {
            var c = a.getAttributeNode(b);
            return c && c.specified ? c.value: void 0
        },
        set: vb.set
    },
    ea.attrHooks.contenteditable = {
        set: function(a, b, c) {
            vb.set(a, "" === b ? !1 : b, c)
        }
    },
    ea.each(["width", "height"],
    function(a, b) {
        ea.attrHooks[b] = {
            set: function(a, c) {
                return "" === c ? (a.setAttribute(b, "auto"), c) : void 0
            }
        }
    })),
    ca.style || (ea.attrHooks.style = {
        get: function(a) {
            return a.style.cssText || void 0
        },
        set: function(a, b) {
            return a.style.cssText = b + ""
        }
    });
    var Bb = /^(?:input|select|textarea|button|object)$/i,
    Cb = /^(?:a|area)$/i;
    ea.fn.extend({
        prop: function(a, b) {
            return Da(this, ea.prop, a, b, arguments.length > 1)
        },
        removeProp: function(a) {
            return a = ea.propFix[a] || a,
            this.each(function() {
                try {
                    this[a] = void 0,
                    delete this[a]
                } catch(b) {}
            })
        }
    }),
    ea.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(a, b, c) {
            var d, e, f, g = a.nodeType;
            return a && 3 !== g && 8 !== g && 2 !== g ? (f = 1 !== g || !ea.isXMLDoc(a), f && (b = ea.propFix[b] || b, e = ea.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d: a[b] = c: e && "get" in e && null !== (d = e.get(a, b)) ? d: a[b]) : void 0
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    var b = ea.find.attr(a, "tabindex");
                    return b ? parseInt(b, 10) : Bb.test(a.nodeName) || Cb.test(a.nodeName) && a.href ? 0 : -1
                }
            }
        }
    }),
    ca.hrefNormalized || ea.each(["href", "src"],
    function(a, b) {
        ea.propHooks[b] = {
            get: function(a) {
                return a.getAttribute(b, 4)
            }
        }
    }),
    ca.optSelected || (ea.propHooks.selected = {
        get: function(a) {
            var b = a.parentNode;
            return b && (b.selectedIndex, b.parentNode && b.parentNode.selectedIndex),
            null
        }
    }),
    ea.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"],
    function() {
        ea.propFix[this.toLowerCase()] = this
    }),
    ca.enctype || (ea.propFix.enctype = "encoding");
    var Db = /[\t\r\n\f]/g;
    ea.fn.extend({
        addClass: function(a) {
            var b, c, d, e, f, g, h = 0,
            i = this.length,
            j = "string" == typeof a && a;
            if (ea.isFunction(a)) return this.each(function(b) {
                ea(this).addClass(a.call(this, b, this.className))
            });
            if (j) for (b = (a || "").match(ta) || []; i > h; h++) if (c = this[h], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(Db, " ") : " ")) {
                for (f = 0; e = b[f++];) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                g = ea.trim(d),
                c.className !== g && (c.className = g)
            }
            return this
        },
        removeClass: function(a) {
            var b, c, d, e, f, g, h = 0,
            i = this.length,
            j = 0 === arguments.length || "string" == typeof a && a;
            if (ea.isFunction(a)) return this.each(function(b) {
                ea(this).removeClass(a.call(this, b, this.className))
            });
            if (j) for (b = (a || "").match(ta) || []; i > h; h++) if (c = this[h], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(Db, " ") : "")) {
                for (f = 0; e = b[f++];) for (; d.indexOf(" " + e + " ") >= 0;) d = d.replace(" " + e + " ", " ");
                g = a ? ea.trim(d) : "",
                c.className !== g && (c.className = g)
            }
            return this
        },
        toggleClass: function(a, b) {
            var c = typeof a;
            return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(ea.isFunction(a) ?
            function(c) {
                ea(this).toggleClass(a.call(this, c, this.className, b), b)
            }: function() {
                if ("string" === c) for (var b, d = 0,
                e = ea(this), f = a.match(ta) || []; b = f[d++];) e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
                else(c === xa || "boolean" === c) && (this.className && ea._data(this, "__className__", this.className), this.className = this.className || a === !1 ? "": ea._data(this, "__className__") || "")
            })
        },
        hasClass: function(a) {
            for (var b = " " + a + " ",
            c = 0,
            d = this.length; d > c; c++) if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(Db, " ").indexOf(b) >= 0) return ! 0;
            return ! 1
        }
    }),
    ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
    function(a, b) {
        ea.fn[b] = function(a, c) {
            return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
        }
    }),
    ea.fn.extend({
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a)
        },
        bind: function(a, b, c) {
            return this.on(a, null, b, c)
        },
        unbind: function(a, b) {
            return this.off(a, null, b)
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d)
        },
        undelegate: function(a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
        }
    });
    var Eb = ea.now(),
    Fb = /\?/,
    Gb = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    ea.parseJSON = function(b) {
        if (a.JSON && a.JSON.parse) return a.JSON.parse(b + "");
        var c, d = null,
        e = ea.trim(b + "");
        return e && !ea.trim(e.replace(Gb,
        function(a, b, e, f) {
            return c && b && (d = 0),
            0 === d ? a: (c = e || b, d += !f - !e, "")
        })) ? Function("return " + e)() : ea.error("Invalid JSON: " + b)
    },
    ea.parseXML = function(b) {
        var c, d;
        if (!b || "string" != typeof b) return null;
        try {
            a.DOMParser ? (d = new DOMParser, c = d.parseFromString(b, "text/xml")) : (c = new ActiveXObject("Microsoft.XMLDOM"), c.async = "false", c.loadXML(b))
        } catch(e) {
            c = void 0
        }
        return c && c.documentElement && !c.getElementsByTagName("parsererror").length || ea.error("Invalid XML: " + b),
        c
    };
    var Hb, Ib, Jb = /#.*$/,
    Kb = /([?&])_=[^&]*/,
    Lb = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
    Mb = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
    Nb = /^(?:GET|HEAD)$/,
    Ob = /^\/\//,
    Pb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
    Qb = {},
    Rb = {},
    Sb = "*/".concat("*");
    try {
        Ib = location.href
    } catch(Tb) {
        Ib = oa.createElement("a"),
        Ib.href = "",
        Ib = Ib.href
    }
    Hb = Pb.exec(Ib.toLowerCase()) || [],
    ea.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: Ib,
            type: "GET",
            isLocal: Mb.test(Hb[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": Sb,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": ea.parseJSON,
                "text xml": ea.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(a, b) {
            return b ? P(P(a, ea.ajaxSettings), b) : P(ea.ajaxSettings, a)
        },
        ajaxPrefilter: N(Qb),
        ajaxTransport: N(Rb),
        ajax: function(a, b) {
            function c(a, b, c, d) {
                var e, k, r, s, u, w = b;
                2 !== t && (t = 2, h && clearTimeout(h), j = void 0, g = d || "", v.readyState = a > 0 ? 4 : 0, e = a >= 200 && 300 > a || 304 === a, c && (s = Q(l, v, c)), s = R(l, s, v, e), e ? (l.ifModified && (u = v.getResponseHeader("Last-Modified"), u && (ea.lastModified[f] = u), u = v.getResponseHeader("etag"), u && (ea.etag[f] = u)), 204 === a || "HEAD" === l.type ? w = "nocontent": 304 === a ? w = "notmodified": (w = s.state, k = s.data, r = s.error, e = !r)) : (r = w, (a || !w) && (w = "error", 0 > a && (a = 0))), v.status = a, v.statusText = (b || w) + "", e ? o.resolveWith(m, [k, w, v]) : o.rejectWith(m, [v, w, r]), v.statusCode(q), q = void 0, i && n.trigger(e ? "ajaxSuccess": "ajaxError", [v, l, e ? k: r]), p.fireWith(m, [v, w]), i && (n.trigger("ajaxComplete", [v, l]), --ea.active || ea.event.trigger("ajaxStop")))
            }
            "object" == typeof a && (b = a, a = void 0),
            b = b || {};
            var d, e, f, g, h, i, j, k, l = ea.ajaxSetup({},
            b),
            m = l.context || l,
            n = l.context && (m.nodeType || m.jquery) ? ea(m) : ea.event,
            o = ea.Deferred(),
            p = ea.Callbacks("once memory"),
            q = l.statusCode || {},
            r = {},
            s = {},
            t = 0,
            u = "canceled",
            v = {
                readyState: 0,
                getResponseHeader: function(a) {
                    var b;
                    if (2 === t) {
                        if (!k) for (k = {}; b = Lb.exec(g);) k[b[1].toLowerCase()] = b[2];
                        b = k[a.toLowerCase()]
                    }
                    return null == b ? null: b
                },
                getAllResponseHeaders: function() {
                    return 2 === t ? g: null
                },
                setRequestHeader: function(a, b) {
                    var c = a.toLowerCase();
                    return t || (a = s[c] = s[c] || a, r[a] = b),
                    this
                },
                overrideMimeType: function(a) {
                    return t || (l.mimeType = a),
                    this
                },
                statusCode: function(a) {
                    var b;
                    if (a) if (2 > t) for (b in a) q[b] = [q[b], a[b]];
                    else v.always(a[v.status]);
                    return this
                },
                abort: function(a) {
                    var b = a || u;
                    return j && j.abort(b),
                    c(0, b),
                    this
                }
            };
            if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, l.url = ((a || l.url || Ib) + "").replace(Jb, "").replace(Ob, Hb[1] + "//"), l.type = b.method || b.type || l.method || l.type, l.dataTypes = ea.trim(l.dataType || "*").toLowerCase().match(ta) || [""], null == l.crossDomain && (d = Pb.exec(l.url.toLowerCase()), l.crossDomain = !(!d || d[1] === Hb[1] && d[2] === Hb[2] && (d[3] || ("http:" === d[1] ? "80": "443")) === (Hb[3] || ("http:" === Hb[1] ? "80": "443")))), l.data && l.processData && "string" != typeof l.data && (l.data = ea.param(l.data, l.traditional)), O(Qb, l, b, v), 2 === t) return v;
            i = l.global,
            i && 0 === ea.active++&&ea.event.trigger("ajaxStart"),
            l.type = l.type.toUpperCase(),
            l.hasContent = !Nb.test(l.type),
            f = l.url,
            l.hasContent || (l.data && (f = l.url += (Fb.test(f) ? "&": "?") + l.data, delete l.data), l.cache === !1 && (l.url = Kb.test(f) ? f.replace(Kb, "$1_=" + Eb++) : f + (Fb.test(f) ? "&": "?") + "_=" + Eb++)),
            l.ifModified && (ea.lastModified[f] && v.setRequestHeader("If-Modified-Since", ea.lastModified[f]), ea.etag[f] && v.setRequestHeader("If-None-Match", ea.etag[f])),
            (l.data && l.hasContent && l.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", l.contentType),
            v.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + ("*" !== l.dataTypes[0] ? ", " + Sb + "; q=0.01": "") : l.accepts["*"]);
            for (e in l.headers) v.setRequestHeader(e, l.headers[e]);
            if (l.beforeSend && (l.beforeSend.call(m, v, l) === !1 || 2 === t)) return v.abort();
            u = "abort";
            for (e in {
                success: 1,
                error: 1,
                complete: 1
            }) v[e](l[e]);
            if (j = O(Rb, l, b, v)) {
                v.readyState = 1,
                i && n.trigger("ajaxSend", [v, l]),
                l.async && l.timeout > 0 && (h = setTimeout(function() {
                    v.abort("timeout")
                },
                l.timeout));
                try {
                    t = 1,
                    j.send(r, c)
                } catch(w) {
                    if (! (2 > t)) throw w;
                    c( - 1, w)
                }
            } else c( - 1, "No Transport");
            return v
        },
        getJSON: function(a, b, c) {
            return ea.get(a, b, c, "json")
        },
        getScript: function(a, b) {
            return ea.get(a, void 0, b, "script")
        }
    }),
    ea.each(["get", "post"],
    function(a, b) {
        ea[b] = function(a, c, d, e) {
            return ea.isFunction(c) && (e = e || d, d = c, c = void 0),
            ea.ajax({
                url: a,
                type: b,
                dataType: e,
                data: c,
                success: d
            })
        }
    }),
    ea.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"],
    function(a, b) {
        ea.fn[b] = function(a) {
            return this.on(b, a)
        }
    }),
    ea._evalUrl = function(a) {
        return ea.ajax({
            url: a,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    },
    ea.fn.extend({
        wrapAll: function(a) {
            if (ea.isFunction(a)) return this.each(function(b) {
                ea(this).wrapAll(a.call(this, b))
            });
            if (this[0]) {
                var b = ea(a, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && b.insertBefore(this[0]),
                b.map(function() {
                    for (var a = this; a.firstChild && 1 === a.firstChild.nodeType;) a = a.firstChild;
                    return a
                }).append(this)
            }
            return this
        },
        wrapInner: function(a) {
            return this.each(ea.isFunction(a) ?
            function(b) {
                ea(this).wrapInner(a.call(this, b))
            }: function() {
                var b = ea(this),
                c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a)
            })
        },
        wrap: function(a) {
            var b = ea.isFunction(a);
            return this.each(function(c) {
                ea(this).wrapAll(b ? a.call(this, c) : a)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                ea.nodeName(this, "body") || ea(this).replaceWith(this.childNodes)
            }).end()
        }
    }),
    ea.expr.filters.hidden = function(a) {
        return a.offsetWidth <= 0 && a.offsetHeight <= 0 || !ca.reliableHiddenOffsets() && "none" === (a.style && a.style.display || ea.css(a, "display"))
    },
    ea.expr.filters.visible = function(a) {
        return ! ea.expr.filters.hidden(a)
    };
    var Ub = /%20/g,
    Vb = /\[\]$/,
    Wb = /\r?\n/g,
    Xb = /^(?:submit|button|image|reset|file)$/i,
    Yb = /^(?:input|select|textarea|keygen)/i;
    ea.param = function(a, b) {
        var c, d = [],
        e = function(a, b) {
            b = ea.isFunction(b) ? b() : null == b ? "": b,
            d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
        };
        if (void 0 === b && (b = ea.ajaxSettings && ea.ajaxSettings.traditional), ea.isArray(a) || a.jquery && !ea.isPlainObject(a)) ea.each(a,
        function() {
            e(this.name, this.value)
        });
        else for (c in a) S(c, a[c], b, e);
        return d.join("&").replace(Ub, "+")
    },
    ea.fn.extend({
        serialize: function() {
            return ea.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var a = ea.prop(this, "elements");
                return a ? ea.makeArray(a) : this
            }).filter(function() {
                var a = this.type;
                return this.name && !ea(this).is(":disabled") && Yb.test(this.nodeName) && !Xb.test(a) && (this.checked || !Ea.test(a))
            }).map(function(a, b) {
                var c = ea(this).val();
                return null == c ? null: ea.isArray(c) ? ea.map(c,
                function(a) {
                    return {
                        name: b.name,
                        value: a.replace(Wb, "\r\n")
                    }
                }) : {
                    name: b.name,
                    value: c.replace(Wb, "\r\n")
                }
            }).get()
        }
    }),
    ea.ajaxSettings.xhr = void 0 !== a.ActiveXObject ?
    function() {
        return ! this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && T() || U()
    }: T;
    var Zb = 0,
    $b = {},
    _b = ea.ajaxSettings.xhr();
    a.ActiveXObject && ea(a).on("unload",
    function() {
        for (var a in $b) $b[a](void 0, !0)
    }),
    ca.cors = !!_b && "withCredentials" in _b,
    _b = ca.ajax = !!_b,
    _b && ea.ajaxTransport(function(a) {
        if (!a.crossDomain || ca.cors) {
            var b;
            return {
                send: function(c, d) {
                    var e, f = a.xhr(),
                    g = ++Zb;
                    if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields) for (e in a.xhrFields) f[e] = a.xhrFields[e];
                    a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType),
                    a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                    for (e in c) void 0 !== c[e] && f.setRequestHeader(e, c[e] + "");
                    f.send(a.hasContent && a.data || null),
                    b = function(c, e) {
                        var h, i, j;
                        if (b && (e || 4 === f.readyState)) if (delete $b[g], b = void 0, f.onreadystatechange = ea.noop, e) 4 !== f.readyState && f.abort();
                        else {
                            j = {},
                            h = f.status,
                            "string" == typeof f.responseText && (j.text = f.responseText);
                            try {
                                i = f.statusText
                            } catch(k) {
                                i = ""
                            }
                            h || !a.isLocal || a.crossDomain ? 1223 === h && (h = 204) : h = j.text ? 200 : 404
                        }
                        j && d(h, i, j, f.getAllResponseHeaders())
                    },
                    a.async ? 4 === f.readyState ? setTimeout(b) : f.onreadystatechange = $b[g] = b: b()
                },
                abort: function() {
                    b && b(void 0, !0)
                }
            }
        }
    }),
    ea.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(a) {
                return ea.globalEval(a),
                a
            }
        }
    }),
    ea.ajaxPrefilter("script",
    function(a) {
        void 0 === a.cache && (a.cache = !1),
        a.crossDomain && (a.type = "GET", a.global = !1)
    }),
    ea.ajaxTransport("script",
    function(a) {
        if (a.crossDomain) {
            var b, c = oa.head || ea("head")[0] || oa.documentElement;
            return {
                send: function(d, e) {
                    b = oa.createElement("script"),
                    b.async = !0,
                    a.scriptCharset && (b.charset = a.scriptCharset),
                    b.src = a.url,
                    b.onload = b.onreadystatechange = function(a, c) { (c || !b.readyState || /loaded|complete/.test(b.readyState)) && (b.onload = b.onreadystatechange = null, b.parentNode && b.parentNode.removeChild(b), b = null, c || e(200, "success"))
                    },
                    c.insertBefore(b, c.firstChild)
                },
                abort: function() {
                    b && b.onload(void 0, !0)
                }
            }
        }
    });
    var ac = [],
    bc = /(=)\?(?=&|$)|\?\?/;
    ea.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var a = ac.pop() || ea.expando + "_" + Eb++;
            return this[a] = !0,
            a
        }
    }),
    ea.ajaxPrefilter("json jsonp",
    function(b, c, d) {
        var e, f, g, h = b.jsonp !== !1 && (bc.test(b.url) ? "url": "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && bc.test(b.data) && "data");
        return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = ea.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(bc, "$1" + e) : b.jsonp !== !1 && (b.url += (Fb.test(b.url) ? "&": "?") + b.jsonp + "=" + e), b.converters["script json"] = function() {
            return g || ea.error(e + " was not called"),
            g[0]
        },
        b.dataTypes[0] = "json", f = a[e], a[e] = function() {
            g = arguments
        },
        d.always(function() {
            a[e] = f,
            b[e] && (b.jsonpCallback = c.jsonpCallback, ac.push(e)),
            g && ea.isFunction(f) && f(g[0]),
            g = f = void 0
        }), "script") : void 0
    }),
    ea.parseHTML = function(a, b, c) {
        if (!a || "string" != typeof a) return null;
        "boolean" == typeof b && (c = b, b = !1),
        b = b || oa;
        var d = la.exec(a),
        e = !c && [];
        return d ? [b.createElement(d[1])] : (d = ea.buildFragment([a], b, e), e && e.length && ea(e).remove(), ea.merge([], d.childNodes))
    };
    var cc = ea.fn.load;
    ea.fn.load = function(a, b, c) {
        if ("string" != typeof a && cc) return cc.apply(this, arguments);
        var d, e, f, g = this,
        h = a.indexOf(" ");
        return h >= 0 && (d = ea.trim(a.slice(h, a.length)), a = a.slice(0, h)),
        ea.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (f = "POST"),
        g.length > 0 && ea.ajax({
            url: a,
            type: f,
            dataType: "html",
            data: b
        }).done(function(a) {
            e = arguments,
            g.html(d ? ea("<div>").append(ea.parseHTML(a)).find(d) : a)
        }).complete(c &&
        function(a, b) {
            g.each(c, e || [a.responseText, b, a])
        }),
        this
    },
    ea.expr.filters.animated = function(a) {
        return ea.grep(ea.timers,
        function(b) {
            return a === b.elem
        }).length
    };
    var dc = a.document.documentElement;
    ea.offset = {
        setOffset: function(a, b, c) {
            var d, e, f, g, h, i, j, k = ea.css(a, "position"),
            l = ea(a),
            m = {};
            "static" === k && (a.style.position = "relative"),
            h = l.offset(),
            f = ea.css(a, "top"),
            i = ea.css(a, "left"),
            j = ("absolute" === k || "fixed" === k) && ea.inArray("auto", [f, i]) > -1,
            j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0),
            ea.isFunction(b) && (b = b.call(a, c, h)),
            null != b.top && (m.top = b.top - h.top + g),
            null != b.left && (m.left = b.left - h.left + e),
            "using" in b ? b.using.call(a, m) : l.css(m)
        }
    },
    ea.fn.extend({
        offset: function(a) {
            if (arguments.length) return void 0 === a ? this: this.each(function(b) {
                ea.offset.setOffset(this, a, b)
            });
            var b, c, d = {
                top: 0,
                left: 0
            },
            e = this[0],
            f = e && e.ownerDocument;
            return f ? (b = f.documentElement, ea.contains(b, e) ? (typeof e.getBoundingClientRect !== xa && (d = e.getBoundingClientRect()), c = V(f), {
                top: d.top + (c.pageYOffset || b.scrollTop) - (b.clientTop || 0),
                left: d.left + (c.pageXOffset || b.scrollLeft) - (b.clientLeft || 0)
            }) : d) : void 0
        },
        position: function() {
            if (this[0]) {
                var a, b, c = {
                    top: 0,
                    left: 0
                },
                d = this[0];
                return "fixed" === ea.css(d, "position") ? b = d.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), ea.nodeName(a[0], "html") || (c = a.offset()), c.top += ea.css(a[0], "borderTopWidth", !0), c.left += ea.css(a[0], "borderLeftWidth", !0)),
                {
                    top: b.top - c.top - ea.css(d, "marginTop", !0),
                    left: b.left - c.left - ea.css(d, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var a = this.offsetParent || dc; a && !ea.nodeName(a, "html") && "static" === ea.css(a, "position");) a = a.offsetParent;
                return a || dc
            })
        }
    }),
    ea.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    },
    function(a, b) {
        var c = /Y/.test(b);
        ea.fn[a] = function(d) {
            return Da(this,
            function(a, d, e) {
                var f = V(a);
                return void 0 === e ? f ? b in f ? f[b] : f.document.documentElement[d] : a[d] : void(f ? f.scrollTo(c ? ea(f).scrollLeft() : e, c ? e: ea(f).scrollTop()) : a[d] = e)
            },
            a, d, arguments.length, null)
        }
    }),
    ea.each(["top", "left"],
    function(a, b) {
        ea.cssHooks[b] = A(ca.pixelPosition,
        function(a, c) {
            return c ? (c = bb(a, b), db.test(c) ? ea(a).position()[b] + "px": c) : void 0
        })
    }),
    ea.each({
        Height: "height",
        Width: "width"
    },
    function(a, b) {
        ea.each({
            padding: "inner" + a,
            content: b,
            "": "outer" + a
        },
        function(c, d) {
            ea.fn[d] = function(d, e) {
                var f = arguments.length && (c || "boolean" != typeof d),
                g = c || (d === !0 || e === !0 ? "margin": "border");
                return Da(this,
                function(b, c, d) {
                    var e;
                    return ea.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? ea.css(b, c, g) : ea.style(b, c, d, g)
                },
                b, f ? d: void 0, f, null)
            }
        })
    }),
    ea.fn.size = function() {
        return this.length
    },
    ea.fn.andSelf = ea.fn.addBack,
    "function" == typeof define && define.amd && define("jquery", [],
    function() {
        return ea
    });
    var ec = a.jQuery,
    fc = a.$;
    return ea.noConflict = function(b) {
        return a.$ === ea && (a.$ = fc),
        b && a.jQuery === ea && (a.jQuery = ec),
        ea
    },
    typeof b === xa && (a.jQuery = a.$ = ea),
    ea
}),
function() {
    function a(a) {
        function b(b, c, d, e, f, g) {
            for (; f >= 0 && g > f; f += a) {
                var h = e ? e[f] : f;
                d = c(d, b[h], h, b)
            }
            return d
        }
        return function(c, d, e, f) {
            d = s(d, f, 4);
            var g = !x(c) && r.keys(c),
            h = (g || c).length,
            i = a > 0 ? 0 : h - 1;
            return arguments.length < 3 && (e = c[g ? g[i] : i], i += a),
            b(c, d, e, g, i, h)
        }
    }
    function b(a) {
        return function(b, c, d) {
            c = t(c, d);
            for (var e = null != b && b.length,
            f = a > 0 ? 0 : e - 1; f >= 0 && e > f; f += a) if (c(b[f], f, b)) return f;
            return - 1
        }
    }
    function c(a, b) {
        var c = C.length,
        d = a.constructor,
        e = r.isFunction(d) && d.prototype || g,
        f = "constructor";
        for (r.has(a, f) && !r.contains(b, f) && b.push(f); c--;) f = C[c],
        f in a && a[f] !== e[f] && !r.contains(b, f) && b.push(f)
    }
    var d = this,
    e = d._,
    f = Array.prototype,
    g = Object.prototype,
    h = Function.prototype,
    i = f.push,
    j = f.slice,
    k = g.toString,
    l = g.hasOwnProperty,
    m = Array.isArray,
    n = Object.keys,
    o = h.bind,
    p = Object.create,
    q = function() {},
    r = function(a) {
        return a instanceof r ? a: this instanceof r ? void(this._wrapped = a) : new r(a)
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = r), exports._ = r) : d._ = r,
    r.VERSION = "1.8.2";
    var s = function(a, b, c) {
        if (void 0 === b) return a;
        switch (null == c ? 3 : c) {
        case 1:
            return function(c) {
                return a.call(b, c)
            };
        case 2:
            return function(c, d) {
                return a.call(b, c, d)
            };
        case 3:
            return function(c, d, e) {
                return a.call(b, c, d, e)
            };
        case 4:
            return function(c, d, e, f) {
                return a.call(b, c, d, e, f)
            }
        }
        return function() {
            return a.apply(b, arguments)
        }
    },
    t = function(a, b, c) {
        return null == a ? r.identity: r.isFunction(a) ? s(a, b, c) : r.isObject(a) ? r.matcher(a) : r.property(a)
    };
    r.iteratee = function(a, b) {
        return t(a, b, 1 / 0)
    };
    var u = function(a, b) {
        return function(c) {
            var d = arguments.length;
            if (2 > d || null == c) return c;
            for (var e = 1; d > e; e++) for (var f = arguments[e], g = a(f), h = g.length, i = 0; h > i; i++) {
                var j = g[i];
                b && void 0 !== c[j] || (c[j] = f[j])
            }
            return c
        }
    },
    v = function(a) {
        if (!r.isObject(a)) return {};
        if (p) return p(a);
        q.prototype = a;
        var b = new q;
        return q.prototype = null,
        b
    },
    w = Math.pow(2, 53) - 1,
    x = function(a) {
        var b = a && a.length;
        return "number" == typeof b && b >= 0 && w >= b
    };
    r.each = r.forEach = function(a, b, c) {
        b = s(b, c);
        var d, e;
        if (x(a)) for (d = 0, e = a.length; e > d; d++) b(a[d], d, a);
        else {
            var f = r.keys(a);
            for (d = 0, e = f.length; e > d; d++) b(a[f[d]], f[d], a)
        }
        return a
    },
    r.map = r.collect = function(a, b, c) {
        b = t(b, c);
        for (var d = !x(a) && r.keys(a), e = (d || a).length, f = Array(e), g = 0; e > g; g++) {
            var h = d ? d[g] : g;
            f[g] = b(a[h], h, a)
        }
        return f
    },
    r.reduce = r.foldl = r.inject = a(1),
    r.reduceRight = r.foldr = a( - 1),
    r.find = r.detect = function(a, b, c) {
        var d;
        return d = x(a) ? r.findIndex(a, b, c) : r.findKey(a, b, c),
        void 0 !== d && -1 !== d ? a[d] : void 0
    },
    r.filter = r.select = function(a, b, c) {
        var d = [];
        return b = t(b, c),
        r.each(a,
        function(a, c, e) {
            b(a, c, e) && d.push(a)
        }),
        d
    },
    r.reject = function(a, b, c) {
        return r.filter(a, r.negate(t(b)), c)
    },
    r.every = r.all = function(a, b, c) {
        b = t(b, c);
        for (var d = !x(a) && r.keys(a), e = (d || a).length, f = 0; e > f; f++) {
            var g = d ? d[f] : f;
            if (!b(a[g], g, a)) return ! 1
        }
        return ! 0
    },
    r.some = r.any = function(a, b, c) {
        b = t(b, c);
        for (var d = !x(a) && r.keys(a), e = (d || a).length, f = 0; e > f; f++) {
            var g = d ? d[f] : f;
            if (b(a[g], g, a)) return ! 0
        }
        return ! 1
    },
    r.contains = r.includes = r.include = function(a, b, c) {
        return x(a) || (a = r.values(a)),
        r.indexOf(a, b, "number" == typeof c && c) >= 0
    },
    r.invoke = function(a, b) {
        var c = j.call(arguments, 2),
        d = r.isFunction(b);
        return r.map(a,
        function(a) {
            var e = d ? b: a[b];
            return null == e ? e: e.apply(a, c)
        })
    },
    r.pluck = function(a, b) {
        return r.map(a, r.property(b))
    },
    r.where = function(a, b) {
        return r.filter(a, r.matcher(b))
    },
    r.findWhere = function(a, b) {
        return r.find(a, r.matcher(b))
    },
    r.max = function(a, b, c) {
        var d, e, f = -1 / 0,
        g = -1 / 0;
        if (null == b && null != a) {
            a = x(a) ? a: r.values(a);
            for (var h = 0,
            i = a.length; i > h; h++) d = a[h],
            d > f && (f = d)
        } else b = t(b, c),
        r.each(a,
        function(a, c, d) {
            e = b(a, c, d),
            (e > g || e === -1 / 0 && f === -1 / 0) && (f = a, g = e)
        });
        return f
    },
    r.min = function(a, b, c) {
        var d, e, f = 1 / 0,
        g = 1 / 0;
        if (null == b && null != a) {
            a = x(a) ? a: r.values(a);
            for (var h = 0,
            i = a.length; i > h; h++) d = a[h],
            f > d && (f = d)
        } else b = t(b, c),
        r.each(a,
        function(a, c, d) {
            e = b(a, c, d),
            (g > e || 1 / 0 === e && 1 / 0 === f) && (f = a, g = e)
        });
        return f
    },
    r.shuffle = function(a) {
        for (var b, c = x(a) ? a: r.values(a), d = c.length, e = Array(d), f = 0; d > f; f++) b = r.random(0, f),
        b !== f && (e[f] = e[b]),
        e[b] = c[f];
        return e
    },
    r.sample = function(a, b, c) {
        return null == b || c ? (x(a) || (a = r.values(a)), a[r.random(a.length - 1)]) : r.shuffle(a).slice(0, Math.max(0, b))
    },
    r.sortBy = function(a, b, c) {
        return b = t(b, c),
        r.pluck(r.map(a,
        function(a, c, d) {
            return {
                value: a,
                index: c,
                criteria: b(a, c, d)
            }
        }).sort(function(a, b) {
            var c = a.criteria,
            d = b.criteria;
            if (c !== d) {
                if (c > d || void 0 === c) return 1;
                if (d > c || void 0 === d) return - 1
            }
            return a.index - b.index
        }), "value")
    };
    var y = function(a) {
        return function(b, c, d) {
            var e = {};
            return c = t(c, d),
            r.each(b,
            function(d, f) {
                var g = c(d, f, b);
                a(e, d, g)
            }),
            e
        }
    };
    r.groupBy = y(function(a, b, c) {
        r.has(a, c) ? a[c].push(b) : a[c] = [b]
    }),
    r.indexBy = y(function(a, b, c) {
        a[c] = b
    }),
    r.countBy = y(function(a, b, c) {
        r.has(a, c) ? a[c]++:a[c] = 1
    }),
    r.toArray = function(a) {
        return a ? r.isArray(a) ? j.call(a) : x(a) ? r.map(a, r.identity) : r.values(a) : []
    },
    r.size = function(a) {
        return null == a ? 0 : x(a) ? a.length: r.keys(a).length
    },
    r.partition = function(a, b, c) {
        b = t(b, c);
        var d = [],
        e = [];
        return r.each(a,
        function(a, c, f) { (b(a, c, f) ? d: e).push(a)
        }),
        [d, e]
    },
    r.first = r.head = r.take = function(a, b, c) {
        return null == a ? void 0 : null == b || c ? a[0] : r.initial(a, a.length - b)
    },
    r.initial = function(a, b, c) {
        return j.call(a, 0, Math.max(0, a.length - (null == b || c ? 1 : b)))
    },
    r.last = function(a, b, c) {
        return null == a ? void 0 : null == b || c ? a[a.length - 1] : r.rest(a, Math.max(0, a.length - b))
    },
    r.rest = r.tail = r.drop = function(a, b, c) {
        return j.call(a, null == b || c ? 1 : b)
    },
    r.compact = function(a) {
        return r.filter(a, r.identity)
    };
    var z = function(a, b, c, d) {
        for (var e = [], f = 0, g = d || 0, h = a && a.length; h > g; g++) {
            var i = a[g];
            if (x(i) && (r.isArray(i) || r.isArguments(i))) {
                b || (i = z(i, b, c));
                var j = 0,
                k = i.length;
                for (e.length += k; k > j;) e[f++] = i[j++]
            } else c || (e[f++] = i)
        }
        return e
    };
    r.flatten = function(a, b) {
        return z(a, b, !1)
    },
    r.without = function(a) {
        return r.difference(a, j.call(arguments, 1))
    },
    r.uniq = r.unique = function(a, b, c, d) {
        if (null == a) return [];
        r.isBoolean(b) || (d = c, c = b, b = !1),
        null != c && (c = t(c, d));
        for (var e = [], f = [], g = 0, h = a.length; h > g; g++) {
            var i = a[g],
            j = c ? c(i, g, a) : i;
            b ? (g && f === j || e.push(i), f = j) : c ? r.contains(f, j) || (f.push(j), e.push(i)) : r.contains(e, i) || e.push(i)
        }
        return e
    },
    r.union = function() {
        return r.uniq(z(arguments, !0, !0))
    },
    r.intersection = function(a) {
        if (null == a) return [];
        for (var b = [], c = arguments.length, d = 0, e = a.length; e > d; d++) {
            var f = a[d];
            if (!r.contains(b, f)) {
                for (var g = 1; c > g && r.contains(arguments[g], f); g++);
                g === c && b.push(f)
            }
        }
        return b
    },
    r.difference = function(a) {
        var b = z(arguments, !0, !0, 1);
        return r.filter(a,
        function(a) {
            return ! r.contains(b, a)
        })
    },
    r.zip = function() {
        return r.unzip(arguments)
    },
    r.unzip = function(a) {
        for (var b = a && r.max(a, "length").length || 0, c = Array(b), d = 0; b > d; d++) c[d] = r.pluck(a, d);
        return c
    },
    r.object = function(a, b) {
        for (var c = {},
        d = 0,
        e = a && a.length; e > d; d++) b ? c[a[d]] = b[d] : c[a[d][0]] = a[d][1];
        return c
    },
    r.indexOf = function(a, b, c) {
        var d = 0,
        e = a && a.length;
        if ("number" == typeof c) d = 0 > c ? Math.max(0, e + c) : c;
        else if (c && e) return d = r.sortedIndex(a, b),
        a[d] === b ? d: -1;
        if (b !== b) return r.findIndex(j.call(a, d), r.isNaN);
        for (; e > d; d++) if (a[d] === b) return d;
        return - 1
    },
    r.lastIndexOf = function(a, b, c) {
        var d = a ? a.length: 0;
        if ("number" == typeof c && (d = 0 > c ? d + c + 1 : Math.min(d, c + 1)), b !== b) return r.findLastIndex(j.call(a, 0, d), r.isNaN);
        for (; --d >= 0;) if (a[d] === b) return d;
        return - 1
    },
    r.findIndex = b(1),
    r.findLastIndex = b( - 1),
    r.sortedIndex = function(a, b, c, d) {
        c = t(c, d, 1);
        for (var e = c(b), f = 0, g = a.length; g > f;) {
            var h = Math.floor((f + g) / 2);
            c(a[h]) < e ? f = h + 1 : g = h
        }
        return f
    },
    r.range = function(a, b, c) {
        arguments.length <= 1 && (b = a || 0, a = 0),
        c = c || 1;
        for (var d = Math.max(Math.ceil((b - a) / c), 0), e = Array(d), f = 0; d > f; f++, a += c) e[f] = a;
        return e
    };
    var A = function(a, b, c, d, e) {
        if (! (d instanceof b)) return a.apply(c, e);
        var f = v(a.prototype),
        g = a.apply(f, e);
        return r.isObject(g) ? g: f
    };
    r.bind = function(a, b) {
        if (o && a.bind === o) return o.apply(a, j.call(arguments, 1));
        if (!r.isFunction(a)) throw new TypeError("Bind must be called on a function");
        var c = j.call(arguments, 2),
        d = function() {
            return A(a, d, b, this, c.concat(j.call(arguments)))
        };
        return d
    },
    r.partial = function(a) {
        var b = j.call(arguments, 1),
        c = function() {
            for (var d = 0,
            e = b.length,
            f = Array(e), g = 0; e > g; g++) f[g] = b[g] === r ? arguments[d++] : b[g];
            for (; d < arguments.length;) f.push(arguments[d++]);
            return A(a, c, this, this, f)
        };
        return c
    },
    r.bindAll = function(a) {
        var b, c, d = arguments.length;
        if (1 >= d) throw new Error("bindAll must be passed function names");
        for (b = 1; d > b; b++) c = arguments[b],
        a[c] = r.bind(a[c], a);
        return a
    },
    r.memoize = function(a, b) {
        var c = function(d) {
            var e = c.cache,
            f = "" + (b ? b.apply(this, arguments) : d);
            return r.has(e, f) || (e[f] = a.apply(this, arguments)),
            e[f]
        };
        return c.cache = {},
        c
    },
    r.delay = function(a, b) {
        var c = j.call(arguments, 2);
        return setTimeout(function() {
            return a.apply(null, c)
        },
        b)
    },
    r.defer = r.partial(r.delay, r, 1),
    r.throttle = function(a, b, c) {
        var d, e, f, g = null,
        h = 0;
        c || (c = {});
        var i = function() {
            h = c.leading === !1 ? 0 : r.now(),
            g = null,
            f = a.apply(d, e),
            g || (d = e = null)
        };
        return function() {
            var j = r.now();
            h || c.leading !== !1 || (h = j);
            var k = b - (j - h);
            return d = this,
            e = arguments,
            0 >= k || k > b ? (g && (clearTimeout(g), g = null), h = j, f = a.apply(d, e), g || (d = e = null)) : g || c.trailing === !1 || (g = setTimeout(i, k)),
            f
        }
    },
    r.debounce = function(a, b, c) {
        var d, e, f, g, h, i = function() {
            var j = r.now() - g;
            b > j && j >= 0 ? d = setTimeout(i, b - j) : (d = null, c || (h = a.apply(f, e), d || (f = e = null)))
        };
        return function() {
            f = this,
            e = arguments,
            g = r.now();
            var j = c && !d;
            return d || (d = setTimeout(i, b)),
            j && (h = a.apply(f, e), f = e = null),
            h
        }
    },
    r.wrap = function(a, b) {
        return r.partial(b, a)
    },
    r.negate = function(a) {
        return function() {
            return ! a.apply(this, arguments)
        }
    },
    r.compose = function() {
        var a = arguments,
        b = a.length - 1;
        return function() {
            for (var c = b,
            d = a[b].apply(this, arguments); c--;) d = a[c].call(this, d);
            return d
        }
    },
    r.after = function(a, b) {
        return function() {
            return--a < 1 ? b.apply(this, arguments) : void 0
        }
    },
    r.before = function(a, b) {
        var c;
        return function() {
            return--a > 0 && (c = b.apply(this, arguments)),
            1 >= a && (b = null),
            c
        }
    },
    r.once = r.partial(r.before, 2);
    var B = !{
        toString: null
    }.propertyIsEnumerable("toString"),
    C = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
    r.keys = function(a) {
        if (!r.isObject(a)) return [];
        if (n) return n(a);
        var b = [];
        for (var d in a) r.has(a, d) && b.push(d);
        return B && c(a, b),
        b
    },
    r.allKeys = function(a) {
        if (!r.isObject(a)) return [];
        var b = [];
        for (var d in a) b.push(d);
        return B && c(a, b),
        b
    },
    r.values = function(a) {
        for (var b = r.keys(a), c = b.length, d = Array(c), e = 0; c > e; e++) d[e] = a[b[e]];
        return d
    },
    r.mapObject = function(a, b, c) {
        b = t(b, c);
        for (var d, e = r.keys(a), f = e.length, g = {},
        h = 0; f > h; h++) d = e[h],
        g[d] = b(a[d], d, a);
        return g
    },
    r.pairs = function(a) {
        for (var b = r.keys(a), c = b.length, d = Array(c), e = 0; c > e; e++) d[e] = [b[e], a[b[e]]];
        return d
    },
    r.invert = function(a) {
        for (var b = {},
        c = r.keys(a), d = 0, e = c.length; e > d; d++) b[a[c[d]]] = c[d];
        return b
    },
    r.functions = r.methods = function(a) {
        var b = [];
        for (var c in a) r.isFunction(a[c]) && b.push(c);
        return b.sort()
    },
    r.extend = u(r.allKeys),
    r.extendOwn = r.assign = u(r.keys),
    r.findKey = function(a, b, c) {
        b = t(b, c);
        for (var d, e = r.keys(a), f = 0, g = e.length; g > f; f++) if (d = e[f], b(a[d], d, a)) return d
    },
    r.pick = function(a, b, c) {
        var d, e, f = {},
        g = a;
        if (null == g) return f;
        r.isFunction(b) ? (e = r.allKeys(g), d = s(b, c)) : (e = z(arguments, !1, !1, 1), d = function(a, b, c) {
            return b in c
        },
        g = Object(g));
        for (var h = 0,
        i = e.length; i > h; h++) {
            var j = e[h],
            k = g[j];
            d(k, j, g) && (f[j] = k)
        }
        return f
    },
    r.omit = function(a, b, c) {
        if (r.isFunction(b)) b = r.negate(b);
        else {
            var d = r.map(z(arguments, !1, !1, 1), String);
            b = function(a, b) {
                return ! r.contains(d, b)
            }
        }
        return r.pick(a, b, c)
    },
    r.defaults = u(r.allKeys, !0),
    r.clone = function(a) {
        return r.isObject(a) ? r.isArray(a) ? a.slice() : r.extend({},
        a) : a
    },
    r.tap = function(a, b) {
        return b(a),
        a
    },
    r.isMatch = function(a, b) {
        var c = r.keys(b),
        d = c.length;
        if (null == a) return ! d;
        for (var e = Object(a), f = 0; d > f; f++) {
            var g = c[f];
            if (b[g] !== e[g] || !(g in e)) return ! 1
        }
        return ! 0
    };
    var D = function(a, b, c, d) {
        if (a === b) return 0 !== a || 1 / a === 1 / b;
        if (null == a || null == b) return a === b;
        a instanceof r && (a = a._wrapped),
        b instanceof r && (b = b._wrapped);
        var e = k.call(a);
        if (e !== k.call(b)) return ! 1;
        switch (e) {
        case "[object RegExp]":
        case "[object String]":
            return "" + a == "" + b;
        case "[object Number]":
            return + a !== +a ? +b !== +b: 0 === +a ? 1 / +a === 1 / b: +a === +b;
        case "[object Date]":
        case "[object Boolean]":
            return + a === +b
        }
        var f = "[object Array]" === e;
        if (!f) {
            if ("object" != typeof a || "object" != typeof b) return ! 1;
            var g = a.constructor,
            h = b.constructor;
            if (g !== h && !(r.isFunction(g) && g instanceof g && r.isFunction(h) && h instanceof h) && "constructor" in a && "constructor" in b) return ! 1
        }
        c = c || [],
        d = d || [];
        for (var i = c.length; i--;) if (c[i] === a) return d[i] === b;
        if (c.push(a), d.push(b), f) {
            if (i = a.length, i !== b.length) return ! 1;
            for (; i--;) if (!D(a[i], b[i], c, d)) return ! 1
        } else {
            var j, l = r.keys(a);
            if (i = l.length, r.keys(b).length !== i) return ! 1;
            for (; i--;) if (j = l[i], !r.has(b, j) || !D(a[j], b[j], c, d)) return ! 1
        }
        return c.pop(),
        d.pop(),
        !0
    };
    r.isEqual = function(a, b) {
        return D(a, b)
    },
    r.isEmpty = function(a) {
        return null == a ? !0 : x(a) && (r.isArray(a) || r.isString(a) || r.isArguments(a)) ? 0 === a.length: 0 === r.keys(a).length
    },
    r.isElement = function(a) {
        return ! (!a || 1 !== a.nodeType)
    },
    r.isArray = m ||
    function(a) {
        return "[object Array]" === k.call(a)
    },
    r.isObject = function(a) {
        var b = typeof a;
        return "function" === b || "object" === b && !!a
    },
    r.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"],
    function(a) {
        r["is" + a] = function(b) {
            return k.call(b) === "[object " + a + "]"
        }
    }),
    r.isArguments(arguments) || (r.isArguments = function(a) {
        return r.has(a, "callee")
    }),
    "function" != typeof / . / &&"object" != typeof Int8Array && (r.isFunction = function(a) {
        return "function" == typeof a || !1
    }),
    r.isFinite = function(a) {
        return isFinite(a) && !isNaN(parseFloat(a))
    },
    r.isNaN = function(a) {
        return r.isNumber(a) && a !== +a
    },
    r.isBoolean = function(a) {
        return a === !0 || a === !1 || "[object Boolean]" === k.call(a)
    },
    r.isNull = function(a) {
        return null === a
    },
    r.isUndefined = function(a) {
        return void 0 === a
    },
    r.has = function(a, b) {
        return null != a && l.call(a, b)
    },
    r.noConflict = function() {
        return d._ = e,
        this
    },
    r.identity = function(a) {
        return a
    },
    r.constant = function(a) {
        return function() {
            return a
        }
    },
    r.noop = function() {},
    r.property = function(a) {
        return function(b) {
            return null == b ? void 0 : b[a]
        }
    },
    r.propertyOf = function(a) {
        return null == a ?
        function() {}: function(b) {
            return a[b]
        }
    },
    r.matcher = r.matches = function(a) {
        return a = r.extendOwn({},
        a),
        function(b) {
            return r.isMatch(b, a)
        }
    },
    r.times = function(a, b, c) {
        var d = Array(Math.max(0, a));
        b = s(b, c, 1);
        for (var e = 0; a > e; e++) d[e] = b(e);
        return d
    },
    r.random = function(a, b) {
        return null == b && (b = a, a = 0),
        a + Math.floor(Math.random() * (b - a + 1))
    },
    r.now = Date.now ||
    function() {
        return (new Date).getTime()
    };
    var E = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;",
        "`": "&#x60;"
    },
    F = r.invert(E),
    G = function(a) {
        var b = function(b) {
            return a[b]
        },
        c = "(?:" + r.keys(a).join("|") + ")",
        d = RegExp(c),
        e = RegExp(c, "g");
        return function(a) {
            return a = null == a ? "": "" + a,
            d.test(a) ? a.replace(e, b) : a
        }
    };
    r.escape = G(E),
    r.unescape = G(F),
    r.result = function(a, b, c) {
        var d = null == a ? void 0 : a[b];
        return void 0 === d && (d = c),
        r.isFunction(d) ? d.call(a) : d
    };
    var H = 0;
    r.uniqueId = function(a) {
        var b = ++H + "";
        return a ? a + b: b
    },
    r.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var I = /(.)^/,
    J = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "\u2028": "u2028",
        "\u2029": "u2029"
    },
    K = /\\|'|\r|\n|\u2028|\u2029/g,
    L = function(a) {
        return "\\" + J[a]
    };
    r.template = function(a, b, c) { ! b && c && (b = c),
        b = r.defaults({},
        b, r.templateSettings);
        var d = RegExp([(b.escape || I).source, (b.interpolate || I).source, (b.evaluate || I).source].join("|") + "|$", "g"),
        e = 0,
        f = "__p+='";
        a.replace(d,
        function(b, c, d, g, h) {
            return f += a.slice(e, h).replace(K, L),
            e = h + b.length,
            c ? f += "'+\n((__t=(" + c + "))==null?'':_.escape(__t))+\n'": d ? f += "'+\n((__t=(" + d + "))==null?'':__t)+\n'": g && (f += "';\n" + g + "\n__p+='"),
            b
        }),
        f += "';\n",
        b.variable || (f = "with(obj||{}){\n" + f + "}\n"),
        f = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + f + "return __p;\n";
        try {
            var g = new Function(b.variable || "obj", "_", f)
        } catch(h) {
            throw h.source = f,
            h
        }
        var i = function(a) {
            return g.call(this, a, r)
        },
        j = b.variable || "obj";
        return i.source = "function(" + j + "){\n" + f + "}",
        i
    },
    r.chain = function(a) {
        var b = r(a);
        return b._chain = !0,
        b
    };
    var M = function(a, b) {
        return a._chain ? r(b).chain() : b
    };
    r.mixin = function(a) {
        r.each(r.functions(a),
        function(b) {
            var c = r[b] = a[b];
            r.prototype[b] = function() {
                var a = [this._wrapped];
                return i.apply(a, arguments),
                M(this, c.apply(r, a))
            }
        })
    },
    r.mixin(r),
    r.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"],
    function(a) {
        var b = f[a];
        r.prototype[a] = function() {
            var c = this._wrapped;
            return b.apply(c, arguments),
            "shift" !== a && "splice" !== a || 0 !== c.length || delete c[0],
            M(this, c)
        }
    }),
    r.each(["concat", "join", "slice"],
    function(a) {
        var b = f[a];
        r.prototype[a] = function() {
            return M(this, b.apply(this._wrapped, arguments))
        }
    }),
    r.prototype.value = function() {
        return this._wrapped
    },
    r.prototype.valueOf = r.prototype.toJSON = r.prototype.value,
    r.prototype.toString = function() {
        return "" + this._wrapped
    },
    "function" == typeof define && define.amd && define("underscore", [],
    function() {
        return r
    })
}.call(this);
var B9l = {
    v0C: function(a, b) {
        return a instanceof b
    },
    h93: function(a, b) {
        return a > b
    },
    H0C: function(a, b) {
        return b > a
    },
    D23: function(a, b) {
        return a * b
    },
    a1S: function(a, b) {
        return a * b
    },
    o1C: function(a, b) {
        return a == b
    },
    B63: function(a, b) {
        return a * b
    },
    j7: function(a, b) {
        return a - b
    },
    x2: function(a, b) {
        return b > a
    },
    S6: function(a, b) {
        return a == b
    },
    m93: function(a, b) {
        return a * b
    },
    p6S: function(a, b) {
        return a * b
    },
    Q56: function(a, b) {
        return b > a
    },
    D0S: function(a, b) {
        return a == b
    },
    i66: function(a, b) {
        return b > a
    },
    C8C: function(a, b) {
        return a instanceof b
    },
    G1C: function(a, b) {
        return a == b
    },
    O3: function(a, b) {
        return a > b
    },
    x5S: function(a, b) {
        return a * b
    },
    n3: function(a, b) {
        return a * b
    },
    v2: function(a, b) {
        return a - b
    },
    p7S: function(a, b) {
        return a > b
    },
    i0C: function(a, b) {
        return a instanceof b
    },
    q23: function(a, b) {
        return a - b
    },
    k53: function(a, b) {
        return a / b
    },
    I3C: function(a, b) {
        return b >= a
    },
    D06: function(a, b) {
        return a > b
    },
    L9: function(a, b) {
        return a - b
    },
    w33: function(a, b) {
        return a * b
    },
    l9S: function(a, b) {
        return a * b
    },
    b76: function(a, b) {
        return a != b
    },
    T46: function(a, b) {
        return a == b
    },
    F36: function(a, b) {
        return a == b
    },
    x56: function(a, b) {
        return a != b
    },
    Y16: function(a, b) {
        return a / b
    },
    s36: function(a, b) {
        return a > b
    },
    u16: function(a, b) {
        return a * b
    },
    r63: function(a, b) {
        return a == b
    },
    Y0S: function(a, b) {
        return a >= b
    },
    I6C: function(a, b) {
        return a - b
    },
    L8: function(a, b) {
        return a == b
    },
    H4C: function(a, b) {
        return a === b
    },
    k46: function(a, b) {
        return a / b
    },
    A03: function(a, b) {
        return a instanceof b
    },
    n3S: function(a, b) {
        return a >= b
    },
    M6S: function(a, b) {
        return a >= b
    },
    Z2S: function(a, b) {
        return a * b
    },
    x93: function(a, b) {
        return a * b
    },
    N3: function(a, b) {
        return a * b
    },
    d5: function(a, b) {
        return a >= b
    },
    J9: function(a, b) {
        return a == b
    },
    Y13: function(a, b) {
        return a * b
    },
    X6S: function(a, b) {
        return a * b
    },
    s7S: function(a, b) {
        return a * b
    },
    p7: function(a, b) {
        return a - b
    },
    W8S: function(a, b) {
        return b > a
    },
    t0C: function(a, b) {
        return b > a
    },
    k5C: function(a, b) {
        return a != b
    },
    y8C: function(a, b) {
        return a instanceof b
    },
    H73: function(a, b) {
        return a == b
    },
    e3: function(a, b) {
        return a - b
    },
    X53: function(a, b) {
        return a instanceof b
    },
    K1S: function(a, b) {
        return a * b
    },
    c86: function(a, b) {
        return a != b
    },
    d86: function(a, b) {
        return a != b
    },
    G8C: function(a, b) {
        return b > a
    },
    r96: function(a, b) {
        return a == b
    },
    g3: function(a, b) {
        return a * b
    },
    s7: function(a, b) {
        return a != b
    },
    U36: function(a, b) {
        return a >= b
    },
    M9S: function(a, b) {
        return b > a
    },
    Z0C: function(a, b) {
        return a > b
    },
    V0S: function(a, b) {
        return a * b
    },
    r16: function(a, b) {
        return a / b
    },
    E4C: function(a, b) {
        return a === b
    },
    V6C: function(a, b) {
        return a * b
    },
    B13: function(a, b) {
        return a * b
    },
    n6S: function(a, b) {
        return a * b
    },
    F3: function(a, b) {
        return a * b
    },
    e66: function(a, b) {
        return a > b
    },
    A5S: function(a, b) {
        return b > a
    },
    Z5S: function(a, b) {
        return a == b
    },
    j3: function(a, b) {
        return a * b
    },
    H9C: function(a, b) {
        return a - b
    },
    s6S: function(a, b) {
        return a * b
    },
    p5C: function(a, b) {
        return a > b
    },
    n7: function(a, b) {
        return a != b
    },
    d4C: function(a, b) {
        return a !== b
    },
    M83: function(a, b) {
        return a * b
    },
    b63: function(a, b) {
        return a != b
    },
    Q1S: function(a, b) {
        return a * b
    },
    c4C: function(a, b) {
        return a !== b
    },
    r0S: function(a, b) {
        return a >= b
    },
    E56: function(a, b) {
        return a * b
    },
    w76: function(a, b) {
        return a !== b
    },
    r33: function(a, b) {
        return a * b
    },
    E1S: function(a, b) {
        return a * b
    },
    R63: function(a, b) {
        return a == b
    },
    Z4C: function(a, b) {
        return a !== b
    },
    P5: function(a, b) {
        return a > b
    },
    C1S: function(a, b) {
        return a * b
    },
    U1C: function(a, b) {
        return a == b
    },
    r3C: function(a, b) {
        return a > b
    },
    G6S: function(a, b) {
        return a * b
    },
    X46: function(a, b) {
        return a - b
    },
    x0C: function(a, b) {
        return a instanceof b
    },
    z96: function(a, b) {
        return a instanceof b
    },
    E93: function(a, b) {
        return a % b
    },
    n5C: function(a, b) {
        return b > a
    },
    H5S: function(a, b) {
        return a > b
    },
    L23: function(a, b) {
        return a == b
    },
    j1C: function(a, b) {
        return a instanceof b
    },
    I0S: function(a, b) {
        return a != b
    },
    i56: function(a, b) {
        return a instanceof b
    },
    k1C: function(a, b) {
        return a == b
    },
    R7S: function(a, b) {
        return a > b
    },
    p8C: function(a, b) {
        return a * b
    },
    a2S: function(a, b) {
        return a - b
    },
    I76: function(a, b) {
        return a !== b
    },
    b06: function(a, b) {
        return a == b
    },
    I4S: function(a, b) {
        return a - b
    },
    I8: function(a, b) {
        return a > b
    },
    z6C: function(a, b) {
        return a instanceof b
    },
    T26: function(a, b) {
        return a !== b
    },
    m4C: function(a, b) {
        return a !== b
    },
    Z86: function(a, b) {
        return a == b
    },
    J96: function(a, b) {
        return a != b
    },
    H5: function(a, b) {
        return a == b
    },
    I63: function(a, b) {
        return a instanceof b
    },
    D6C: function(a, b) {
        return a * b
    },
    g8C: function(a, b) {
        return a * b
    },
    A0C: function(a, b) {
        return a instanceof b
    },
    d93: function(a, b) {
        return a * b
    },
    t8C: function(a, b) {
        return a - b
    },
    i9C: function(a, b) {
        return a > b
    },
    X36: function(a, b) {
        return a == b
    },
    a9C: function(a, b) {
        return a - b
    },
    X83: function(a, b) {
        return a * b
    },
    H2: function(a, b) {
        return a - b
    },
    J8S: function(a, b) {
        return a >= b
    },
    z0S: function(a, b) {
        return a * b
    },
    i8: function(a, b) {
        return b > a
    },
    i5S: function(a, b) {
        return a / b
    },
    e9S: function(a, b) {
        return b > a
    },
    h86: function(a, b) {
        return a !== b
    },
    D76: function(a, b) {
        return a !== b
    },
    o83: function(a, b) {
        return a * b
    },
    y43: function(a, b) {
        return b >= a
    },
    o3S: function(a, b) {
        return a > b
    },
    v03: function(a, b) {
        return a == b
    },
    O6S: function(a, b) {
        return b > a
    },
    a3S: function(a, b) {
        return a * b
    },
    w3C: function(a, b) {
        return b > a
    },
    w96: function(a, b) {
        return a == b
    },
    R0S: function(a, b) {
        return a > b
    },
    m73: function(a, b) {
        return a * b
    },
    m9C: function(a, b) {
        return a > b
    },
    f33: function(a, b) {
        return a * b
    },
    D3C: function(a, b) {
        return b > a
    },
    f23: function(a, b) {
        return a * b
    },
    z4S: function(a, b) {
        return a != b
    },
    N6S: function(a, b) {
        return a * b
    },
    Z9C: function(a, b) {
        return a > b
    },
    i03: function(a, b) {
        return a == b
    },
    o8C: function(a, b, c) {
        return a - b - c
    },
    E2: function(a, b) {
        return a - b
    },
    P56: function(a, b) {
        return a > b
    },
    a8C: function(a, b) {
        return a instanceof b
    },
    F9S: function(a, b) {
        return a * b
    },
    x03: function(a, b) {
        return a >= b
    },
    n36: function(a, b) {
        return a - b
    },
    E8C: function(a, b) {
        return a * b
    },
    g5C: function(a, b) {
        return b > a
    },
    A93: function(a, b) {
        return a * b
    },
    A2S: function(a, b) {
        return a * b
    },
    h8C: function(a, b) {
        return a - b
    },
    L8S: function(a, b) {
        return a == b
    },
    U7S: function(a, b) {
        return a * b
    },
    I66: function(a, b) {
        return a > b
    },
    v93: function(a, b) {
        return a * b
    },
    W6C: function(a, b) {
        return b > a
    },
    U53: function(a, b) {
        return a > b
    },
    C2S: function(a, b) {
        return a * b
    },
    n43: function(a, b) {
        return a - b
    },
    L16: function(a, b) {
        return a / b
    },
    k6S: function(a, b) {
        return a * b
    },
    x4C: function(a, b) {
        return a !== b
    },
    M53: function(a, b) {
        return a > b
    },
    P9C: function(a, b) {
        return b >= a
    },
    C56: function(a, b) {
        return a !== b
    },
    A86: function(a, b) {
        return a !== b
    },
    b96: function(a, b) {
        return a != b
    },
    O9S: function(a, b) {
        return a == b
    },
    e6S: function(a, b) {
        return b > a
    },
    l36: function(a, b) {
        return a * b
    },
    z13: function(a, b) {
        return a * b
    },
    J33: function(a, b) {
        return a * b
    },
    S7S: function(a, b) {
        return a * b
    },
    N26: function(a, b) {
        return a instanceof b
    },
    X3: function(a, b) {
        return a !== b
    },
    Y76: function(a, b) {
        return a != b
    },
    P2: function(a, b) {
        return a >= b
    },
    B16: function(a, b) {
        return a - b
    },
    o9S: function(a, b) {
        return b > a
    },
    N36: function(a, b) {
        return a > b
    },
    s5C: function(a, b) {
        return a != b
    },
    P2S: function(a, b) {
        return a * b
    },
    W96: function(a, b) {
        return b > a
    },
    H93: function(a, b) {
        return a % b
    },
    m2S: function(a, b) {
        return a * b
    },
    C0: function(a, b) {
        return a / b
    },
    q4S: function(a, b) {
        return a != b
    },
    c73: function(a, b) {
        return a - b
    },
    p83: function(a, b) {
        return a * b
    },
    A4C: function(a, b) {
        return a !== b
    },
    S06: function(a, b) {
        return a == b
    },
    o5C: function(a, b) {
        return a instanceof b
    },
    O13: function(a, b) {
        return a > b
    },
    U83: function(a, b) {
        return a * b
    },
    Y6C: function(a, b) {
        return a * b
    },
    I9: function(a, b) {
        return a > b
    },
    J4S: function(a, b) {
        return a - b
    },
    g1C: function(a, b) {
        return a == b
    },
    Q86: function(a, b) {
        return a !== b
    },
    k26: function(a, b) {
        return a !== b
    },
    m1S: function(a, b) {
        return a * b
    },
    L63: function(a, b) {
        return a != b
    },
    V33: function(a, b) {
        return a * b
    },
    M5C: function(a, b) {
        return b > a
    },
    m03: function(a, b) {
        return a == b
    },
    R8: function(a, b) {
        return a > b
    },
    b4S: function(a, b) {
        return a / b
    },
    Z1S: function(a, b) {
        return a * b
    },
    D13: function(a, b) {
        return a * b
    },
    D63: function(a, b) {
        return a != b
    },
    m86: function(a, b) {
        return a !== b
    },
    D9: function(a, b) {
        return a == b
    },
    j13: function(a, b) {
        return a instanceof b
    },
    Z5: function(a, b) {
        return a == b
    },
    W76: function(a, b) {
        return a !== b
    },
    c56: function(a, b) {
        return a == b
    },
    z9: function(a, b) {
        return a > b
    },
    d03: function(a, b) {
        return a > b
    },
    N3S: function(a, b) {
        return a == b
    },
    S33: function(a, b) {
        return a * b
    },
    g43: function(a, b) {
        return a - b
    },
    s9S: function(a, b) {
        return a * b
    },
    R33: function(a, b) {
        return a * b
    },
    K2: function(a, b) {
        return a >= b
    },
    j43: function(a, b) {
        return a * b
    },
    c2S: function(a, b) {
        return a == b
    },
    X9S: function(a, b) {
        return a * b
    },
    F6S: function(a, b) {
        return a * b
    },
    G5C: function(a, b) {
        return b > a
    },
    f76: function(a, b) {
        return a !== b
    },
    r23: function(a, b) {
        return a > b
    },
    q13: function(a, b) {
        return a * b
    },
    U9S: function(a, b) {
        return a == b
    },
    W23: function(a, b) {
        return a * b
    },
    w13: function(a, b) {
        return a != b
    },
    R76: function(a, b) {
        return a !== b
    },
    u6C: function(a, b) {
        return a instanceof b
    },
    c8: function(a, b) {
        return a != b
    },
    G36: function(a, b) {
        return a > b
    },
    X7S: function(a, b) {
        return a > b
    },
    v2S: function(a, b) {
        return a / b
    },
    q06: function(a, b) {
        return a / b
    },
    U7: function(a, b) {
        return a - b
    },
    G3S: function(a, b) {
        return a != b
    },
    K0: function(a, b) {
        return a !== b
    },
    I96: function(a, b) {
        return a == b
    },
    x0: function(a, b) {
        return a / b
    },
    v9C: function(a, b) {
        return a != b
    },
    t03: function(a, b) {
        return a == b
    },
    u0S: function(a, b) {
        return a * b
    },
    t5S: function(a, b) {
        return a == b
    },
    t56: function(a, b) {
        return a !== b
    },
    K5: function(a, b) {
        return a - b
    },
    B33: function(a, b) {
        return a * b
    },
    s46: function(a, b) {
        return a * b
    },
    Q2S: function(a, b) {
        return a * b
    },
    j53: function(a, b) {
        return a !== b
    },
    u9: function(a, b) {
        return a >= b
    },
    t4C: function(a, b) {
        return a != b
    },
    S9: function(a, b) {
        return a != b
    },
    F1C: function(a, b) {
        return a == b
    },
    O7: function(a, b) {
        return a != b
    },
    p53: function(a, b) {
        return b > a
    },
    E5S: function(a, b) {
        return b > a
    },
    c93: function(a, b) {
        return a * b
    },
    g3S: function(a, b) {
        return a == b
    },
    H3S: function(a, b) {
        return a * b
    },
    A0: function(a, b) {
        return a !== b
    },
    q76: function(a, b) {
        return a !== b
    },
    w0S: function(a, b) {
        return a / b
    },
    Q5S: function(a, b) {
        return a == b
    },
    a03: function(a, b) {
        return a >= b
    },
    s53: function(a, b) {
        return b > a
    },
    Z93: function(a, b) {
        return a * b
    },
    N43: function(a, b) {
        return a > b
    },
    p3S: function(a, b) {
        return a == b
    },
    D4S: function(a, b) {
        return a != b
    },
    v5S: function(a, b) {
        return b >= a
    },
    Q9C: function(a, b) {
        return a - b
    },
    I16: function(a, b) {
        return a * b
    },
    K66: function(a, b, c) {
        return a / b * c
    },
    x86: function(a, b) {
        return a !== b
    },
    m5: function(a, b) {
        return a - b
    },
    v5: function(a, b) {
        return a == b
    },
    h5: function(a, b) {
        return a == b
    },
    N7S: function(a, b) {
        return a > b
    },
    K93: function(a, b) {
        return a - b
    },
    l53: function(a, b) {
        return b > a
    },
    J16: function(a, b) {
        return a / b
    },
    X2C: function(a, b) {
        return a / b
    },
    R6C: function(a, b) {
        return a instanceof b
    },
    t2S: function(a, b) {
        return a * b
    },
    U46: function(a, b) {
        return a / b
    },
    W16: function(a, b) {
        return a * b
    },
    r9: function(a, b) {
        return a * b
    },
    K73: function(a, b) {
        return a * b
    },
    f63: function(a, b) {
        return a * b
    },
    B3C: function(a, b) {
        return a != b
    },
    V4S: function(a, b) {
        return a != b
    },
    F53: function(a, b) {
        return a instanceof b
    },
    j36: function(a, b) {
        return a > b
    },
    R96: function(a, b) {
        return a != b
    },
    J06: function(a, b) {
        return b >= a
    },
    K86: function(a, b) {
        return a !== b
    },
    b6C: function(a, b) {
        return a instanceof b
    },
    E03: function(a, b) {
        return a instanceof b
    },
    a73: function(a, b) {
        return a * b
    },
    I06: function(a, b) {
        return a > b
    },
    y3: function(a, b) {
        return a * b
    },
    r76: function(a, b) {
        return a != b
    },
    K9C: function(a, b) {
        return b >= a
    },
    R9: function(a, b) {
        return a > b
    },
    a56: function(a, b) {
        return a !== b
    },
    z06: function(a, b) {
        return a > b
    },
    L96: function(a, b) {
        return a != b
    },
    e7: function(a, b) {
        return a != b
    },
    f16: function(a, b) {
        return a * b
    },
    G3: function(a, b) {
        return a * b
    },
    e43: function(a, b) {
        return a * b
    },
    n9S: function(a, b) {
        return a == b
    },
    O83: function(a, b) {
        return a * b
    },
    a0C: function(a, b) {
        return b > a
    },
    Z0: function(a, b) {
        return a != b
    },
    T9S: function(a, b) {
        return a == b
    },
    j9S: function(a, b) {
        return a == b
    },
    Q2: function(a, b) {
        return b > a
    },
    P5S: function(a, b) {
        return a > b
    },
    L6C: function(a, b) {
        return a == b
    },
    f13: function(a, b) {
        return a * b
    },
    g83: function(a, b) {
        return a * b
    },
    V06: function(a, b) {
        return a * b
    },
    w06: function(a, b) {
        return a / b
    },
    F8C: function(a, b) {
        return a === b
    },
    Y96: function(a, b) {
        return a instanceof b
    },
    T6S: function(a, b) {
        return a == b
    },
    M13: function(a, b) {
        return a instanceof b
    },
    W13: function(a, b) {
        return a * b
    },
    k36: function(a, b) {
        return a | b
    },
    Y23: function(a, b) {
        return a * b
    },
    T53: function(a, b) {
        return a > b
    },
    u96: function(a, b) {
        return a != b
    },
    h03: function(a, b) {
        return a == b
    },
    Y3C: function(a, b) {
        return a > b
    },
    x8: function(a, b) {
        return a - b
    },
    S16: function(a, b) {
        return a * b
    },
    a5: function(a, b) {
        return a == b
    },
    X3S: function(a, b) {
        return a == b
    },
    g7: function(a, b) {
        return a != b
    },
    s26: function(a, b) {
        return a !== b
    },
    K56: function(a, b) {
        return a == b
    },
    B8S: function(a, b) {
        return a == b
    },
    c5: function(a, b) {
        return a == b
    },
    u8S: function(a, b) {
        return a / b
    },
    n1C: function(a, b) {
        return a == b
    },
    p1C: function(a, b) {
        return a == b
    },
    X1C: function(a, b) {
        return a == b
    },
    V16: function(a, b) {
        return a / b
    },
    t1S: function(a, b) {
        return a * b
    },
    o7S: function(a, b) {
        return a * b
    },
    A1S: function(a, b) {
        return a * b
    },
    R3C: function(a, b) {
        return a != b
    },
    Y4S: function(a, b) {
        return a != b
    },
    B06: function(a, b) {
        return a / b
    },
    e26: function(a, b) {
        return a !== b
    },
    R16: function(a, b) {
        return a * b
    },
    r4S: function(a, b) {
        return a - b
    },
    l6S: function(a, b) {
        return a * b
    },
    X5C: function(a, b) {
        return a * b
    },
    g26: function(a, b) {
        return a !== b
    },
    U5C: function(a, b) {
        return a != b
    },
    K5S: function(a, b) {
        return a >= b
    },
    t86: function(a, b) {
        return a != b
    },
    O53: function(a, b) {
        return a === b
    },
    F26: function(a, b) {
        return a != b
    },
    t93: function(a, b) {
        return a * b
    },
    Q5: function(a, b) {
        return a > b
    },
    F46: function(a, b) {
        return a * b
    },
    J0S: function(a, b) {
        return a == b
    },
    k83: function(a, b) {
        return a * b
    },
    C93: function(a, b) {
        return a * b
    },
    U26: function(a, b) {
        return a !== b
    },
    x5: function(a, b) {
        return a == b
    },
    E9C: function(a, b) {
        return a / b
    },
    r06: function(a, b) {
        return a == b
    },
    b0S: function(a, b) {
        return a * b
    },
    w6C: function(a, b) {
        return a instanceof b
    },
    l1C: function(a, b) {
        return a == b
    },
    Y8S: function(a, b) {
        return a > b
    },
    q6C: function(a, b) {
        return a instanceof b
    },
    F3S: function(a, b) {
        return a / b
    },
    M46: function(a, b) {
        return a == b
    },
    b33: function(a, b) {
        return a * b
    },
    s3S: function(a, b) {
        return a == b
    },
    d1S: function(a, b) {
        return a * b
    },
    q9: function(a, b) {
        return a / b
    },
    l7: function(a, b) {
        return a != b
    },
    h1S: function(a, b) {
        return a * b
    },
    d0C: function(a, b) {
        return b > a
    },
    C0C: function(a, b) {
        return a == b
    },
    h7S: function(a, b, c) {
        return a * b * c
    },
    Z8: function(a, b) {
        return a == b
    },
    L3C: function(a, b) {
        return a != b
    },
    T83: function(a, b) {
        return a * b
    },
    z23: function(a, b) {
        return a * b
    },
    M1C: function(a, b) {
        return a instanceof b
    },
    o3: function(a, b) {
        return a == b
    },
    B23: function(a, b) {
        return a * b
    },
    h73: function(a, b) {
        return a != b
    },
    n53: function(a, b) {
        return a >= b
    },
    H03: function(a, b) {
        return a >= b
    },
    I23: function(a, b) {
        return a * b
    },
    L33: function(a, b) {
        return a * b
    },
    T3: function(a, b) {
        return a > b
    },
    C5S: function(a, b) {
        return a == b
    },
    s8C: function(a, b) {
        return a == b
    },
    p46: function(a, b) {
        return a != b
    },
    z33: function(a, b) {
        return a * b
    },
    g7S: function(a, b) {
        return a - b
    },
    A5: function(a, b) {
        return a == b
    },
    K0C: function(a, b) {
        return a instanceof b
    },
    e36: function(a, b) {
        return a != b
    },
    s83: function(a, b) {
        return a * b
    },
    H8C: function(a, b) {
        return a * b
    },
    f66: function(a, b) {
        return a / b
    },
    D16: function(a, b) {
        return a - b
    },
    u3C: function(a, b) {
        return a != b
    },
    C9C: function(a, b) {
        return a == b
    },
    K4C: function(a, b) {
        return a !== b
    },
    l83: function(a, b) {
        return a * b
    },
    O43: function(a, b) {
        return a * b
    },
    G53: function(a, b) {
        return a >= b
    },
    i5: function(a, b) {
        return a > b
    },
    M26: function(a, b) {
        return a !== b
    },
    K8: function(a, b) {
        return a > b
    },
    y9S: function(a, b) {
        return a == b
    },
    Q8: function(a, b) {
        return a > b
    },
    o7: function(a, b) {
        return a - b
    },
    A73: function(a, b) {
        return a * b
    },
    S23: function(a, b) {
        return a * b
    },
    X8C: function(a, b) {
        return a != b
    },
    v8: function(a, b) {
        return a > b
    },
    f0S: function(a, b) {
        return a == b
    },
    w63: function(a, b) {
        return a != b
    },
    f06: function(a, b) {
        return a * b
    },
    l2C: function(a, b) {
        return a * b
    },
    O5C: function(a, b) {
        return b >= a
    },
    a86: function(a, b) {
        return a == b
    },
    o53: function(a, b) {
        return a != b
    },
    C5: function(a, b) {
        return a == b
    },
    z16: function(a, b) {
        return a / b
    },
    Q0C: function(a, b) {
        return a == b
    },
    h0: function(a, b) {
        return b > a
    },
    J23: function(a, b) {
        return a * b
    },
    O36: function(a, b) {
        return a == b
    },
    S6C: function(a, b) {
        return a == b
    },
    J66: function(a, b) {
        return a > b
    },
    q0S: function(a, b) {
        return a >= b
    },
    E3S: function(a, b) {
        return a * b
    },
    m0: function(a, b) {
        return a > b
    },
    I13: function(a, b, c) {
        return a - b - c
    },
    W9: function(a, b) {
        return a / b
    },
    v86: function(a, b) {
        return a !== b
    },
    N46: function(a, b) {
        return a != b
    },
    a2: function(a, b) {
        return a - b
    },
    W06: function(a, b) {
        return b >= a
    },
    q33: function(a, b) {
        return a * b
    },
    T36: function(a, b) {
        return a == b
    },
    a5S: function(a, b) {
        return a > b
    },
    o26: function(a, b) {
        return a !== b
    },
    r8S: function(a, b) {
        return a / b
    },
    S63: function(a, b) {
        return a == b
    },
    x73: function(a, b) {
        return a == b
    },
    l3S: function(a, b) {
        return a / b
    },
    n46: function(a, b) {
        return a != b
    },
    B66: function(a, b) {
        return b >= a
    },
    U3S: function(a, b) {
        return a == b
    },
    T1C: function(a, b) {
        return a == b
    },
    W0S: function(a, b) {
        return a == b
    },
    A56: function(a, b) {
        return a - b
    },
    n83: function(a, b) {
        return a * b
    },
    M43: function(a, b) {
        return a * b
    },
    v56: function(a, b) {
        return a - b
    },
    j6S: function(a, b) {
        return a * b
    },
    i2S: function(a, b) {
        return a * b
    },
    R4S: function(a, b) {
        return a * b
    },
    D8S: function(a, b) {
        return b > a
    },
    y83: function(a, b) {
        return a * b
    },
    n8C: function(a, b) {
        return a instanceof b
    },
    E2S: function(a, b) {
        return a * b
    },
    M7S: function(a, b, c) {
        return a * b * c
    },
    B96: function(a, b) {
        return a != b
    },
    E5: function(a, b) {
        return a !== b
    },
    s3: function(a, b) {
        return a == b
    },
    f8S: function(a, b) {
        return a / b
    },
    c0C: function(a, b) {
        return a == b
    },
    E73: function(a, b) {
        return a * b
    },
    u13: function(a, b) {
        return a * b
    },
    k3: function(a, b) {
        return a * b
    },
    r6C: function(a, b) {
        return a == b
    },
    i0: function(a, b) {
        return a > b
    },
    B6C: function(a, b) {
        return a == b
    },
    g9S: function(a, b) {
        return a >= b
    },
    m0C: function(a, b) {
        return a !== b
    },
    y3S: function(a, b) {
        return a - b
    },
    q63: function(a, b) {
        return a - b
    },
    S0S: function(a, b) {
        return b > a
    },
    m2: function(a, b) {
        return a > b
    },
    H56: function(a, b) {
        return a - b
    },
    x1S: function(a, b) {
        return a * b
    },
    p26: function(a, b) {
        return a !== b
    },
    v0: function(a, b) {
        return a !== b
    },
    e1C: function(a, b) {
        return a >= b
    },
    F7: function(a, b) {
        return a != b
    },
    k3S: function(a, b, c) {
        return a * b * c
    },
    Q03: function(a, b) {
        return a == b
    },
    L76: function(a, b) {
        return a != b
    },
    y26: function(a, b) {
        return a instanceof b
    },
    g6S: function(a, b) {
        return a * b
    },
    g46: function(a, b) {
        return a != b
    },
    g36: function(a, b) {
        return a == b
    },
    u76: function(a, b) {
        return a !== b
    },
    u06: function(a, b) {
        return a / b
    },
    y53: function(a, b) {
        return a != b
    },
    h3S: function(a, b) {
        return a * b
    },
    f4S: function(a, b) {
        return a - b
    },
    O26: function(a, b) {
        return a !== b
    },
    P03: function(a, b) {
        return a instanceof b
    },
    P4C: function(a, b) {
        return a != b
    },
    V9: function(a, b) {
        return a / b
    },
    t73: function(a, b) {
        return a == b
    },
    B0S: function(a, b) {
        return a == b
    },
    l26: function(a, b) {
        return a !== b
    },
    P73: function(a, b) {
        return a - b
    },
    Z03: function(a, b) {
        return a >= b
    },
    G7: function(a, b) {
        return a != b
    },
    S8: function(a, b) {
        return b > a
    },
    R8S: function(a, b) {
        return a / b
    },
    q96: function(a, b) {
        return a === b
    },
    w4S: function(a, b) {
        return a - b
    },
    V96: function(a, b) {
        return a === b
    },
    i4C: function(a, b) {
        return a !== b
    },
    L0S: function(a, b) {
        return a > b
    },
    q16: function(a, b) {
        return a * b
    },
    k7: function(a, b) {
        return a - b
    },
    i73: function(a, b) {
        return a == b
    },
    O66: function(a, b) {
        return a > b
    },
    D33: function(a, b) {
        return a * b
    },
    c1S: function(a, b) {
        return a * b
    },
    Y06: function(a, b) {
        return a !== b
    },
    J6C: function(a, b) {
        return a / b
    },
    V3C: function(a, b) {
        return a * b
    },
    h4C: function(a, b) {
        return a === b
    },
    n7S: function(a, b) {
        return a - b
    },
    b23: function(a, b) {
        return a == b
    },
    r8: function(a, b) {
        return a == b
    },
    T7: function(a, b) {
        return a - b
    },
    b8: function(a, b) {
        return a * b
    },
    E86: function(a, b) {
        return a !== b
    },
    p9S: function(a, b) {
        return a != b
    },
    Z2: function(a, b) {
        return a >= b
    },
    p3: function(a, b) {
        return a == b
    },
    w8: function(a, b) {
        return a * b
    },
    O46: function(a, b) {
        return a * b
    },
    K03: function(a, b) {
        return a instanceof b
    },
    M3: function(a, b) {
        return a * b
    },
    m5S: function(a, b) {
        return b > a
    },
    a4C: function(a, b) {
        return a !== b
    },
    R23: function(a, b) {
        return a * b
    },
    C03: function(a, b) {
        return a == b
    },
    N8C: function(a, b) {
        return a * b
    },
    y36: function(a, b) {
        return a > b
    },
    Q93: function(a, b) {
        return a * b
    },
    u33: function(a, b) {
        return a * b
    },
    Q0: function(a, b) {
        return a / b
    },
    N5C: function(a, b) {
        return a == b
    },
    S96: function(a, b) {
        return a != b
    },
    v4C: function(a, b) {
        return a !== b
    },
    S76: function(a, b) {
        return a !== b
    },
    a93: function(a, b) {
        return a * b
    },
    z76: function(a, b) {
        return a !== b
    },
    T5C: function(a, b) {
        return b > a
    },
    k43: function(a, b) {
        return a * b
    },
    u23: function(a, b) {
        return a * b
    },
    P86: function(a, b) {
        return a == b
    },
    c43: function(a, b) {
        return a * b
    },
    N83: function(a, b) {
        return a * b
    },
    y6S: function(a, b) {
        return a * b
    },
    d9C: function(a, b) {
        return a == b
    },
    r66: function(a, b, c) {
        return a / b * c
    },
    H1S: function(a, b) {
        return a * b
    },
    D96: function(a, b) {
        return a != b
    },
    S0: function(a, b) {
        return a == b
    },
    H0: function(a, b, c) {
        return a - b + c
    },
    Z43: function(a, b, c) {
        return a * b * c
    },
    G46: function(a, b) {
        return a != b
    },
    l46: function(a, b) {
        return a * b
    },
    e53: function(a, b) {
        return a % b
    },
    E0C: function(a, b) {
        return a - b
    },
    p43: function(a, b) {
        return a == b
    },
    q8S: function(a, b) {
        return b > a
    },
    i86: function(a, b) {
        return a !== b
    },
    V63: function(a, b) {
        return a != b
    },
    I33: function(a, b) {
        return a * b
    },
    P0C: function(a, b) {
        return a == b
    },
    t9C: function(a, b) {
        return a > b
    },
    n26: function(a, b) {
        return a instanceof b
    },
    c03: function(a, b) {
        return a instanceof b
    },
    F7S: function(a, b) {
        return a == b
    },
    f96: function(a, b) {
        return a != b
    },
    U3: function(a, b) {
        return a * b
    },
    U6S: function(a, b) {
        return a * b
    },
    c5S: function(a, b) {
        return a >= b
    },
    c66: function(a, b) {
        return a == b
    },
    S4S: function(a, b) {
        return a * b
    },
    V13: function(a, b) {
        return a * b
    },
    I8S: function(a, b) {
        return a / b
    },
    d2S: function(a, b) {
        return a * b
    },
    h2S: function(a, b) {
        return a - b
    },
    e5C: function(a, b) {
        return b > a
    },
    S8S: function(a, b) {
        return a != b
    },
    l5C: function(a, b) {
        return a > b
    },
    c2: function(a, b) {
        return a >= b
    },
    k9S: function(a, b) {
        return a == b
    },
    Q73: function(a, b) {
        return a != b
    },
    B4S: function(a, b) {
        return a - b
    },
    u63: function(a, b) {
        return a * b
    },
    c0: function(a, b) {
        return a != b
    },
    V23: function(a, b) {
        return a - b
    },
    C73: function(a, b) {
        return a * b
    },
    s1C: function(a, b) {
        return a == b
    },
    h2: function(a, b) {
        return a == b
    },
    Y63: function(a, b) {
        return a instanceof b
    },
    b9: function(a, b) {
        return a != b
    },
    V8S: function(a, b) {
        return a != b
    },
    o36: function(a, b) {
        return a > b
    },
    P0: function(a, b) {
        return a != b
    },
    N53: function(a, b) {
        return b > a
    },
    N7: function(a, b) {
        return a - b
    },
    Y33: function(a, b) {
        return a * b
    },
    T66: function(a, b) {
        return a * b
    },
    J13: function(a, b) {
        return a >= b
    },
    i93: function(a, b) {
        return a - b
    },
    K2S: function(a, b) {
        return a * b
    },
    B9: function(a, b) {
        return a > b
    },
    h5S: function(a, b) {
        return b > a
    },
    C86: function(a, b) {
        return a == b
    },
    v1S: function(a, b) {
        return a * b
    },
    j5C: function(a, b) {
        return a == b
    },
    J76: function(a, b) {
        return a !== b
    },
    L4S: function(a, b) {
        return a - b
    },
    B76: function(a, b) {
        return a !== b
    },
    l3: function(a, b) {
        return a !== b
    },
    x2S: function(a, b) {
        return a != b
    },
    G7S: function(a, b) {
        return a > b
    },
    d73: function(a, b) {
        return a != b
    },
    F5C: function(a, b) {
        return a > b
    },
    Y43: function(a, b, c) {
        return a * b * c
    },
    q3C: function(a, b) {
        return a - b
    },
    e83: function(a, b) {
        return a * b
    },
    H86: function(a, b) {
        return a !== b
    },
    C4C: function(a, b) {
        return a != b
    },
    c9C: function(a, b) {
        return a > b
    },
    j83: function(a, b) {
        return a * b
    },
    L06: function(a, b) {
        return a == b
    },
    e13: function(a, b) {
        return a >= b
    },
    x9C: function(a, b) {
        return b > a
    },
    d0: function(a, b) {
        return a !== b
    },
    X7: function(a, b) {
        return a != b
    },
    f6C: function(a, b) {
        return a instanceof b
    },
    S3C: function(a, b) {
        return b > a
    },
    W4S: function(a, b) {
        return a != b
    },
    A8: function(a, b, c) {
        return a - b - c
    },
    T13: function(a, b) {
        return a >= b
    },
    A2: function(a, b) {
        return a - b
    },
    W63: function(a, b) {
        return a > b
    },
    y46: function(a, b) {
        return a != b
    },
    j66: function(a, b) {
        return a / b
    },
    i2: function(a, b) {
        return a == b
    },
    P93: function(a, b) {
        return a * b
    },
    h56: function(a, b) {
        return a - b
    },
    G9S: function(a, b) {
        return a >= b
    },
    H2S: function(a, b) {
        return a * b
    },
    V76: function(a, b) {
        return a !== b
    },
    w8S: function(a, b) {
        return a / b
    },
    e46: function(a, b) {
        return a > b
    },
    m8: function(a, b) {
        return a - b
    },
    y7: function(a, b) {
        return a != b
    },
    d5S: function(a, b) {
        return a / b
    },
    j46: function(a, b) {
        return a * b
    },
    i1S: function(a, b) {
        return a * b
    },
    m56: function(a, b) {
        return a == b
    },
    f9: function(a, b) {
        return a * b
    },
    W3C: function(a, b) {
        return a != b
    },
    X26: function(a, b) {
        return a !== b
    },
    C2: function(a, b) {
        return a - b
    },
    J63: function(a, b) {
        return a * b
    },
    M36: function(a, b) {
        return a | b
    },
    o43: function(a, b) {
        return a == b
    },
    R06: function(a, b) {
        return a == b
    },
    h0C: function(a, b) {
        return a > b
    },
    Z56: function(a, b) {
        return a != b
    },
    p36: function(a, b) {
        return a == b
    },
    d2: function(a, b) {
        return a - b
    },
    P8: function(a, b) {
        return a > b
    },
    d56: function(a, b) {
        return a !== b
    },
    y1C: function(a, b) {
        return a == b
    },
    Q4C: function(a, b) {
        return a !== b
    },
    U43: function(a, b) {
        return a / b
    },
    l7S: function(a, b) {
        return a * b
    },
    G26: function(a, b) {
        return a != b
    },
    o46: function(a, b) {
        return a != b
    },
    l8C: function(a, b) {
        return a != b
    },
    A9C: function(a, b) {
        return b > a
    },
    w16: function(a, b) {
        return a * b
    },
    y5C: function(a, b) {
        return b > a
    },
    N1C: function(a, b) {
        return a == b
    },
    f3C: function(a, b) {
        return a != b
    },
    y7S: function(a, b) {
        return a - b
    },
    Y9: function(a, b) {
        return a - b
    },
    z3C: function(a, b) {
        return a > b
    },
    u66: function(a, b) {
        return a * b
    },
    o6S: function(a, b) {
        return a * b
    },
    G83: function(a, b) {
        return a * b
    },
    Z66: function(a, b) {
        return a != b
    },
    h9C: function(a, b) {
        return a * b
    },
    w66: function(a, b) {
        return a > b
    },
    t2: function(a, b) {
        return a - b
    },
    P66: function(a, b) {
        return a - b
    },
    J3C: function(a, b) {
        return a - b
    },
    z63: function(a, b) {
        return b >= a
    },
    a0: function(a, b) {
        return a > b
    },
    F83: function(a, b) {
        return a * b
    },
    k7S: function(a, b) {
        return a > b
    },
    T43: function(a, b) {
        return a * b
    },
    b3C: function(a, b) {
        return a != b
    },
    O1C: function(a, b) {
        return a >= b
    },
    b8S: function(a, b) {
        return a - b
    },
    u4S: function(a, b) {
        return a - b
    },
    t0: function(a, b) {
        return a != b
    },
    M7: function(a, b) {
        return a - b
    },
    g53: function(a, b) {
        return a instanceof b
    },
    b16: function(a, b) {
        return a > b
    },
    t5: function(a, b) {
        return a == b
    },
    Z73: function(a, b) {
        return a != b
    },
    W33: function(a, b) {
        return a % b
    },
    N9S: function(a, b) {
        return b > a
    },
    w9: function(a, b) {
        return a >= b
    },
    v73: function(a, b) {
        return a * b
    },
    D66: function(a, b) {
        return a > b
    },
    P1S: function(a, b) {
        return a * b
    },
    z8S: function(a, b) {
        return a == b
    },
    P43: function(a, b) {
        return b > a
    },
    w23: function(a, b) {
        return a * b
    },
    j26: function(a, b) {
        return a !== b
    }
},
cifw = cifw || {};
cifw.init = function(a) {
    cifw.ScreenManager.getInstance().initialize(a),
    cifw.TransitionManager.getInstance().initialize(a)
};
var cifw = cifw || {};
cifw.screen = cifw.screen || {},
cifw.CSS = cifw.CSS || {},
cifw.screen.HORIZONTAL_ALIGNMENT = {
    LEFT: 1,
    CENTER: 2,
    RIGHT: 3
},
cifw.screen.VERTICAL_ALIGNMENT = {
    TOP: 1,
    CENTER: 2,
    BOTTOM: 3
},
cifw.screen.ORIENTATION = {
    PORTRAIT: 1,
    LANDSCAPE: 2
},
cifw.screen.ORIENTATION_NAME = {
    PORTRAIT: "portrait",
    LANDSCAPE: "landscape"
},
cifw.screen.RESOLUTION_POLICY = {
    NONE: 0,
    FIXED_HEIGHT: 1,
    FIXED_WIDTH: 2
},
cifw.ScreenManager = function() {
    this._game = null,
    this._currentOrientation = null,
    this._rotateScreenEnabled = !1
},
cifw.ScreenManager.prototype = {
    init: function() {
        return this.onResize = new Phaser.Signal,
        !0
    },
    initialize: function(a) {
        this._game = a,
        this._injectHtmlCode(),
        this._initScreenResizeCallback(),
        this._checkWindowOrientation()
    },
    _initScreenResizeCallback: function() {
        this._game.scale.onSizeChange.add(this._windowSizeChanged, this)
    },
    _windowSizeChanged: function(a, b, c) {
        this._checkWindowOrientation()
    },
    _injectHtmlCode: function() {
        if (cifw.screen.SHOW_ROTATION_SCREEN && !this._game.device.desktop) {
            this._rotateScreenEnabled = !0;
            var a = "<div id='" + cifw.CSS.rotate_device_id + "' style='display: none; width: 100%; height: 100%;' class='" + cifw.CSS.rotate_device_image_class + "'></div>";
            $("body").prepend(a)
        }
    },
    _checkWindowOrientation: function() {
        var a = this._game.scale.classifyOrientation(Phaser.DOM.getScreenOrientation(this._game.device.desktop ? "screen": "")),
        b = !1;
        B9l.S6(a, cifw.screen.ORIENTATION_NAME.PORTRAIT) ? B9l.c0(this._currentOrientation, cifw.screen.ORIENTATION.PORTRAIT) && (this._currentOrientation = cifw.screen.ORIENTATION.PORTRAIT, b = !0) : B9l.P0(this._currentOrientation, cifw.screen.ORIENTATION.LANDSCAPE) && (this._currentOrientation = cifw.screen.ORIENTATION.LANDSCAPE, b = !0),
        b && this._checkRotationOverlay()
    },
    _checkRotationOverlay: function() {
        this._rotateScreenEnabled && (B9l.Z0(cifw.screen.DESIGN_ORIENTATION, this._currentOrientation) ? this._showRotationOverlay() : this._hideRotationOverlay())
    },
    _showRotationOverlay: function() {
        var a = document.getElementById(cifw.CSS.rotate_device_id);
        void 0 != a ? (a.style.display = "block", a.style.width = "100%", a.style.height = "100%") : console.log("WARNING: define element with id: " + cifw.CSS.rotate_device_id)
    },
    _hideRotationOverlay: function() {
        var a = document.getElementById(cifw.CSS.rotate_device_id);
        void 0 != a ? a.style.display = "none": console.log("WARNING: define element with id: " + cifw.CSS.rotate_device_id)
    }
},
cifw.ScreenManager._instance = null,
cifw.ScreenManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new cifw.ScreenManager, this._instance.init() ? this._instance: null)
},
cifw.DragonBonesManager = function() {
    this._cache = null
},
cifw.DragonBonesManager.prototype = {
    init: function() {
        this._cache = {},
        this._factory = new dragonBones.factorys.PhaserBonesFactory
    },
    getDragonBonesAtlas: function(a, b, c) {
        var d = this._getCachedAtlas(b);
        return d || (d = this._transformPhaserAtlasToDragonBonesAtlas(a, b, c), this._cache[b] = d),
        d
    },
    _getCachedAtlas: function(a) {
        return this._cache[a] ? this._cache[a] : null
    },
    _transformPhaserAtlasToDragonBonesAtlas: function(a, b, c) {
        var d = a.cache.getFrameData(b),
        e = a.cache.getJSON(c);
        if (d && e) {
            var f = {};
            f.name = e.name,
            f.SubTexture = [];
            for (var g, h, i, j = d.getFrames(), k = j.length, l = !1, m = 0; B9l.i0(k, m); m++) h = j[m],
            g = h.name,
            l = B9l.K0(null, g.match(/.png/i)),
            l && (g = g.slice(0, -4)),
            i = {},
            i.name = g,
            i.x = h.x,
            i.y = h.y,
            i.width = h.width,
            i.height = h.height,
            f.SubTexture[m] = i;
            return f.atlasId = b,
            f
        }
        console.warn("Error: Invalid atlas name " + b)
    },
    makeArmature: function(a, b, c, d) {
        var e = a.cache.getJSON(b),
        f = a.cache.getImage(c),
        g = e.name,
        h = this.getDragonBonesAtlas(a, c, b);
        this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(e));
        var i = new dragonBones.textures.PhaserBonesAtlas(f, h);
        this._factory.addTextureAtlas(i);
        var j = this._factory.buildArmature(d, null, g);
        return dragonBones.animation.WorldClock.clock.add(j),
        j
    }
},
cifw.DragonBonesManager._instance = null,
cifw.DragonBonesManager.getInstance = function() {
    return this._instance || (this._instance = new cifw.DragonBonesManager, this._instance.init()),
    this._instance
},
cifw.TransitionManager = function() {
    this.game = null,
    this._toState = null,
    this._cover = null,
    this._texture = null,
    this._transitionSettings = null,
    this._transitionPlugin = null
},
cifw.TransitionManager.prototype = {
    init: function() {
        return ! 0
    },
    initialize: function(a) {
        this.game = a
    },
    transitionFade: function(a, b) {
        this._toState = b,
        this._transitionSettings = {
            duration: a,
            ease: Phaser.Easing.Exponential.InOut,
            properties: {
                alpha: 0
            }
        },
        B9l.m0(arguments.length, 2) && (this._args = Array.prototype.splice.call(arguments, 2)),
        this._draw()
    },
    _draw: function() {
        var a = this._toState;
        if (this.game.paused = !0, a) {
            this._cover && this._cover.destroy(),
            this._texture || (this._texture = new Phaser.RenderTexture(this.game, this.game.width, this.game.height, "cover")),
            this._texture.renderXY(this.game.world, -this.game.camera.x, -this.game.camera.y);
            var b = this.game.state.states[a].create,
            c = this;
            this._cover = new Phaser.Sprite(this.game, 0, 0, this._texture),
            this._cover.fixedToCamera = !0,
            this._cover.anchor.setTo(.5, .5),
            this._cover.cameraOffset.x = B9l.Q0(this.game.width, 2),
            this._cover.cameraOffset.y = B9l.x0(this.game.height, 2),
            this.game.state.states[a].create = function() {
                b.call(c.game.state.states[a]),
                c.game.add.existing(c._cover),
                c._animateCover()
            };
            var d = [a, !0, !1],
            e = d.concat(this._args),
            f = this.game.state.start;
            f.apply(this.game.state, e)
        } else console.log("Currently running the same state: " + a);
        this.game.paused = !1
    },
    _animateCover: function() {
        this._tween = this.game.add.tween(this._cover).to(this._transitionSettings.properties, this._transitionSettings.duration, this._transitionSettings.ease, !0),
        this._tween.onComplete.addOnce(this._onTransitionComplete, this)
    },
    _onTransitionComplete: function() {
        this._destroyTextures()
    },
    _destroyTextures: function() {
        this._cover && this._cover.destroy(),
        this._cover = null,
        this._texture && this._texture.destroy(),
        this._texture = null
    }
},
cifw.TransitionManager._instance = null,
cifw.TransitionManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new cifw.TransitionManager, this._instance.init() ? this._instance: null)
},
cifw.DataManager = function() {
    this._data = null
},
cifw.DataManager.prototype = {
    init: function() {
        return this._data = {},
        this._loadDataFromLocalStorage(),
        !0
    },
    _loadDataFromLocalStorage: function() {
        console.log("You Must overwrite _loadDataFromLocalStorage method")
    },
    clearAllDataSaved: function() {
        console.log("You Must overwrite clearAllDataSaved method"),
        this._data.length = 0
    },
    _exists: function(a) {
        return B9l.v0(null, a) && void 0 !== a && B9l.A0("", a) && B9l.d0("undefined", a)
    },
    saveBoolData: function(a, b) {
        localStorage.setItem(a, JSON.stringify(b))
    },
    loadBoolData: function(a) {
        var b = localStorage.getItem(a);
        return this._exists(b) ? JSON.parse(b) : !1
    },
    loadStringData: function(a) {
        var b = localStorage.getItem(a);
        return this._exists(b) ? b: null
    },
    saveStringData: function(a, b) {
        localStorage.setItem(a, b)
    },
    loadIntData: function(a) {
        var b = localStorage.getItem(a);
        return this._exists(b) ? Number(b) : 0
    },
    saveIntData: function(a, b) {
        localStorage.setItem(a, b)
    },
    saveArrayData: function(a, b) {
        localStorage.setItem(a, JSON.stringify(b))
    },
    getArrayData: function(a, b) {
        var c = localStorage.getItem(a);
        return this._exists(c) ? JSON.parse(c) : []
    }
},
cifw.DataManager._instance = null,
cifw.DataManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new cifw.DataManager, this._instance.init() ? this._instance: null)
},
cifw.AudioManager = function() {
    this._musicEnabled = !0,
    this._sfxEnabled = !0,
    this._currentMusicName = null,
    this._currentMusic = null,
    this._playingMusic = !1
},
cifw.AudioManager.prototype = {
    init: function() {
        return this._musicEnabled = !0,
        this._sfxEnabled = !0,
        this._playingMusic = !1,
        !0
    },
    playEffect: function(a) {
        return this.isSfxEnabled() ? howlSound.play(a) : void 0
    },
    stopEffect: function(a) {
        this.isSfxEnabled() && howlSound.stop(a)
    },
    pauseEffect: function(a, b) {
        this.isSfxEnabled() && howlSound.pause(b)
    },
    switchMusicState: function() {
        this._musicEnabled = !this._musicEnabled
    },
    switchSfxState: function() {
        this._sfxEnabled = !this._sfxEnabled
    },
    isMusicEnabled: function() {
        return this._musicEnabled
    },
    isSfxEnabled: function() {
        return this._sfxEnabled
    },
    playOrStopMusic: function() {
        this.isMusicEnabled() ? this.playMusic() : this._playingMusic && this._currentMusic && (this._currentMusic.stop(), this._playingMusic = !1)
    },
    playMusic: function() {
        this.isMusicEnabled() && (this._playingMusic || this._currentMusic && (this._currentMusic.play(), this._playingMusic = !0))
    },
    pauseMusic: function() {
        this._playingMusic && this._currentMusic && (this._currentMusic.pause(), this._playingMusic = !1, this._pausedMusic = !0)
    },
    resumeMusic: function() {
        this.isMusicEnabled() && !this._playingMusic && this._pausedMusic && this._currentMusic && (this._currentMusic.play(), this._playingMusic = !0, this._pausedMusic = !1)
    },
    selectMusic: function(a) {
        this._currentMusic && this.stopMusic(),
        this._currentMusic = a
    },
    switchMusic: function(a) {
        B9l.t0(this._currentMusicName, a._src) && (this._currentMusicName = a._src, this.selectMusic(a), this.playMusic())
    },
    stopMusic: function() {
        this._playingMusic && this._currentMusic && (this._currentMusic.stop(), this._playingMusic = !1)
    }
},
cifw.AudioManager._instance = null,
cifw.AudioManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new cifw.AudioManager, this._instance.init() ? this._instance: null)
},
cifw.Device = function() {
    this.vita = !1,
    this.kindle = !1,
    this.android = !1,
    this.chromeOS = !1,
    this.iOS = !1,
    this.linux = !1,
    this.macOS = !1,
    this.windows = !1,
    this.windowsPhone = !1,
    this.windows = !1,
    this.desktop = !1
},
cifw.DeviceManager = function() {
    this.device = null
},
cifw.DeviceManager.prototype = {
    init: function() {
        return this.device = new cifw.Device,
        this._checkOS(),
        !0
    },
    _checkOS: function() {
        var a = navigator.userAgent;
        /Playstation Vita/.test(a) ? this.device.vita = !0 : /Kindle/.test(a) || /\bKF[A-Z][A-Z]+/.test(a) || /Silk.*Mobile Safari/.test(a) ? this.device.kindle = !0 : /Android/.test(a) ? this.device.android = !0 : /CrOS/.test(a) ? this.device.chromeOS = !0 : /iP[ao]d|iPhone/i.test(a) ? this.device.iOS = !0 : /Linux/.test(a) ? this.device.linux = !0 : /Mac OS/.test(a) ? this.device.macOS = !0 : /Windows/.test(a) && (this.device.windows = !0, /Windows Phone/i.test(a) && (this.device.windowsPhone = !0));
        var b = /Silk/.test(a); (this.device.windows || this.device.macOS || this.device.linux && !b || this.device.chromeOS) && (this.device.desktop = !0),
        (this.device.windowsPhone || /Windows NT/i.test(a) && /Touch/i.test(a)) && (this.device.desktop = !1)
    }
},
cifw.DeviceManager._instance = null,
cifw.DeviceManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new cifw.DeviceManager, this._instance.init() ? this._instance: null)
},
cifw.LocalizationManager = function() {
    this._languageCode = null,
    this._localizedStrings = null
},
cifw.LocalizationManager.prototype = {
    init: function() {
        return this._languageCode = "en",
        !0
    },
    setLocalizationJson: function(a) {
        this._localizedStrings = a
    },
    string: function(a) {
        var b = this._localizedStrings[this._languageCode][a];
        return b ? "string" == typeof b ? b: b.text: (console.log("Error LocalizationManager: " + a + " is not defined for language: " + this._languageCode), "undefined")
    },
    scale: function(a) {
        var b = this._localizedStrings[this._languageCode][a];
        return b ? "string" == typeof b ? 1 : b.size: (console.log("Error LocalizationManager: " + a + " is not defined for language: " + this._languageCode), "undefined")
    },
    setLanguage: function(a) {
        this._languageCode = a,
        console.log("Localization: Language switched to: ", a)
    },
    getLanguage: function() {
        return this._languageCode
    },
    localizeUILabel: function(a, b, c, d, e) {
        var f = function() {
            g = a ? ccui.helper.seekWidgetByName(a, b) : b
        },
        g = null;
        f();
        var h = c;
        d || (h = this.string(c), g.__uiParent.setScale(this.scale(c))),
        "undefined" != typeof e && (h = h.replace("%%N%%", e)),
        g.__uiParent.setString(h)
    },
    localizedNumber: function(a, b) {
        var c = b || 0;
        return this._number_format(a, c, this.string("number.decimal_separator"), this.string("number.thousands_separator"))
    },
    _number_format: function(a, b, c, d) {
        var e = isFinite( + a) ? +a: 0,
        f = isFinite( + b) ? Math.abs(b) : 0,
        g = "undefined" == typeof d ? ",": d,
        h = "undefined" == typeof c ? ".": c,
        i = function(a, b) {
            var c = Math.pow(10, b);
            return B9l.C0(Math.round(a * c), c)
        },
        j = (f ? i(e, f) : Math.round(e)).toString().split(".");
        return B9l.a0(j[0].length, 3) && (j[0] = j[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, g)),
        B9l.h0((j[1] || "").length, f) && (j[1] = j[1] || "", j[1] += new Array(B9l.H0(f, j[1].length, 1)).join("0")),
        j.join(h)
    }
},
cifw.LocalizationManager._instance = null,
cifw.LocalizationManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new cifw.LocalizationManager, this._instance.init() ? this._instance: null)
},
cifw.NotificationManager = function() {
    this.signals = {}
},
cifw.NotificationManager.prototype = {
    init: function() {
        return ! 0
    },
    addObserver: function(a, b, c) {
        this.signals[a] ? this.signals[a].add(b, c) : (this._createNotification(a), this.signals[a].add(b, c))
    },
    removeSignal: function(a) {
        this.signals[a] ? this.signals[a].dispose() : console.warn("Signal doesn't exist.")
    },
    removeObserver: function(a, b, c) {
        this.signals[a] ? this.signals[a].remove(b, c) : console.warn("Signal doesn't exist.")
    },
    removeAllObservers: function(a, b) {
        this.signals[a] ? this.signals[a].removeAll(b) : console.warn("Signal doesn't exist.")
    },
    removeAllObserversFromContext: function(a) {
        _.forEach(this.signals,
        function(b) {
            b.removeAll(a)
        })
    },
    postNotification: function(a, b, c) {
        "undefined" == typeof b && (b = null),
        "undefined" == typeof c && (c = null),
        this.signals[a] ? this.signals[a].dispatch(a, b, c) : console.warn("Signal doesn't exist.")
    },
    _createNotification: function(a) {
        this.signals[a] ? console.warn("A signal with the key '" + a + "' already exists.") : this.signals[a] = new Phaser.Signal
    }
},
cifw.NotificationManager._instance = null,
cifw.NotificationManager.getInstance = function() {
    return this._instance || (this._instance = new cifw.NotificationManager, this._instance.init()),
    this._instance
},
cifw.AchievementManager = function() {
    this.game = null,
    this.achievements = [],
    this.allAchievements = []
},
cifw.AchievementManager.prototype = {
    init: function() {
        return ! 0
    },
    initNotification: function(a, b, c, d, e) {
        this.achievementNotification || (this.achievementNotification = new cifw.AchievementNotification(a, b, c, d, e, this.transitionTime, this.staticTime))
    },
    getAchievements: function() {
        var a, b, c;
        return this.achievements = [],
        this.allAchievements = [],
        c = new cifw.AchievementDataManager,
        (a = this.game.cache.getJSON("achievements_json")) ? (b = c.loadData(a), _.forEach(b,
        function(b, c) {
            a[c].completed = b.completed,
            _.forEach(b.objectives,
            function(b, d) {
                a[c].objectives[d].completed = b.completed,
                a[c].objectives[d].counter = b.counter
            },
            this)
        },
        this), _.forEach(a,
        function(a) {
            a.completed || this.achievements.push(new cifw.Achievement(a.id, a.name, a.desc, a.type, a.objectives)),
            this.allAchievements.push(a)
        },
        this), this.allAchievements) : void console.warn("WARNING: NO ACHIEVEMENTS JSON LOADED")
    },
    initialize: function(a, b, c) {
        if (B9l.S0(null, this.game)) {
            this.game = a,
            this.transitionTime = b,
            this.staticTime = c;
            var d, e, f;
            if (f = new cifw.AchievementDataManager, d = this.game.cache.getJSON("achievements_json"), !d) return void console.warn("WARNING: NO ACHIEVEMENTS JSON LOADED");
            e = f.loadData(d),
            _.forEach(e,
            function(a, b) {
                d[b].completed = a.completed,
                _.forEach(a.objectives,
                function(a, c) {
                    d[b].objectives[c].completed = a.completed,
                    d[b].objectives[c].counter = a.counter
                },
                this)
            },
            this),
            _.forEach(d,
            function(a) {
                a.completed || this.achievements.push(new cifw.Achievement(a.id, a.name, a.desc, a.type, a.objectives)),
                this.allAchievements.push(a)
            },
            this)
        }
    },
    resetSingleAchievements: function() {
        _.forEach(this.achievements,
        function(a) {
            B9l.c5("single", a.type) && _.forEach(a.objectives,
            function(a) {
                var b = function(b) {
                    a.counter = b
                };
                b(0)
            },
            this)
        },
        this)
    },
    resetData: function() {
        var a, b;
        return a = new cifw.AchievementDataManager,
        a.clearAchievements(),
        (b = this.game.cache.getJSON("achievements_json")) ? (a.loadData(b), _.forEach(b,
        function(a, c) {
            b[c].completed = !1,
            _.forEach(a.objectives,
            function(a, d) {
                b[c].objectives[d].completed = !1,
                b[c].objectives[d].counter = 0
            },
            this)
        },
        this), void _.forEach(b,
        function(a) {
            a.completed || this.achievements.push(new cifw.Achievement(a.id, a.name, a.desc, a.type, a.objectives))
        },
        this)) : void console.warn("WARNING: NO ACHIEVEMENTS JSON LOADED")
    },
    checkNotifications: function() {
        var a, b;
        B9l.P5(this.game.stage.children.length, 1) && _.forEach(this.game.stage.children,
        function(c) {
            B9l.Z5("achievement_notification", c.name) && B9l.i5(c.notifications.length, 0) && (c.visible = !0, c.entering && (b = this.game.add.tween(c).to({
                y: 0
            },
            this.transitionTime, Phaser.Easing.Linear.None, !0, 0), a = this.game.add.tween(c).to({
                y: B9l.K5(0, c.height)
            },
            this.transitionTime, Phaser.Easing.Linear.None, !1, this.staticTime), b.chain(a)), c.leaving && (a = this.game.add.tween(c).to({
                y: B9l.m5(0, c.height)
            },
            this.transitionTime, Phaser.Easing.Linear.None, !0, 0)), c.notifications.shift(), a.onComplete.add(function() {
                B9l.Q5(c.notifications.length, 0) && this.achievementNotification.queueNotification(null, null, c.notifications)
            },
            this))
        },
        this)
    }
},
cifw.AchievementManager._instance = null,
cifw.AchievementManager.getInstance = function() {
    return this._instance || (this._instance = new cifw.AchievementManager, this._instance.init()),
    this._instance
},
cifw.Achievement = function(a, b, c, d, e) {
    this.id = a,
    this.name = b,
    this.description = c,
    this.type = d,
    this.objectives = [],
    this.completed = !1,
    this.notificationManager = cifw.NotificationManager.getInstance(),
    _.forEach(e,
    function(a, b) {
        this.objectives.push(new cifw.Objective(a.id, a.completed, a.counter, a.number, this.name, this.type)),
        this.objectives[b].completed || (this.notificationManager.addObserver(a.signal, this.objectives[b].updateCounter, this.objectives[b]), this.notificationManager.addObserver(a.signal + "_reset", this.objectives[b].resetCounter, this.objectives[b]), this.notificationManager.addObserver(a.signal + "_completed", this.checkObjectives, this))
    },
    this)
},
cifw.Achievement.prototype = {
    checkObjectives: function(a) {
        var b, c;
        b = _.find(this.objectives,
        function(a) {
            return B9l.x5(0, a.completed)
        }),
        "undefined" == typeof b ? (this.completed = !0, console.log("achievement completed!"), c = new cifw.AchievementDataManager, _.forEach(this.objectives,
        function(a) {
            c.objectiveComplete(a.id, a.completed, this.name)
        },
        this), c.achievementComplete(this.name, this.completed), this.notificationManager.removeSignal(a), this.notificationManager.postNotification("achievement_completed", this)) : this.completed = b
    }
},
cifw.Objective = function(a, b, c, d, e, f) {
    this.id = a,
    this.completed = b,
    this.counter = c,
    this.counterMax = d,
    this.parent = e,
    this.parentType = f,
    this.notificationManager = cifw.NotificationManager.getInstance()
},
cifw.Objective.prototype = {
    objectiveCompleted: function(a) {
        var b;
        this.completed = !0,
        console.log("objective completed!"),
        B9l.v5("multi", this.parentType) && (b = new cifw.AchievementDataManager, b.objectiveComplete(this.id, this.completed, this.parent)),
        this.notificationManager.postNotification(a + "_completed")
    },
    updateCounter: function(a, b, c) {
        var d;
        c ? this.counter += c: this.counter++,
        B9l.A5("multi", this.parentType) && (d = new cifw.AchievementDataManager, d.counterUpdate(this.id, this.parent, this.counter)),
        B9l.d5(this.counter, this.counterMax) && (this.notificationManager.removeSignal(a), this.objectiveCompleted(a))
    },
    resetCounter: function() {
        this.counter = 0
    }
},
cifw.AchievementDataManager = function() {},
cifw.AchievementDataManager.prototype = {
    loadData: function(a) {
        var b = localStorage.getItem(cifw.config.ACHIEVEMENTS);
        return this._exists(b) ? b = JSON.parse(b) : (b = {},
        _.forEach(a,
        function(a, c) {
            b[c] = {},
            b[c].name = a.name,
            b[c].completed = a.completed,
            b[c].objectives = [],
            _.forEach(a.objectives,
            function(a, d) {
                b[c].objectives[d] = {},
                b[c].objectives[d].id = a.id,
                b[c].objectives[d].completed = a.completed,
                b[c].objectives[d].counter = 0
            },
            this)
        },
        this), this.saveArrayData(cifw.config.ACHIEVEMENTS, b), b = localStorage.getItem(cifw.config.ACHIEVEMENTS), b = JSON.parse(b)),
        b
    },
    clearAchievements: function() {
        localStorage.removeItem(cifw.config.ACHIEVEMENTS)
    },
    achievementComplete: function(a, b) {
        var c = localStorage.getItem(cifw.config.ACHIEVEMENTS);
        c = JSON.parse(c),
        _.forEach(c,
        function(c) {
            B9l.t5(c.name, a) && (c.completed = b)
        },
        this),
        this.saveArrayData(cifw.config.ACHIEVEMENTS, c)
    },
    objectiveComplete: function(a, b, c) {
        var d = localStorage.getItem(cifw.config.ACHIEVEMENTS);
        d = JSON.parse(d),
        _.forEach(d,
        function(d) {
            B9l.C5(d.name, c) && _.forEach(d.objectives,
            function(c) {
                B9l.a5(c.id, a) && (c.completed = b)
            },
            this)
        },
        this),
        this.saveArrayData(cifw.config.ACHIEVEMENTS, d)
    },
    counterUpdate: function(a, b, c) {
        var d = localStorage.getItem(cifw.config.ACHIEVEMENTS);
        d = JSON.parse(d),
        _.forEach(d,
        function(d) {
            B9l.h5(d.name, b) && _.forEach(d.objectives,
            function(b) {
                B9l.H5(b.id, a) && (b.counter = c)
            },
            this)
        },
        this),
        this.saveArrayData(cifw.config.ACHIEVEMENTS, d)
    },
    _exists: function(a) {
        return B9l.E5(null, a) && void 0 !== a && B9l.l3("", a) && B9l.X3("undefined", a)
    },
    saveBoolData: function(a, b) {
        localStorage.setItem(a, JSON.stringify(b))
    },
    loadBoolData: function(a) {
        var b = localStorage.getItem(a);
        return this._exists(b) ? JSON.parse(b) : !1
    },
    loadStringData: function(a) {
        var b = localStorage.getItem(a);
        return this._exists(b) ? b: null
    },
    saveStringData: function(a, b) {
        localStorage.setItem(a, b)
    },
    loadIntData: function(a) {
        var b = localStorage.getItem(a);
        return this._exists(b) ? Number(b) : 0
    },
    saveIntData: function(a, b) {
        localStorage.setItem(a, b)
    },
    saveArrayData: function(a, b) {
        localStorage.setItem(a, JSON.stringify(b))
    },
    getArrayData: function(a, b) {
        var c = localStorage.getItem(a);
        return this._exists(c) ? JSON.parse(c) : []
    }
},
cifw.AchievementNotification = function(a, b, c, d, e, f, g) {
    var h, i;
    this.game = a,
    this.bgSprite = e || null,
    this.transitionTime = f,
    this.staticTime = g,
    this.achievementGroup = new cifw.ResponsiveGroup(this.game, 0, cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.TOP),
    this.achievementGroup.notifications = [],
    this.achievementGroup.name = "achievement_notification",
    this.achievementGroup.entering = !1,
    this.achievementGroup.leaving = !1,
    this.localization = cifw.LocalizationManager.getInstance(),
    this.titleLabel = this.game.make.bitmapText(0, 0, b, "", c.title),
    this.nameLabel = this.game.make.bitmapText(0, 0, b, "", c.name),
    this.descriptionLabel = this.game.make.bitmapText(0, 0, b, "", 30),
    this.achievementImage = this.game.make.sprite(0, 0, d),
    this.notificationManager = cifw.NotificationManager.getInstance(),
    B9l.s3(null, this.bgSprite) ? (h = this.game.make.graphics(), h.lineStyle(3, 0, 1), h.beginFill(9737364, 1), h.drawRect(0, 0, B9l.F3(.8, this.game.world.width), B9l.G3(.2, this.game.world.height)), h.endFill(), this.background = this.achievementGroup.create(0, 0, h.generateTexture()), this.background.x = B9l.g3(.5, cifw.screen.DESIGN_WIDTH), this.background.y = B9l.n3(.5, this.background.height), this.background.anchor.setTo(.5)) : (this.background = this.achievementGroup.create(0, 0, this.bgSprite), this.background.x = B9l.y3(.5, cifw.screen.DESIGN_WIDTH), this.background.y = B9l.N3(.5, this.background.height), this.background.anchor.setTo(.5), this.achievementGroup.add(this.background)),
    this.background.addChild(this.titleLabel),
    this.background.addChild(this.nameLabel),
    this.background.addChild(this.descriptionLabel),
    this.background.addChild(this.achievementImage),
    i = _.find(this.game.stage.children,
    function(a) {
        return B9l.p3("achievement_notification", a.name)
    },
    this),
    "undefined" == typeof i && this.game.stage.addChild(this.achievementGroup),
    this.achievementGroup.y = -this.background.height,
    this.achievementGroup.visible = !1,
    this.notificationManager.addObserver("achievement_completed", this.queueNotification, this)
},
cifw.AchievementNotification.prototype = {
    queueNotification: function(a, b, c) {
        c ? this.showNotification(c[0]) : (this.achievementGroup.notifications[this.achievementGroup.notifications.length] = b, B9l.o3(1, this.achievementGroup.notifications.length) && this.showNotification(this.achievementGroup.notifications[0]))
    },
    showNotification: function(a) {
        var b, c, d, e, f, g;
        d = this.transitionTime,
        e = this.staticTime,
        b = this.localization.string("achievement_get"),
        c = this.localization.string(a.name),
        this.titleLabel.text = b,
        this.titleLabel.updateTransform(),
        this.titleLabel.pivot.x = B9l.U3(.5, this.titleLabel.textWidth),
        this.titleLabel.pivot.y = B9l.k3(.5, this.titleLabel.textHeight),
        this.titleLabel.x = 35,
        this.titleLabel.y = -50,
        this.nameLabel.text = c,
        this.nameLabel.updateTransform(),
        this.nameLabel.pivot.x = B9l.M3(.5, this.nameLabel.textWidth),
        this.nameLabel.pivot.y = B9l.j3(.5, this.nameLabel.textHeight),
        this.nameLabel.x = 40,
        this.nameLabel.y = -10,
        this.achievementImage.anchor.setTo(.5),
        this.achievementImage.x = -160,
        this.achievementImage.y = -5,
        this.achievementGroup.visible = !0,
        this.achievementGroup.entering = !0,
        f = this.game.add.tween(this.achievementGroup).to({
            y: 0
        },
        d, Phaser.Easing.Linear.None, !0, 0),
        g = this.game.add.tween(this.achievementGroup).to({
            y: -this.background.height
        },
        d, Phaser.Easing.Linear.None, !1, e),
        f.chain(g),
        f.onComplete.add(function() {
            this.achievementGroup.entering = !1,
            this.achievementGroup.leaving = !0
        },
        this),
        g.onComplete.add(function() {
            this.achievementGroup.leaving = !1,
            this.achievementGroup.notifications.shift(),
            B9l.T3(this.achievementGroup.notifications.length, 0) ? this.achievementGroup.notifications[0] ? this.showNotification(this.achievementGroup.notifications[0]) : (this.achievementGroup.notifications.shift(), B9l.O3(this.achievementGroup.notifications.length, 0) && this.showNotification(this.achievementGroup.notifications[0])) : this.achievementGroup.visible = !1
        },
        this)
    }
};
var __extends = this.__extends ||
function(a, b) {
    function c() {
        this.constructor = a
    }
    for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]);
    c.prototype = b.prototype,
    a.prototype = new c
},
dragonBones; !
function(a) {
    var b = function(b) {
        a.Armature = b
    },
    c = function(b) {
        a.Bone = b
    },
    d = function(b) {
        a.Slot = b
    },
    e = function(b) {
        a.DBObject = b
    }; !
    function(a) {
        var b = function(b) {
            a.ColorTransform = b
        },
        c = function(b) {
            a.Matrix = b
        },
        d = function(b) {
            a.Rectangle = b
        },
        e = function(b) {
            a.Point = b
        },
        f = function() {
            function a(a, b) {
                "undefined" == typeof a && (a = 0),
                "undefined" == typeof b && (b = 0),
                this.x = a,
                this.y = b
            }
            return a.prototype.toString = function() {
                return "[Point (x=" + this.x + " y=" + this.y + ")]"
            },
            a
        } ();
        e(f);
        var g = function() {
            function a(a, b, c, d) {
                "undefined" == typeof a && (a = 0),
                "undefined" == typeof b && (b = 0),
                "undefined" == typeof c && (c = 0),
                "undefined" == typeof d && (d = 0),
                this.x = a,
                this.y = b,
                this.width = c,
                this.height = d
            }
            return a
        } ();
        d(g);
        var h = function() {
            function a() {
                this.a = 1,
                this.b = 0,
                this.c = 0,
                this.d = 1,
                this.tx = 0,
                this.ty = 0
            }
            return a.prototype.invert = function() {
                var a = this.a,
                b = this.b,
                c = this.c,
                d = this.d,
                e = this.tx,
                f = B9l.e3(a * d, b * c);
                this.a = B9l.W9(d, f),
                this.b = -b / f,
                this.c = -c / f,
                this.d = B9l.q9(a, f),
                this.tx = B9l.V9(c * this.ty - d * e, f),
                this.ty = -B9l.Y9(a * this.ty, b * e) / f
            },
            a
        } ();
        c(h);
        var i = function() {
            function a() {
                this.alphaMultiplier = 0,
                this.alphaOffset = 0,
                this.blueMultiplier = 0,
                this.blueOffset = 0,
                this.greenMultiplier = 0,
                this.greenOffset = 0,
                this.redMultiplier = 0,
                this.redOffset = 0
            }
            return a
        } ();
        b(i)
    } (a.geom || (a.geom = {}));
    var f = a.geom; !
    function(a) {
        var b = function(b) {
            a.SoundEventManager = b
        },
        c = function(b) {
            a.EventDispatcher = b
        },
        d = function(b) {
            a.SoundEvent = b
        },
        e = function(b) {
            a.FrameEvent = b
        },
        f = function(b) {
            a.ArmatureEvent = b
        },
        g = function(b) {
            a.AnimationEvent = b
        },
        h = function(b) {
            a.Event = b
        },
        i = function() {
            function a(a) {
                this.type = a
            }
            return a
        } ();
        h(i);
        var j = function(a) {
            function b(b) {
                a.call(this, b)
            }
            return __extends(b, a),
            b.FADE_IN = "fadeIn",
            b.FADE_OUT = "fadeOut",
            b.START = "start",
            b.COMPLETE = "complete",
            b.LOOP_COMPLETE = "loopComplete",
            b.FADE_IN_COMPLETE = "fadeInComplete",
            b.FADE_OUT_COMPLETE = "fadeOutComplete",
            b
        } (i);
        g(j);
        var k = function(a) {
            function b(b) {
                a.call(this, b)
            }
            return __extends(b, a),
            b.Z_ORDER_UPDATED = "zOrderUpdated",
            b
        } (i);
        f(k);
        var l = function(a) {
            function b(b) {
                a.call(this, b)
            }
            return __extends(b, a),
            b.ANIMATION_FRAME_EVENT = "animationFrameEvent",
            b.BONE_FRAME_EVENT = "boneFrameEvent",
            b
        } (i);
        e(l);
        var m = function(a) {
            function b(b) {
                a.call(this, b)
            }
            return __extends(b, a),
            b.SOUND = "sound",
            b.BONE_FRAME_EVENT = "boneFrameEvent",
            b
        } (i);
        d(m);
        var n = function() {
            function a() {}
            return a.prototype.hasEventListener = function(a) {
                return this._listenersMap && this._listenersMap[a] ? !0 : !1
            },
            a.prototype.addEventListener = function(a, b) {
                if (a && b) {
                    this._listenersMap || (this._listenersMap = {});
                    var c = this._listenersMap[a];
                    c && this.removeEventListener(a, b),
                    c ? c.push(b) : this._listenersMap[a] = [b]
                }
            },
            a.prototype.removeEventListener = function(a, b) {
                if (this._listenersMap && a && b) {
                    var c = this._listenersMap[a];
                    if (c) for (var d = c.length,
                    e = 0; B9l.z9(d, e); e++) B9l.D9(c[e], b) && (B9l.J9(1, d) ? (c.length = 0, delete this._listenersMap[a]) : c.splice(e, 1))
                }
            },
            a.prototype.removeAllEventListeners = function(a) {
                a ? delete this._listenersMap[a] : this._listenersMap = null
            },
            a.prototype.dispatchEvent = function(a) {
                if (a) {
                    var b = this._listenersMap[a.type];
                    if (b) {
                        a.target = this;
                        for (var c = b.concat(), d = b.length, e = 0; B9l.B9(d, e); e++) c[e](a)
                    }
                }
            },
            a
        } ();
        c(n);
        var o = function(a) {
            function b() {
                if (a.call(this), b._instance) throw new Error("Singleton already constructed!")
            }
            return __extends(b, a),
            b.getInstance = function() {
                return b._instance || (b._instance = new b),
                b._instance
            },
            b
        } (n);
        b(o)
    } (a.events || (a.events = {}));
    var g = a.events; !
    function(a) {
        var b = function(b) {
            a.Animation = b
        },
        c = function(b) {
            a.AnimationState = b
        },
        d = function(b) {
            a.TimelineState = b
        },
        e = function(b) {
            a.WorldClock = b
        },
        h = function() {
            function a() {
                this.timeScale = 1,
                this.time = B9l.f9(.001, (new Date).getTime()),
                this._animatableList = []
            }
            return a.prototype.contains = function(a) {
                return B9l.u9(this._animatableList.indexOf(a), 0)
            },
            a.prototype.add = function(a) {
                a && -1 == this._animatableList.indexOf(a) && this._animatableList.push(a)
            },
            a.prototype.remove = function(a) {
                var b = this._animatableList.indexOf(a);
                B9l.w9(b, 0) && (this._animatableList[b] = null)
            },
            a.prototype.clear = function() {
                this._animatableList.length = 0
            },
            a.prototype.advanceTime = function(a) {
                if (B9l.I9(0, a)) {
                    var b = B9l.r9(.001, (new Date).getTime());
                    a = B9l.L9(b, this.time),
                    this.time = b
                }
                a *= this.timeScale;
                var c = this._animatableList.length;
                if (B9l.b9(0, c)) {
                    for (var d = 0,
                    e = 0; B9l.R9(c, e); e++) {
                        var f = this._animatableList[e];
                        f && (B9l.S9(d, e) && (this._animatableList[d] = f, this._animatableList[e] = null), f.getDisplay().exists && f.advanceTime(a), d++)
                    }
                    if (B9l.c8(d, e)) {
                        for (c = this._animatableList.length; B9l.P8(c, e);) this._animatableList[d++] = this._animatableList[e++];
                        this._animatableList.length = d
                    }
                }
            },
            a.clock = new a,
            a
        } ();
        e(h);
        var k = function() {
            function a() {
                this.transform = new i.DBTransform,
                this.pivot = new f.Point,
                this._durationTransform = new i.DBTransform,
                this._durationPivot = new f.Point,
                this._durationColor = new f.ColorTransform
            }
            return a._borrowObject = function() {
                return B9l.Z8(0, a._pool.length) ? new a: a._pool.pop()
            },
            a._returnObject = function(b) {
                B9l.i8(a._pool.indexOf(b), 0) && (a._pool[a._pool.length] = b),
                b.clear()
            },
            a._clear = function() {
                for (var b = function(b) {
                    a._pool.length = b
                },
                c = a._pool.length; c--;) a._pool[c].clear();
                b(0)
            },
            a.getEaseValue = function(b, c) {
                if (B9l.K8(c, 1)) {
                    var d = B9l.m8(.5 * (1 - Math.cos(b * Math.PI)), b);
                    c -= 1
                } else B9l.Q8(c, 0) ? d = B9l.x8(Math.sin(b * a.HALF_PI), b) : B9l.v8(0, c) && (d = B9l.A8(1, Math.cos(b * a.HALF_PI), b), c *= -1);
                return B9l.w8(d, c) + b
            },
            a.prototype.fadeIn = function(a, b, c) {
                switch (this._bone = a, this._animationState = b, this._timeline = c, this._originTransform = this._timeline.originTransform, this._originPivot = this._timeline.originPivot, this._tweenTransform = !1, this._tweenColor = !1, this._totalTime = this._animationState.totalTime, this.transform.x = 0, this.transform.y = 0, this.transform.scaleX = 0, this.transform.scaleY = 0, this.transform.skewX = 0, this.transform.skewY = 0, this.pivot.x = 0, this.pivot.y = 0, this._durationTransform.x = 0, this._durationTransform.y = 0, this._durationTransform.scaleX = 0, this._durationTransform.scaleY = 0, this._durationTransform.skewX = 0, this._durationTransform.skewY = 0, this._durationPivot.x = 0, this._durationPivot.y = 0, this._currentFrame = null, this._timeline.getFrameList().length) {
                case 0:
                    this._bone._arriveAtFrame(null, this, this._animationState, !1),
                    this._updateState = 0;
                    break;
                case 1:
                    this._updateState = -1;
                    break;
                default:
                    this._updateState = 1
                }
            },
            a.prototype.fadeOut = function() {
                this.transform.skewX = j.TransformUtil.formatRadian(this.transform.skewX),
                this.transform.skewY = j.TransformUtil.formatRadian(this.transform.skewY)
            },
            a.prototype.update = function(b) {
                if (this._updateState) if (B9l.I8(this._updateState, 0)) {
                    B9l.r8(0, this._timeline.scale) ? b = 1 : b /= this._timeline.scale,
                    B9l.L8(1, b) && (b = .99999999),
                    b += this._timeline.offset;
                    var c = Math.floor(b);
                    b -= c;
                    for (var d, e = B9l.b8(this._totalTime, b), f = !1; ! this._currentFrame || B9l.R8(e, this._currentFramePosition + this._currentFrameDuration) || B9l.S8(e, this._currentFramePosition);) f && this._bone._arriveAtFrame(this._currentFrame, this, this._animationState, !0),
                    f = !0,
                    this._currentFrame ? (d = this._timeline.getFrameList().indexOf(this._currentFrame) + 1, B9l.c2(d, this._timeline.getFrameList().length) && (d = 0), this._currentFrame = this._timeline.getFrameList()[d]) : (d = 0, this._currentFrame = this._timeline.getFrameList()[0]),
                    this._currentFrameDuration = this._currentFrame.duration,
                    this._currentFramePosition = this._currentFrame.position;
                    if (f) {
                        this.tweenActive = B9l.P2(this._currentFrame.displayIndex, 0),
                        d++,
                        B9l.Z2(d, this._timeline.getFrameList().length) && (d = 0);
                        var g = this._timeline.getFrameList()[d];
                        B9l.i2(0, d) && this._animationState.loop && B9l.K2(this._animationState.loopCount, Math.abs(this._animationState.loop) - 1) && B9l.m2(((this._currentFramePosition + this._currentFrameDuration) / this._totalTime + c - this._timeline.offset) * this._timeline.scale, .99999999) ? (this._updateState = 0, this._tweenEasing = NaN) : B9l.Q2(this._currentFrame.displayIndex, 0) || B9l.x2(g.displayIndex, 0) || !this._animationState.tweenEnabled ? this._tweenEasing = NaN: isNaN(this._animationState.clip.tweenEasing) ? this._tweenEasing = this._currentFrame.tweenEasing: this._tweenEasing = this._animationState.clip.tweenEasing,
                        isNaN(this._tweenEasing) ? (this._tweenTransform = !1, this._tweenColor = !1) : (this._durationTransform.x = B9l.v2(g.transform.x, this._currentFrame.transform.x), this._durationTransform.y = B9l.A2(g.transform.y, this._currentFrame.transform.y), this._durationTransform.skewX = B9l.d2(g.transform.skewX, this._currentFrame.transform.skewX), this._durationTransform.skewY = B9l.t2(g.transform.skewY, this._currentFrame.transform.skewY), this._durationTransform.scaleX = B9l.C2(g.transform.scaleX, this._currentFrame.transform.scaleX), this._durationTransform.scaleY = B9l.a2(g.transform.scaleY, this._currentFrame.transform.scaleY), B9l.h2(0, d) && (this._durationTransform.skewX = j.TransformUtil.formatRadian(this._durationTransform.skewX), this._durationTransform.skewY = j.TransformUtil.formatRadian(this._durationTransform.skewY)), this._durationPivot.x = B9l.H2(g.pivot.x, this._currentFrame.pivot.x), this._durationPivot.y = B9l.E2(g.pivot.y, this._currentFrame.pivot.y), B9l.l7(0, this._durationTransform.x) || B9l.X7(0, this._durationTransform.y) || B9l.s7(0, this._durationTransform.skewX) || B9l.F7(0, this._durationTransform.skewY) || B9l.G7(0, this._durationTransform.scaleX) || B9l.g7(0, this._durationTransform.scaleY) || B9l.n7(0, this._durationPivot.x) || B9l.y7(0, this._durationPivot.y) ? this._tweenTransform = !0 : this._tweenTransform = !1, this._currentFrame.color && g.color ? (this._durationColor.alphaOffset = B9l.N7(g.color.alphaOffset, this._currentFrame.color.alphaOffset), this._durationColor.redOffset = B9l.p7(g.color.redOffset, this._currentFrame.color.redOffset), this._durationColor.greenOffset = B9l.o7(g.color.greenOffset, this._currentFrame.color.greenOffset), this._durationColor.blueOffset = B9l.U7(g.color.blueOffset, this._currentFrame.color.blueOffset), this._durationColor.alphaMultiplier = B9l.k7(g.color.alphaMultiplier, this._currentFrame.color.alphaMultiplier), this._durationColor.redMultiplier = B9l.M7(g.color.redMultiplier, this._currentFrame.color.redMultiplier), this._durationColor.greenMultiplier = B9l.j7(g.color.greenMultiplier, this._currentFrame.color.greenMultiplier), this._durationColor.blueMultiplier = B9l.T7(g.color.blueMultiplier, this._currentFrame.color.blueMultiplier), B9l.O7(0, this._durationColor.alphaOffset) || B9l.e7(0, this._durationColor.redOffset) || B9l.W4S(0, this._durationColor.greenOffset) || B9l.q4S(0, this._durationColor.blueOffset) || B9l.V4S(0, this._durationColor.alphaMultiplier) || B9l.Y4S(0, this._durationColor.redMultiplier) || B9l.z4S(0, this._durationColor.greenMultiplier) || B9l.D4S(0, this._durationColor.blueMultiplier) ? this._tweenColor = !0 : this._tweenColor = !1) : this._currentFrame.color ? (this._tweenColor = !0, this._durationColor.alphaOffset = -this._currentFrame.color.alphaOffset, this._durationColor.redOffset = -this._currentFrame.color.redOffset, this._durationColor.greenOffset = -this._currentFrame.color.greenOffset, this._durationColor.blueOffset = -this._currentFrame.color.blueOffset, this._durationColor.alphaMultiplier = B9l.J4S(1, this._currentFrame.color.alphaMultiplier), this._durationColor.redMultiplier = B9l.B4S(1, this._currentFrame.color.redMultiplier), this._durationColor.greenMultiplier = B9l.f4S(1, this._currentFrame.color.greenMultiplier), this._durationColor.blueMultiplier = B9l.u4S(1, this._currentFrame.color.blueMultiplier)) : g.color ? (this._tweenColor = !0, this._durationColor.alphaOffset = g.color.alphaOffset, this._durationColor.redOffset = g.color.redOffset, this._durationColor.greenOffset = g.color.greenOffset, this._durationColor.blueOffset = g.color.blueOffset, this._durationColor.alphaMultiplier = B9l.w4S(g.color.alphaMultiplier, 1), this._durationColor.redMultiplier = B9l.I4S(g.color.redMultiplier, 1), this._durationColor.greenMultiplier = B9l.r4S(g.color.greenMultiplier, 1), this._durationColor.blueMultiplier = B9l.L4S(g.color.blueMultiplier, 1)) : this._tweenColor = !1),
                        this._tweenTransform || (this._animationState.blend ? (this.transform.x = this._originTransform.x + this._currentFrame.transform.x, this.transform.y = this._originTransform.y + this._currentFrame.transform.y, this.transform.skewX = this._originTransform.skewX + this._currentFrame.transform.skewX, this.transform.skewY = this._originTransform.skewY + this._currentFrame.transform.skewY, this.transform.scaleX = this._originTransform.scaleX + this._currentFrame.transform.scaleX, this.transform.scaleY = this._originTransform.scaleY + this._currentFrame.transform.scaleY, this.pivot.x = this._originPivot.x + this._currentFrame.pivot.x, this.pivot.y = this._originPivot.y + this._currentFrame.pivot.y) : (this.transform.x = this._currentFrame.transform.x, this.transform.y = this._currentFrame.transform.y, this.transform.skewX = this._currentFrame.transform.skewX, this.transform.skewY = this._currentFrame.transform.skewY, this.transform.scaleX = this._currentFrame.transform.scaleX, this.transform.scaleY = this._currentFrame.transform.scaleY, this.pivot.x = this._currentFrame.pivot.x, this.pivot.y = this._currentFrame.pivot.y)),
                        this._tweenColor || (this._currentFrame.color ? this._bone._updateColor(this._currentFrame.color.alphaOffset, this._currentFrame.color.redOffset, this._currentFrame.color.greenOffset, this._currentFrame.color.blueOffset, this._currentFrame.color.alphaMultiplier, this._currentFrame.color.redMultiplier, this._currentFrame.color.greenMultiplier, this._currentFrame.color.blueMultiplier, !0) : this._bone._isColorChanged && this._bone._updateColor(0, 0, 0, 0, 1, 1, 1, 1, !1)),
                        this._bone._arriveAtFrame(this._currentFrame, this, this._animationState, !1)
                    }
                    if ((this._tweenTransform || this._tweenColor) && (b = B9l.b4S(e - this._currentFramePosition, this._currentFrameDuration), this._tweenEasing && (b = a.getEaseValue(b, this._tweenEasing))), this._tweenTransform) {
                        var h = this._currentFrame.transform,
                        i = this._currentFrame.pivot;
                        this._animationState.blend ? (this.transform.x = this._originTransform.x + h.x + B9l.R4S(this._durationTransform.x, b), this.transform.y = this._originTransform.y + h.y + B9l.S4S(this._durationTransform.y, b), this.transform.skewX = this._originTransform.skewX + h.skewX + B9l.c1S(this._durationTransform.skewX, b), this.transform.skewY = this._originTransform.skewY + h.skewY + B9l.P1S(this._durationTransform.skewY, b), this.transform.scaleX = this._originTransform.scaleX + h.scaleX + B9l.Z1S(this._durationTransform.scaleX, b), this.transform.scaleY = this._originTransform.scaleY + h.scaleY + B9l.i1S(this._durationTransform.scaleY, b), this.pivot.x = this._originPivot.x + i.x + B9l.K1S(this._durationPivot.x, b), this.pivot.y = this._originPivot.y + i.y + B9l.m1S(this._durationPivot.y, b)) : (this.transform.x = h.x + B9l.Q1S(this._durationTransform.x, b), this.transform.y = h.y + B9l.x1S(this._durationTransform.y, b), this.transform.skewX = h.skewX + B9l.v1S(this._durationTransform.skewX, b), this.transform.skewY = h.skewY + B9l.A1S(this._durationTransform.skewY, b), this.transform.scaleX = h.scaleX + B9l.d1S(this._durationTransform.scaleX, b), this.transform.scaleY = h.scaleY + B9l.t1S(this._durationTransform.scaleY, b), this.pivot.x = i.x + B9l.C1S(this._durationPivot.x, b), this.pivot.y = i.y + B9l.a1S(this._durationPivot.y, b))
                    }
                    this._tweenColor && (this._currentFrame.color ? this._bone._updateColor(this._currentFrame.color.alphaOffset + B9l.h1S(this._durationColor.alphaOffset, b), this._currentFrame.color.redOffset + B9l.H1S(this._durationColor.redOffset, b), this._currentFrame.color.greenOffset + B9l.E1S(this._durationColor.greenOffset, b), this._currentFrame.color.blueOffset + B9l.l6S(this._durationColor.blueOffset, b), this._currentFrame.color.alphaMultiplier + B9l.X6S(this._durationColor.alphaMultiplier, b), this._currentFrame.color.redMultiplier + B9l.s6S(this._durationColor.redMultiplier, b), this._currentFrame.color.greenMultiplier + B9l.F6S(this._durationColor.greenMultiplier, b), this._currentFrame.color.blueMultiplier + B9l.G6S(this._durationColor.blueMultiplier, b), !0) : this._bone._updateColor(B9l.g6S(this._durationColor.alphaOffset, b), B9l.n6S(this._durationColor.redOffset, b), B9l.y6S(this._durationColor.greenOffset, b), B9l.N6S(this._durationColor.blueOffset, b), 1 + B9l.p6S(this._durationColor.alphaMultiplier, b), 1 + B9l.o6S(this._durationColor.redMultiplier, b), 1 + B9l.U6S(this._durationColor.greenMultiplier, b), 1 + B9l.k6S(this._durationColor.blueMultiplier, b), !0))
                } else this._updateState = 0,
                this._animationState.blend ? (this.transform.copy(this._originTransform), this.pivot.x = this._originPivot.x, this.pivot.y = this._originPivot.y) : (this.transform.x = this.transform.y = this.transform.skewX = this.transform.skewY = this.transform.scaleX = this.transform.scaleY = 0, this.pivot.x = 0, this.pivot.y = 0),
                this._currentFrame = this._timeline.getFrameList()[0],
                this.tweenActive = B9l.M6S(this._currentFrame.displayIndex, 0),
                this._currentFrame.color ? this._bone._updateColor(this._currentFrame.color.alphaOffset, this._currentFrame.color.redOffset, this._currentFrame.color.greenOffset, this._currentFrame.color.blueOffset, this._currentFrame.color.alphaMultiplier, this._currentFrame.color.redMultiplier, this._currentFrame.color.greenMultiplier, this._currentFrame.color.blueMultiplier, !0) : this._bone._updateColor(0, 0, 0, 0, 1, 1, 1, 1, !1),
                this._bone._arriveAtFrame(this._currentFrame, this, this._animationState, !1)
            },
            a.prototype.clear = function() {
                this._updateState = 0,
                this._bone = null,
                this._animationState = null,
                this._timeline = null,
                this._currentFrame = null,
                this._originTransform = null,
                this._originPivot = null
            },
            a.HALF_PI = B9l.j6S(.5, Math.PI),
            a._pool = [],
            a
        } ();
        d(k);
        var l = function() {
            function a() {
                this.loop = 0,
                this.layer = 0,
                this._timelineStates = {}
            }
            return a._borrowObject = function() {
                return B9l.T6S(0, a._pool.length) ? new a: a._pool.pop()
            },
            a._returnObject = function(b) {
                B9l.O6S(a._pool.indexOf(b), 0) && (a._pool[a._pool.length] = b),
                b.clear()
            },
            a._clear = function() {
                for (var b = function(b) {
                    a._pool.length = b
                },
                c = a._pool.length; c--;) a._pool[c].clear();
                b(0)
            },
            a.prototype.fadeIn = function(a, b, c, d, e, f, g, h) {
                this.layer = f,
                this.clip = b,
                this.name = this.clip.name,
                this.totalTime = this.clip.duration,
                this._armature = a,
                B9l.e6S(Math.round(this.clip.duration * this.clip.frameRate), 2) || B9l.W0S(d, 1 / 0) ? (this.timeScale = 1, this.currentTime = this.totalTime, B9l.q0S(this.loop, 0) ? this.loop = 1 : this.loop = -1) : (this.timeScale = d, this.currentTime = 0, this.loop = e),
                this._pauseBeforeFadeInComplete = h,
                this._fadeInTime = B9l.V0S(c, this.timeScale),
                this._fadeState = 1,
                this._fadeOutBeginTime = 0,
                this._fadeOutWeight = -1,
                this._fadeWeight = 0,
                this._fadeIn = !0,
                this._fadeOut = !1,
                this.loopCount = -1,
                this.displayControl = g,
                this.isPlaying = !0,
                this.isComplete = !1,
                this.weight = 1,
                this.blend = !0,
                this.enabled = !0,
                this.tweenEnabled = !0,
                this.updateTimelineStates()
            },
            a.prototype.fadeOut = function(a, b) {
                if ("undefined" == typeof b && (b = !1), this._armature && !B9l.Y0S(this._fadeOutWeight, 0)) {
                    this._fadeState = -1,
                    this._fadeOutWeight = this._fadeWeight,
                    this._fadeOutTime = B9l.z0S(a, this.timeScale),
                    this._fadeOutBeginTime = this.currentTime,
                    this._fadeOut = !0,
                    this.isPlaying = !b,
                    this.displayControl = !1;
                    for (var c in this._timelineStates) this._timelineStates[c].fadeOut();
                    this.enabled = !0
                }
            },
            a.prototype.play = function() {
                this.isPlaying = !0
            },
            a.prototype.stop = function() {
                this.isPlaying = !1
            },
            a.prototype.getMixingTransform = function(a) {
                return this._mixingTransforms ? Number(this._mixingTransforms[a]) : -1
            },
            a.prototype.addMixingTransform = function(a, b, c) {
                if ("undefined" == typeof b && (b = 2), "undefined" == typeof c && (c = !0), !this.clip || !this.clip.getTimeline(a)) throw new Error;
                if (this._mixingTransforms || (this._mixingTransforms = {}), c) for (var d, e, f = this._armature._boneList.length; f--;) d = this._armature._boneList[f],
                B9l.D0S(d.name, a) && (e = d),
                e && (B9l.J0S(e, d) || e.contains(d)) && (this._mixingTransforms[d.name] = b);
                else this._mixingTransforms[a] = b;
                this.updateTimelineStates()
            },
            a.prototype.removeMixingTransform = function(a, b) {
                if ("undefined" == typeof a && (a = null), "undefined" == typeof b && (b = !0), a) {
                    if (b) for (var c, d, e = this._armature._boneList.length; e--;) c = this._armature._boneList[e],
                    B9l.B0S(c.name, a) && (d = c),
                    d && (B9l.f0S(d, c) || d.contains(c)) && delete this._mixingTransforms[c.name];
                    else delete this._mixingTransforms[a];
                    for (var f in this._mixingTransforms) {
                        var g = !0;
                        break
                    }
                    g || (this._mixingTransforms = null)
                } else this._mixingTransforms = null;
                this.updateTimelineStates()
            },
            a.prototype.advanceTime = function(a) {
                if (!this.enabled) return ! 1;
                var b, c;
                if (this._fadeIn && (this._fadeIn = !1, this._armature.hasEventListener(g.AnimationEvent.FADE_IN) && (b = new g.AnimationEvent(g.AnimationEvent.FADE_IN), b.animationState = this, this._armature._eventList.push(b))), this._fadeOut && (this._fadeOut = !1, this._armature.hasEventListener(g.AnimationEvent.FADE_OUT) && (b = new g.AnimationEvent(g.AnimationEvent.FADE_OUT), b.animationState = this, this._armature._eventList.push(b))), this.currentTime += B9l.u0S(a, this.timeScale), this.isPlaying && !this.isComplete) {
                    var d, e;
                    this._pauseBeforeFadeInComplete ? (this._pauseBeforeFadeInComplete = !1, this.isPlaying = !1, d = 0, e = Math.floor(d)) : (d = B9l.w0S(this.currentTime, this.totalTime), e = Math.floor(d), B9l.I0S(e, this.loopCount) && ( - 1 == this.loopCount && this._armature.hasEventListener(g.AnimationEvent.START) && (b = new g.AnimationEvent(g.AnimationEvent.START), b.animationState = this, this._armature._eventList.push(b)), this.loopCount = e, this.loopCount && (this.loop && B9l.r0S(this.loopCount * this.loopCount, this.loop * this.loop - 1) ? (c = !0, d = 1, e = 0, this._armature.hasEventListener(g.AnimationEvent.COMPLETE) && (b = new g.AnimationEvent(g.AnimationEvent.COMPLETE), b.animationState = this, this._armature._eventList.push(b))) : this._armature.hasEventListener(g.AnimationEvent.LOOP_COMPLETE) && (b = new g.AnimationEvent(g.AnimationEvent.LOOP_COMPLETE), b.animationState = this, this._armature._eventList.push(b)))));
                    for (var f in this._timelineStates) this._timelineStates[f].update(d);
                    var h = this.clip.getFrameList();
                    if (B9l.L0S(h.length, 0)) {
                        for (var i, j = B9l.b0S(this.totalTime, d - e), k = !1; ! this._currentFrame || B9l.R0S(j, this._currentFrame.position + this._currentFrame.duration) || B9l.S0S(j, this._currentFrame.position);) k && this._armature._arriveAtFrame(this._currentFrame, null, this, !0),
                        k = !0,
                        this._currentFrame ? (i = h.indexOf(this._currentFrame), i++, B9l.c5S(i, h.length) && (i = 0), this._currentFrame = h[i]) : this._currentFrame = h[0];
                        k && this._armature._arriveAtFrame(this._currentFrame, null, this, !1)
                    }
                }
                if (B9l.P5S(this._fadeState, 0)) B9l.Z5S(0, this._fadeInTime) ? (this._fadeWeight = 1, this._fadeState = 0, this.isPlaying = !0, this._armature.hasEventListener(g.AnimationEvent.FADE_IN_COMPLETE) && (b = new g.AnimationEvent(g.AnimationEvent.FADE_IN_COMPLETE), b.animationState = this, this._armature._eventList.push(b))) : (this._fadeWeight = B9l.i5S(this.currentTime, this._fadeInTime), B9l.K5S(this._fadeWeight, 1) && (this._fadeWeight = 1, this._fadeState = 0, this.isPlaying || (this.currentTime -= this._fadeInTime), this.isPlaying = !0, this._armature.hasEventListener(g.AnimationEvent.FADE_IN_COMPLETE) && (b = new g.AnimationEvent(g.AnimationEvent.FADE_IN_COMPLETE), b.animationState = this, this._armature._eventList.push(b))));
                else if (B9l.m5S(this._fadeState, 0)) {
                    if (B9l.Q5S(0, this._fadeOutTime)) return this._fadeWeight = 0,
                    this._fadeState = 0,
                    this._armature.hasEventListener(g.AnimationEvent.FADE_OUT_COMPLETE) && (b = new g.AnimationEvent(g.AnimationEvent.FADE_OUT_COMPLETE), b.animationState = this, this._armature._eventList.push(b)),
                    !0;
                    if (this._fadeWeight = B9l.x5S(1 - (this.currentTime - this._fadeOutBeginTime) / this._fadeOutTime, this._fadeOutWeight), B9l.v5S(this._fadeWeight, 0)) return this._fadeWeight = 0,
                    this._fadeState = 0,
                    this._armature.hasEventListener(g.AnimationEvent.FADE_OUT_COMPLETE) && (b = new g.AnimationEvent(g.AnimationEvent.FADE_OUT_COMPLETE), b.animationState = this, this._armature._eventList.push(b)),
                    !0
                }
                return c && (this.isComplete = !0, B9l.A5S(this.loop, 0) && this.fadeOut(B9l.d5S(this._fadeOutWeight || this._fadeInTime, this.timeScale), !0)),
                !1
            },
            a.prototype.updateTimelineStates = function() {
                if (this._mixingTransforms) {
                    for (var a in this._timelineStates) B9l.t5S(null, this._mixingTransforms[a]) && this.removeTimelineState(a);
                    for (a in this._mixingTransforms) this._timelineStates[a] || this.addTimelineState(a)
                } else for (a in this.clip.getTimelines()) this._timelineStates[a] || this.addTimelineState(a)
            },
            a.prototype.addTimelineState = function(a) {
                var b = this._armature.getBone(a);
                if (b) {
                    var c = k._borrowObject(),
                    d = this.clip.getTimeline(a);
                    c.fadeIn(b, this, d),
                    this._timelineStates[a] = c
                }
            },
            a.prototype.removeTimelineState = function(a) {
                k._returnObject(this._timelineStates[a]),
                delete this._timelineStates[a]
            },
            a.prototype.clear = function() {
                this.clip = null,
                this.enabled = !1,
                this._armature = null,
                this._currentFrame = null,
                this._mixingTransforms = null;
                for (var a in this._timelineStates) this.removeTimelineState(a)
            },
            a._pool = [],
            a
        } ();
        c(l);
        var m = function() {
            function a(a) {
                this._armature = a,
                this._animationLayer = [],
                this._isPlaying = !1,
                this.animationNameList = [],
                this.tweenEnabled = !0,
                this.timeScale = 1
            }
            return a.prototype.getLastAnimationName = function() {
                return this._lastAnimationState ? this._lastAnimationState.name: null
            },
            a.prototype.getLastAnimationState = function() {
                return this._lastAnimationState
            },
            a.prototype.getAnimationDataList = function() {
                return this._animationDataList
            },
            a.prototype.setAnimationDataList = function(a) {
                this._animationDataList = a,
                this.animationNameList.length = 0;
                for (var b in this._animationDataList) this.animationNameList[this.animationNameList.length] = this._animationDataList[b].name
            },
            a.prototype.getIsPlaying = function() {
                return this._isPlaying && !this.getIsComplete()
            },
            a.prototype.getIsComplete = function() {
                if (this._lastAnimationState) {
                    if (!this._lastAnimationState.isComplete) return ! 1;
                    for (var a = this._animationLayer.length; a--;) for (var b = this._animationLayer[a], c = b.length; c--;) if (!b[c].isComplete) return ! 1;
                    return ! 0
                }
                return ! 1
            },
            a.prototype.dispose = function() {
                if (this._armature) {
                    this.stop();
                    for (var a = this._animationLayer.length; a--;) {
                        for (var b = function(a) {
                            c.length = a
                        },
                        c = this._animationLayer[a], d = c.length; d--;) l._returnObject(c[d]);
                        b(0)
                    }
                    this._animationLayer.length = 0,
                    this.animationNameList.length = 0,
                    this._armature = null,
                    this._animationLayer = null,
                    this._animationDataList = null,
                    this.animationNameList = null
                }
            },
            a.prototype.gotoAndPlay = function(b, c, d, e, f, g, h, i, j, k) {
                if ("undefined" == typeof c && (c = -1), "undefined" == typeof d && (d = -1), "undefined" == typeof e && (e = NaN), "undefined" == typeof f && (f = 0), "undefined" == typeof g && (g = null), "undefined" == typeof h && (h = a.SAME_LAYER_AND_GROUP), "undefined" == typeof i && (i = !0), "undefined" == typeof j && (j = !0), "undefined" == typeof k && (k = !0), !this._animationDataList) return null;
                for (var m, n = this._animationDataList.length; n--;) if (B9l.C5S(this._animationDataList[n].name, b)) {
                    m = this._animationDataList[n];
                    break
                }
                if (!m) return null;
                this._isPlaying = !0,
                c = B9l.a5S(0, c) ? B9l.h5S(m.fadeInTime, 0) ? .3 : m.fadeInTime: c;
                var o;
                o = B9l.H5S(0, d) ? B9l.E5S(m.scale, 0) ? 1 : m.scale: B9l.l3S(d, m.duration),
                e = isNaN(e) ? m.loop: e,
                f = this.addLayer(f);
                var p, q;
                switch (h) {
                case a.NONE:
                    break;
                case a.SAME_LAYER:
                    for (q = this._animationLayer[f], n = q.length; n--;) p = q[n],
                    p.fadeOut(c, j);
                    break;
                case a.SAME_GROUP:
                    for (r = this._animationLayer.length; r--;) for (q = this._animationLayer[r], n = q.length; n--;) p = q[n],
                    B9l.X3S(p.group, g) && p.fadeOut(c, j);
                    break;
                case a.ALL:
                    for (var r = this._animationLayer.length; r--;) for (q = this._animationLayer[r], n = q.length; n--;) p = q[n],
                    p.fadeOut(c, j);
                    break;
                case a.SAME_LAYER_AND_GROUP:
                default:
                    for (q = this._animationLayer[f], n = q.length; n--;) p = q[n],
                    B9l.s3S(p.group, g) && p.fadeOut(c, j)
                }
                this._lastAnimationState = l._borrowObject(),
                this._lastAnimationState.group = g,
                this._lastAnimationState.tweenEnabled = this.tweenEnabled,
                this._lastAnimationState.fadeIn(this._armature, m, c, B9l.F3S(1, o), e, f, i, k),
                this.addState(this._lastAnimationState);
                var s, t, u = this._armature._slotList;
                for (n = u.length; n--;) s = u[n],
                t = s.getChildArmature(),
                t && t.animation.gotoAndPlay(b, c);
                return this._lastAnimationState
            },
            a.prototype.play = function() {
                this._animationDataList && B9l.G3S(0, this._animationDataList.length) && (this._lastAnimationState ? this._isPlaying ? this.gotoAndPlay(this._lastAnimationState.name) : this._isPlaying = !0 : this.gotoAndPlay(this._animationDataList[0].name))
            },
            a.prototype.stop = function() {
                this._isPlaying = !1
            },
            a.prototype.getState = function(a, b) {
                "undefined" == typeof b && (b = 0);
                var c = this._animationLayer.length;
                if (B9l.g3S(0, c)) return null;
                B9l.n3S(b, c) && (b = B9l.y3S(c, 1));
                var d = this._animationLayer[b];
                if (!d) return null;
                for (var e = d.length; e--;) if (B9l.N3S(d[e].name, a)) return d[e];
                return null
            },
            a.prototype.hasAnimation = function(a) {
                for (var b = this._animationDataList.length; b--;) if (B9l.p3S(this._animationDataList[b].name, a)) return ! 0;
                return ! 1
            },
            a.prototype.advanceTime = function(a) {
                if (this._isPlaying) {
                    a *= this.timeScale;
                    var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w = this._armature._boneList.length,
                    x = w;
                    for (w--; x--;) {
                        for (e = this._armature._boneList[x], f = e.name, g = 1, h = 0, i = 0, j = 0, k = 0, l = 0, m = 0, n = 0, o = 0, b = this._animationLayer.length; b--;) {
                            for (p = 0, q = this._animationLayer[b], d = q.length, c = 0; B9l.o3S(d, c); c++) r = q[c],
                            B9l.U3S(x, w) && r.advanceTime(a) ? (this.removeState(r), c--, d--) : (s = r._timelineStates[f], s && s.tweenActive && (t = B9l.k3S(r._fadeWeight, r.weight, g), u = s.transform, v = s.pivot, h += B9l.a3S(u.x, t), i += B9l.h3S(u.y, t), j += B9l.H3S(u.skewX, t), k += B9l.E3S(u.skewY, t), l += B9l.l9S(u.scaleX, t), m += B9l.X9S(u.scaleY, t), n += B9l.s9S(v.x, t), o += B9l.F9S(v.y, t), p += t));
                            if (B9l.G9S(p, g)) break;
                            g -= p
                        }
                        u = e.tween,
                        v = e._tweenPivot,
                        u.x = h,
                        u.y = i,
                        u.skewX = j,
                        u.skewY = k,
                        u.scaleX = l,
                        u.scaleY = m,
                        v.x = n,
                        v.y = o
                    }
                }
            },
            a.prototype.addLayer = function(a) {
                return B9l.g9S(a, this._animationLayer.length) && (a = this._animationLayer.length, this._animationLayer[a] = []),
                a
            },
            a.prototype.addState = function(a) {
                var b = this._animationLayer[a.layer];
                b.push(a)
            },
            a.prototype.removeState = function(a) {
                var b = a.layer,
                c = this._animationLayer[b];
                c.splice(c.indexOf(a), 1),
                l._returnObject(a),
                B9l.n9S(0, c.length) && B9l.y9S(b, this._animationLayer.length - 1) && this._animationLayer.length--
            },
            a.NONE = "none",
            a.SAME_LAYER = "sameLayer",
            a.SAME_GROUP = "sameGroup",
            a.SAME_LAYER_AND_GROUP = "sameLayerAndGroup",
            a.ALL = "all",
            a
        } ();
        b(m)
    } (a.animation || (a.animation = {}));
    var h = a.animation; !
    function(a) {
        var b = function(b) {
            a.DataParser = b
        },
        c = function(b) {
            a.SkeletonData = b
        },
        d = function(b) {
            a.ArmatureData = b
        },
        e = function(b) {
            a.SkinData = b
        },
        g = function(b) {
            a.BoneData = b
        },
        h = function(b) {
            a.SlotData = b
        },
        i = function(b) {
            a.DisplayData = b
        },
        k = function(b) {
            a.AnimationData = b
        },
        l = function(b) {
            a.TransformTimeline = b
        },
        m = function(b) {
            a.Timeline = b
        },
        n = function(b) {
            a.TransformFrame = b
        },
        o = function(b) {
            a.Frame = b
        },
        p = function(b) {
            a.DBTransform = b
        },
        q = function() {
            function a() {
                this.x = 0,
                this.y = 0,
                this.skewX = 0,
                this.skewY = 0,
                this.scaleX = 1,
                this.scaleY = 1
            }
            return a.prototype.getRotation = function() {
                return this.skewX
            },
            a.prototype.setRotation = function(a) {
                this.skewX = this.skewY = a
            },
            a.prototype.copy = function(a) {
                this.x = a.x,
                this.y = a.y,
                this.skewX = a.skewX,
                this.skewY = a.skewY,
                this.scaleX = a.scaleX,
                this.scaleY = a.scaleY
            },
            a.prototype.toString = function() {
                return "[DBTransform (x=" + this.x + " y=" + this.y + " skewX=" + this.skewX + " skewY=" + this.skewY + " scaleX=" + this.scaleX + " scaleY=" + this.scaleY + ")]"
            },
            a
        } ();
        p(q);
        var r = function() {
            function a() {
                this.position = 0,
                this.duration = 0
            }
            return a.prototype.dispose = function() {},
            a
        } ();
        o(r);
        var s = function(a) {
            function b() {
                a.call(this),
                this.tweenEasing = 0,
                this.tweenRotate = 0,
                this.displayIndex = 0,
                this.zOrder = NaN,
                this.visible = !0,
                this.global = new q,
                this.transform = new q,
                this.pivot = new f.Point
            }
            return __extends(b, a),
            b.prototype.dispose = function() {
                a.prototype.dispose.call(this),
                this.global = null,
                this.transform = null,
                this.pivot = null,
                this.color = null
            },
            b
        } (r);
        n(s);
        var t = function() {
            function a() {
                this._frameList = [],
                this.duration = 0,
                this.scale = 1
            }
            return a.prototype.getFrameList = function() {
                return this._frameList
            },
            a.prototype.dispose = function() {
                for (var a = this._frameList.length; a--;) this._frameList[a].dispose();
                this._frameList.length = 0,
                this._frameList = null
            },
            a.prototype.addFrame = function(a) {
                if (!a) throw new Error;
                if (!B9l.N9S(this._frameList.indexOf(a), 0)) throw new Error;
                this._frameList[this._frameList.length] = a
            },
            a
        } ();
        m(t);
        var u = function(a) {
            function b() {
                a.call(this),
                this.originTransform = new q,
                this.originPivot = new f.Point,
                this.offset = 0,
                this.transformed = !1
            }
            return __extends(b, a),
            b.prototype.dispose = function() {
                B9l.p9S(this, b.HIDE_TIMELINE) && (a.prototype.dispose.call(this), this.originTransform = null, this.originPivot = null)
            },
            b.HIDE_TIMELINE = new b,
            b
        } (t);
        l(u);
        var v = function(a) {
            function b() {
                a.call(this),
                this.frameRate = 0,
                this.loop = 0,
                this.tweenEasing = NaN,
                this.fadeInTime = 0,
                this._timelines = {}
            }
            return __extends(b, a),
            b.prototype.getTimelines = function() {
                return this._timelines
            },
            b.prototype.dispose = function() {
                a.prototype.dispose.call(this);
                for (var b in this._timelines) this._timelines[b].dispose();
                this._timelines = null
            },
            b.prototype.getTimeline = function(a) {
                return this._timelines[a]
            },
            b.prototype.addTimeline = function(a, b) {
                if (!a) throw new Error;
                this._timelines[b] = a
            },
            b
        } (t);
        k(v);
        var w = function() {
            function a() {
                this.transform = new q
            }
            return a.prototype.dispose = function() {
                this.transform = null,
                this.pivot = null
            },
            a.ARMATURE = "armature",
            a.IMAGE = "image",
            a
        } ();
        i(w);
        var x = function() {
            function a() {
                this._displayDataList = [],
                this.zOrder = 0
            }
            return a.prototype.getDisplayDataList = function() {
                return this._displayDataList
            },
            a.prototype.dispose = function() {
                for (var a = this._displayDataList.length; a--;) this._displayDataList[a].dispose();
                this._displayDataList.length = 0,
                this._displayDataList = null
            },
            a.prototype.addDisplayData = function(a) {
                if (!a) throw new Error;
                if (!B9l.o9S(this._displayDataList.indexOf(a), 0)) throw new Error;
                this._displayDataList[this._displayDataList.length] = a
            },
            a.prototype.getDisplayData = function(a) {
                for (var b = this._displayDataList.length; b--;) if (B9l.U9S(this._displayDataList[b].name, a)) return this._displayDataList[b];
                return null
            },
            a
        } ();
        h(x);
        var y = function() {
            function a() {
                this.length = 0,
                this.global = new q,
                this.transform = new q
            }
            return a.prototype.dispose = function() {
                this.global = null,
                this.transform = null
            },
            a
        } ();
        g(y);
        var z = function() {
            function a() {
                this._slotDataList = []
            }
            return a.prototype.getSlotDataList = function() {
                return this._slotDataList
            },
            a.prototype.dispose = function() {
                for (var a = this._slotDataList.length; a--;) this._slotDataList[a].dispose();
                this._slotDataList.length = 0,
                this._slotDataList = null
            },
            a.prototype.getSlotData = function(a) {
                for (var b = this._slotDataList.length; b--;) if (B9l.k9S(this._slotDataList[b].name, a)) return this._slotDataList[b];
                return null
            },
            a.prototype.addSlotData = function(a) {
                if (!a) throw new Error;
                if (!B9l.M9S(this._slotDataList.indexOf(a), 0)) throw new Error;
                this._slotDataList[this._slotDataList.length] = a
            },
            a
        } ();
        e(z);
        var A = function() {
            function a() {
                this._boneDataList = [],
                this._skinDataList = [],
                this._animationDataList = []
            }
            return a.prototype.getBoneDataList = function() {
                return this._boneDataList
            },
            a.prototype.getSkinDataList = function() {
                return this._skinDataList
            },
            a.prototype.getAnimationDataList = function() {
                return this._animationDataList
            },
            a.prototype.dispose = function() {
                for (var a = this._boneDataList.length; a--;) this._boneDataList[a].dispose();
                for (a = this._skinDataList.length; a--;) this._skinDataList[a].dispose();
                for (a = this._animationDataList.length; a--;) this._animationDataList[a].dispose();
                this._boneDataList.length = 0,
                this._skinDataList.length = 0,
                this._animationDataList.length = 0,
                this._boneDataList = null,
                this._skinDataList = null,
                this._animationDataList = null
            },
            a.prototype.getBoneData = function(a) {
                for (var b = this._boneDataList.length; b--;) if (B9l.j9S(this._boneDataList[b].name, a)) return this._boneDataList[b];
                return null
            },
            a.prototype.getSkinData = function(a) {
                if (!a) return this._skinDataList[0];
                for (var b = this._skinDataList.length; b--;) if (B9l.T9S(this._skinDataList[b].name, a)) return this._skinDataList[b];
                return null
            },
            a.prototype.getAnimationData = function(a) {
                for (var b = this._animationDataList.length; b--;) if (B9l.O9S(this._animationDataList[b].name, a)) return this._animationDataList[b];
                return null
            },
            a.prototype.addBoneData = function(a) {
                if (!a) throw new Error;
                if (!B9l.e9S(this._boneDataList.indexOf(a), 0)) throw new Error;
                this._boneDataList[this._boneDataList.length] = a
            },
            a.prototype.addSkinData = function(a) {
                if (!a) throw new Error;
                if (!B9l.W8S(this._skinDataList.indexOf(a), 0)) throw new Error;
                this._skinDataList[this._skinDataList.length] = a
            },
            a.prototype.addAnimationData = function(a) {
                if (!a) throw new Error;
                B9l.q8S(this._animationDataList.indexOf(a), 0) && (this._animationDataList[this._animationDataList.length] = a)
            },
            a.prototype.sortBoneDataList = function() {
                var a = this._boneDataList.length;
                if (B9l.V8S(0, a)) {
                    for (var b = []; a--;) {
                        for (var c = this._boneDataList[a], d = 0, e = c; e && e.parent;) d++,
                        e = this.getBoneData(e.parent);
                        b[a] = {
                            level: d,
                            boneData: c
                        }
                    }
                    for (b.sort(this.sortBoneData), a = b.length; a--;) this._boneDataList[a] = b[a].boneData
                }
            },
            a.prototype.sortBoneData = function(a, b) {
                return B9l.Y8S(a.level, b.level) ? 1 : -1
            },
            a
        } ();
        d(A);
        var B = function() {
            function a() {
                this._armatureDataList = [],
                this._subTexturePivots = {}
            }
            return a.prototype.getArmatureNames = function() {
                var a = [];
                for (var b in this._armatureDataList) a[a.length] = this._armatureDataList[b].name;
                return a
            },
            a.prototype.getArmatureDataList = function() {
                return this._armatureDataList
            },
            a.prototype.dispose = function() {
                for (var a in this._armatureDataList) this._armatureDataList[a].dispose();
                this._armatureDataList.length = 0,
                this._armatureDataList = null,
                this._subTexturePivots = null
            },
            a.prototype.getArmatureData = function(a) {
                for (var b = this._armatureDataList.length; b--;) if (B9l.z8S(this._armatureDataList[b].name, a)) return this._armatureDataList[b];
                return null
            },
            a.prototype.addArmatureData = function(a) {
                if (!a) throw new Error;
                if (!B9l.D8S(this._armatureDataList.indexOf(a), 0)) throw new Error;
                this._armatureDataList[this._armatureDataList.length] = a
            },
            a.prototype.removeArmatureData = function(a) {
                var b = this._armatureDataList.indexOf(a);
                B9l.J8S(b, 0) && this._armatureDataList.splice(b, 1)
            },
            a.prototype.removeArmatureDataByName = function(a) {
                for (var b = this._armatureDataList.length; b--;) B9l.B8S(this._armatureDataList[b].name, a) && this._armatureDataList.splice(b, 1)
            },
            a.prototype.getSubTexturePivot = function(a) {
                return this._subTexturePivots[a]
            },
            a.prototype.addSubTexturePivot = function(a, b, c) {
                var d = this._subTexturePivots[c];
                return d ? (d.x = a, d.y = b) : this._subTexturePivots[c] = d = new f.Point(a, b),
                d
            },
            a.prototype.removeSubTexturePivot = function(a) {
                if (a) delete this._subTexturePivots[a];
                else for (a in this._subTexturePivots) delete this._subTexturePivots[a]
            },
            a
        } ();
        c(B);
        var C = function() {
            function a() {}
            return a.parseTextureAtlasData = function(a, b) {
                var c = function(a) {
                    d.__name = a[j.ConstValues.A_NAME]
                };
                if ("undefined" == typeof b && (b = 1), !a) throw new Error;
                var d = {};
                c(a);
                var e = a[j.ConstValues.SUB_TEXTURE];
                for (var g in e) {
                    var h = function(a) {
                        d[k] = a
                    },
                    i = e[g],
                    k = i[j.ConstValues.A_NAME],
                    l = new f.Rectangle(B9l.f8S(Number(i[j.ConstValues.A_X]), b), B9l.u8S(Number(i[j.ConstValues.A_Y]), b), B9l.w8S(Number(i[j.ConstValues.A_WIDTH]), b), B9l.I8S(Number(i[j.ConstValues.A_HEIGHT]), b));
                    h(l)
                }
                return d
            },
            a.parseSkeletonData = function(b) {
                var c = function(a) {
                    e.name = a[j.ConstValues.A_NAME]
                };
                if (!b) throw new Error;
                var d = Number(b[j.ConstValues.A_FRAME_RATE]),
                e = new B;
                c(b);
                var f = b[j.ConstValues.ARMATURE];
                for (var g in f) {
                    var h = f[g];
                    e.addArmatureData(a.parseArmatureData(h, e, d))
                }
                return e
            },
            a.parseArmatureData = function(b, c, d) {
                var e = function(a) {
                    f.name = a[j.ConstValues.A_NAME]
                },
                f = new A;
                e(b);
                var g = b[j.ConstValues.BONE];
                for (var h in g) {
                    var i = g[h];
                    f.addBoneData(a.parseBoneData(i))
                }
                var k = b[j.ConstValues.SKIN];
                for (var h in k) {
                    var l = k[h];
                    f.addSkinData(a.parseSkinData(l, c))
                }
                j.DBDataUtil.transformArmatureData(f),
                f.sortBoneDataList();
                var m = b[j.ConstValues.ANIMATION];
                for (var h in m) {
                    var n = m[h];
                    f.addAnimationData(a.parseAnimationData(n, f, d))
                }
                return f
            },
            a.parseBoneData = function(b) {
                var c = new y;
                return c.name = b[j.ConstValues.A_NAME],
                c.parent = b[j.ConstValues.A_PARENT],
                c.length = Number(b[j.ConstValues.A_LENGTH]) || 0,
                a.parseTransform(b[j.ConstValues.TRANSFORM], c.global),
                c.transform.copy(c.global),
                c
            },
            a.parseSkinData = function(b, c) {
                var d = function(a) {
                    e.name = a[j.ConstValues.A_NAME]
                },
                e = new z;
                d(b);
                var f = b[j.ConstValues.SLOT];
                for (var g in f) {
                    var h = f[g];
                    e.addSlotData(a.parseSlotData(h, c))
                }
                return e
            },
            a.parseSlotData = function(b, c) {
                var d = new x;
                d.name = b[j.ConstValues.A_NAME],
                d.parent = b[j.ConstValues.A_PARENT],
                d.zOrder = Number(b[j.ConstValues.A_Z_ORDER]);
                var e = b[j.ConstValues.DISPLAY];
                for (var f in e) {
                    var g = e[f];
                    d.addDisplayData(a.parseDisplayData(g, c))
                }
                return d
            },
            a.parseDisplayData = function(b, c) {
                var d = new w;
                return d.name = b[j.ConstValues.A_NAME],
                d.type = b[j.ConstValues.A_TYPE],
                d.pivot = c.addSubTexturePivot(0, 0, d.name),
                a.parseTransform(b[j.ConstValues.TRANSFORM], d.transform, d.pivot),
                d
            },
            a.parseAnimationData = function(b, c, d) {
                var e = function(a) {
                    f.tweenEasing = a
                },
                f = new v;
                if (f.name = b[j.ConstValues.A_NAME], f.frameRate = d, f.loop = Number(b[j.ConstValues.A_LOOP]) || 0, f.fadeInTime = Number(b[j.ConstValues.A_FADE_IN_TIME]), f.duration = B9l.r8S(Number(b[j.ConstValues.A_DURATION]), d), f.scale = Number(b[j.ConstValues.A_SCALE]), b.hasOwnProperty(j.ConstValues.A_TWEEN_EASING)) {
                    var g = b[j.ConstValues.A_TWEEN_EASING];
                    void 0 == g || B9l.L8S(null, g) ? f.tweenEasing = NaN: f.tweenEasing = Number(g)
                } else e(NaN);
                a.parseTimeline(b, f, a.parseMainFrame, d);
                var h, i, k = b[j.ConstValues.TIMELINE];
                for (var l in k) {
                    var m = k[l];
                    h = a.parseTransformTimeline(m, f.duration, d),
                    i = m[j.ConstValues.A_NAME],
                    f.addTimeline(h, i)
                }
                return j.DBDataUtil.addHideTimeline(f, c),
                j.DBDataUtil.transformAnimationData(f, c),
                f
            },
            a.parseTimeline = function(a, b, c, d) {
                var e, f = 0,
                g = a[j.ConstValues.FRAME];
                for (var h in g) {
                    var i = g[h];
                    e = c(i, d),
                    e.position = f,
                    b.addFrame(e),
                    f += e.duration
                }
                e && (e.duration = B9l.b8S(b.duration, e.position))
            },
            a.parseTransformTimeline = function(b, c, d) {
                var e = new u;
                return e.duration = c,
                a.parseTimeline(b, e, a.parseTransformFrame, d),
                e.scale = Number(b[j.ConstValues.A_SCALE]),
                e.offset = Number(b[j.ConstValues.A_OFFSET]),
                e
            },
            a.parseFrame = function(a, b, c) {
                b.duration = B9l.R8S(Number(a[j.ConstValues.A_DURATION]), c),
                b.action = a[j.ConstValues.A_ACTION],
                b.event = a[j.ConstValues.A_EVENT],
                b.sound = a[j.ConstValues.A_SOUND]
            },
            a.parseMainFrame = function(b, c) {
                var d = new r;
                return a.parseFrame(b, d, c),
                d
            },
            a.parseTransformFrame = function(b, c) {
                var d = function(a) {
                    e.tweenEasing = a
                },
                e = new s;
                if (a.parseFrame(b, e, c), e.visible = B9l.S8S(1, Number(b[j.ConstValues.A_HIDE])), b.hasOwnProperty(j.ConstValues.A_TWEEN_EASING)) {
                    var g = b[j.ConstValues.A_TWEEN_EASING];
                    void 0 == g || B9l.c2S(null, g) ? e.tweenEasing = NaN: e.tweenEasing = Number(g)
                } else d(0);
                e.tweenRotate = Number(b[j.ConstValues.A_TWEEN_ROTATE]) || 0,
                e.displayIndex = Number(b[j.ConstValues.A_DISPLAY_INDEX]) || 0,
                e.zOrder = Number(b[j.ConstValues.A_Z_ORDER]) || 0,
                a.parseTransform(b[j.ConstValues.TRANSFORM], e.global, e.pivot),
                e.transform.copy(e.global);
                var h = b[j.ConstValues.COLOR_TRANSFORM];
                return h && (e.color = new f.ColorTransform, e.color.alphaOffset = Number(h[j.ConstValues.A_ALPHA_OFFSET]), e.color.redOffset = Number(h[j.ConstValues.A_RED_OFFSET]), e.color.greenOffset = Number(h[j.ConstValues.A_GREEN_OFFSET]), e.color.blueOffset = Number(h[j.ConstValues.A_BLUE_OFFSET]), e.color.alphaMultiplier = B9l.P2S(.01, Number(h[j.ConstValues.A_ALPHA_MULTIPLIER])), e.color.redMultiplier = B9l.Z2S(.01, Number(h[j.ConstValues.A_RED_MULTIPLIER])), e.color.greenMultiplier = B9l.i2S(.01, Number(h[j.ConstValues.A_GREEN_MULTIPLIER])), e.color.blueMultiplier = B9l.K2S(.01, Number(h[j.ConstValues.A_BLUE_MULTIPLIER]))),
                e
            },
            a.parseTransform = function(a, b, c) {
                "undefined" == typeof c && (c = null),
                a && (b && (b.x = Number(a[j.ConstValues.A_X]), b.y = Number(a[j.ConstValues.A_Y]), b.skewX = B9l.m2S(Number(a[j.ConstValues.A_SKEW_X]), j.ConstValues.ANGLE_TO_RADIAN), b.skewY = B9l.Q2S(Number(a[j.ConstValues.A_SKEW_Y]), j.ConstValues.ANGLE_TO_RADIAN), b.scaleX = Number(a[j.ConstValues.A_SCALE_X]), b.scaleY = Number(a[j.ConstValues.A_SCALE_Y])), c && (c.x = Number(a[j.ConstValues.A_PIVOT_X]), c.y = Number(a[j.ConstValues.A_PIVOT_Y])))
            },
            a
        } ();
        b(C)
    } (a.objects || (a.objects = {}));
    var i = a.objects; !
    function(b) {
        var c = function(a) {
            b.BaseFactory = a
        },
        d = function(b) {
            function c() {
                b.call(this),
                this._dataDic = {},
                this._textureAtlasDic = {},
                this._textureAtlasLoadingDic = {}
            }
            return __extends(c, b),
            c.prototype.getSkeletonData = function(a) {
                return this._dataDic[a]
            },
            c.prototype.addSkeletonData = function(a, b) {
                if (!a) throw new Error;
                if (b = b || a.name, !b) throw new Error("Unnamed data!");
                this._dataDic[b],
                this._dataDic[b] = a
            },
            c.prototype.removeSkeletonData = function(a) {
                delete this._dataDic[a]
            },
            c.prototype.getTextureAtlas = function(a) {
                return this._textureAtlasDic[a]
            },
            c.prototype.addTextureAtlas = function(a, b) {
                if (!a) throw new Error;
                if (b = b || a.name, !b) throw new Error("Unnamed data!");
                this._textureAtlasDic[b],
                this._textureAtlasDic[b] = a
            },
            c.prototype.removeTextureAtlas = function(a) {
                delete this._textureAtlasDic[a]
            },
            c.prototype.dispose = function(a) {
                if ("undefined" == typeof a && (a = !0), a) {
                    for (var b in this._dataDic) this._dataDic[b].dispose();
                    for (var b in this._textureAtlasDic) this._textureAtlasDic[b].dispose()
                }
                this._dataDic = null,
                this._textureAtlasDic = null,
                this._textureAtlasLoadingDic = null,
                this._currentDataName = null,
                this._currentTextureAtlasName = null
            },
            c.prototype.buildArmature = function(b, c, d, e, f) {
                var g = function(a) {
                    k.name = a
                };
                if (d) {
                    var h = this._dataDic[d];
                    if (h) var j = h.getArmatureData(b)
                } else for (d in this._dataDic) if (h = this._dataDic[d], j = h.getArmatureData(b)) break;
                if (!j) return null;
                this._currentDataName = d,
                this._currentTextureAtlasName = e || d;
                var k = this._generateArmature();
                g(b);
                var l, m, n = j.getBoneDataList();
                for (var o in n) m = n[o],
                l = new a.Bone,
                l.name = m.name,
                l.origin.copy(m.transform),
                j.getBoneData(m.parent) ? k.addChild(l, m.parent) : k.addChild(l, null);
                if (c && B9l.x2S(c, b)) {
                    var p = h.getArmatureData(c);
                    if (!p) for (d in this._dataDic) if (h = this._dataDic[d], p = h.getArmatureData(c)) break
                }
                p ? k.animation.setAnimationDataList(p.getAnimationDataList()) : k.animation.setAnimationDataList(j.getAnimationDataList());
                var q = j.getSkinData(f);
                if (!q) throw new Error;
                var r, s, t, u, v, w, x = [],
                y = q.getSlotDataList();
                for (var o in y) if (v = y[o], l = k.getBone(v.parent)) {
                    for (w = v.getDisplayDataList(), r = this._generateSlot(), r.name = v.name, r._originZOrder = v.zOrder, r._dislayDataList = w, x.length = 0, u = w.length; u--;) switch (s = w[u], s.type) {
                    case i.DisplayData.ARMATURE:
                        t = this.buildArmature(s.name, null, this._currentDataName, this._currentTextureAtlasName, null),
                        t && (x[u] = t);
                        break;
                    case i.DisplayData.IMAGE:
                    default:
                        x[u] = this._generateDisplay(this._textureAtlasDic[this._currentTextureAtlasName], s.name, s.pivot.x, s.pivot.y)
                    }
                    r.setDisplayList(x),
                    r._changeDisplay(0),
                    l.addChild(r)
                }
                return k._slotsZOrderChanged = !0,
                k.advanceTime(0),
                k
            },
            c.prototype.getTextureDisplay = function(a, b, c, d) {
                if (b) var e = this._textureAtlasDic[b];
                if (!e && !b) for (b in this._textureAtlasDic) {
                    var f = function(a) {
                        e = a
                    };
                    if (e = this._textureAtlasDic[b], e.getRegion(a)) break;
                    f(null)
                }
                if (e) {
                    if (isNaN(c) || isNaN(d)) {
                        var g = this._dataDic[b];
                        if (g) {
                            var h = g.getSubTexturePivot(a);
                            h && (c = h.x, d = h.y)
                        }
                    }
                    return this._generateDisplay(e, a, c, d)
                }
                return null
            },
            c.prototype._generateArmature = function() {
                return null
            },
            c.prototype._generateSlot = function() {
                return null
            },
            c.prototype._generateDisplay = function(a, b, c, d) {
                return null
            },
            c
        } (g.EventDispatcher);
        c(d)
    } (a.factorys || (a.factorys = {})),
    a.factorys,
    !
    function(a) {
        var b = function(b) {
            a.DBDataUtil = b
        },
        c = function(b) {
            a.TransformUtil = b
        },
        d = function(b) {
            a.ConstValues = b
        },
        e = function() {
            function a() {}
            return a.ANGLE_TO_RADIAN = B9l.v2S(Math.PI, 180),
            a.DRAGON_BONES = "dragonBones",
            a.ARMATURE = "armature",
            a.SKIN = "skin",
            a.BONE = "bone",
            a.SLOT = "slot",
            a.DISPLAY = "display",
            a.ANIMATION = "animation",
            a.TIMELINE = "timeline",
            a.FRAME = "frame",
            a.TRANSFORM = "transform",
            a.COLOR_TRANSFORM = "colorTransform",
            a.TEXTURE_ATLAS = "TextureAtlas",
            a.SUB_TEXTURE = "SubTexture",
            a.A_VERSION = "version",
            a.A_IMAGE_PATH = "imagePath",
            a.A_FRAME_RATE = "frameRate",
            a.A_NAME = "name",
            a.A_PARENT = "parent",
            a.A_LENGTH = "length",
            a.A_TYPE = "type",
            a.A_FADE_IN_TIME = "fadeInTime",
            a.A_DURATION = "duration",
            a.A_SCALE = "scale",
            a.A_OFFSET = "offset",
            a.A_LOOP = "loop",
            a.A_EVENT = "event",
            a.A_SOUND = "sound",
            a.A_ACTION = "action",
            a.A_HIDE = "hide",
            a.A_TWEEN_EASING = "tweenEasing",
            a.A_TWEEN_ROTATE = "tweenRotate",
            a.A_DISPLAY_INDEX = "displayIndex",
            a.A_Z_ORDER = "z",
            a.A_WIDTH = "width",
            a.A_HEIGHT = "height",
            a.A_X = "x",
            a.A_Y = "y",
            a.A_SKEW_X = "skX",
            a.A_SKEW_Y = "skY",
            a.A_SCALE_X = "scX",
            a.A_SCALE_Y = "scY",
            a.A_PIVOT_X = "pX",
            a.A_PIVOT_Y = "pY",
            a.A_ALPHA_OFFSET = "aO",
            a.A_RED_OFFSET = "rO",
            a.A_GREEN_OFFSET = "gO",
            a.A_BLUE_OFFSET = "bO",
            a.A_ALPHA_MULTIPLIER = "aM",
            a.A_RED_MULTIPLIER = "rM",
            a.A_GREEN_MULTIPLIER = "gM",
            a.A_BLUE_MULTIPLIER = "bM",
            a
        } ();
        d(e);
        var g = function() {
            function a() {}
            return a.transformPointWithParent = function(b, c) {
                var d = a._helpMatrix;
                a.transformToMatrix(c, d),
                d.invert();
                var e = b.x,
                f = b.y;
                b.x = B9l.A2S(d.a, e) + B9l.d2S(d.c, f) + d.tx,
                b.y = B9l.t2S(d.d, f) + B9l.C2S(d.b, e) + d.ty,
                b.skewX = a.formatRadian(B9l.a2S(b.skewX, c.skewX)),
                b.skewY = a.formatRadian(B9l.h2S(b.skewY, c.skewY))
            },
            a.transformToMatrix = function(a, b) {
                b.a = B9l.H2S(a.scaleX, Math.cos(a.skewY)),
                b.b = B9l.E2S(a.scaleX, Math.sin(a.skewY)),
                b.c = -a.scaleY * Math.sin(a.skewX),
                b.d = B9l.l7S(a.scaleY, Math.cos(a.skewX)),
                b.tx = a.x,
                b.ty = a.y
            },
            a.formatRadian = function(b) {
                return b %= a.DOUBLE_PI,
                B9l.X7S(b, Math.PI) && (b -= a.DOUBLE_PI),
                b < -Math.PI && (b += a.DOUBLE_PI),
                b
            },
            a.DOUBLE_PI = B9l.s7S(2, Math.PI),
            a._helpMatrix = new f.Matrix,
            a
        } ();
        c(g);
        var j = function() {
            function a() {}
            return a.transformArmatureData = function(a) {
                for (var b, c, d = a.getBoneDataList(), e = d.length; e--;) b = d[e],
                b.parent && (c = a.getBoneData(b.parent), c && (b.transform.copy(b.global), g.transformPointWithParent(b.transform, c.global)))
            },
            a.transformArmatureDataAnimations = function(b) {
                for (var c = b.getAnimationDataList(), d = c.length; d--;) a.transformAnimationData(c[d], b)
            },
            a.transformAnimationData = function(b, c) {
                for (var d, e, f, h, i, j, k, l, m, n, o = c.getSkinData(null), p = c.getBoneDataList(), q = o.getSlotDataList(), r = p.length; r--;) if (d = p[r], e = b.getTimeline(d.name)) {
                    var s = function() {
                        e.transformed = !0
                    },
                    t = function(a) {
                        f = a
                    };
                    t(null);
                    for (var u in q) if (f = q[u], B9l.F7S(f.parent, d.name)) break;
                    h = d.parent ? b.getTimeline(d.parent) : null,
                    i = e.getFrameList(),
                    j = null,
                    k = null,
                    l = null,
                    n = i.length;
                    for (var v = 0; B9l.G7S(n, v); v++) {
                        var w = function(a) {
                            l = a
                        };
                        if (m = i[v], h ? (a._helpTransform1.copy(m.global), a.getTimelineTransform(h, m.position, a._helpTransform2), g.transformPointWithParent(a._helpTransform1, a._helpTransform2), m.transform.copy(a._helpTransform1)) : m.transform.copy(m.global), m.transform.x -= d.transform.x, m.transform.y -= d.transform.y, m.transform.skewX -= d.transform.skewX, m.transform.skewY -= d.transform.skewY, m.transform.scaleX -= d.transform.scaleX, m.transform.scaleY -= d.transform.scaleY, e.transformed || f && (m.zOrder -= f.zOrder), j || (j = e.originTransform, j.copy(m.transform), j.skewX = g.formatRadian(j.skewX), j.skewY = g.formatRadian(j.skewY), k = e.originPivot, k.x = m.pivot.x, k.y = m.pivot.y), m.transform.x -= j.x, m.transform.y -= j.y, m.transform.skewX = g.formatRadian(B9l.g7S(m.transform.skewX, j.skewX)), m.transform.skewY = g.formatRadian(B9l.n7S(m.transform.skewY, j.skewY)), m.transform.scaleX -= j.scaleX, m.transform.scaleY -= j.scaleY, e.transformed || (m.pivot.x -= k.x, m.pivot.y -= k.y), l) {
                            var x = B9l.y7S(m.transform.skewX, l.transform.skewX);
                            l.tweenRotate ? B9l.N7S(l.tweenRotate, 0) ? (B9l.p7S(0, x) && (m.transform.skewX += B9l.o7S(2, Math.PI), m.transform.skewY += B9l.U7S(2, Math.PI)), B9l.k7S(l.tweenRotate, 1) && (m.transform.skewX += B9l.M7S(2, Math.PI, l.tweenRotate - 1), m.transform.skewY += B9l.h7S(2, Math.PI, l.tweenRotate - 1))) : (B9l.R7S(x, 0) && (m.transform.skewX -= B9l.S7S(2, Math.PI), m.transform.skewY -= B9l.c43(2, Math.PI)), B9l.P43(l.tweenRotate, 1) && (m.transform.skewX += B9l.Z43(2, Math.PI, l.tweenRotate + 1), m.transform.skewY += B9l.Y43(2, Math.PI, l.tweenRotate + 1))) : (m.transform.skewX = l.transform.skewX + g.formatRadian(B9l.g43(m.transform.skewX, l.transform.skewX)), m.transform.skewY = l.transform.skewY + g.formatRadian(B9l.n43(m.transform.skewY, l.transform.skewY)))
                        }
                        w(m)
                    }
                    s()
                }
            },
            a.getTimelineTransform = function(a, b, c) {
                for (var d, e, f, i, j = a.getFrameList(), k = j.length; k--;) if (d = j[k], B9l.y43(d.position, b) && B9l.N43(d.position + d.duration, b)) {
                    e = d.tweenEasing,
                    B9l.p43(k, j.length - 1) || isNaN(e) || B9l.o43(b, d.position) ? c.copy(d.global) : (f = B9l.U43(b - d.position, d.duration), e && (f = h.TimelineState.getEaseValue(f, e)), i = j[k + 1], c.x = d.global.x + B9l.k43(i.global.x - d.global.x, f), c.y = d.global.y + B9l.M43(i.global.y - d.global.y, f), c.skewX = g.formatRadian(d.global.skewX + B9l.j43(i.global.skewX - d.global.skewX, f)), c.skewY = g.formatRadian(d.global.skewY + B9l.T43(i.global.skewY - d.global.skewY, f)), c.scaleX = d.global.scaleX + B9l.O43(i.global.scaleX - d.global.scaleX, f), c.scaleY = d.global.scaleY + B9l.e43(i.global.scaleY - d.global.scaleY, f));
                    break
                }
            },
            a.addHideTimeline = function(a, b) {
                for (var c, d, e = b.getBoneDataList(), f = e.length; f--;) c = e[f],
                d = c.name,
                a.getTimeline(d) || a.addTimeline(i.TransformTimeline.HIDE_TIMELINE, d)
            },
            a._helpTransform1 = new i.DBTransform,
            a._helpTransform2 = new i.DBTransform,
            a
        } ();
        b(j)
    } (a.utils || (a.utils = {}));
    var j = a.utils,
    k = function() {
        function a() {
            this.global = new i.DBTransform,
            this.origin = new i.DBTransform,
            this.offset = new i.DBTransform,
            this.tween = new i.DBTransform,
            this.tween.scaleX = this.tween.scaleY = 0,
            this._globalTransformMatrix = new f.Matrix,
            this._visible = !0,
            this._isColorChanged = !1,
            this._isDisplayOnStage = !1,
            this._scaleType = 0,
            this.fixedRotation = !1
        }
        return a.prototype.getVisible = function() {
            return this._visible
        },
        a.prototype.setVisible = function(a) {
            this._visible = a
        },
        a.prototype._setParent = function(a) {
            this.parent = a
        },
        a.prototype._setArmature = function(a) {
            this.armature && this.armature._removeDBObject(this),
            this.armature = a,
            this.armature && this.armature._addDBObject(this)
        },
        a.prototype.dispose = function() {
            this.parent = null,
            this.armature = null,
            this.global = null,
            this.origin = null,
            this.offset = null,
            this.tween = null,
            this._globalTransformMatrix = null
        },
        a.prototype._update = function() {
            if (this.global.scaleX = B9l.W13(this.origin.scaleX + this.tween.scaleX, this.offset.scaleX), this.global.scaleY = B9l.q13(this.origin.scaleY + this.tween.scaleY, this.offset.scaleY), this.parent) {
                var a = this.origin.x + this.offset.x + this.tween.x,
                b = this.origin.y + this.offset.y + this.tween.y,
                c = this.parent._globalTransformMatrix;
                this._globalTransformMatrix.tx = this.global.x = B9l.V13(c.a, a) + B9l.Y13(c.c, b) + c.tx,
                this._globalTransformMatrix.ty = this.global.y = B9l.z13(c.d, b) + B9l.D13(c.b, a) + c.ty,
                this.fixedRotation ? (this.global.skewX = this.origin.skewX + this.offset.skewX + this.tween.skewX, this.global.skewY = this.origin.skewY + this.offset.skewY + this.tween.skewY) : (this.global.skewX = this.origin.skewX + this.offset.skewX + this.tween.skewX + this.parent.global.skewX, this.global.skewY = this.origin.skewY + this.offset.skewY + this.tween.skewY + this.parent.global.skewY),
                B9l.J13(this.parent.scaleMode, this._scaleType) && (this.global.scaleX *= this.parent.global.scaleX, this.global.scaleY *= this.parent.global.scaleY)
            } else this._globalTransformMatrix.tx = this.global.x = this.origin.x + this.offset.x + this.tween.x,
            this._globalTransformMatrix.ty = this.global.y = this.origin.y + this.offset.y + this.tween.y,
            this.global.skewX = this.origin.skewX + this.offset.skewX + this.tween.skewX,
            this.global.skewY = this.origin.skewY + this.offset.skewY + this.tween.skewY;
            this._globalTransformMatrix.a = B9l.B13(this.global.scaleX, Math.cos(this.global.skewY)),
            this._globalTransformMatrix.b = B9l.f13(this.global.scaleX, Math.sin(this.global.skewY)),
            this._globalTransformMatrix.c = -this.global.scaleY * Math.sin(this.global.skewX),
            this._globalTransformMatrix.d = B9l.u13(this.global.scaleY, Math.cos(this.global.skewX))
        },
        a
    } ();
    e(k);
    var l = function(a) {
        function b(b) {
            a.call(this),
            this._displayBridge = b,
            this._displayList = [],
            this._displayIndex = -1,
            this._scaleType = 1,
            this._originZOrder = 0,
            this._tweenZorder = 0,
            this._offsetZOrder = 0,
            this._isDisplayOnStage = !1,
            this._isHideDisplay = !1
        }
        return __extends(b, a),
        b.prototype.getZOrder = function() {
            return this._originZOrder + this._tweenZorder + this._offsetZOrder
        },
        b.prototype.setZOrder = function(a) {
            B9l.w13(this.getZOrder(), a) && (this._offsetZOrder = B9l.I13(a, this._originZOrder, this._tweenZorder), this.armature && (this.armature._slotsZOrderChanged = !0))
        },
        b.prototype.getDisplay = function() {
            var a = this._displayList[this._displayIndex];
            return B9l.M13(a, n) ? a.getDisplay() : a
        },
        b.prototype.setDisplay = function(a) {
            this._displayList[this._displayIndex] = a,
            this._setDisplay(a)
        },
        b.prototype.getChildArmature = function() {
            var a = this._displayList[this._displayIndex];
            return B9l.j13(a, n) ? a: null
        },
        b.prototype.setChildArmature = function(a) {
            this._displayList[this._displayIndex] = a,
            a && this._setDisplay(a.getDisplay())
        },
        b.prototype.getDisplayList = function() {
            return this._displayList
        },
        b.prototype.setDisplayList = function(a) {
            if (!a) throw new Error;
            for (var b = this._displayList.length = a.length; b--;) this._displayList[b] = a[b];
            if (B9l.T13(this._displayIndex, 0)) {
                var c = this._displayIndex;
                this._displayIndex = -1,
                this._changeDisplay(c)
            }
        },
        b.prototype._setDisplay = function(a) {
            this._displayBridge.getDisplay() ? this._displayBridge.setDisplay(a) : (this._displayBridge.setDisplay(a), this.armature && (this._displayBridge.addDisplay(this.armature.getDisplay(), -1), this.armature._slotsZOrderChanged = !0)),
            this.updateChildArmatureAnimation(),
            !this._isHideDisplay && this._displayBridge.getDisplay() ? this._isDisplayOnStage = !0 : this._isDisplayOnStage = !1
        },
        b.prototype._changeDisplay = function(a) {
            if (B9l.O13(0, a)) this._isHideDisplay || (this._isHideDisplay = !0, this._displayBridge.removeDisplay(), this.updateChildArmatureAnimation());
            else {
                if (this._isHideDisplay) {
                    this._isHideDisplay = !1;
                    var b = !0;
                    this.armature && (this._displayBridge.addDisplay(this.armature.getDisplay(), -1), this.armature._slotsZOrderChanged = !0)
                }
                var c = this._displayList.length;
                if (B9l.e13(a, c) && B9l.W63(c, 0) && (a = B9l.q63(c, 1)), B9l.V63(this._displayIndex, a)) {
                    this._displayIndex = a;
                    var d = this._displayList[this._displayIndex];
                    B9l.Y63(d, n) ? this._setDisplay(d.getDisplay()) : this._setDisplay(d),
                    this._dislayDataList && B9l.z63(this._displayIndex, this._dislayDataList.length) && this.origin.copy(this._dislayDataList[this._displayIndex].transform)
                } else b && this.updateChildArmatureAnimation()
            } ! this._isHideDisplay && this._displayBridge.getDisplay() ? this._isDisplayOnStage = !0 : this._isDisplayOnStage = !1
        },
        b.prototype.setVisible = function(a) {
            B9l.D63(a, this._visible) && (this._visible = a, this._updateVisible(this._visible))
        },
        b.prototype._setArmature = function(b) {
            a.prototype._setArmature.call(this, b),
            this.armature ? (this.armature._slotsZOrderChanged = !0, this._displayBridge.addDisplay(this.armature.getDisplay(), -1)) : this._displayBridge.removeDisplay()
        },
        b.prototype.dispose = function() {
            this._displayBridge && (a.prototype.dispose.call(this), this._displayBridge.dispose(), this._displayList.length = 0, this._displayBridge = null, this._displayList = null, this._dislayDataList = null)
        },
        b.prototype._update = function() {
            if (a.prototype._update.call(this), this._isDisplayOnStage) {
                var b = this.parent._tweenPivot.x,
                c = this.parent._tweenPivot.y;
                if (b || c) {
                    var d = this.parent._globalTransformMatrix;
                    this._globalTransformMatrix.tx += B9l.J63(d.a, b) + B9l.B63(d.c, c),
                    this._globalTransformMatrix.ty += B9l.f63(d.b, b) + B9l.u63(d.d, c)
                }
                this._displayBridge.updateTransform(this._globalTransformMatrix, this.global)
            }
        },
        b.prototype._updateVisible = function(a) {
            this._displayBridge.setVisible(this.parent.getVisible() && this._visible && a)
        },
        b.prototype.updateChildArmatureAnimation = function() {
            var a = this.getChildArmature();
            if (a) if (this._isHideDisplay) a.animation.stop(),
            a.animation._lastAnimationState = null;
            else {
                var b = this.armature ? this.armature.animation.getLastAnimationName() : null;
                b && a.animation.hasAnimation(b) ? a.animation.gotoAndPlay(b) : a.animation.play()
            }
        },
        b
    } (k);
    d(l);
    var m = function(a) {
        function b() {
            a.call(this),
            this._children = [],
            this._scaleType = 2,
            this._tweenPivot = new f.Point,
            this.scaleMode = 1
        }
        return __extends(b, a),
        b.prototype.setVisible = function(a) {
            if (B9l.w63(this._visible, a)) {
                this._visible = a;
                for (var b = this._children.length; b--;) {
                    var c = this._children[b];
                    B9l.I63(c, l) && c._updateVisible(this._visible)
                }
            }
        },
        b.prototype._setArmature = function(b) {
            a.prototype._setArmature.call(this, b);
            for (var c = this._children.length; c--;) this._children[c]._setArmature(this.armature)
        },
        b.prototype.dispose = function() {
            if (this._children) {
                a.prototype.dispose.call(this);
                for (var b = this._children.length; b--;) this._children[b].dispose();
                this._children.length = 0,
                this._children = null,
                this._tweenPivot = null,
                this.slot = null
            }
        },
        b.prototype.contains = function(a) {
            var b = function(a) {
                c = a.parent
            };
            if (!a) throw new Error;
            if (B9l.r63(a, this)) return ! 1;
            for (var c = a; B9l.L63(c, this) && B9l.b63(null, c);) b(c);
            return B9l.R63(c, this)
        },
        b.prototype.addChild = function(a) {
            if (!a) throw new Error;
            if (B9l.S63(a, this) || B9l.c03(a, b) && a.contains(this)) throw new Error("An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)");
            a.parent && a.parent.removeChild(a),
            this._children[this._children.length] = a,
            a._setParent(this),
            a._setArmature(this.armature),
            !this.slot && B9l.P03(a, l) && (this.slot = a)
        },
        b.prototype.removeChild = function(a) {
            if (!a) throw new Error;
            var b = this._children.indexOf(a);
            if (!B9l.Z03(b, 0)) throw new Error;
            this._children.splice(b, 1),
            a._setParent(null),
            a._setArmature(null),
            B9l.i03(a, this.slot) && (this.slot = null)
        },
        b.prototype.getSlots = function() {
            for (var a = [], b = this._children.length; b--;) B9l.K03(this._children[b], l) && a.unshift(this._children[b]);
            return a
        },
        b.prototype._arriveAtFrame = function(a, c, d, e) {
            if (a) {
                var f = d.getMixingTransform(name);
                if (d.displayControl && (B9l.m03(2, f) || -1 == f) && (!this.displayController || B9l.Q03(this.displayController, d.name))) {
                    var h = a;
                    if (this.slot) {
                        var i = h.displayIndex;
                        B9l.x03(i, 0) && (isNaN(h.zOrder) || B9l.v03(h.zOrder, this.slot._tweenZorder) || (this.slot._tweenZorder = h.zOrder, this.armature._slotsZOrderChanged = !0)),
                        this.slot._changeDisplay(i),
                        this.slot._updateVisible(h.visible)
                    }
                }
                if (a.event && this.armature.hasEventListener(g.FrameEvent.BONE_FRAME_EVENT)) {
                    var j = new g.FrameEvent(g.FrameEvent.BONE_FRAME_EVENT);
                    j.bone = this,
                    j.animationState = d,
                    j.frameLabel = a.event,
                    this.armature._eventList.push(j)
                }
                if (a.sound && b._soundManager.hasEventListener(g.SoundEvent.SOUND)) {
                    var k = new g.SoundEvent(g.SoundEvent.SOUND);
                    k.armature = this.armature,
                    k.animationState = d,
                    k.sound = a.sound,
                    b._soundManager.dispatchEvent(k)
                }
                if (a.action) for (var m in this._children) if (B9l.A03(this._children[m], l)) {
                    var n = this._children[m].getChildArmature();
                    n && n.animation.gotoAndPlay(a.action)
                }
            } else this.slot && this.slot._changeDisplay( - 1)
        },
        b.prototype._updateColor = function(a, b, c, d, e, f, g, h, i) { (i || this._isColorChanged) && this.slot._displayBridge.updateColor(a, b, c, d, e, f, g, h),
            this._isColorChanged = i
        },
        b._soundManager = g.SoundEventManager.getInstance(),
        b
    } (k);
    c(m);
    var n = function(a) {
        function b(b) {
            a.call(this),
            this.animation = new h.Animation(this),
            this._display = b,
            this._slotsZOrderChanged = !1,
            this._slotList = [],
            this._boneList = [],
            this._eventList = []
        }
        return __extends(b, a),
        b.prototype.getDisplay = function() {
            return this._display
        },
        b.prototype.dispose = function() {
            if (this.animation) {
                this.animation.dispose();
                for (var a = this._slotList.length; a--;) this._slotList[a].dispose();
                for (a = this._boneList.length; a--;) this._boneList[a].dispose();
                this._slotList.length = 0,
                this._boneList.length = 0,
                this._eventList.length = 0,
                this._slotList = null,
                this._boneList = null,
                this._eventList = null,
                this._display = null,
                this.animation = null
            }
        },
        b.prototype.advanceTime = function(a) {
            this.animation.advanceTime(a),
            a *= this.animation.timeScale;
            for (var b = this._boneList.length; b--;) this._boneList[b]._update();
            b = this._slotList.length;
            for (var c; b--;) if (c = this._slotList[b], c._update(), c._isDisplayOnStage) {
                var d = c.getChildArmature();
                d && d.advanceTime(a)
            }
            if (this._slotsZOrderChanged && (this.updateSlotsZOrder(), this.hasEventListener(g.ArmatureEvent.Z_ORDER_UPDATED) && this.dispatchEvent(new g.ArmatureEvent(g.ArmatureEvent.Z_ORDER_UPDATED))), this._eventList.length) {
                var e = this._eventList.length;
                for (b = 0; B9l.d03(e, b); b++) this.dispatchEvent(this._eventList[b]);
                this._eventList.length = 0
            }
        },
        b.prototype.getSlots = function(a) {
            return "undefined" == typeof a && (a = !0),
            a ? this._slotList.concat() : this._slotList
        },
        b.prototype.getBones = function(a) {
            return "undefined" == typeof a && (a = !0),
            a ? this._boneList.concat() : this._boneList
        },
        b.prototype.getSlot = function(a) {
            for (var b = this._slotList.length; b--;) if (B9l.t03(this._slotList[b].name, a)) return this._slotList[b];
            return null
        },
        b.prototype.getSlotByDisplay = function(a) {
            if (a) for (var b = this._slotList.length; b--;) if (B9l.C03(this._slotList[b].getDisplay(), a)) return this._slotList[b];
            return null
        },
        b.prototype.removeSlot = function(a) {
            if (!a) throw new Error;
            if (!B9l.a03(this._slotList.indexOf(a), 0)) throw new Error;
            a.parent.removeChild(a)
        },
        b.prototype.removeSlotByName = function(a) {
            if (a) {
                var b = this.getSlot(a);
                b && this.removeSlot(b)
            }
        },
        b.prototype.getBone = function(a) {
            for (var b = this._boneList.length; b--;) if (B9l.h03(this._boneList[b].name, a)) return this._boneList[b];
            return null
        },
        b.prototype.getBoneByDisplay = function(a) {
            var b = this.getSlotByDisplay(a);
            return b ? b.parent: null
        },
        b.prototype.removeBone = function(a) {
            if (!a) throw new Error;
            if (!B9l.H03(this._boneList.indexOf(a), 0)) throw new Error;
            a.parent ? a.parent.removeChild(a) : a._setArmature(null)
        },
        b.prototype.removeBoneByName = function(a) {
            if (a) {
                var b = this.getBone(a);
                b && this.removeBone(b)
            }
        },
        b.prototype.addChild = function(a, b) {
            if (!a) throw new Error;
            if (b) {
                var c = this.getBone(b);
                if (!c) throw new Error;
                c.addChild(a)
            } else a.parent && a.parent.removeChild(a),
            a._setArmature(this)
        },
        b.prototype.updateSlotsZOrder = function() {
            this._slotList.sort(this.sortSlot);
            for (var a, b = this._slotList.length; b--;) a = this._slotList[b],
            a._isDisplayOnStage && a._displayBridge.addDisplay(this._display, -1);
            this._slotsZOrderChanged = !1
        },
        b.prototype._addDBObject = function(a) {
            if (B9l.E03(a, l)) {
                var b = a;
                B9l.l53(this._slotList.indexOf(b), 0) && (this._slotList[this._slotList.length] = b)
            } else if (B9l.X53(a, m)) {
                var c = a;
                B9l.s53(this._boneList.indexOf(c), 0) && (this._boneList[this._boneList.length] = c, this._sortBoneList())
            }
        },
        b.prototype._removeDBObject = function(a) {
            if (B9l.F53(a, l)) {
                var b = a,
                c = this._slotList.indexOf(b);
                B9l.G53(c, 0) && this._slotList.splice(c, 1)
            } else if (B9l.g53(a, m)) {
                var d = a;
                c = this._boneList.indexOf(d),
                B9l.n53(c, 0) && this._boneList.splice(c, 1)
            }
        },
        b.prototype._sortBoneList = function() {
            var a = this._boneList.length;
            if (B9l.y53(0, a)) {
                for (var b, c, d, e = []; a--;) {
                    for (b = 0, c = this._boneList[a], d = c; d;) b++,
                    d = d.parent;
                    e[a] = {
                        level: b,
                        bone: c
                    }
                }
                for (e.sort(this.sortBone), a = e.length; a--;) this._boneList[a] = e[a].bone
            }
        },
        b.prototype._arriveAtFrame = function(a, c, d, e) {
            if (a.event && this.hasEventListener(g.FrameEvent.ANIMATION_FRAME_EVENT)) {
                var f = new g.FrameEvent(g.FrameEvent.ANIMATION_FRAME_EVENT);
                f.animationState = d,
                f.frameLabel = a.event,
                this._eventList.push(f)
            }
            if (a.sound && b._soundManager.hasEventListener(g.SoundEvent.SOUND)) {
                var h = new g.SoundEvent(g.SoundEvent.SOUND);
                h.armature = this,
                h.animationState = d,
                h.sound = a.sound,
                b._soundManager.dispatchEvent(h)
            }
            a.action && d.isPlaying && this.animation.gotoAndPlay(a.action)
        },
        b.prototype.sortSlot = function(a, b) {
            return B9l.N53(a.getZOrder(), b.getZOrder()) ? 1 : -1
        },
        b.prototype.sortBone = function(a, b) {
            return B9l.p53(a.level, b.level) ? 1 : -1
        },
        b._soundManager = g.SoundEventManager.getInstance(),
        b
    } (g.EventDispatcher);
    b(n)
} (dragonBones || (dragonBones = {}));
var dragonBones; !
function(a) { !
    function(a) {
        var b = function(b) {
            a.PhaserDisplayBridge = b
        },
        c = function() {
            function a() {}
            return a.prototype.getVisible = function() {
                return this._display ? this._display.visible: !1
            },
            a.prototype.setVisible = function(a) {
                this._display && (this._display.visible = a)
            },
            a.prototype.getDisplay = function() {
                return this._display
            },
            a.prototype.setDisplay = function(a) {
                if (B9l.o53(this._display, a)) {
                    if (this._display) {
                        var b = this._display.parent;
                        if (b) var c = this._display.parent.getChildIndex(this._display);
                        this.removeDisplay()
                    }
                    this._display = a,
                    this.addDisplay(b, c)
                }
            },
            a.prototype.dispose = function() {
                this._display = null
            },
            a.prototype.updateTransform = function(a, b) {
                this._display.x = a.tx,
                this._display.y = a.ty,
                this._display.skewX = b.skewX,
                this._display.skewY = b.skewY,
                this._display.rotation = b.skewX,
                this._display.scale.x = b.scaleX,
                this._display.scale.y = b.scaleY
            },
            a.prototype.updateColor = function(a, b, c, d, e, f, g, h) {
                this._display && (this._display.alpha = e)
            },
            a.prototype.addDisplay = function(a, b) {
                var c = a;
                c && this._display && (B9l.U53(0, b) || "undefined" == typeof b ? c.addChild(this._display) : c.addChildAt(this._display, Math.min(b, c.children.length)))
            },
            a.prototype.removeDisplay = function() {
                this._display && this._display.parent && this._display.parent.removeChild(this._display)
            },
            a.RADIAN_TO_ANGLE = B9l.k53(180, Math.PI),
            a
        } ();
        b(c)
    } (a.display || (a.display = {}));
    var b = a.display; !
    function(b) {
        var c = function(a) {
            b.PhaserBonesAtlas = a
        },
        d = function() {
            function b(a, b, c) {
                "undefined" == typeof c && (c = 1),
                this._regions = {},
                this.image = a,
                this.scale = c,
                this.atlasId = b.atlasId,
                this.parseData(b)
            }
            return b.prototype.dispose = function() {
                this.image = null,
                this._regions = null
            },
            b.prototype.getRegion = function(a) {
                return this._regions[a]
            },
            b.prototype.parseData = function(b) {
                var c = a.objects.DataParser.parseTextureAtlasData(b, this.scale);
                this.name = c.__name,
                delete c.__name;
                for (var d in c) this._regions[d] = c[d]
            },
            b
        } ();
        c(d)
    } (a.textures || (a.textures = {})),
    a.textures,
    !
    function(c) {
        var d = function(a) {
            c.PhaserBonesFactory = a
        },
        e = function(c) {
            function d() {
                c.call(this)
            }
            return __extends(d, c),
            d.prototype._generateArmature = function() {
                var b = new Phaser.DragonBonesGroup(a.game),
                c = new a.Armature(b);
                return c
            },
            d.prototype._generateSlot = function() {
                var c = new a.Slot(new b.PhaserDisplayBridge);
                return c
            },
            d.prototype._generateDisplay = function(b, c, d, e) {
                var f = new Phaser.DragonBonesSprite(a.game, 0, 0, b.atlasId, c + ".png");
                return f.pivot.setTo(d, e),
                f
            },
            d
        } (c.BaseFactory);
        d(e)
    } (a.factorys || (a.factorys = {})),
    a.factorys
} (dragonBones || (dragonBones = {})),
dragonBones.parseJSONAtlas = function(a, b, c) {
    var d = {};
    d.name = b,
    d.SubTexture = [];
    for (var e, f, g, h, i, j = a.frames,
    k = c.length,
    l = j.length,
    m = !1,
    n = 0; B9l.M53(k, n); n++) {
        e = c[n],
        m = B9l.j53(null, e.match(/.png/i)),
        m ? (g = e, e = e.slice(0, -4)) : g = e + ".png";
        for (var o = 0; B9l.T53(l, o); o++) if (f = j[o], B9l.O53(f.filename, g)) {
            i = f.frame,
            h = {
                name: e
            },
            h.x = i.x,
            h.y = i.y,
            h.width = i.w,
            h.height = i.h,
            d.SubTexture[n] = h;
            break
        }
    }
    return console.log(JSON.stringify(d)),
    d
},
cifw.DragonBones = cifw.DragonBones || {},
cifw.DragonBones.AnimationEvent = cifw.DragonBones.AnimationEvent || {},
cifw.DragonBones.ArmatureEvent = cifw.DragonBones.ArmatureEvent || {},
cifw.DragonBones.FrameEvent = cifw.DragonBones.FrameEvent || {},
cifw.DragonBones.SoundEvent = cifw.DragonBones.SoundEvent || {},
cifw.DragonBones.AnimationEvent = {
    COMPLETE: dragonBones.events.AnimationEvent.COMPLETE,
    FADE_IN: dragonBones.events.AnimationEvent.FADE_IN,
    FADE_OUT: dragonBones.events.AnimationEvent.FADE_OUT,
    START: dragonBones.events.AnimationEvent.START,
    LOOP_COMPLETE: dragonBones.events.AnimationEvent.LOOP_COMPLETE,
    FADE_IN_COMPLETE: dragonBones.events.AnimationEvent.FADE_IN_COMPLETE,
    FADE_OUT_COMPLETE: dragonBones.events.AnimationEvent.FADE_OUT_COMPLETE
},
cifw.DragonBones.ArmatureEvent = {
    Z_ORDER_UPDATED: dragonBones.events.ArmatureEvent.Z_ORDER_UPDATED
},
cifw.DragonBones.FrameEvent = {
    ANIMATION_FRAME_EVENT: dragonBones.events.FrameEvent.ANIMATION_FRAME_EVENT,
    BONE_FRAME_EVENT: dragonBones.events.FrameEvent.BONE_FRAME_EVENT
},
cifw.DragonBones.SoundEvent = {
    SOUND: dragonBones.events.SoundEvent.SOUND
},
cifw.DragonBonesArmature = function(a, b, c, d, e, f) {
    this.game = a,
    this.armature = cifw.DragonBonesManager.getInstance().makeArmature(a, b, c, d),
    this.armature.getDisplay().armature = this;
    var g = void 0 !== e ? e: 0,
    h = void 0 !== f ? f: 0;
    this.position = new Phaser.Point(0, 0),
    this.x = g,
    this.y = h
},
cifw.DragonBonesArmature.prototype = {
    gotoAndPlay: function(a, b, c, d, e, f, g, h, i, j) {
        this._gotoAndPlay(this.armature, a, b, c, d, e, f, g, h, i, j)
    },
    gotoAndPlayFromChild: function(a, b, c, d, e, f, g, h, i, j, k) {
        "string" == typeof a && (a = this.getSlot(a)),
        this._gotoAndPlay(a.getChildArmature(), b, c, d, e, f, g, h, i, j, k)
    },
    _gotoAndPlay: function(a, b, c, d, e, f, g, h, i, j, k) {
        a.animation.gotoAndPlay(b, c, d, e, f, g, h, i, j, k)
    },
    getSlot: function(a) {
        return this.armature.getSlot(a)
    },
    removeSlot: function(a) {
        this.armature.removeSlot(a)
    },
    removeSlotByName: function(a) {
        this.armature.removeSlotByName(a)
    },
    getBone: function(a) {
        return this.armature.getBone(a)
    },
    removeBone: function(a) {
        this.armature.removeBone(a)
    },
    removeBoneByName: function(a) {
        this.armature.removeBoneByName(a)
    },
    getDisplay: function() {
        return this.armature.getDisplay()
    },
    sortBoneData: function(a, b) {
        this.armature.sortBoneData(a, b)
    },
    addEventListener: function(a, b, c) {
        var d = null;
        void 0 !== c ? ("string" == typeof c && (c = this.getSlot(c)), d = c.getChildArmature()) : d = this.armature,
        d.addEventListener(a, b)
    },
    removeEventListener: function(a, b, c) {
        var d = null;
        void 0 !== c && ("string" == typeof c && (c = this.getSlot(c)), d = c.getChildArmature()),
        d.removeEventListener(a, b)
    }
},
Object.defineProperty(cifw.DragonBonesArmature.prototype, "x", {
    get: function() {
        return this.position.x
    },
    set: function(a) {
        this.position.x = a,
        this.getDisplay().x = a
    }
}),
Object.defineProperty(cifw.DragonBonesArmature.prototype, "y", {
    get: function() {
        return this.position.y
    },
    set: function(a) {
        this.position.y = a,
        this.getDisplay().y = a
    }
}),
Phaser.DragonBonesGroup = function(a, b, c, d, e, f) {
    Phaser.Group.call(this, a, b, c, d, e, f),
    this.skewX = 0,
    this.skewY = 0
},
Phaser.DragonBonesGroup.prototype = Object.create(Phaser.Group.prototype),
Phaser.DragonBonesGroup.prototype.constructor = Phaser.DragonBonesGroup,
Phaser.DragonBonesGroup.prototype.updateTransform = function() {
    var a, b, c, d, e, f, g = this.parent.worldTransform,
    h = this.worldTransform;
    B9l.e53(this.rotation, PIXI.PI_2) || B9l.W33(this.skewY, PIXI.PI_2) ? (a = B9l.q33(Math.cos(this.skewY), this.scale.x), b = B9l.V33(Math.sin(this.skewY), this.scale.x), c = Math.sin( - this.skewX) * this.scale.y, d = B9l.Y33(Math.cos(this.skewX), this.scale.y), e = this.position.x, f = this.position.y, (this.pivot.x || this.pivot.y) && (e -= B9l.z33(this.pivot.x, a) + B9l.D33(this.pivot.y, c), f -= B9l.J33(this.pivot.x, b) + B9l.B33(this.pivot.y, d)), h.a = B9l.f33(a, g.a) + B9l.u33(b, g.c), h.b = B9l.w33(a, g.b) + B9l.I33(b, g.d), h.c = B9l.r33(c, g.a) + B9l.L33(d, g.c), h.d = B9l.b33(c, g.b) + B9l.R33(d, g.d), h.tx = B9l.S33(e, g.a) + B9l.c93(f, g.c) + g.tx, h.ty = B9l.P93(e, g.b) + B9l.Z93(f, g.d) + g.ty) : (a = this.scale.x, d = this.scale.y, e = B9l.i93(this.position.x, this.pivot.x * a), f = B9l.K93(this.position.y, this.pivot.y * d), h.a = B9l.m93(g.a, a), h.b = B9l.Q93(g.b, d), h.c = B9l.x93(g.c, a), h.d = B9l.v93(g.d, d), h.tx = B9l.A93(e, g.a) + B9l.d93(f, g.c) + g.tx, h.ty = B9l.t93(e, g.b) + B9l.C93(f, g.d) + g.ty),
    this.worldAlpha = B9l.a93(this.alpha, this.parent.worldAlpha);
    for (var i = 0,
    j = this.children.length; B9l.h93(j, i); i++) this.children[i].updateTransform()
},
Phaser.DragonBonesSprite = function(a, b, c, d, e) {
    Phaser.Sprite.call(this, a, b, c, d, e),
    this.skewX = 0,
    this.skewY = 0
},
Phaser.DragonBonesSprite.prototype = Object.create(Phaser.Sprite.prototype),
Phaser.DragonBonesSprite.prototype.constructor = Phaser.DragonBonesSprite,
Phaser.DragonBonesSprite.prototype.updateTransform = function() {
    var a, b, c, d, e, f, g = this.parent.worldTransform,
    h = this.worldTransform;
    B9l.H93(this.rotation, PIXI.PI_2) || B9l.E93(this.skewY, PIXI.PI_2) ? (a = B9l.l83(Math.cos(this.skewY), this.scale.x), b = B9l.X83(Math.sin(this.skewY), this.scale.x), c = Math.sin( - this.skewX) * this.scale.y, d = B9l.s83(Math.cos(this.skewX), this.scale.y), e = this.position.x, f = this.position.y, (this.pivot.x || this.pivot.y) && (e -= B9l.F83(this.pivot.x, a) + B9l.G83(this.pivot.y, c), f -= B9l.g83(this.pivot.x, b) + B9l.n83(this.pivot.y, d)), h.a = B9l.y83(a, g.a) + B9l.N83(b, g.c), h.b = B9l.p83(a, g.b) + B9l.o83(b, g.d), h.c = B9l.U83(c, g.a) + B9l.k83(d, g.c), h.d = B9l.M83(c, g.b) + B9l.j83(d, g.d), h.tx = B9l.T83(e, g.a) + B9l.O83(f, g.c) + g.tx, h.ty = B9l.e83(e, g.b) + B9l.W23(f, g.d) + g.ty) : (a = this.scale.x, d = this.scale.y, e = B9l.q23(this.position.x, this.pivot.x * a), f = B9l.V23(this.position.y, this.pivot.y * d), h.a = B9l.Y23(g.a, a), h.b = B9l.z23(g.b, d), h.c = B9l.D23(g.c, a), h.d = B9l.J23(g.d, d), h.tx = B9l.B23(e, g.a) + B9l.f23(f, g.c) + g.tx, h.ty = B9l.u23(e, g.b) + B9l.w23(f, g.d) + g.ty),
    this.worldAlpha = B9l.I23(this.alpha, this.parent.worldAlpha)
},
cifw.AnimationFactory = function(a, b) {
    this.game = a,
    this.parentGroup = b || this.game.world,
    this.animation = new cifw.Animation(this, a),
    this.messageData = {},
    this.imageData = {}
},
cifw.AnimationFactory.prototype = {
    addText: function(a) {
        if ("undefined" == typeof this[a.key]) return console.log(a.key + " pool has not been created. Use createMessagePool() to create a new text pool."),
        null;
        var b = a.callback || null,
        c = a.callbackContext || null,
        d = this.getTextFromPool(a.key);
        return d.x = a.x,
        d.y = a.y,
        d.fontSize = a.size || 20,
        d.text = a.text || "",
        d.key = a.key,
        d.align = "center",
        this.animation.options(d, b, c, "text"),
        this.animation
    },
    addSprite: function(a) {
        if ("undefined" == typeof this[a.key]) return console.log(a.key + " pool has not been created. Use createSpritePool() to create a new sprite pool."),
        null;
        var b = a.callback || null,
        c = a.callbackContext || null,
        d = this.getSpriteFromPool(a.key);
        return d.x = a.x,
        d.y = a.y,
        this.animation.options(d, b, c, a.key),
        this.animation
    },
    existingSprite: function(a, b, c) {
        return "undefined" == typeof b && (b = null),
        "undefined" == typeof c && (c = null),
        this.animation.options(a, b, c, "existingSprite"),
        this.animation
    },
    createMessagePool: function(a, b, c) {
        var d;
        for (this[a] = this.game.add.group(), this.messageData[a] = {},
        this.messageData[a].font = c, d = 0; B9l.r23(b, d); d++) this[a].add(new Phaser.BitmapText(this.game, 0, 0, c, "", 10));
        this[a].forEach(function(a) {
            a.exists = !1,
            a.renderable = !1,
            a.visible = !1
        },
        this),
        this.parentGroup.add(this[a])
    },
    createSpritePool: function(a, b, c, d) {
        "undefined" == typeof d && (d = null),
        this[a] = this.game.add.group(),
        this.imageData[a] = {},
        this.imageData[a].texture = c,
        this.imageData[a].atlas = d,
        d ? this[a].createMultiple(b, d, c) : this[a].createMultiple(b, c),
        this.parentGroup.add(this[a])
    },
    getTextFromPool: function(a) {
        var b;
        return b = this[a].getFirstExists(!1),
        b || (b = this[a].add(new Phaser.BitmapText(this.game, 0, 0, this.messageData[a].font, "", 10))),
        b.alpha = 1,
        b.exists = !0,
        b.renderable = !0,
        b.visible = !0,
        b.scale.setTo(1),
        b
    },
    getSpriteFromPool: function(a) {
        var b;
        return b = this[a].getFirstDead(),
        b || (b = this.imageData[a].atlas ? this[a].create(0, 0, this.imageData[a].atlas, this.imageData[a].texture) : this[a].create(0, 0, this.imageData[a].texture)),
        b.revive(),
        b.alpha = 1,
        b.scale.setTo(1),
        b
    },
    sendToPool: function(a, b) {
        B9l.L23("text", a) ? (b.alpha = 0, b.exists = !1, b.renderable = !1, b.visible = !1) : b.kill()
    }
},
cifw.Animation = function(a, b) {
    this.game = b,
    this.manager = a
},
cifw.Animation.prototype = {
    recycle: function(a, b) {
        this.manager.sendToPool(a, b)
    },
    options: function(a, b, c, d) {
        this.object = a,
        this.callback = b,
        this.callbackContext = c,
        this.type = d
    },
    fadeInMoveUpBackDown: function(a, b, c, d, e) {
        var f = this.type,
        g = this.object,
        h = this.callback,
        i = this.callbackContext;
        B9l.b23("text", f) ? (g.updateTransform(), g.pivot.x = B9l.R23(.5, g.textWidth), g.pivot.y = B9l.S23(.5, g.textHeight)) : g.anchor.setTo(.5),
        this.game.add.tween(g.scale).from({
            x: 1,
            y: 0
        },
        a, Phaser.Easing.Back.Out, !0, 0);
        var j = this.game.add.tween(g).to({
            y: B9l.c73(g.y, b)
        },
        c, Phaser.Easing.Linear.None, !0, 0),
        k = this.game.add.tween(g).to({
            y: B9l.P73(g.y, .2 * b)
        },
        e, Phaser.Easing.Linear.None, !1, d),
        l = this.game.add.tween(g.scale).to({
            x: 0,
            y: 0
        },
        e, Phaser.Easing.Linear.None, !1, d);
        j.chain(k),
        j.onComplete.add(function() {
            l.start()
        },
        this),
        B9l.Z73("existingSprite", f) && l.onComplete.add(function() {
            this.recycle(f, g)
        },
        this),
        h && i && l.onComplete.add(h, i)
    },
    scaleUpScaleDown: function(a, b, c, d) {
        var e = this.type,
        f = this.object,
        g = this.callback,
        h = this.callbackContext;
        "undefined" == typeof d && (d = 0),
        B9l.i73("text", e) ? (f.updateTransform(), f.pivot.x = B9l.K73(.5, f.textWidth), f.pivot.y = B9l.m73(.5, f.textHeight)) : f.anchor.setTo(.5);
        var i = this.game.add.tween(f.scale).from({
            x: 1,
            y: 0
        },
        a, Phaser.Easing.Back.Out, !0, d),
        j = this.game.add.tween(f.scale).to({
            x: 0,
            y: 0
        },
        c, Phaser.Easing.Linear.None, !1, b);
        i.chain(j),
        B9l.Q73("existingSprite", e) && j.onComplete.add(function() {
            this.recycle(e, f)
        },
        this),
        g && h && j.onComplete.add(g, h)
    },
    scaleUpFadeOut: function(a, b, c, d) {
        var e = this.type,
        f = this.object,
        g = this.callback,
        h = this.callbackContext;
        "undefined" == typeof d && (d = 0),
        B9l.x73("text", e) ? (f.updateTransform(), f.pivot.x = B9l.v73(.5, f.textWidth), f.pivot.y = B9l.A73(.5, f.textHeight)) : f.anchor.setTo(.5);
        var i = this.game.add.tween(f.scale).from({
            x: 1,
            y: 0
        },
        a, Phaser.Easing.Back.Out, !0, d),
        j = this.game.add.tween(f.scale).to({
            x: 1.5,
            y: 1.5
        },
        c, Phaser.Easing.Linear.None, !1, b),
        k = this.game.add.tween(f).to({
            alpha: 0
        },
        c, Phaser.Easing.Linear.None, !1, b);
        i.chain(j),
        i.onComplete.add(function() {
            k.start()
        },
        this),
        B9l.d73("existingSprite", e) && j.onComplete.add(function() {
            this.recycle(e, f)
        },
        this),
        g && h && j.onComplete.add(g, h)
    },
    scaleDownFadeInFadeOut: function(a, b, c) {
        var d = this.type,
        e = this.object,
        f = this.callback,
        g = this.callbackContext;
        B9l.t73("text", d) ? (e.updateTransform(), e.pivot.x = B9l.C73(.5, e.textWidth), e.pivot.y = B9l.a73(.5, e.textHeight)) : e.anchor.setTo(.5),
        e.alpha = 1;
        var h = this.game.add.tween(e.scale).from({
            x: 1.5,
            y: 1.5
        },
        a, Phaser.Easing.Linear.None, !0, 0);
        this.game.add.tween(e).from({
            alpha: 0
        },
        a, Phaser.Easing.Linear.None, !0, 0);
        var i = this.game.add.tween(e).to({
            alpha: 0
        },
        c, Phaser.Easing.Linear.None, !1, b);
        h.chain(i),
        B9l.h73("existingSprite", d) && i.onComplete.add(function() {
            this.recycle(d, e)
        },
        this),
        f && g && i.onComplete.add(f, g)
    },
    popFadeUp: function(a, b, c) {
        var d = this.type,
        e = this.object,
        f = this.callback,
        g = this.callbackContext;
        B9l.H73("text", d) ? (e.updateTransform(), e.pivot.x = B9l.E73(.5, e.textWidth), e.pivot.y = B9l.l46(.5, e.textHeight)) : e.anchor.setTo(.5),
        this.game.add.tween(e.scale).from({
            x: 1,
            y: .1
        },
        b, Phaser.Easing.Elastic.Out, !0, 0),
        this.game.add.tween(e).to({
            y: B9l.X46(e.y, a)
        },
        c, Phaser.Easing.Linear.None, !0, B9l.s46(.5, b));
        var h = this.game.add.tween(e).to({
            alpha: 0
        },
        c, Phaser.Easing.Linear.None, !0, B9l.F46(.5, b));
        B9l.G46("existingSprite", d) && h.onComplete.add(function() {
            this.recycle(d, e)
        },
        this),
        f && g && h.onComplete.add(f, g)
    },
    tweenPositionBy: function(a, b, c, d) {
        var e, f = this.type,
        g = this.object,
        h = this.callback,
        i = this.callbackContext;
        "undefined" == typeof c && (c = 1e3),
        "undefined" == typeof d && (d = Phaser.Easing.Linear.None),
        g.anchor.setTo(.5),
        e = this.game.add.tween(g).to({
            x: g.x + a,
            y: g.y + b
        },
        c, d, !0, 0),
        B9l.g46("existingSprite", f) && e.onComplete.add(function() {
            this.recycle(f, g)
        },
        this),
        h && i && e.onComplete.add(h, i)
    },
    tweenPositionTo: function(a, b, c, d) {
        var e, f = this.type,
        g = this.object,
        h = this.callback,
        i = this.callbackContext;
        "undefined" == typeof c && (c = 1e3),
        "undefined" == typeof d && (d = Phaser.Easing.Linear.None),
        g.anchor.setTo(.5),
        e = this.game.add.tween(g).to({
            x: a,
            y: b
        },
        c, d, !0, 0),
        B9l.n46("existingSprite", f) && e.onComplete.add(function() {
            this.recycle(f, g)
        },
        this),
        h && i && e.onComplete.add(h, i)
    },
    fadeInTween: function(a, b) {
        var c, d = this.type,
        e = this.object,
        f = this.callback,
        g = this.callbackContext;
        "undefined" == typeof a && (a = 1e3),
        "undefined" == typeof b && (b = Phaser.Easing.Linear.None),
        c = this.game.add.tween(e).from({
            alpha: 0
        },
        a, b, !0, 0),
        B9l.y46("existingSprite", d) && c.onComplete.add(function() {
            this.recycle(d, e)
        },
        this),
        f && g && c.onComplete.add(f, g)
    },
    fadeOutTween: function(a, b) {
        var c, d = this.type,
        e = this.object,
        f = this.callback,
        g = this.callbackContext;
        "undefined" == typeof a && (a = 1e3),
        "undefined" == typeof b && (b = Phaser.Easing.Linear.None),
        c = this.game.add.tween(e).to({
            alpha: 0
        },
        a, b, !0, 0),
        f && g && c.onComplete.add(f, g),
        B9l.N46("existingSprite", d) && c.onComplete.add(function() {
            this.recycle(d, e)
        },
        this)
    },
    scaleUp: function(a, b, c) {
        var d, e = this.type,
        f = this.object,
        g = this.callback,
        h = this.callbackContext;
        "undefined" == typeof a && (a = 1.5),
        "undefined" == typeof b && (b = 1e3),
        "undefined" == typeof c && (c = Phaser.Easing.Linear.None),
        d = this.game.add.tween(f.scale).to({
            x: a,
            y: a
        },
        b, c, !0, 0),
        g && h && d.onComplete.add(g, h),
        B9l.p46("existingSprite", e) && d.onComplete.add(function() {
            this.recycle(e, f)
        },
        this)
    },
    scaleDown: function(a, b, c) {
        var d, e = this.type,
        f = this.object,
        g = this.callback,
        h = this.callbackContext;
        "undefined" == typeof a && (a = .5),
        "undefined" == typeof b && (b = 1e3),
        "undefined" == typeof c && (c = Phaser.Easing.Linear.None),
        d = this.game.add.tween(this.message.scale).to({
            x: a,
            y: a
        },
        b, c, !0, 0),
        g && h && d.onComplete.add(g, h),
        B9l.o46("existingSprite", e) && d.onComplete.add(function() {
            this.recycle(e, f)
        },
        this)
    }
},
cifw.ResponsiveGroup = function(a, b, c, d, e, f) {
    Phaser.Group.call(this, a, null, "__responsiveGroup" + a.rnd.uuid(), !1),
    this._game = a,
    this._position = b,
    this._hAlignment = c || cifw.screen.HORIZONTAL_ALIGNMENT.CENTER,
    this._vAlignment = d || cifw.screen.VERTICAL_ALIGNMENT.CENTER,
    this._width = e || cifw.screen.DESIGN_WIDTH,
    this._height = f || cifw.screen.DESIGN_HEIGHT,
    cifw.ScreenManager.getInstance().onResize.add(this.resize, this),
    this.resize(null, this.game.width, this.game.height)
},
cifw.ResponsiveGroup.prototype = Object.create(Phaser.Group.prototype),
cifw.ResponsiveGroup.prototype.constructor = cifw.ResponsiveGroup,
cifw.ResponsiveGroup.prototype.resize = function(a, b, c) {
    var d, e, f = function(a) {
        o = a
    },
    g = function(a) {
        p = a
    },
    h = b,
    i = c,
    j = this._width,
    k = this._height,
    l = B9l.U46(h, j),
    m = B9l.k46(i, k),
    n = 0;
    B9l.M46(cifw.screen.POLICY, cifw.screen.RESOLUTION_POLICY.FIXED_HEIGHT) ? (n = m, d = B9l.j46(j, n), e = i) : B9l.T46(cifw.screen.POLICY, cifw.screen.RESOLUTION_POLICY.FIXED_WIDTH) ? (n = l, d = h, e = B9l.O46(k, n)) : B9l.e46(m, l) ? (n = l, d = h, e = B9l.W16(k, n)) : (n = m, d = B9l.q16(j, n), e = i),
    this.scale.setTo(B9l.V16(d, j), B9l.Y16(e, k));
    var o = 0,
    p = 0;
    switch (this._hAlignment) {
    case cifw.screen.HORIZONTAL_ALIGNMENT.LEFT:
        g(0);
        break;
    case cifw.screen.HORIZONTAL_ALIGNMENT.CENTER:
        p = B9l.z16(h - j * this.scale.x, 2);
        break;
    case cifw.screen.HORIZONTAL_ALIGNMENT.RIGHT:
        p = B9l.D16(h, j * this.scale.x)
    }
    switch (this._vAlignment) {
    case cifw.screen.VERTICAL_ALIGNMENT.TOP:
        f(0);
        break;
    case cifw.screen.VERTICAL_ALIGNMENT.CENTER:
        o = B9l.J16(i - k * this.scale.y, 2);
        break;
    case cifw.screen.VERTICAL_ALIGNMENT.BOTTOM:
        o = B9l.B16(i, k * this.scale.y)
    }
    this.position.setTo(p, o),
    cifw.config.DEBUG_DRAW && (this._debugRectangle = new Phaser.Rectangle(this.x, this.y, B9l.f16(this._width, this.scale.x), B9l.u16(this._height, this.scale.y)))
},
cifw.ResponsiveGroup.prototype.getContentSize = function() {
    return new Phaser.Point(this._width, this._height)
},
cifw.ResponsiveGroup.prototype.render = function() {
    this._debugRectangle && this._game.debug.rectangle(this._debugRectangle, "rgba(255,0,10,0.2)", !0)
},
cifw.ResponsiveBackground = function(a, b, c) {
    Phaser.Sprite.call(this, a, B9l.w16(a.width, c.x), B9l.I16(a.height, c.y), b),
    this.anchor = c,
    this._posPercent = c,
    this.resize(null, this.game.width, this.game.height),
    cifw.ScreenManager.getInstance().onResize.add(this.resize, this)
},
cifw.ResponsiveBackground.prototype = Object.create(Phaser.Sprite.prototype),
cifw.ResponsiveBackground.prototype.constructor = cifw.ResponsiveBackground,
cifw.ResponsiveBackground.prototype.resize = function(a, b, c) {
    var d = b,
    e = c,
    f = cifw.screen.BACKGROUND_WIDTH,
    g = cifw.screen.BACKGROUND_HEIGHT,
    h = B9l.r16(d, f),
    i = B9l.L16(e, g),
    j = 0;
    j = B9l.b16(i, h) ? i: h,
    this.scale.setTo(j, j),
    this.position.setTo(B9l.R16(b, this._posPercent.x), B9l.S16(c, this._posPercent.y))
},
cifw.LoadingBar = function(a) {
    Phaser.Sprite.call(this, a),
    this._direction = ccui.LoadingBar.TYPE_LEFT,
    this._percent = 0,
    this._totalLength = 0,
    this._rect = new Phaser.Rectangle(0, 0, 0, 0),
    this._initX = 0,
    this._initY = 0,
    this._totalTime = 0,
    this._time = 0,
    this._isPause = !0,
    this.onFinishTime = new Phaser.Signal,
    this._realAnchorPoint = new Phaser.Point(0, 0)
},
cifw.LoadingBar.prototype = Object.create(Phaser.Sprite.prototype),
cifw.LoadingBar.prototype.constructor = cifw.LoadingBar,
cifw.LoadingBar.prototype.recalculateSize = function() {
    this._rect.width = this.width,
    this._rect.height = this.height,
    this._totalLength = this.width,
    this.setPosition(this._initX, this._initY),
    this.crop(this._rect)
},
cifw.LoadingBar.prototype.setPosition = function(a, b) {
    B9l.c66(0, this.angle) ? (this.x = B9l.P66(this._initX, this._totalLength * this._realAnchorPoint.x), this.y = -this._initY - this.height * this._realAnchorPoint.y, this._initX = a, this._initY = b) : -90 == this.angle && (this.x = -this.height * this._realAnchorPoint.y, this.y = -this._initY + this._totalLength * this._realAnchorPoint.x)
},
cifw.LoadingBar.prototype.setDirection = function(a) {
    B9l.Z66(this._direction, a) && (this._direction = a)
},
cifw.LoadingBar.prototype.getDirection = function() {
    return this._direction
},
cifw.LoadingBar.prototype.setElapsedTime = function(a) {
    if (!this._isPause) {
        B9l.i66(this._time, 0) ? (this.onFinishTime.dispatch(), this._time = 0, this.isPaused = !0) : this._time -= a;
        var b = B9l.K66(this._time, this._totalTime, 100);
        if (! (B9l.D66(0, b) || B9l.J66(b, 100) || (this._percent = b, B9l.B66(this._totalLength, 0)))) {
            var c = B9l.f66(this._percent, 100);
            this._rect.width = Math.max(0, B9l.u66(c, this._totalLength)),
            this.crop(this._rect)
        }
    }
},
cifw.LoadingBar.prototype.start = function(a) {
    return this._timer ? void console.log("Timer already started") : (this._totalTime = a, this._time = a, void(this._isPause = !1))
},
cifw.LoadingBar.prototype.pauseTime = function() {
    this._isPause = !0
},
cifw.LoadingBar.prototype.resumeTime = function() {
    this._isPause = !1
},
cifw.LoadingBar.prototype.lessTime = function(a) {
    B9l.w66(this._time, 0) && (this._time -= a)
},
cifw.LoadingBar.prototype.moreTime = function(a) {
    this._time += a,
    this._isPause && (this._isPause = !1),
    B9l.I66(this._time, this._totalTime) && (this._time = this._totalTime),
    this._percent = B9l.r66(this._time, this._totalTime, 100);
    var b = B9l.j66(this._percent, 100);
    this._rect.width = Math.max(0, B9l.T66(b, this._totalLength)),
    this.crop(this._rect)
},
cifw.LoadingBar.prototype.getTime = function() {
    return this._time
},
cifw.LoadingBar.prototype.getPercent = function() {
    return this._percent
},
cifw.LoadingBar.prototype.setZero = function() {
    this._time = 0,
    this._isPause = !0,
    this._percent = 0,
    this._rect.width = 0,
    this.crop(this._rect)
},
cifw.LoadingBar.prototype.setPercent = function(a) {
    if (! (B9l.O66(0, a) || B9l.e66(a, 100) || (this._percent = a, B9l.W06(this._totalLength, 0)))) {
        var b = B9l.q06(this._percent, 100);
        this._rect.width = Math.max(0, B9l.V06(b, this._totalLength)),
        this.crop(this._rect)
    }
},
Object.defineProperty(cifw.LoadingBar.prototype, "percentage", {
    get: function() {
        return this._percent
    },
    set: function(a) {
        if (B9l.Y06(a, this._percent)) {
            if (B9l.z06(0, a) || B9l.D06(a, 100)) return;
            if (this._percent = a, B9l.J06(this._totalLength, 0)) return;
            var b = B9l.B06(this._percent, 100);
            this._rect.width = Math.max(0, B9l.f06(b, this._totalLength)),
            this.crop(this._rect)
        }
    }
}),
cifw.ConfirmationScreen = function(a, b, c, d, e, f, g, h, i) {
    this.game = a,
    this.text = b,
    this.buttonYesText = c,
    this.buttonNoText = d,
    this.callbackYes = e,
    this.callbackNo = f,
    this.callbackContext = g,
    this.json = h || "ui_json_confirmation",
    this.atlas = i || "ui_atlas_confirmation",
    this.beginConfirmation()
},
cifw.ConfirmationScreen.prototype = {
    beginConfirmation: function() {
        var a = cifw.LocalizationManager.getInstance(),
        b = {
            x: B9l.u06(cifw.screen.DESIGN_WIDTH, 2),
            y: B9l.w06(cifw.screen.DESIGN_HEIGHT, 2)
        };
        this._popUpGroup = new cifw.ResponsiveGroup(this.game, new Phaser.Point(b.x, b.y), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this.game.add.existing(this._popUpGroup),
        this.yesSignal = new Phaser.Signal,
        this.noSignal = new Phaser.Signal,
        this.yesSignal.add(this.callbackYes, this.callbackContext),
        this.noSignal.add(this.callbackNo, this.callbackContext);
        var c = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, this.json, this.atlas);
        a.localizeUILabel(this._widget, "conf_text", this.text),
        a.localizeUILabel(this._widget, "yes_bmp", this.buttonYesText),
        a.localizeUILabel(this._widget, "no_bmp", this.buttonNoText),
        this._popUpGroup.add(c),
        this._popUpGroup.alpha = 0,
        ccs.actionManager.playActionByName(this.json, "init"),
        this.game.time.events.add(200, this.onTransitionFinished, this)
    },
    onTransitionFinished: function() {
        this._popUpGroup.alpha = 1,
        ccs.actionManager.playActionByName(this.json, "in",
        function() {
            this._enableButtons()
        },
        this),
        this._disableButtons(),
        this.game.time.events.add(200, this._addTouchListeners, this)
    },
    _addTouchListeners: function() {
        ccui.helper.addTouchCallback(this._widget, "button_no", this.cancel, this),
        ccui.helper.addTouchCallback(this._widget, "button_yes", this.accept, this)
    },
    cancel: function() {
        this._disableButtons(),
        ccs.actionManager.playActionByName(this.json, "confirmation_out",
        function() {
            this.noSignal.dispatch(this),
            this._popUpGroup.destroy()
        },
        this)
    },
    accept: function() {
        this._disableButtons(),
        ccs.actionManager.playActionByName(this.json, "confirmation_out",
        function() {
            this.yesSignal.dispatch(this),
            this._popUpGroup.destroy()
        },
        this)
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "button_no"),
        ccui.helper.disableTouch(this._widget, "button_yes")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "button_no"),
        ccui.helper.enableTouch(this._widget, "button_yes")
    }
},
cifw.OptionsScreen = function(a, b) {
    this.game = a,
    this.exitCallback = b.exitCallback,
    this.resetCallback = b.resetCallback,
    this.callbackContext = b.callbackContext,
    this.title = b.optionsTitle,
    this.credits = b.creditsButton,
    this.reset = b.resetButton,
    this.back = b.backButton,
    this.confirmationText = b.confirmationText,
    this.yesButton = b.yesButton,
    this.noButton = b.noButton,
    this.overlayColor = b.overlayColor || 0,
    this.json = b.optionsJson || "ui_json_options",
    this.atlas = b.optionsAtlas || "ui_json_credits",
    this.creditsJson = b.creditsJson || "ui_json_credits",
    this.credtisAtlas = b.creditsAtlas || "ui_atlas_credits",
    this.openOptions()
},
cifw.OptionsScreen.prototype = {
    openOptions: function() {
        var a = cifw.LocalizationManager.getInstance();
        this.graphics = this.game.make.graphics(),
        this.graphics.beginFill(this.overlayColor, .5),
        this.graphics.drawRect(0, 0, cifw.screen.DESIGN_WIDTH, cifw.screen.DESIGN_HEIGHT),
        this.graphics.endFill(),
        this.darkOverlay = new cifw.ResponsiveBackground(this.game, this.graphics.generateTexture(), new Phaser.Point(.5, .5)),
        this.game.add.existing(this.darkOverlay),
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this.game.add.existing(this._group),
        this.closeSignal = new Phaser.Signal,
        this.closeSignal.add(this.exitCallback, this.callbackContext);
        var b = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, this.json, this.atlas);
        this._group.add(b),
        this._group.alpha = 0;
        var c = cifw.AudioManager.getInstance(),
        d = ccui.helper.seekWidgetByName(this._widget, "button_music"),
        e = ccui.helper.seekWidgetByName(this._widget, "button_sfx");
        c.isMusicEnabled() ? (d.__uiParent.loadTextureNormal("options_button_music.png"), d.__uiParent.loadTexturePressed("options_button_music_press.png")) : (d.__uiParent.loadTextureNormal("options_button_music_off.png"), d.__uiParent.loadTexturePressed("options_button_music_off_press.png")),
        c.isSfxEnabled() ? (e.__uiParent.loadTextureNormal("options_button_sfx.png"), e.__uiParent.loadTexturePressed("options_button_sfx_press.png")) : (e.__uiParent.loadTextureNormal("options_button_sfx_off.png"), e.__uiParent.loadTexturePressed("options_button_sfx_off_press.png")),
        ccs.actionManager.playActionByName(this.json, "init"),
        a.localizeUILabel(this._widget, "options_title_bmp", this.title),
        a.localizeUILabel(this._widget, "options_reset_bmp", this.reset),
        a.localizeUILabel(this._widget, "options_credits_bmp", this.credits),
        a.localizeUILabel(this._widget, "options_back_bmp", this.back),
        this.game.time.events.add(200, this.onTransitionFinished, this)
    },
    onTransitionFinished: function() {
        this._group.alpha = 1,
        ccs.actionManager.playActionByName(this.json, "in"),
        this.game.time.events.add(500, this._addTouchListeners, this)
    },
    _addTouchListeners: function() {
        ccui.helper.addTouchCallback(this._widget, "button_sfx", this.soundOff, this),
        ccui.helper.addTouchCallback(this._widget, "button_music", this.musicOff, this),
        ccui.helper.addTouchCallback(this._widget, "options_reset", this.resetData, this),
        ccui.helper.addTouchCallback(this._widget, "options_credits", this.showCredits, this),
        ccui.helper.addTouchCallback(this._widget, "options_back", this.optionsBack, this)
    },
    soundOff: function() {
        var a = cifw.AudioManager.getInstance(),
        b = ccui.helper.seekWidgetByName(this._widget, "button_sfx");
        a.isSfxEnabled() ? (cifw.AudioManager.getInstance().switchSfxState(), b.__uiParent.loadTextureNormal("options_button_sfx_off.png"), b.__uiParent.loadTexturePressed("options_button_sfx_off_press.png")) : (cifw.AudioManager.getInstance().switchSfxState(), b.__uiParent.loadTextureNormal("options_button_sfx.png"), b.__uiParent.loadTexturePressed("options_button_sfx_press.png"))
    },
    musicOff: function() {
        var a = cifw.AudioManager.getInstance(),
        b = ccui.helper.seekWidgetByName(this._widget, "button_music");
        a.isMusicEnabled() ? (a.stopMusic(), a.switchMusicState(), b.__uiParent.loadTextureNormal("options_button_music_off.png"), b.__uiParent.loadTexturePressed("options_button_music_off_press.png")) : (a.switchMusicState(), a.playMusic(), b.__uiParent.loadTextureNormal("options_button_music.png"), b.__uiParent.loadTexturePressed("options_button_music_press.png"))
    },
    resetData: function() {
        this._disableButtons(),
        new cifw.ConfirmationScreen(this.game, this.confirmationText, this.yesButton, this.noButton, this.acceptReset, this.cancelReset, this, "ui_json_confirmation", "ui_atlas_confirmation")
    },
    acceptReset: function() {
        this.game.time.events.add(200, this._enableButtons, this),
        this.resetCallback()
    },
    cancelReset: function() {
        this.game.time.events.add(200, this._enableButtons, this)
    },
    showCredits: function() {
        this._disableButtons(),
        new cifw.CreditsScreen(this.game, this.backFromCredits, this, this.creditsJson, this.credtisAtlas)
    },
    backFromCredits: function() {
        this.game.time.events.add(200, this._enableButtons, this)
    },
    optionsBack: function() {
        this._disableButtons(),
        ccs.actionManager.playActionByName(this.json, "out",
        function() {
            this.darkOverlay.destroy(),
            this._group.destroy(),
            this.closeSignal.dispatch(this)
        },
        this)
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "options_credits"),
        ccui.helper.disableTouch(this._widget, "options_back"),
        ccui.helper.disableTouch(this._widget, "button_music"),
        ccui.helper.disableTouch(this._widget, "button_sfx"),
        ccui.helper.disableTouch(this._widget, "options_reset")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "options_credits"),
        ccui.helper.enableTouch(this._widget, "options_back"),
        ccui.helper.enableTouch(this._widget, "button_music"),
        ccui.helper.enableTouch(this._widget, "button_sfx"),
        ccui.helper.enableTouch(this._widget, "options_reset")
    }
},
cifw.CreditsScreen = function(a, b, c, d, e) {
    this.game = a,
    this.exitCallback = b,
    this.callbackContext = c,
    this.json = d,
    this.atlas = e,
    this.openCredits()
},
cifw.CreditsScreen.prototype = {
    openCredits: function() {
        var a = cifw.LocalizationManager.getInstance();
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this.game.add.existing(this._group);
        var b = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, this.json, this.atlas);
        this._group.add(b),
        this._group.alpha = 0,
        this.closeSignal = new Phaser.Signal,
        this.closeSignal.add(this.exitCallback, this.callbackContext),
        ccs.actionManager.playActionByName(this.json, "init"),
        a.localizeUILabel(this._widget, "credits_bmp", "credits"),
        a.localizeUILabel(this._widget, "back_bmp", "back"),
        this._disableButtons(),
        this.game.time.events.add(500, this.onTransitionFinished, this)
    },
    onTransitionFinished: function() {
        this._group.alpha = 1,
        ccs.actionManager.playActionByName(this.json, "in",
        function() {
            this._enableButtons()
        },
        this),
        this._addTouchListeners()
    },
    _addTouchListeners: function() {
        ccui.helper.addTouchCallback(this._widget, "button_back", this.goBack, this)
    },
    goBack: function() {
        this._disableButtons(),
        ccs.actionManager.playActionByName(this.json, "out",
        function() {
            this._group.destroy(),
            this.closeSignal.dispatch(this)
        },
        this)
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "button_back")
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "button_back")
    }
},
cifw.PreloaderState = function(a) {
    this.game = a,
    this._toState = null,
    this._stateRes = null
},
cifw.PreloaderState.prototype = {
    init: function(a) {
        this._toState = a
    },
    preload: function() {
        this._stateRes = stateResources[this._toState],
        this._stateRes ? (this._stateRes.image && _.each(this._stateRes.image, this._preloadImage, this), this._stateRes.json && _.each(this._stateRes.json, this._preloadJson, this), this._stateRes.atlas && _.each(this._stateRes.atlas, this._preloadAtlas, this), this._stateRes.bitmapFont && _.each(this._stateRes.bitmapFont, this._preloadBitmapFont, this)) : console.log("Error: Resources for " + this._toState + " state not defined")
    },
    create: function() {
        cifw.TransitionManager.getInstance().transitionFade(300, this._toState)
    },
    _preloadImage: function(a) {
        this.game.load.image(a.key, a.url)
    },
    _preloadJson: function(a) {
        this.game.load.json(a.key, a.url)
    },
    _preloadAtlas: function(a) {
        this.game.load.atlas(a.key, a.texture, a.atlas)
    },
    _preloadBitmapFont: function(a) {
        this.game.load.bitmapFont(a.key, a.texture, a.fnt)
    }
},
cifw.Utils = cifw.Utils || {},
cifw.Utils.debugResponsiveGroup = function(a, b) {
    cifw.config.DEBUG_DRAW && (b.render(), cifw.Utils._renderDebug(a, b))
},
cifw.Utils._renderDebug = function(a, b) {
    B9l.I06(b.children.length, 0) && _.each(b.children,
    function(b) {
        cifw.Utils._renderDebug(a, b)
    },
    this),
    b.visible && a.debug.spriteBounds(b, "rgba(255,0,0,1)", !1)
},
cifw.Utils.host = ["c", "a", "n", "g", "r", "e", "j", "o", "i", "d", "e", "a", "s", ".", "c", "o", "m"],
cifw.Utils.sub = ["w", "w", "w", "."],
cifw.Utils.inHost = function() {
    if (!cifw.config.SITE_LOCK) return ! 0;
    var a = window.top.location.hostname,
    b = cifw.Utils.host.join(""),
    c = cifw.Utils.sub.join("") + b,
    d = B9l.r06(17, cifw.Utils.host.length),
    e = B9l.L06(4, cifw.Utils.sub.length);
    return B9l.b06(0, cifw.config.SITE_LOCK) || d && e && (B9l.R06(a, b) || B9l.S06(a, c))
};
var ccui = ccui || {};
ccui.Widget = ccui.Widget || {},
ccui.Widget.BRIGHT_STYLE_NONE = -1,
ccui.Widget.BRIGHT_STYLE_NORMAL = 0,
ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT = 1,
ccui.Widget.TYPE_WIDGET = 0,
ccui.Widget.TYPE_CONTAINER = 1,
ccui.Widget.LEFT = 0,
ccui.Widget.RIGHT = 1,
ccui.Widget.UP = 0,
ccui.Widget.DOWN = 1,
ccui.Widget.LOCAL_TEXTURE = 0,
ccui.Widget.PLIST_TEXTURE = 1,
ccui.Widget.TOUCH_BEGAN = 0,
ccui.Widget.TOUCH_MOVED = 1,
ccui.Widget.TOUCH_ENDED = 2,
ccui.Widget.TOUCH_CANCELED = 3,
ccui.Widget.SIZE_ABSOLUTE = 0,
ccui.Widget.SIZE_PERCENT = 1,
ccui.Widget.POSITION_ABSOLUTE = 0,
ccui.Widget.POSITION_PERCENT = 1,
ccui.LoadingBar = ccui.LoadingBar || {},
ccui.LoadingBar.TYPE_LEFT = 0,
ccui.LoadingBar.TYPE_RIGHT = 1,
ccui.helper = {
    seekWidgetByName: function(a, b) {
        if (!a) return null;
        if (B9l.c56(a.name, b)) return a;
        for (var c = a.children,
        d = c.length,
        e = 0; B9l.P56(d, e); e++) {
            var f = c[e],
            g = ccui.helper.seekWidgetByName(f, b);
            if (B9l.Z56(null, g)) return g
        }
        return null
    },
    addTouchCallback: function(a, b, c, d) {
        var e = ccui.helper.seekWidgetByName(a, b);
        e ? e.onInputUp.add(function(a, b, e) {
            e && c.call(d, a, b, e)
        },
        this) : console.log("Widget not found: " + b + ". Couldn't add callback")
    },
    disableTouch: function(a, b) {
        var c = ccui.helper.seekWidgetByName(a, b);
        c ? c.input.enabled = !1 : console.log("Widget not found: " + b + ". Couldn't remove callback")
    },
    enableTouch: function(a, b) {
        var c = ccui.helper.seekWidgetByName(a, b);
        c ? c.input.enabled = !0 : console.log("Widget not found: " + b + ". Couldn't remove callback")
    },
    seekActionWidgetByActionTag: function(a, b) {
        if (!a) return null;
        if (!B9l.i56(a, cifw.UIWidget)) {
            var c = function(b) {
                a = b.__uiParent
            };
            if (B9l.K56(null, a.__uiParent)) return null;
            c(a)
        }
        if (B9l.m56(a.getActionTag(), b)) return a;
        for (var d = a.getWidget().children, e = 0; B9l.Q56(e, d.length); e++) {
            var f = d[e],
            g = ccui.helper.seekActionWidgetByActionTag(f, b);
            if (B9l.x56(null, g)) return g
        }
        return null
    }
};
var cifw = cifw || {};
cifw.UIWidget = function(a) {
    this._widget = null,
    this.game = a,
    this._scaleX = 0,
    this._scaleY = 0
},
cifw.UIWidget.prototype = {
    getWidget: function() {
        return this._widget
    },
    ignoreContentAdaptWithSize: function(a) {},
    setSizeType: function(a) {},
    setPositionType: function(a) {},
    setSizePercent: function(a) {},
    setPositionPercent: function(a) {},
    setContentSize: function(a, b) {},
    setTag: function(a) {},
    setActionTag: function(a) {
        this._actionTag = a
    },
    getActionTag: function() {
        return this._actionTag
    },
    setTouchEnabled: function(a) {},
    setName: function(a) {
        this._widget.name = a
    },
    getName: function() {
        return this._widget.name
    },
    setPosition: function(a, b) {
        void 0 != b ? (this._widget.x = a, this._widget.y = b) : (this._widget.x = a.x, this._widget.y = a.y)
    },
    setScaleX: function(a) {
        this._scaleX = a,
        this._widget.scale.x = a
    },
    setScaleY: function(a) {
        this._scaleY = a,
        this._widget.scale.y = a
    },
    getScaleX: function() {
        return this._widget.scale.x
    },
    getScaleY: function() {
        return this._widget.scale.y
    },
    setRotation: function(a) {
        this._widget.angle = a
    },
    setVisible: function(a) {},
    setLocalZOrder: function(a) {},
    setOpacity: function(a) {},
    setColor: function(a) {},
    setFlippedX: function(a) {},
    setFlippedY: function(a) {},
    setAnchorPoint: function(a) {
        this._widget.anchor.setTo(B9l.v56(1, a.x), B9l.A56(1, a.y))
    },
    getAnchorPoint: function() {
        return this._widget.anchor
    },
    getPositionType: function() {
        return 0
    },
    getPositionPercent: function() {
        return null
    },
    getAnchorPointInPoints: function() {
        return cc.p(this._widget.anchor.x, this._widget.anchor.y)
    },
    getPositionX: function() {
        return this._widget.x
    },
    getPositionY: function() {
        return - this._widget.y
    },
    addChild: function(a) {
        this._widget.addChild(a)
    },
    setScale9Enabled: function(a) {},
    setCapInsets: function(a) {},
    setSize: function(a) {
        this._size = a
    },
    getSize: function() {
        return new Phaser.Point(this._widget.width, this._widget.height)
    }
},
cifw.UIWidget.prototype.constructor = cifw.UIWidget;
var cifw = cifw || {};
cifw.UIImageView = function(a) {
    cifw.UIWidget.call(this, a),
    this._widget = new Phaser.Sprite(a),
    this._widget.__uiParent = this
},
cifw.UIImageView.prototype = Object.create(cifw.UIWidget.prototype),
cifw.UIImageView.prototype.constructor = cifw.UIImageView,
cifw.UIImageView.prototype.loadTexture = function(a, b, c) {
    this._widget.loadTexture(a, b, c)
};
var cifw = cifw || {};
cifw.UILayout = function(a) {
    cifw.UIWidget.call(this, a),
    this._widget = new Phaser.Group(a),
    this._widget.__uiParent = this,
    this._anchorPoint = null,
    this.height = 0,
    this.width = 0
},
cifw.UILayout.prototype = Object.create(cifw.UIWidget.prototype),
cifw.UILayout.prototype.constructor = cifw.UILayout,
cifw.UILayout.prototype.setSize = function(a) {
    cifw.UIWidget.prototype.setSize.call(this, a),
    this._widget.width = a.x,
    this._widget.height = a.y,
    this.height = a.y,
    this.width = a.x
},
cifw.UILayout.prototype.getSize = function() {
    return this._size
},
cifw.UILayout.prototype.setContentSize = function(a, b) {},
cifw.UILayout.prototype.setClippingEnabled = function(a) {},
cifw.UILayout.prototype.setBackGroundImageScale9Enabled = function(a) {},
cifw.UILayout.prototype.setBackGroundColorVector = function(a) {},
cifw.UILayout.prototype.setBackGroundColorType = function(a) {},
cifw.UILayout.prototype.setBackGroundColor = function(a, b) {},
cifw.UILayout.prototype.setBackGroundColorOpacity = function(a) {},
cifw.UILayout.prototype.setBackGroundImage = function(a) {},
cifw.UILayout.prototype.setBackGroundImageCapInsets = function(a) {},
cifw.UILayout.prototype.setLayoutType = function(a) {},
cifw.UILayout.prototype.setAnchorPoint = function(a) {
    this._anchorPoint = new Phaser.Point(a.x, a.y)
},
cifw.UILayout.prototype.getAnchorPoint = function() {
    return this._anchorPoint
};
var cifw = cifw || {};
cifw.UIButton = function(a) {
    cifw.UIWidget.call(this, a),
    this._widget = new Phaser.Button(a),
    this._widget.__uiParent = this
},
cifw.UIButton.prototype = Object.create(cifw.UIWidget.prototype),
cifw.UIButton.prototype.constructor = cifw.UIButton,
cifw.UIButton.prototype.setScale9Enabled = function(a) {},
cifw.UIButton.prototype.loadTextureNormal = function(a, b) {
    this._widget.setFramesCustom(a, a, null, a)
},
cifw.UIButton.prototype.loadTexturePressed = function(a, b) {
    this._widget.setFramesCustom(null, null, a, null)
},
cifw.UIButton.prototype.loadTextureDisabled = function(a, b) {},
cifw.UIButton.prototype.setTitleText = function(a) {},
cifw.UIButton.prototype.setTitleColor = function(a) {},
cifw.UIButton.prototype.setTitleFontSize = function(a) {},
cifw.UIButton.prototype.setTitleFontName = function(a) {},
cifw.UIButton.prototype.loadTexture = function(a, b) {
    this._widget.loadTexture(a, b)
},
Phaser.Button.prototype.setFramesCustom = function(a, b, c, d) {
    B9l.d56(null, a) && this.setStateFrame("over", a, this.input.pointerOver()),
    B9l.t56(null, b) && this.setStateFrame("Out", b, !this.input.pointerOver()),
    B9l.C56(null, c) && this.setStateFrame("Down", c, this.input.pointerDown()),
    B9l.a56(null, d) && this.setStateFrame("Up", d, this.input.pointerUp())
};
var cifw = cifw || {};
cifw.UITextBMFont = function(a) {
    cifw.UIWidget.call(this, a),
    this._widget = new Phaser.BitmapText(a, 0, 0, fonts.baseFont.name, "", fonts.baseFont.size),
    this._widget.__uiParent = this
},
cifw.UITextBMFont.prototype = Object.create(cifw.UIWidget.prototype),
cifw.UITextBMFont.prototype.constructor = cifw.UITextBMFont,
cifw.UITextBMFont.prototype.setFntFile = function(a) {
    var b = this._widget.x,
    c = this._widget.y;
    this._oldX = b,
    this._oldY = c,
    this._widget.font = a,
    this._widget.fontSize = fonts[a].size,
    this._widget.align = "center"
},
cifw.UITextBMFont.prototype.alignLeft = function() {
    this._widget.align = "left"
},
cifw.UITextBMFont.prototype.alignRight = function() {
    this._widget.align = "right"
},
cifw.UITextBMFont.prototype.setString = function(a) {
    this._widget.text = a,
    this._widget.updateText(),
    this._widget.x = B9l.h56(this._oldX, this._widget.width * this.getAnchorPoint().x),
    this._widget.y = -this._oldY - this._widget.height / 2 - B9l.H56(this._height, this._height - 100 * this._scaleY / this._widget.height)
},
cifw.UITextBMFont.prototype.setScale = function(a) {
    this._widget.scale.setTo(B9l.E56(this._scaleX, a), B9l.l36(this._scaleY, a))
},
cifw.UITextBMFont.prototype.setPosition = function(a, b) {
    void 0 != b ? (this._widget.x = a, this._widget.y = b) : (this._widget.x = a.x, this._widget.y = a.y)
},
cifw.UITextBMFont.prototype.setAnchorPoint = function(a) {
    this._anchorPoint = new Phaser.Point(a.x, a.y)
},
cifw.UITextBMFont.prototype.getAnchorPoint = function() {
    return this._anchorPoint || new Phaser.Point(.5, .5)
},
cifw.UITextBMFont.prototype.setHeight = function(a) {
    this._height = a
},
cifw.UITextBMFont.prototype.setWidth = function(a) {
    this._width = a
};
var cifw = cifw || {};
cifw.UILoadingBar = function(a) {
    cifw.UIWidget.call(this, a),
    this._widget = new cifw.LoadingBar(a),
    this._widget.__uiParent = this
},
cifw.UILoadingBar.prototype = Object.create(cifw.UIWidget.prototype),
cifw.UILoadingBar.prototype.constructor = cifw.UILoadingBar,
cifw.UILoadingBar.prototype.loadTexture = function(a, b, c) {
    this._widget.loadTexture(a, b, c)
},
cifw.UILoadingBar.prototype.setDirection = function(a) {
    this._widget.setDirection(a)
},
cifw.UILoadingBar.prototype.setPercent = function(a) {
    this._widget.setPercent(a)
},
cifw.UILoadingBar.prototype.setPosition = function(a, b) {
    void 0 != b ? this._widget.setPosition(a, b) : this._widget.setPosition(a.x, -a.y)
},
cifw.UILoadingBar.prototype.setAnchorPoint = function(a) {
    this._widget._realAnchorPoint = new Phaser.Point(a.x, a.y),
    this._widget.anchor.setTo(0, 0),
    this._widget.setPosition(this._widget._initX, this._widget._initY)
},
cifw.UILoadingBar.prototype.loadTexture = function(a, b, c) {
    this._widget.loadTexture(a, b, c),
    this._widget.recalculateSize()
};
var cc = cc || {};
cc.isFunction = function(a) {
    return "function" == typeof a
},
cc.p = function(a, b) {
    return new Phaser.Point(a, b)
},
cc.size = function(a, b) {
    return new Phaser.Point(a, b)
},
cc.color = function(a, b, c, d) {
    return void 0 === a ? {
        r: 0,
        g: 0,
        b: 0,
        a: 255
    }: {
        r: a,
        g: b,
        b: c,
        a: B9l.X36(null, d) ? 255 : d
    }
},
cc.rect = function(a, b, c, d) {
    return new Phaser.Rectangle(a, b, c, d)
},
cc.path = {
    join: function() {
        for (var a = arguments.length,
        b = "",
        c = 0; B9l.s36(a, c); c++) b = (b + (B9l.F36("", b) ? "": "/") + arguments[c]).replace(/(\/|\\\\)$/, "");
        return b
    },
    extname: function(a) {
        var b = /(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a);
        return b ? b[1] : null
    },
    mainFileName: function(a) {
        if (a) {
            var b = a.lastIndexOf(".");
            if ( - 1 !== b) return a.substring(0, b)
        }
        return a
    },
    basename: function(a, b) {
        var c = a.indexOf("?");
        B9l.G36(c, 0) && (a = a.substring(0, c));
        var d = /(\/|\\\\)([^(\/|\\\\)]+)$/g,
        e = d.exec(a.replace(/(\/|\\\\)$/, ""));
        if (!e) return null;
        var f = e[2];
        return b && B9l.g36(a.substring(a.length - b.length).toLowerCase(), b.toLowerCase()) ? f.substring(0, B9l.n36(f.length, b.length)) : f
    },
    dirname: function(a) {
        return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/, "$2")
    },
    changeExtname: function(a, b) {
        var c = function() {
            b = b || ""
        };
        c();
        var d = a.indexOf("?"),
        e = "";
        return B9l.y36(d, 0) && (e = a.substring(d), a = a.substring(0, d)),
        d = a.lastIndexOf("."),
        B9l.N36(0, d) ? a + b + e: a.substring(0, d) + b + e
    },
    changeBasename: function(a, b, c) {
        if (B9l.p36(0, b.indexOf("."))) return this.changeExtname(a, b);
        var d = a.indexOf("?"),
        e = "",
        f = c ? this.extname(a) : "";
        return B9l.o36(d, 0) && (e = a.substring(d), a = a.substring(0, d)),
        d = a.lastIndexOf("/"),
        d = B9l.U36(0, d) ? 0 : d + 1,
        a.substring(0, d) + b + f + e
    }
};
var cc = cc || {},
ClassManager = {
    id: B9l.k36(0, 998 * Math.random()),
    instanceId: B9l.M36(0, 998 * Math.random()),
    compileSuper: function(a, b, c) {
        var d = a.toString(),
        e = d.indexOf("("),
        f = d.indexOf(")"),
        g = d.substring(e + 1, f);
        g = g.trim();
        for (var h = d.indexOf("{"), i = d.lastIndexOf("}"), d = d.substring(h + 1, i); - 1 != d.indexOf("this._super");) {
            var j = function() {
                d = d.substring(0, k) + "ClassManager[" + c + "]." + b + ".call(this" + o + d.substring(l + 1)
            },
            k = d.indexOf("this._super"),
            l = d.indexOf("(", k),
            m = d.indexOf(")", l),
            n = d.substring(l + 1, m);
            n = n.trim();
            var o = n ? ",": "";
            j()
        }
        return Function(g, d)
    },
    getNewID: function() {
        return this.id++
    },
    getNewInstanceId: function() {
        return this.instanceId++
    }
};
ClassManager.compileSuper.ClassManager = ClassManager,
function() {
    var a = /\b_super\b/,
    b = !1;
    b && console.log("release Mode"),
    cc.Class = function() {},
    cc.Class.extend = function(c) {
        function d() {
            this.__instanceId = ClassManager.getNewInstanceId(),
            this.ctor && this.ctor.apply(this, arguments)
        }
        var e = function(a) {
            ClassManager[h] = a
        },
        f = this.prototype,
        g = Object.create(f),
        h = ClassManager.getNewID();
        e(f);
        var i = {
            writable: !0,
            enumerable: !1,
            configurable: !0
        };
        g.__instanceId = null,
        d.id = h,
        i.value = h,
        Object.defineProperty(g, "__pid", i),
        d.prototype = g,
        i.value = d,
        Object.defineProperty(d.prototype, "constructor", i),
        this.__getters__ && (d.__getters__ = cc.clone(this.__getters__)),
        this.__setters__ && (d.__setters__ = cc.clone(this.__setters__));
        for (var j = 0,
        k = arguments.length; B9l.j36(k, j); ++j) {
            var l = arguments[j];
            for (var m in l) {
                var n = "function" == typeof l[m],
                o = "function" == typeof f[m],
                p = a.test(l[m]);
                if (b && n && o && p ? (i.value = ClassManager.compileSuper(l[m], m, h), Object.defineProperty(g, m, i)) : n && o && p ? (i.value = function(a, b) {
                    return function() {
                        var c = this._super;
                        this._super = f[a];
                        var d = b.apply(this, arguments);
                        return this._super = c,
                        d
                    }
                } (m, l[m]), Object.defineProperty(g, m, i)) : n ? (i.value = l[m], Object.defineProperty(g, m, i)) : g[m] = l[m], n) {
                    var q, r, s;
                    if (this.__getters__ && this.__getters__[m]) {
                        s = this.__getters__[m];
                        for (var t in this.__setters__) if (B9l.T36(this.__setters__[t], s)) {
                            var u = function(a) {
                                r = a
                            };
                            u(t);
                            break
                        }
                        cc.defineGetterSetter(g, s, l[m], l[r] ? l[r] : g[r], m, r)
                    }
                    if (this.__setters__ && this.__setters__[m]) {
                        s = this.__setters__[m];
                        for (var t in this.__getters__) if (B9l.O36(this.__getters__[t], s)) {
                            var v = function(a) {
                                q = a
                            };
                            v(t);
                            break
                        }
                        cc.defineGetterSetter(g, s, l[q] ? l[q] : g[q], l[m], q, m)
                    }
                }
            }
        }
        return d.extend = cc.Class.extend,
        d.implement = function(a) {
            var b = function(a) {
                g[c] = a[c]
            };
            for (var c in a) b(a)
        },
        d
    }
} (),
cc.defineGetterSetter = function(a, b, c, d, e, f) {
    if (a.__defineGetter__) c && a.__defineGetter__(b, c),
    d && a.__defineSetter__(b, d);
    else {
        if (!Object.defineProperty) throw new Error("browser does not support getters");
        var g = {
            enumerable: !1,
            configurable: !0
        };
        c && (g.get = c),
        d && (g.set = d),
        Object.defineProperty(a, b, g)
    }
    if (!e && !f) for (var h = B9l.e36(null, c), i = void 0 != d, j = Object.getOwnPropertyNames(a), k = 0; B9l.W96(k, j.length); k++) {
        var l = j[k];
        if ((a.__lookupGetter__ ? !a.__lookupGetter__(l) : !Object.getOwnPropertyDescriptor(a, l)) && "function" == typeof a[l]) {
            var m = a[l];
            if (h && B9l.q96(m, c) && (e = l, !i || f)) break;
            if (i && B9l.V96(m, d) && (f = l, !h || e)) break
        }
    }
    var n = a.constructor;
    e && (n.__getters__ || (n.__getters__ = {}), n.__getters__[e] = b),
    f && (n.__setters__ || (n.__setters__ = {}), n.__setters__[f] = b)
},
cc.clone = function(a) {
    var b = a.constructor ? new a.constructor: {};
    for (var c in a) {
        var d = a[c];
        "object" != typeof d || !d || B9l.Y96(d, cc.Node) || B9l.z96(d, HTMLElement) ? b[c] = d: b[c] = cc.clone(d)
    }
    return b
};
var ccs = ccs || {};
ccs.Class = ccs.Class || cc.Class,
ccs.WidgetReaderProtocol = ccs.Class.extend({
    setPropsFromJsonDictionary: function(a, b) {}
}),
ccs.widgetReader = {
    setPropsFromJsonDictionary: function(a, b) {
        var c = b.ignoreSize;
        B9l.D96(null, c) && a.ignoreContentAdaptWithSize(c),
        a.setSizeType(b.sizeType),
        a.setPositionType(b.positionType),
        a.setSizePercent(cc.p(b.sizePercentX, b.sizePercentY)),
        a.setPositionPercent(cc.p(b.positionPercentX, b.positionPercentY));
        var d = 0,
        e = 0,
        f = b.adaptScreen;
        f ? (d = b.width, e = b.height) : (d = b.width, e = b.height),
        a.setContentSize(d, e),
        a.setTag(b.tag),
        a.setActionTag(b.actiontag),
        a.setTouchEnabled(b.touchAble);
        var g = b.name,
        h = g ? g: "default";
        a.setName(h);
        var i = b.x,
        j = b.y;
        a.setPosition(i, j);
        var k = B9l.J96(null, b.scaleX) ? b.scaleX: 1;
        a.setScaleX(k);
        var l = B9l.B96(null, b.scaleY) ? b.scaleY: 1;
        a.setScaleY(l);
        var m = b.rotation || 0;
        a.setRotation(m);
        var n = b.visible || !1;
        B9l.f96(null, n) && a.setVisible(n),
        a.setLocalZOrder(b.ZOrder),
        b.layoutParameter
    },
    setColorPropsFromJsonDictionary: function(a, b) {
        var c = b.opacity;
        B9l.u96(null, c) && a.setOpacity(c);
        var d = b.colorR,
        e = b.colorG,
        f = b.colorB;
        a.setColor(cc.color(B9l.w96(null, d) ? 255 : d, B9l.I96(null, e) ? 255 : e, B9l.r96(null, f) ? 255 : f)),
        ccs.widgetReader._setAnchorPointForWidget(a, b),
        a.setFlippedX(b.flipX),
        a.setFlippedY(b.flipY)
    },
    _setAnchorPointForWidget: function(a, b) {
        var c, d = function() {
            c = B9l.L96(null, e) ? b.anchorPointX: a.getAnchorPoint().x
        },
        e = b.anchorPointX;
        d();
        var f, g = b.anchorPointY;
        f = B9l.b96(null, g) ? b.anchorPointY: a.getAnchorPoint().y,
        (B9l.R96(null, e) || B9l.S96(null, g)) && a.setAnchorPoint(cc.p(c, f))
    },
    _getResourcePath: function(a, b, c) {
        var d, e = a[b];
        return B9l.c86(null, e) && (B9l.P86(0, c) ? d = ccs.uiReader.getFilePath() + e: B9l.Z86(1, c) ? d = e: cc.assert(0, "invalid TextureResType!!!")),
        d
    },
    setPropsFromProtocolBuffers: function(a, b) {
        var c = b.widgetOptions;
        a.setCascadeColorEnabled(!0),
        a.setCascadeOpacityEnabled(!0),
        a.setAnchorPoint(cc.p(0, 0)),
        a.setUnifySizeEnabled(!0);
        var d = c.ignoreSize;
        d && a.ignoreContentAdaptWithSize(c.ignoreSize),
        a.setSizeType(c.sizeType),
        a.setPositionType(c.positionType),
        a.setSizePercent(cc.p(c.sizePercentX, c.sizePercentY)),
        a.setPositionPercent(cc.p(c.positionPercentX, c.positionPercentY));
        var e = c.width,
        f = c.height;
        a.setContentSize(cc.size(e, f)),
        a.setTag(c.tag),
        a.setActionTag(c.actionTag),
        a.setTouchEnabled(c.touchAble);
        var g = c.name,
        h = g ? g: "default";
        a.setName(h);
        var i = c.x,
        j = c.y;
        a.setPosition(cc.p(i, j)),
        c.Alpha && a.setOpacity(c.Alpha),
        a.setScaleX(B9l.i86(null, c.scaleX) ? c.scaleX: 1),
        a.setScaleY(B9l.K86(null, c.scaleY) ? c.scaleY: 1),
        a.setRotationX(B9l.m86(null, c.rotationSkewX) ? c.rotationSkewX: 0),
        a.setRotationY(B9l.Q86(null, c.rotationSkewY) ? c.rotationSkewY: 0);
        var k = c.visible;
        k && a.setVisible(c.visible);
        var l = c.zorder;
        a.setLocalZOrder(l);
        var m = c.layoutParameter;
        if (m) {
            var n = c.layoutParameter,
            o = n.type,
            p = null;
            switch (o) {
            case 0:
                break;
            case 1:
                p = new ccui.LinearLayoutParameter;
                var q = n.gravity;
                p.setGravity(q);
                break;
            case 2:
                p = new ccui.RelativeLayoutParameter;
                var r = p,
                s = n.relativeName;
                r.setRelativeName(s);
                var t = n.relativeToName;
                r.setRelativeToWidgetName(t);
                var u = n.align;
                r.setAlign(u)
            }
            if (p) {
                var v = n.marginLeft,
                w = n.marginTop,
                x = n.marginRight,
                y = n.marginDown;
                p.setMargin(new ccui.Margin(v, w, x, y)),
                a.setLayoutParameter(p)
            }
        }
    },
    setColorPropsFromProtocolBuffers: function(a, b) {
        var c = b.widgetOptions,
        d = B9l.x86(null, c.colorR),
        e = B9l.v86(null, c.colorG),
        f = B9l.A86(null, c.colorB),
        g = c.colorR,
        h = c.colorG,
        i = c.colorB;
        d && e && f && a.setColor(cc.color(g, h, i)),
        ccs.widgetReader.setAnchorPointForWidget(a, b);
        var j = c.flipX,
        k = c.flipY;
        a.setFlippedX(j),
        a.setFlippedY(k)
    },
    setAnchorPointForWidget: function(a, b) {
        var c, d = function() {
            c = f ? e.anchorPointX: a.getAnchorPoint().x
        },
        e = b.widgetOptions,
        f = e.anchorPointX;
        d();
        var g, h = e.anchorPointY;
        g = h ? e.anchorPointY: a.getAnchorPoint().y,
        (f || h) && a.setAnchorPoint(cc.p(c, g))
    },
    getResourcePath: function(a, b) {
        var c, d = ccs.uiReader.getFilePath(),
        e = a;
        return B9l.d86(null, e) && B9l.t86(0, e) && (B9l.C86(b, ccui.Widget.LOCAL_TEXTURE) ? c = d + e: B9l.a86(b, ccui.Widget.PLIST_TEXTURE) ? c = e: cc.assert(0, "invalid TextureResType!!!")),
        c
    }
},
ccs.imageViewReader = {
    setPropsFromJsonDictionary: function(a, b, c) {
        ccs.widgetReader.setPropsFromJsonDictionary.call(this, a, b);
        var d = ccs.uiReader.getFilePath(),
        e = a,
        f = b.fileNameData,
        g = f.resourceType;
        switch (g) {
        case 0:
            var h = d,
            i = f.path,
            j = null;
            i && B9l.h86("", i) && (j = h + i, e.loadTexture(j));
            break;
        case 1:
            var i = f.path;
            e.loadTexture(c, i, 1)
        }
        var k = b.scale9Enable,
        l = !1;
        if (k && (l = b.scale9Enable), e.setScale9Enabled(l), l) {
            var m = b.scale9Width,
            n = b.scale9Height;
            if (m && n) {
                var o = b.scale9Width,
                p = b.scale9Height;
                e.setSize(cc.size(o, p))
            }
            var q = b.capInsetsX,
            r = b.capInsetsY,
            s = b.capInsetsWidth,
            t = b.capInsetsHeight;
            e.setCapInsets(cc.rect(q, r, s, t))
        }
        ccs.widgetReader.setColorPropsFromJsonDictionary.call(this, a, b)
    },
    setPropsFromProtocolBuffers: function(a, b) {
        ccs.widgetReader.setPropsFromProtocolBuffers.call(this, a, b);
        var c = b.imageViewOptions,
        d = a,
        e = (ccs.uiReader.getFilePath(), c.fileNameData),
        f = e.resourceType,
        g = ccs.widgetReader.getResourcePath(e.path, f);
        d.loadTexture(g, f);
        var h = B9l.H86(null, c.scale9Enable),
        i = !1;
        if (h && (i = c.scale9Enable), d.setScale9Enabled(i), i) {
            d.setUnifySizeEnabled(!1),
            d.ignoreContentAdaptWithSize(!1);
            var j = B9l.E86(null, c.scale9width) ? c.scale9Width: 80,
            k = B9l.l26(null, c.scale9height) ? c.scale9Height: 80;
            d.setContentSize(cc.size(j, k));
            var l = c.capInsetsX,
            m = c.capInsetsY,
            n = B9l.X26(null, c.capInsetsWidth) ? c.capInsetsWidth: 1,
            o = B9l.s26(null, c.capInsetsHeight) ? c.capInsetsHeight: 1;
            d.setCapInsets(cc.rect(l, m, n, o))
        }
        ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this, a, b);
        var p = c.flippedX,
        q = c.flippedY;
        B9l.F26(0, p) && d.setFlippedX(p),
        B9l.G26(0, q) && d.setFlippedY(q)
    }
},
ccs.layoutReader = {
    setPropsFromJsonDictionary: function(a, b) {
        ccs.widgetReader.setPropsFromJsonDictionary.call(this, a, b);
        var c = ccs.uiReader.getFilePath(),
        d = a,
        e = 0,
        f = 0,
        g = b.adaptScreen;
        g ? (e = b.width, f = b.height) : (e = b.width, f = b.height),
        d.setSize(cc.size(e, f)),
        d.setClippingEnabled(b.clipAble);
        var h = b.backGroundScale9Enable;
        d.setBackGroundImageScale9Enabled(h);
        var i = b.bgColorR,
        j = b.bgColorG,
        k = b.bgColorB,
        l = b.bgStartColorR,
        m = b.bgStartColorG,
        n = b.bgStartColorB,
        o = b.bgEndColorR,
        p = b.bgEndColorG,
        q = b.bgEndColorB,
        r = b.vectorX,
        s = b.vectorY;
        d.setBackGroundColorVector(cc.p(r, s));
        var t = b.bgColorOpacity,
        u = b.colorType;
        d.setBackGroundColorType(u),
        d.setBackGroundColor(cc.color(l, m, n), cc.color(o, p, q)),
        d.setBackGroundColor(cc.color(i, j, k)),
        d.setBackGroundColorOpacity(t);
        var v = b.backGroundImageData;
        if (v) {
            var w = v.resourceType;
            switch (w) {
            case 0:
                var x = c,
                y = v.path,
                z = y && B9l.g26("", y) ? x + y: null;
                d.setBackGroundImage(z);
                break;
            case 1:
                var y = v.path;
                d.setBackGroundImage(y, 1)
            }
        }
        if (h) {
            var A = b.capInsetsX,
            B = b.capInsetsY,
            C = b.capInsetsWidth,
            D = b.capInsetsHeight;
            d.setBackGroundImageCapInsets(cc.rect(A, B, C, D))
        }
        d.setLayoutType(b.layoutType),
        ccs.widgetReader.setColorPropsFromJsonDictionary.call(this, a, b)
    },
    setPropsFromProtocolBuffers: function(a, b) {
        ccs.widgetReader.setPropsFromProtocolBuffers.call(this, a, b);
        var c = a,
        d = b.PanelOptions;
        if (d) {
            ccs.uiReader.getFilePath(),
            c.setClippingEnabled(d.clipAble);
            var e = d.backGroundScale9Enable;
            c.setBackGroundImageScale9Enabled(e);
            var f, g, h, i, j, k, l, m, n;
            B9l.n26(a, ccui.PageView) ? (f = 150, g = 150, h = 150, i = 255, j = 255, k = 255, l = 255, m = 150, n = 100) : B9l.y26(a, ccui.ListView) ? (f = 150, g = 150, h = 255, i = 255, j = 255, k = 255, l = 150, m = 150, n = 255) : B9l.N26(a, ccui.ScrollView) ? (f = 255, g = 150, h = 100, i = 255, j = 255, k = 255, l = 255, m = 150, n = 100) : (f = 150, g = 200, h = 255, i = 255, j = 255, k = 255, l = 150, m = 200, n = 255),
            f = B9l.p26(null, d.bgColorR) ? d.bgColorR: f,
            g = B9l.o26(null, d.bgColorG) ? d.bgColorG: g,
            h = B9l.U26(null, d.bgColorB) ? d.bgColorB: h,
            i = B9l.k26(null, d.bgStartColorR) ? d.bgStartColorR: i,
            j = B9l.M26(null, d.bgStartColorG) ? d.bgStartColorG: j,
            k = B9l.j26(null, d.bgStartColorB) ? d.bgStartColorB: k,
            l = B9l.T26(null, d.bgEndColorR) ? d.bgEndColorR: l,
            m = B9l.O26(null, d.bgEndColorG) ? d.bgEndColorG: m,
            n = B9l.e26(null, d.bgEndColorB) ? d.bgEndColorB: n;
            var o = 0,
            p = -.5;
            B9l.W76(null, d.vectorX) && (o = d.vectorX),
            d.vectorY && (p = d.vectorY),
            c.setBackGroundColorVector(cc.p(o, p));
            var q = B9l.q76(null, d.bgColorOpacity) ? d.bgColorOpacity: 100,
            r = B9l.V76(null, d.colorType) ? d.colorType: 1;
            c.setBackGroundColorType(r),
            c.setBackGroundColor(cc.color(i, j, k), cc.color(l, m, n)),
            c.setBackGroundColor(cc.color(f, g, h)),
            c.setBackGroundColorOpacity(q);
            var s = d.backGroundImageData;
            if (s) {
                var t = s.resourceType,
                u = ccs.widgetReader.getResourcePath(s.path, t);
                c.setBackGroundImage(u, t)
            }
            if (e) {
                var v = d.scale9Width,
                w = d.scale9Height;
                B9l.Y76(null, v) && B9l.z76(null, w) && c.setContentSize(cc.size(v, w))
            }
            c.setLayoutType(d.layoutType);
            var x = b.widgetOptions,
            y = B9l.D76(null, x.colorR) ? x.colorR: 255,
            z = B9l.J76(null, x.colorG) ? x.colorG: 255,
            A = B9l.B76(null, x.colorB) ? x.colorB: 255;
            c.setColor(cc.color(y, z, A));
            var B = B9l.f76(null, x.Alpha) ? x.Alpha: 255;
            c.setOpacity(B),
            ccs.widgetReader._setAnchorPointForWidget(a, b);
            var C = x.flipX,
            D = x.flipY;
            a.setFlippedX(C),
            a.setFlippedY(D)
        }
    }
},
ccs.buttonReader = {
    setPropsFromJsonDictionary: function(a, b, c) {
        ccs.widgetReader.setPropsFromJsonDictionary.call(this, a, b);
        var d = ccs.uiReader.getFilePath(),
        e = a,
        f = b.scale9Enable;
        e.setScale9Enabled(f),
        e.loadTexture(c);
        var g = b.normalData,
        h = g.resourceType;
        switch (h) {
        case 0:
            var i = d,
            j = g.path,
            k = j && B9l.u76("", j) ? i + j: null;
            e.loadTextureNormal(k);
            break;
        case 1:
            var j = g.path;
            e.loadTextureNormal(j, 1)
        }
        var l = b.pressedData,
        m = l.resourceType;
        switch (m) {
        case 0:
            var n = d,
            o = l.path,
            p = o && B9l.w76("", o) ? n + o: null;
            e.loadTexturePressed(p);
            break;
        case 1:
            var o = l.path;
            e.loadTexturePressed(o, 1)
        }
        var q = b.disabledData,
        r = q.resourceType;
        switch (r) {
        case 0:
            var s = d,
            t = q.path,
            u = t && B9l.I76("", t) ? s + t: null;
            e.loadTextureDisabled(u);
            break;
        case 1:
            var t = q.path;
            e.loadTextureDisabled(t, 1)
        }
        if (f) {
            var v = b.capInsetsX,
            w = b.capInsetsY,
            x = b.capInsetsWidth,
            y = b.capInsetsHeight;
            e.setCapInsets(cc.rect(v, w, x, y));
            var z = b.scale9Width,
            A = b.scale9Height;
            B9l.r76(null, z) && B9l.L76(null, A) && e.setSize(cc.size(z, A))
        }
        var B = b.text;
        B9l.b76(null, B) && e.setTitleText(B);
        var C = b.textColorR,
        D = b.textColorG,
        E = b.textColorB,
        F = B9l.R76(null, C) ? b.textColorR: 255,
        G = B9l.S76(null, D) ? b.textColorG: 255,
        H = B9l.c4C(null, E) ? b.textColorB: 255;
        e.setTitleColor(cc.color(F, G, H));
        var I = b.fontSize;
        B9l.P4C(null, I) && e.setTitleFontSize(b.fontSize);
        var J = b.fontName;
        J && e.setTitleFontName(b.fontName),
        ccs.widgetReader.setColorPropsFromJsonDictionary.call(this, a, b)
    },
    setPropsFromProtocolBuffers: function(a, b) {
        ccs.widgetReader.setPropsFromProtocolBuffers.call(this, a, b);
        var c = a,
        d = b.buttonOptions,
        e = ccs.uiReader.getFilePath(),
        f = d.scale9Enable;
        c.setScale9Enabled(f);
        var g = d.normalData,
        h = g.resourceType,
        i = ccs.widgetReader.getResourcePath(g.path, h);
        c.loadTextureNormal(i, h);
        var j = d.pressedData,
        k = j.resourceType,
        l = ccs.widgetReader.getResourcePath(j.path, k);
        c.loadTexturePressed(l, k);
        var m = d.disabledData,
        n = m.resourceType,
        o = ccs.widgetReader.getResourcePath(m.path, n);
        if (c.loadTextureDisabled(o, n), f) {
            c.setUnifySizeEnabled(!1),
            c.ignoreContentAdaptWithSize(!1);
            var p = d.capInsetsX,
            q = d.capInsetsY,
            r = d.capInsetsWidth,
            s = d.capInsetsHeight;
            c.setCapInsets(cc.rect(p, q, r, s));
            var t = d.scale9Width,
            u = d.scale9Height;
            t && u && c.setContentSize(cc.size(t, u))
        }
        var v = d.text;
        v && c.setTitleText(v);
        var w = B9l.Z4C(null, d.textColorR) ? d.textColorR: 255,
        x = B9l.i4C(null, d.textColorG) ? d.textColorG: 255,
        y = B9l.K4C(null, d.textColorB) ? d.textColorB: 255;
        c.setTitleColor(cc.color(w, x, y));
        var z = B9l.m4C(null, d.fontSize) ? d.fontSize: 14;
        c.setTitleFontSize(z);
        var A = !0;
        B9l.Q4C(null, d.displaystate) && (A = d.displaystate),
        c.setBright(A);
        var B = B9l.x4C(null, d.fontName) ? d.fontName: "微软雅黑";
        if (c.setTitleFontName(B), d.fontResource) {
            var C = d.fontResource;
            c.setTitleFontName(e + C.path)
        }
        var D = b.widgetOptions;
        c.setColor(cc.color(D.colorR, D.colorG, D.colorB)),
        c.setOpacity(B9l.v4C(null, D.Alpha) ? D.Alpha: 255),
        ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this, a, b)
    }
},
ccs.labelBMFontReader = {
    setPropsFromJsonDictionary: function(a, b) {
        ccs.widgetReader.setPropsFromJsonDictionary.call(this, a, b),
        ccs.widgetReader.setColorPropsFromJsonDictionary.call(this, a, b);
        var c = (ccs.uiReader.getFilePath(), a),
        d = b.fileNameData,
        e = d.resourceType;
        switch (e) {
        case 0:
            var f = d.path;
            c.setFntFile(f);
            break;
        case 1:
            cc.log("Wrong res type of LabelAtlas!")
        }
        var g = b.width;
        c.setWidth(g);
        var h = b.height;
        c.setHeight(h);
        var i = b.text;
        c.setString(i)
    },
    setPropsFromProtocolBuffers: function(a, b) {
        ccs.widgetReader.setPropsFromProtocolBuffers.call(this, a, b);
        var c = ccs.uiReader.getFilePath(),
        d = a,
        e = b.textBMFontOptions;
        if (e) {
            var f = e.fileNameData,
            g = f.resourceType;
            switch (g) {
            case 0:
                var h = c,
                i = f.path,
                j = h + i;
                d.setFntFile(j);
                break;
            case 1:
                cc.log("Wrong res type of LabelAtlas!")
            }
            var k = B9l.A4C(null, e.text) ? e.text: "Text Label";
            d.setString(k)
        }
        ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this, a, b)
    }
},
ccs.loadingBarReader = {
    setPropsFromJsonDictionary: function(a, b, c) {
        ccs.widgetReader.setPropsFromJsonDictionary.call(this, a, b);
        var d = ccs.uiReader.getFilePath(),
        e = a,
        f = b.textureData,
        g = f.resourceType;
        switch (g) {
        case 0:
            var h = d,
            i = f.path,
            j = null;
            i && B9l.d4C("", i) && (j = h + i, e.loadTexture(c, j));
            break;
        case 1:
            var i = f.path;
            e.loadTexture(c, i, 1)
        }
        var k = b.scale9Enable;
        if (e.setScale9Enabled(k), k) {
            var l = b.capInsetsX,
            m = b.capInsetsY,
            n = b.capInsetsWidth,
            o = b.capInsetsHeight;
            e.setCapInsets(cc.rect(l, m, n, o));
            var p = b.width,
            q = b.height;
            e.setSize(cc.size(p, q))
        }
        e.setDirection(b.direction),
        e.setPercent(b.percent),
        ccs.widgetReader.setColorPropsFromJsonDictionary.call(this, a, b)
    },
    setPropsFromProtocolBuffers: function(a, b) {
        ccs.widgetReader.setPropsFromProtocolBuffers.call(this, a, b);
        var c = a,
        d = b.loadingBarOptions,
        e = (ccs.uiReader.getFilePath(), d.textureData),
        f = e.resourceType,
        g = ccs.widgetReader.getResourcePath(e.path, f);
        c.loadTexture(g, f);
        var h = d.scale9Enable;
        c.setScale9Enabled(h);
        var i = d.capinsetsX,
        j = d.capinsetsY,
        k = B9l.t4C(null, d.capinsetsWidth) ? d.capinsetsWidth: 1,
        l = B9l.C4C(null, d.capinsetsHeight) ? d.capinsetsHeight: 1;
        h && c.setCapInsets(cc.rect(i, j, k, l));
        var m = b.widgetOptions,
        n = m.width,
        o = m.height;
        c.setContentSize(cc.size(n, o)),
        c.setDirection(d.direction);
        var p = B9l.a4C(null, d.percent) ? d.percent: 100;
        c.setPercent(p),
        ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this, a, b)
    }
},
ccs.objectFactory = {
    _typeMap: {},
    createObject: function(a, b) {
        var c = null,
        d = this._typeMap[b];
        return d && (c = cc.isFunction(d._fun) ? new d._fun(a) : d._fun),
        c
    },
    registerType: function(a) {
        this._typeMap[a._className] = a
    },
    createGUI: function(a) {
        var b = null;
        B9l.h4C("Panel", a) ? a = "Layout": B9l.H4C("TextArea", a) ? a = "Label": B9l.E4C("TextButton", a) && (a = "Button");
        var c = this._typeMap[a];
        return c && c._fun && (b = c._fun),
        b
    },
    removeAll: function() {
        this._typeMap = {}
    }
},
ccs.TInfo = ccs.Class.extend({
    _className: "",
    _fun: null,
    ctor: function(a, b) {
        b ? (this._className = a, this._fun = b) : (this._className = a._className, this._fun = a._fun),
        ccs.objectFactory.registerType(this)
    }
});
var PBP;
PBP = null,
function() {
    var a = ccs.objectFactory;
    a.registerType({
        _className: "ButtonReader",
        _fun: ccs.buttonReader
    }),
    a.registerType({
        _className: "ImageViewReader",
        _fun: ccs.imageViewReader
    }),
    a.registerType({
        _className: "LayoutReader",
        _fun: ccs.layoutReader
    }),
    a.registerType({
        _className: "WidgetReader",
        _fun: ccs.widgetReader
    }),
    a.registerType({
        _className: "TextBMFontReader",
        _fun: ccs.labelBMFontReader
    }),
    a.registerType({
        _className: "LoadingBarReader",
        _fun: ccs.loadingBarReader
    }),
    a.registerType({
        _className: "ImageView",
        _fun: cifw.UIImageView
    }),
    a.registerType({
        _className: "Button",
        _fun: cifw.UIButton
    }),
    a.registerType({
        _className: "Layout",
        _fun: cifw.UILayout
    }),
    a.registerType({
        _className: "TextBMFont",
        _fun: cifw.UITextBMFont
    }),
    a.registerType({
        _className: "LoadingBar",
        _fun: cifw.UILoadingBar
    })
} (),
ccs.uiReader = {
    _filePath: "",
    _olderVersion: !1,
    _fileDesignSizes: {},
    _mapObject: {},
    _mapParseSelector: {},
    storeFileDesignSize: function(a, b) {
        this._fileDesignSizes[a] = b
    },
    getFileDesignSize: function(a) {
        return this._fileDesignSizes[a]
    },
    widgetFromJsonFile: function(a, b, c) {
        var d = a.cache.getJSON(b);
        if (!d) throw "Please load the resource first : " + b;
        this._filePath = "res";
        var e, f;
        return d.version,
        e = new ccs.WidgetPropertiesReader0300,
        f = e.createWidget(a, d, this._filePath, b, c),
        d = null,
        f
    },
    clear: function() {
        this._filePath = "",
        this._olderVersion = !1,
        this._fileDesignSizes = {}
    },
    registerTypeAndCallBack: function(a, b, c, d) {
        var e = ccs.objectFactory,
        f = new ccs.TInfo(a, b);
        e.registerType(f),
        c && (this._mapObject[a] = c),
        d && (this._mapParseSelector[a] = d)
    },
    getFilePath: function() {
        return this._filePath
    },
    setFilePath: function(a) {
        this._filePath = a
    },
    getParseObjectMap: function() {
        return this._mapObject
    },
    getParseCallBackMap: function() {
        return this._mapParseSelector
    }
},
ccs.WidgetPropertiesReader = ccs.Class.extend({
    _filePath: "",
    createWidget: function(a, b, c) {},
    widgetFromJsonDictionary: function(a) {},
    _createGUI: function(a, b) {
        var c = this._getGUIClassName(b);
        return ccs.objectFactory.createObject(a, c)
    },
    _getGUIClassName: function(a) {
        var b = a;
        return B9l.l1C("Panel", a) ? b = "Layout": B9l.X1C("TextArea", a) ? b = "Text": B9l.s1C("TextButton", a) ? b = "Button": B9l.F1C("Label", a) ? b = "Text": B9l.G1C("LabelAtlas", a) ? b = "TextAtlas": B9l.g1C("LabelBMFont", a) ? b = "TextBMFont": B9l.n1C("Node", a) && (b = "Layout"),
        b
    },
    _getWidgetReaderClassName: function(a) {
        var b = a;
        return B9l.y1C("Panel", b) ? b = "Layout": B9l.N1C("TextArea", b) ? b = "Text": B9l.p1C("TextButton", b) ? b = "Button": B9l.o1C("Label", b) ? b = "Text": B9l.U1C("LabelAtlas", b) ? b = "TextAtlas": B9l.k1C("LabelBMFont", b) && (b = "TextBMFont"),
        b += "Reader"
    },
    _getWidgetReaderClassNameFromWidget: function(a) {
        var b = "";
        return B9l.M1C(a, cifw.UIImageView) ? b = "ImageViewReader": B9l.j1C(a, cifw.UILayout) && (b = "LayoutReader"),
        b
    },
    _createWidgetReaderProtocol: function(a, b) {
        return ccs.objectFactory.createObject(a, b)
    }
}),
ccs.WidgetPropertiesReader0300 = ccs.WidgetPropertiesReader.extend({
    createWidget: function(a, b, c, d, e) {
        this._filePath = B9l.T1C("", c) ? c: cc.path.join(c, "/"),
        this._spriteSheet = e;
        var f = (b.textures, b.designWidth),
        g = b.designHeight;
        B9l.O1C(0, f) || B9l.e1C(0, g) ? ccs.uiReader.storeFileDesignSize(d, new Phaser.Point(a.width, a.height)) : ccs.uiReader.storeFileDesignSize(d, new Phaser.Point(f, g));
        var h = b.widgetTree,
        i = this.widgetFromJsonDictionary(a, h),
        j = b.animation;
        return ccs.actionManager.initWithDictionary(d, j, i, a),
        h = null,
        j = null,
        i.getWidget()
    },
    setPropsForAllWidgetFromJsonDictionary: function(a, b, c) {
        a && a.setPropsFromJsonDictionary && a.setPropsFromJsonDictionary(b, c, this._spriteSheet)
    },
    setPropsForAllCustomWidgetFromJsonDictionary: function(a, b, c) {
        var d = ccs.uiReader,
        e = d.getParseObjectMap(),
        f = e[a],
        g = d.getParseCallBackMap(),
        h = g[a];
        f && h && h.call(f, a, b, c)
    },
    widgetFromJsonDictionary: function(a, b) {
        var c = b.classname,
        d = b.options,
        e = this._createGUI(a, c),
        f = this._getWidgetReaderClassName(c),
        g = this._createWidgetReaderProtocol(a, f);
        if (g) this.setPropsForAllWidgetFromJsonDictionary(g, e, d);
        else if (f = this._getWidgetReaderClassNameFromWidget(e), g = ccs.objectFactory.createObject(a, f), g && e) {
            this.setPropsForAllWidgetFromJsonDictionary(g, e, d);
            var h = d.customProperty,
            i = JSON.parse(h);
            this.setPropsForAllCustomWidgetFromJsonDictionary(c, e, i)
        } else console.log("Widget or WidgetReader doesn't exists!!!  Please check your json file. " + c);
        for (var j = b.children,
        k = 0; B9l.W6C(k, j.length); k++) {
            var l = this.widgetFromJsonDictionary(a, j[k]);
            if (l) {
                if (B9l.q6C(e, cifw.UILayout)) {
                    var m = e.getAnchorPoint(),
                    n = e.getSize(),
                    o = cc.p(l.getPositionX() + B9l.V6C(m.x, n.x), B9l.Y6C(1 - m.y, n.y) + l.getPositionY());
                    B9l.z6C(l, cifw.UILayout) && (o = cc.p(l.getPositionX() + B9l.D6C(m.x, n.x) - B9l.J6C(l.getSize().x, 2), 0)),
                    l.setPosition(o)
                } else {
                    if (B9l.B6C(l.getPositionType(), ccui.Widget.POSITION_PERCENT)) {
                        var p = l.getPositionPercent(),
                        q = e.getAnchorPoint();
                        l.setPositionPercent(cc.p(p.x + q.x, p.y + q.y))
                    }
                    if (e.getAnchorPointInPoints(), B9l.f6C(l, cifw.UITextBMFont));
                    else if (!B9l.u6C(l, cifw.UILoadingBar)) if (B9l.w6C(l, cifw.UILayout)) {
                        var r = l.getAnchorPoint(),
                        s = l.getSize(),
                        t = new Phaser.Point(B9l.I6C(l.getPositionX(), s.x * r.x), -l.getPositionY() - s.y * r.y);
                        l.setPosition(t)
                    } else l.setPosition(cc.p(l.getPositionX(), l.getPositionY()))
                }
                e.addChild(l.getWidget())
            }
        }
        return e
    },
    setPropsForWidgetFromJsonDictionary: function(a, b) {
        var c = b.name,
        d = c ? c: "default";
        a.setName(d),
        void 0 !== b.ignoreSize && a.ignoreContentAdaptWithSize(b.ignoreSize),
        a.setSizeType(b.sizeType),
        a.setPositionType(b.positionType),
        a.setSizePercent(cc.p(b.sizePercentX, b.sizePercentY)),
        a.setPositionPercent(cc.p(b.positionPercentX, b.positionPercentY));
        var e = b.width,
        f = b.height;
        a.setSize(cc.size(e, f)),
        a.setTag(b.tag),
        a.setActionTag(b.actiontag),
        a.setTouchEnabled(b.touchAble);
        var g = b.x,
        h = b.y;
        a.setPosition(cc.p(g, h)),
        void 0 !== b.scaleX && a.setScaleX(b.scaleX),
        void 0 !== b.scaleY && a.setScaleY(b.scaleY),
        void 0 !== b.rotation && a.setRotation(b.rotation),
        void 0 !== b.visible && a.setVisible(b.visible),
        a.setLocalZOrder(b.ZOrder);
        var i = b.layoutParameter;
        if (i) {
            var j, k = i.type;
            switch (k) {
            case 0:
                break;
            case 1:
                j = new ccui.LinearLayoutParameter;
                var l = i.gravity;
                j.setGravity(l);
                break;
            case 2:
                j = new ccui.RelativeLayoutParameter;
                var m = i.relativeName;
                j.setRelativeName(m);
                var n = i.relativeToName;
                j.setRelativeToWidgetName(n),
                j.setAlign(i.align)
            }
            var o = i.marginLeft,
            p = i.marginTop,
            q = i.marginRight,
            r = i.marginDown;
            j.setMargin(new ccui.Margin(o, p, q, r)),
            a.setLayoutParameter(j)
        }
    },
    setColorPropsForWidgetFromJsonDictionary: function(a, b) {
        void 0 !== b.opacity && a.setOpacity(b.opacity);
        var c = void 0 !== b.colorR ? b.colorR: 255,
        d = void 0 !== b.colorG ? b.colorG: 255,
        e = void 0 !== b.colorB ? b.colorB: 255;
        a.setColor(cc.color(c, d, e));
        var f = void 0 !== b.anchorPointX ? b.anchorPointX: B9l.r6C(a.getWidgetType(), ccui.Widget.TYPE_WIDGET) ? .5 : 0,
        g = void 0 !== b.anchorPointY ? b.anchorPointY: B9l.L6C(a.getWidgetType(), ccui.Widget.TYPE_WIDGET) ? .5 : 0;
        a.setAnchorPoint(f, g);
        var h = b.flipX,
        i = b.flipY;
        a.setFlippedX(h),
        a.setFlippedY(i)
    },
    setPropsForButtonFromJsonDictionary: function(a, b) {
        var c = function(a) {
            k = a
        },
        d = function(a) {
            g = a
        };
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var e = a,
        f = b.scale9Enable;
        e.setScale9Enabled(f);
        var g = b.normalData,
        h = g.resourceType;
        switch (h) {
        case 0:
            var i = g.path,
            j = i ? this._filePath + i: null;
            e.loadTextureNormal(j);
            break;
        case 1:
            var i = g.path;
            e.loadTextureNormal(i, ccui.Widget.PLIST_TEXTURE)
        }
        d(null);
        var k = b.pressedData,
        l = k.resourceType;
        switch (l) {
        case 0:
            var m = k.path,
            n = m ? this._filePath + m: null;
            e.loadTexturePressed(n);
            break;
        case 1:
            var m = k.path;
            e.loadTexturePressed(m, ccui.Widget.PLIST_TEXTURE)
        }
        c(null);
        var o = b.disabledData,
        p = o.resourceType;
        switch (p) {
        case 0:
            var q = o.path,
            r = q ? this._filePath + q: null;
            e.loadTextureDisabled(r);
            break;
        case 1:
            var q = o.path;
            e.loadTextureDisabled(q, ccui.Widget.PLIST_TEXTURE)
        }
        if (o = null, f) {
            var s = b.capInsetsX,
            t = b.capInsetsY,
            u = b.capInsetsWidth,
            v = b.capInsetsHeight;
            if (e.setCapInsets(cc.rect(s, t, u, v)), void 0 !== b.scale9Width && void 0 !== b.scale9Height) {
                var w = b.scale9Width,
                x = b.scale9Height;
                e.setSize(cc.size(w, x))
            }
        }
        if (void 0 !== b.text) {
            var y = b.text || "";
            y && e.setTitleText(y)
        }
        void 0 !== b.fontSize && e.setTitleFontSize(b.fontSize),
        void 0 !== b.fontName && e.setTitleFontName(b.fontName);
        var z = void 0 !== b.textColorR ? b.textColorR: 255,
        A = void 0 !== b.textColorG ? b.textColorG: 255,
        B = void 0 !== b.textColorB ? b.textColorB: 255,
        C = cc.color(z, A, B);
        e.setTitleColor(C),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForCheckBoxFromJsonDictionary: function(a, b) {
        var c = function(a) {
            y = a
        },
        d = function(a) {
            u = a
        },
        e = function(a) {
            q = a
        },
        f = function(a) {
            m = a
        },
        g = function(a) {
            i = a
        };
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var h = a,
        i = b.backGroundBoxData,
        j = i.resourceType;
        switch (j) {
        case 0:
            var k = i.path,
            l = k ? this._filePath + k: null;
            h.loadTextureBackGround(l);
            break;
        case 1:
            var k = i.path;
            h.loadTextureBackGround(k, ccui.Widget.PLIST_TEXTURE)
        }
        g(null);
        var m = b.backGroundBoxSelectedData,
        n = m.resourceType;
        switch (n) {
        case 0:
            var o = m.path,
            p = o ? this._filePath + o: null;
            h.loadTextureBackGroundSelected(p);
            break;
        case 1:
            var o = m.path;
            h.loadTextureBackGroundSelected(o, ccui.Widget.PLIST_TEXTURE)
        }
        f(null);
        var q = b.frontCrossData,
        r = q.resourceType;
        switch (r) {
        case 0:
            var s = q.path,
            t = s ? this._filePath + s: null;
            h.loadTextureFrontCross(t);
            break;
        case 1:
            var s = q.path;
            h.loadTextureFrontCross(s, ccui.Widget.PLIST_TEXTURE)
        }
        e(null);
        var u = b.backGroundBoxDisabledData,
        v = u.resourceType;
        switch (v) {
        case 0:
            var w = u.path,
            x = w ? this._filePath + w: null;
            h.loadTextureBackGroundDisabled(x);
            break;
        case 1:
            var w = u.path;
            h.loadTextureBackGroundDisabled(w, ccui.Widget.PLIST_TEXTURE)
        }
        d(null);
        var y = b.frontCrossDisabledData,
        z = y.resourceType;
        switch (z) {
        case 0:
            var A = b.path,
            B = A ? this._filePath + A: null;
            h.loadTextureFrontCrossDisabled(B);
            break;
        case 1:
            var A = b.path;
            h.loadTextureFrontCrossDisabled(A, ccui.Widget.PLIST_TEXTURE)
        }
        c(null);
        var C = b.selectedState || !1;
        a.setSelectedState(C),
        h.setSelectedState(b, "selectedState"),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForImageViewFromJsonDictionary: function(a, b) {
        var c = function(a) {
            e = a
        };
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var d = a,
        e = b.fileNameData,
        f = e.resourceType;
        switch (f) {
        case 0:
            var g = this._filePath,
            h = e.path,
            i = null;
            h && (i = g + h, d.loadTexture(i));
            break;
        case 1:
            var h = e.path;
            d.loadTexture(h, ccui.Widget.PLIST_TEXTURE)
        }
        c(null);
        var j = b.scale9Enable || !1;
        if (d.setScale9Enabled(j), j) {
            if (void 0 !== b.scale9Width && void 0 !== b.scale9Height) {
                var k = b.scale9Width,
                l = b.scale9Height;
                d.setSize(cc.size(k, l))
            }
            var m = b.capInsetsX,
            n = b.capInsetsY,
            o = b.capInsetsWidth,
            p = b.capInsetsHeight;
            d.setCapInsets(cc.rect(m, n, o, p))
        }
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForLabelFromJsonDictionary: function(a, b) {
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var c = a,
        d = b.touchScaleEnable;
        c.setTouchScaleChangeEnabled(d);
        var e = b.text;
        if (c.setString(e), void 0 !== b.fontSize && c.setFontSize(b.fontSize), void 0 !== b.fontName && c.setFontName(b.fontName), void 0 !== b.areaWidth && void 0 !== b.areaHeight) {
            var f = cc.size(b.areaWidth, b.areaHeight);
            c.setTextAreaSize(f)
        }
        b.hAlignment && c.setTextHorizontalAlignment(b.hAlignment),
        b.vAlignment && c.setTextVerticalAlignment(b.vAlignment),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForLabelAtlasFromJsonDictionary: function(a, b) {
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var c = a,
        d = void 0 !== b.stringValue,
        e = void 0 !== b.charMapFile,
        f = void 0 !== b.itemWidth,
        g = void 0 !== b.itemHeight,
        h = void 0 !== b.startCharMap;
        if (d && e && f && g && h) {
            var i = function(a) {
                j = a
            },
            j = b.charMapFileData,
            k = j.resourceType;
            switch (k) {
            case 0:
                var l = j.path,
                m = this._filePath + l;
                c.setProperty(b.stringValue, m, b.itemWidth, b.itemHeight, b.startCharMap);
                break;
            case 1:
                console.log("Wrong res type of LabelAtlas!")
            }
            i(null)
        }
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForLayoutFromJsonDictionary: function(a, b) {
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var c = a;
        B9l.b6C(c, ccui.ScrollView) || B9l.R6C(c, ccui.ListView) || c.setClippingEnabled(b.clipAble);
        var d = b.backGroundScale9Enable;
        c.setBackGroundImageScale9Enabled(d);
        var e = b.bgColorR,
        f = b.bgColorG,
        g = b.bgColorB,
        h = b.bgStartColorR,
        i = b.bgStartColorG,
        j = b.bgStartColorB,
        k = b.bgEndColorR,
        l = b.bgEndColorG,
        m = b.bgEndColorB,
        n = b.vectorX,
        o = b.vectorY;
        c.setBackGroundColorVector(cc.p(n, o));
        var p = b.bgColorOpacity,
        q = b.colorType;
        c.setBackGroundColorType(q),
        c.setBackGroundColor(cc.color(h, i, j), cc.color(k, l, m)),
        c.setBackGroundColor(cc.color(e, f, g)),
        c.setBackGroundColorOpacity(p);
        var r = b.backGroundImageData || {},
        s = r.resourceType;
        switch (s) {
        case 0:
            var t = r.path,
            u = t ? this._filePath + t: null;
            c.setBackGroundImage(u);
            break;
        case 1:
            var t = r.path;
            c.setBackGroundImage(t, ccui.Widget.PLIST_TEXTURE)
        }
        if (r = null, d) {
            var v = b.capInsetsX,
            w = b.capInsetsY,
            x = b.capInsetsWidth,
            y = b.capInsetsHeight;
            c.setBackGroundImageCapInsets(cc.rect(v, w, x, y))
        }
        c.setLayoutType(b.layoutType),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForScrollViewFromJsonDictionary: function(a, b) {
        this.setPropsForLayoutFromJsonDictionary(a, b);
        var c = a,
        d = b.innerWidth,
        e = b.innerHeight;
        c.setInnerContainerSize(cc.size(d, e));
        var f = b.direction;
        c.setDirection(f),
        c.setBounceEnabled(b.bounceEnable),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForSliderFromJsonDictionary: function(a, b) {
        var c = function(a) {
            w = a
        },
        d = function(a) {
            s = a
        },
        e = function(a) {
            o = a
        };
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var f = a,
        g = b.barTextureScale9Enable || !1;
        f.setScale9Enabled(g);
        var h = b.length,
        i = void 0 !== b.barFileName;
        if (i) if (g) {
            var j = b.barFileNameData,
            k = j.resourceType;
            switch (k) {
            case 0:
                var l = j.path,
                m = l ? this._filePath + l: null;
                f.loadBarTexture(m);
                break;
            case 1:
                var l = j.path;
                f.loadBarTexture(l, ccui.Widget.PLIST_TEXTURE)
            }
            f.setSize(cc.size(h, f.getContentSize().height)),
            j = null
        } else {
            var n = function(a) {
                j = a
            },
            j = b.barFileNameData,
            k = j.resourceType;
            switch (k) {
            case 0:
                var l = j.path,
                m = l ? this._filePath + l: null;
                f.loadBarTexture(m);
                break;
            case 1:
                var l = j.path;
                f.loadBarTexture(l, ccui.Widget.PLIST_TEXTURE)
            }
            n(null)
        }
        var o = b.ballNormalData,
        p = o.resourceType;
        switch (p) {
        case 0:
            var q = o.path,
            r = q ? this._filePath + q: null;
            f.loadSlidBallTextureNormal(r);
            break;
        case 1:
            var q = o.path;
            f.loadSlidBallTextureNormal(q, ccui.Widget.PLIST_TEXTURE)
        }
        e(null);
        var s = b.ballPressedData,
        t = s.resourceType;
        switch (t) {
        case 0:
            var u = s.path,
            v = u ? this._filePath + u: null;
            f.loadSlidBallTexturePressed(v);
            break;
        case 1:
            var u = s.path;
            f.loadSlidBallTexturePressed(u, ccui.Widget.PLIST_TEXTURE)
        }
        d(null);
        var w = b.ballDisabledData,
        x = w.resourceType;
        switch (x) {
        case 0:
            var y = w.path,
            z = y ? this._filePath + y: null;
            f.loadSlidBallTextureDisabled(z);
            break;
        case 1:
            var y = w.path;
            f.loadSlidBallTextureDisabled(y, ccui.Widget.PLIST_TEXTURE)
        }
        c(null);
        var A = b.progressBarData,
        B = A.resourceType;
        switch (B) {
        case 0:
            var l = A.path,
            m = l ? this._filePath + l: null;
            f.loadProgressBarTexture(m);
            break;
        case 1:
            var l = A.path;
            f.loadProgressBarTexture(l, ccui.Widget.PLIST_TEXTURE)
        }
        this.setColorPropsForWidgetFromJsonDictionary(a, b),
        f.setPercent(b.percent)
    },
    setPropsForTextAreaFromJsonDictionary: function(a, b) {
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var c = a;
        c.setString(b.text),
        void 0 !== b.fontSize && c.setFontSize(b.fontSize);
        var d = b.colorR,
        e = b.colorG,
        f = b.colorB;
        if (c.setColor(cc.color(B9l.S6C(null, d) ? 255 : d, B9l.c0C(null, e) ? 255 : e, B9l.P0C(null, f) ? 255 : f)), c.setFontName(b.fontName), void 0 !== b.areaWidth && void 0 !== b.areaHeight) {
            var g = cc.size(b.areaWidth, b.areaHeight);
            c.setTextAreaSize(g)
        }
        b.hAlignment && c.setTextHorizontalAlignment(b.hAlignment),
        b.vAlignment && c.setTextVerticalAlignment(b.vAlignment),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForTextButtonFromJsonDictionary: function(a, b) {
        this.setPropsForButtonFromJsonDictionary(a, b);
        var c = a;
        c.setTitleText(b.text || "");
        var d = void 0 !== b.textColorR ? b.textColorR: 255,
        e = void 0 !== b.textColorG ? b.textColorG: 255,
        f = void 0 !== b.textColorB ? b.textColorB: 255;
        c.setTitleColor(cc.color(d, e, f)),
        void 0 !== b.fontSize && c.setTitleFontSize(b.fontSize),
        void 0 !== b.fontName && c.setTitleFontName(b.fontName),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForTextFieldFromJsonDictionary: function(a, b) {
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var c = a;
        void 0 !== b.placeHolder && c.setPlaceHolder(b.placeHolder),
        c.setString(b.text),
        void 0 !== b.fontSize && c.setFontSize(b.fontSize),
        void 0 !== b.fontName && c.setFontName(b.fontName),
        void 0 !== b.touchSizeWidth && void 0 !== b.touchSizeHeight && c.setTouchSize(cc.size(b.touchSizeWidth, b.touchSizeHeight));
        var d = (b.width, b.height, b.maxLengthEnable);
        if (c.setMaxLengthEnabled(d), d) {
            var e = b.maxLength;
            c.setMaxLength(e)
        }
        var f = b.passwordEnable;
        c.setPasswordEnabled(f),
        f && c.setPasswordStyleText(b.passwordStyleText),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForLoadingBarFromJsonDictionary: function(a, b) {
        var c = function(a) {
            e = a
        };
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var d = a,
        e = b.textureData,
        f = e.resourceType;
        switch (f) {
        case 0:
            var g = this._filePath,
            h = e.path,
            i = null;
            h && (i = g + h, d.loadTexture(i));
            break;
        case 1:
            var h = e.path;
            d.loadTexture(h, ccui.Widget.PLIST_TEXTURE)
        }
        c(null);
        var j = b.scale9Enable;
        if (d.setScale9Enabled(j), j) {
            var k = b.capInsetsX,
            l = b.capInsetsY,
            m = b.capInsetsWidth,
            n = b.capInsetsHeight;
            d.setCapInsets(cc.rect(k, l, m, n));
            var o = b.width,
            p = b.height;
            d.setSize(cc.size(o, p))
        }
        d.setDirection(b.direction),
        d.setPercent(b.percent),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    setPropsForListViewFromJsonDictionary: function(a, b) {
        this.setPropsForLayoutFromJsonDictionary(a, b);
        var c = b.innerWidth || 0,
        d = b.innerHeight || 0;
        a.setInnerContainerSize(cc.size(c, d)),
        a.setDirection(b.direction || 0),
        a.setGravity(b.gravity || 0),
        a.setItemsMargin(b.itemMargin || 0)
    },
    setPropsForPageViewFromJsonDictionary: function(a, b) {
        this.setPropsForLayoutFromJsonDictionary(a, b)
    },
    setPropsForLabelBMFontFromJsonDictionary: function(a, b) {
        var c = function(a) {
            e = a
        };
        this.setPropsForWidgetFromJsonDictionary(a, b);
        var d = a,
        e = b.fileNameData,
        f = e.resourceType;
        switch (f) {
        case 0:
            var g = e.path,
            h = this._filePath + g;
            d.setFntFile(h);
            break;
        case 1:
            console.log("Wrong res type of LabelAtlas!")
        }
        c(null);
        var i = b.text;
        d.setString(i),
        this.setColorPropsForWidgetFromJsonDictionary(a, b)
    },
    widgetFromProtocolBuffers: function(a) {
        var b = a.classname,
        c = this._createGUI(game, b),
        d = this._getWidgetReaderClassName(b),
        e = this._createWidgetReaderProtocol(d);
        if (e) this.setPropsForAllWidgetFromProtocolBuffers(e, c, a);
        else if (d = this._getWidgetReaderClassNameFromWidget(c), e = this._createWidgetReaderProtocol(d), e && c) {
            this.setPropsForAllWidgetFromProtocolBuffers(e, c, a);
            var f = a.widgetOptions,
            g = f.componentOptions;
            this.setPropsForAllCustomWidgetFromJsonDictionary(b, c, g)
        } else console.log("Widget or WidgetReader doesn't exists!!!  Please check your json file.");
        for (var h = a.children.length,
        i = 0; B9l.Z0C(h, i); ++i) {
            var j = a.children[i],
            k = this.widgetFromProtocolBuffers(j);
            if (k) {
                var l = c;
                if (B9l.i0C(l, ccui.PageView)) l.addPage(k);
                else {
                    var m = c;
                    B9l.K0C(m, ccui.ListView) ? m.pushBackCustomItem(k) : c.addChild(k)
                }
            }
        }
        return c
    },
    setPropsForAllWidgetFromProtocolBuffers: function(a, b, c) {
        a.setPropsFromProtocolBuffers(b, c)
    },
    widgetFromXML: function(a, b) {
        var c = b.substr(0, b.find("ObjectData")),
        d = this.createGUI(c),
        e = this.getWidgetReaderClassName(c),
        f = this.createWidgetReaderProtocol(e);
        if (f) this.setPropsForAllWidgetFromXML(f, d, a);
        else if (e = this.getWidgetReaderClassName(d), f = this.createWidgetReaderProtocol(e), f && d) {
            this.setPropsForAllWidgetFromXML(f, d, a);
            var g, h = "";
            g.Parse(h),
            g.HasParseError() && console.log("GetParseError %s\n", g.GetParseError()),
            this.setPropsForAllCustomWidgetFromJsonDictionary(c, d, g)
        } else console.log("Widget or WidgetReader doesn't exists!!!  Please check your json file.");
        var i = !1;
        for (a = a.FirstChildElement(); a;) {
            if (B9l.m0C("Children", a.Name())) {
                var j = function() {
                    i = !0
                };
                j();
                break
            }
            a = a.NextSiblingElement()
        }
        if (i) for (a = a.FirstChildElement(); a;) {
            for (var k = a.FirstAttribute(); k;) {
                var l = k.Name(),
                m = k.Value();
                if (B9l.Q0C("ctype", l)) {
                    var n = this.widgetFromXML(a, m);
                    if (n) {
                        var o = d,
                        p = d;
                        if (B9l.x0C(o, ccui.PageView)) {
                            var q = n;
                            B9l.v0C(q, ccui.Layout) && o.addPage(q)
                        } else if (p) {
                            var r = n;
                            B9l.A0C(r, ccui.Widget) && p.pushBackCustomItem(r)
                        } else d.addChild(n)
                    }
                    break
                }
                k = k.Next()
            }
            a = a.NextSiblingElement()
        }
        return d
    },
    setPropsForAllWidgetFromXML: function(a, b, c) {
        a.setPropsFromXML(b, c)
    }
}),
ccs.actionManager = {
    _actionDic: {},
    initWithDictionary: function(a, b, c, d) {
        for (var e = a,
        f = e.lastIndexOf("/"), g = e.substr(f + 1, e.length), h = b.actionlist, i = [], j = 0; B9l.d0C(j, h.length); j++) {
            var k = new ccs.ActionObject,
            l = h[j];
            k.initWithDictionary(l, c, d),
            i.push(k)
        }
        this._actionDic[g] = i
    },
    getActionByName: function(a, b) {
        var c = this._actionDic[a];
        if (!c) return null;
        for (var d = 0; B9l.t0C(d, c.length); d++) {
            var e = c[d];
            if (B9l.C0C(b, e.getName())) return e
        }
        return null
    },
    playActionByName: function(a, b, c, d) {
        this._stopAnyRunningAction(a);
        var e = this.getActionByName(a, b);
        e ? e.play(c, d) : console.log("Action:" + b + " does'nt exist")
    },
    stopActionByName: function(a, b) {
        var c = this.getActionByName(a, b);
        c && c.stop()
    },
    _stopAnyRunningAction: function(a) {
        var b = this._actionDic[a];
        if (!b) return null;
        for (var c = 0; B9l.a0C(c, b.length); c++) {
            var d = b[c];
            d.isPlaying() && d.stop()
        }
        return null
    },
    releaseActions: function() {
        this._actionDic = {}
    },
    clear: function() {
        this._actionDic = {}
    }
},
ccs.ActionObject = ccs.Class.extend({
    _actionNodeList: null,
    _name: "",
    _loop: !1,
    _pause: !1,
    _playing: !1,
    _unitTime: 0,
    _currentTime: 0,
    _scheduler: null,
    _callback: null,
    _callbackContext: null,
    _fTotalTime: 0,
    ctor: function() {
        this._actionNodeList = [],
        this._name = "",
        this._loop = !1,
        this._pause = !1,
        this._playing = !1,
        this._unitTime = .1,
        this._currentTime = 0,
        this._fTotalTime = 0
    },
    setName: function(a) {
        this._name = a
    },
    getName: function() {
        return this._name
    },
    setLoop: function(a) {
        this._loop = a
    },
    getLoop: function() {
        return this._loop
    },
    setUnitTime: function(a) {
        this._unitTime = a;
        for (var b = this._actionNodeList.length,
        c = 0; B9l.h0C(b, c); c++) {
            var d = this._actionNodeList[c];
            d.setUnitTime(this._unitTime)
        }
    },
    getUnitTime: function() {
        return this._unitTime
    },
    getCurrentTime: function() {
        return this._currentTime
    },
    setCurrentTime: function(a) {
        this._currentTime = a
    },
    getTotalTime: function() {
        return this._fTotalTime
    },
    isPlaying: function() {
        return this._playing
    },
    initWithDictionary: function(a, b, c) {
        this.setName(a.name),
        this.setLoop(a.loop),
        this.setUnitTime(a.unittime);
        for (var d = a.actionnodelist,
        e = 0,
        f = 0; B9l.H0C(f, d.length); f++) {
            var g = new ccs.ActionNode,
            h = d[f];
            g.initWithDictionary(h, b, c),
            g.setUnitTime(this.getUnitTime()),
            this._actionNodeList.push(g);
            var i = B9l.E0C(g.getLastFrameIndex(), g.getFirstFrameIndex());
            B9l.l5C(i, e) && (e = i)
        }
        this._fTotalTime = B9l.X5C(e, this._unitTime)
    },
    addActionNode: function(a) {
        a && (this._actionNodeList.push(a), a.setUnitTime(this._unitTime))
    },
    removeActionNode: function(a) {
        B9l.s5C(null, a) && cc.arrayRemoveObject(this._actionNodeList, a)
    },
    play: function(a, b) {
        this.stop(),
        this.updateToFrameByTime(0);
        for (var c = this._actionNodeList,
        d = c.length,
        e = 0; B9l.F5C(d, e); e++) c[e].playAction(a, b);
        this._loop,
        void 0 !== a && (this._callback = a, this._callbackContext = b),
        this._playing = !0
    },
    pause: function() {
        this._pause = !0,
        this._playing = !1
    },
    stop: function() {
        for (var a = this._actionNodeList,
        b = 0; B9l.G5C(b, a.length); b++) a[b].stopAction();
        this._pause = !1,
        this._playing = !1
    },
    updateToFrameByTime: function(a) {
        this._currentTime = a;
        for (var b = 0; B9l.g5C(b, this._actionNodeList.length); b++) {
            var c = this._actionNodeList[b];
            c.updateActionToTimeLine(a)
        }
    },
    simulationActionUpdate: function(a) {}
}),
ccs.ActionNode = ccs.Class.extend({
    _currentFrameIndex: 0,
    _destFrameIndex: 0,
    _unitTime: 0,
    _actionTag: 0,
    _object: null,
    _actionSpawn: null,
    _action: null,
    _frameArray: null,
    _frameArrayNum: 0,
    ctor: function() {
        this._currentFrameIndex = 0,
        this._destFrameIndex = 0,
        this._unitTime = .1,
        this._actionTag = 0,
        this._object = null,
        this._actionSpawn = null,
        this._action = null,
        this._frameArray = [],
        this._frameArrayNum = ccs.FRAME_TYPE_MAX;
        for (var a = 0; B9l.n5C(a, this._frameArrayNum); a++) this._frameArray.push([])
    },
    initWithDictionary: function(a, b, c) {
        this.game = c,
        this.setActionTag(a.ActionTag);
        for (var d = a.actionframelist,
        e = 0; B9l.y5C(e, d.length); e++) {
            var f = function(a) {
                g = a
            },
            g = d[e],
            h = g.frameid,
            i = g.tweenType;
            B9l.N5C(null, i) && (i = 0);
            for (var j = g.tweenParameter,
            k = [], l = 0; B9l.p5C(j, l); l++) {
                var m = g.tweenParameter[l];
                k.push(m)
            }
            var n, o;
            if (void 0 !== g.positionx) {
                var p = g.positionx,
                q = g.positiony;
                n = new ccs.ActionMoveFrame(c),
                n.frameIndex = h,
                n.setEasingType(i),
                n.setEasingParameter(k),
                n.setPosition(p, q),
                o = this._frameArray[ccs.FRAME_TYPE_MOVE],
                o.push(n)
            }
            if (void 0 !== g.scalex) {
                var r = g.scalex,
                s = g.scaley;
                n = new ccs.ActionScaleFrame(c),
                n.frameIndex = h,
                n.setEasingType(i),
                n.setEasingParameter(k),
                n.setScaleX(r),
                n.setScaleY(s),
                o = this._frameArray[ccs.FRAME_TYPE_SCALE],
                o.push(n)
            }
            if (void 0 !== g.rotation) {
                var t = g.rotation;
                n = new ccs.ActionRotationFrame(c),
                n.frameIndex = h,
                n.setEasingType(i),
                n.setEasingParameter(k),
                n.setRotation(t),
                o = this._frameArray[ccs.FRAME_TYPE_ROTATE],
                o.push(n)
            }
            if (void 0 !== g.opacity) {
                var u = g.opacity;
                n = new ccs.ActionFadeFrame(c),
                n.frameIndex = h,
                n.setEasingType(0),
                n.setEasingParameter(k),
                n.setOpacity(u),
                o = this._frameArray[ccs.FRAME_TYPE_FADE],
                o.push(n)
            }
            if (void 0 !== g.colorr) {
                var v = g.colorr,
                w = g.colorg,
                x = g.colorb;
                n = new ccs.ActionTintFrame(c),
                n.frameIndex = h,
                n.setEasingType(i),
                n.setEasingParameter(k),
                n.setColor(cc.color(v, w, x)),
                o = this._frameArray[ccs.FRAME_TYPE_TINT],
                o.push(n)
            }
            f(null)
        }
        this._initActionNodeFromRoot(b)
    },
    _initActionNodeFromRoot: function(a) {
        if (a) {
            var b = ccui.helper.seekActionWidgetByActionTag(a, this.getActionTag());
            b && this.setObject(b)
        }
    },
    setUnitTime: function(a) {
        this._unitTime = a,
        this._refreshActionProperty()
    },
    getUnitTime: function() {
        return this._unitTime
    },
    setActionTag: function(a) {
        this._actionTag = a
    },
    getActionTag: function() {
        return this._actionTag
    },
    setObject: function(a) {
        this._object = a
    },
    getObject: function() {
        return this._object
    },
    getActionNode: function() {
        return B9l.o5C(this._object, cifw.UIWidget) ? this._object.getWidget() : null
    },
    insertFrame: function(a, b) {
        if (B9l.U5C(null, b)) {
            var c = b.frameType,
            d = this._frameArray[c];
            d.splice(a, 0, b)
        }
    },
    addFrame: function(a) {
        if (a) {
            var b = a.frameType,
            c = this._frameArray[b];
            c.push(a)
        }
    },
    deleteFrame: function(a) {
        if (B9l.k5C(null, a)) {
            var b = a.frameType;
            this._frameArray[b]
        }
    },
    clearAllFrame: function() {
        for (var a = 0; B9l.M5C(a, this._frameArrayNum); a++) this._frameArray[a].length = 0
    },
    _refreshActionProperty: function() {
        if (B9l.j5C(null, this._object)) return null;
        for (var a = [], b = 0; B9l.T5C(b, this._frameArrayNum); b++) {
            var c = this._frameArray[b];
            if (!B9l.O5C(c.length, 0)) {
                for (var d = [], e = 0; B9l.e5C(e, c.length); e++) {
                    var f = c[e];
                    if (B9l.W3C(0, e)) {
                        var g = c[B9l.q3C(e, 1)],
                        h = B9l.V3C(f.frameIndex - g.frameIndex, this.getUnitTime()),
                        i = f.getAction(h, this.getActionNode());
                        i && d.push(i)
                    }
                }
                if (d && B9l.Y3C(d.length, 0)) {
                    var j = null;
                    if (B9l.z3C(d.length, 1)) for (var k = 1; B9l.D3C(k, d.length); k++) j = d[B9l.J3C(k, 1)].chain(d[k]);
                    j = d[0],
                    B9l.B3C(null, j) && a.push(j)
                }
            }
        }
        return this._action = null,
        this._actionSpawn = null,
        this._actionSpawn = a,
        this._actionSpawn
    },
    playAction: function(a, b) {
        if (B9l.f3C(null, this._object) && B9l.u3C(null, this._actionSpawn)) {
            for (var c = 0; B9l.w3C(c, this._actionSpawn.length); c++) this._actionSpawn[c].start();
            a && B9l.I3C(this._actionSpawn.length, 0) && a.call(b, this.getActionNode(), null),
            B9l.r3C(this._actionSpawn.length, 0) && this.addCallback(this._actionSpawn[0], a, b)
        }
    },
    addCallback: function(a, b, c) {
        B9l.L3C(null, a.chainedTween) ? this.addCallback(a.chainedTween, b, c) : (a.onComplete.dispose(), b && a.onComplete.add(b, c))
    },
    stopAction: function() {
        var a = this.getActionNode();
        if (B9l.b3C(null, a) && B9l.R3C(null, this._actionSpawn)) for (var b = 0; B9l.S3C(b, this._actionSpawn.length); b++) this._stopChainedTween(this._actionSpawn[b])
    },
    _stopChainedTween: function(a) {
        a.chainedTween && this._stopChainedTween(a.chainedTween),
        a.isRunning && a.stop()
    },
    getFirstFrameIndex: function() {
        for (var a = 99999,
        b = !1,
        c = this._frameArray,
        d = 0,
        e = this._frameArrayNum; B9l.c9C(e, d); d++) {
            var f = c[d];
            if (!B9l.P9C(f.length, 0)) {
                var g = function() {
                    a = B9l.Z9C(a, i) ? i: a
                },
                h = function() {
                    b = !0
                };
                h();
                var i = f[0].frameIndex;
                g()
            }
        }
        return b || (a = 0),
        a
    },
    getLastFrameIndex: function() {
        for (var a = -1,
        b = !1,
        c = this._frameArray,
        d = 0,
        e = this._frameArrayNum; B9l.i9C(e, d); d++) {
            var f = c[d];
            if (!B9l.K9C(f.length, 0)) {
                var g = function() {
                    a = B9l.m9C(j, a) ? j: a
                },
                h = function() {
                    b = !0
                };
                h();
                var i = f[B9l.Q9C(f.length, 1)],
                j = i.frameIndex;
                g()
            }
        }
        return b || (a = 0),
        a
    },
    updateActionToTimeLine: function(a) {
        for (var b = !1,
        c = this.getUnitTime(), d = 0; B9l.x9C(d, this._frameArrayNum); d++) {
            var e = this._frameArray[d];
            if (B9l.v9C(null, e)) for (var f = 0; B9l.A9C(f, e.length); f++) {
                var g = e[f];
                if (B9l.d9C(g.frameIndex * c, a)) {
                    this._easingToFrame(.001, 1, g),
                    b = !0;
                    break
                }
                if (B9l.t9C(g.frameIndex * c, a)) {
                    if (B9l.C9C(0, f)) this._easingToFrame(.001, 1, g),
                    b = !1;
                    else {
                        var h = e[B9l.a9C(f, 1)],
                        i = B9l.h9C(g.frameIndex - h.frameIndex, c),
                        j = B9l.H9C(a, h.frameIndex * c);
                        this._easingToFrame(i, 1, h),
                        this._easingToFrame(i, B9l.E9C(j, i), g),
                        b = !0
                    }
                    break
                }
            }
        }
        return b
    },
    _easingToFrame: function(a, b, c) {
        var d = c.getAction(1e-4, this.getActionNode()),
        e = this.getActionNode();
        B9l.l8C(null, d) && B9l.X8C(null, e) && d.start()
    },
    isActionDoneOnce: function() {
        return B9l.s8C(null, this._action) ? !0 : this._action.isDone()
    }
}),
ccs.FRAME_TYPE_MOVE = 0,
ccs.FRAME_TYPE_SCALE = 1,
ccs.FRAME_TYPE_ROTATE = 2,
ccs.FRAME_TYPE_TINT = 3,
ccs.FRAME_TYPE_FADE = 4,
ccs.FRAME_TYPE_MAX = 5,
ccs.FrameEaseType = {
    Custom: -1,
    Linear: 0,
    Sine_EaseIn: 1,
    Sine_EaseOut: 2,
    Sine_EaseInOut: 3,
    Quad_EaseIn: 4,
    Quad_EaseOut: 5,
    Quad_EaseInOut: 6,
    Cubic_EaseIn: 7,
    Cubic_EaseOut: 8,
    Cubic_EaseInOut: 9,
    Quart_EaseIn: 10,
    Quart_EaseOut: 11,
    Quart_EaseInOut: 12,
    Quint_EaseIn: 13,
    Quint_EaseOut: 14,
    Quint_EaseInOut: 15,
    Expo_EaseIn: 16,
    Expo_EaseOut: 17,
    Expo_EaseInOut: 18,
    Circ_EaseIn: 19,
    Circ_EaseOut: 20,
    Circ_EaseInOut: 21,
    Elastic_EaesIn: 22,
    Elastic_EaesOut: 23,
    Elastic_EaesInOut: 24,
    Back_EaseIn: 25,
    Back_EaseOut: 26,
    Back_EaseInOut: 27,
    Bounce_EaseIn: 28,
    Bounce_EaseOut: 29,
    Bounce_EaseInOut: 30
},
ccs.ActionFrame = ccs.Class.extend({
    frameType: 0,
    easingType: 0,
    frameIndex: 0,
    _Parameter: null,
    time: 0,
    ctor: function(a) {
        this.frameType = 0,
        this.easingType = ccs.FrameEaseType.Linear,
        this.frameIndex = 0,
        this.time = 0,
        this.game = a
    },
    getAction: function(a, b) {
        return cc.log("Need a definition of <getAction> for ActionFrame"),
        null
    },
    _getEasingAction: function(a) {
        var b = function(a) {
            c = a
        };
        if (B9l.F8C(null, a)) return console.error("Action cannot be null!"),
        null;
        var c;
        switch (this.easingType) {
        case ccs.FrameEaseType.Custom:
            break;
        case ccs.FrameEaseType.Linear:
            b(a);
            break;
        case ccs.FrameEaseType.Sine_EaseIn:
            c = a.easing(Phaser.Easing.Sinusoidal.In);
            break;
        case ccs.FrameEaseType.Sine_EaseOut:
            c = a.easing(Phaser.Easing.Sinusoidal.Out);
            break;
        case ccs.FrameEaseType.Sine_EaseInOut:
            c = a.easing(Phaser.Easing.Sinusoidal.InOut);
            break;
        case ccs.FrameEaseType.Quad_EaseIn:
            c = a.easing(Phaser.Easing.Quadratic.In);
            break;
        case ccs.FrameEaseType.Quad_EaseOut:
            c = a.easing(Phaser.Easing.Quadratic.Out);
            break;
        case ccs.FrameEaseType.Quad_EaseInOut:
            c = a.easing(Phaser.Easing.Quadratic.InOut);
            break;
        case ccs.FrameEaseType.Cubic_EaseIn:
            c = a.easing(Phaser.Easing.Cubic.In);
            break;
        case ccs.FrameEaseType.Cubic_EaseOut:
            c = a.easing(Phaser.Easing.Cubic.Out);
            break;
        case ccs.FrameEaseType.Cubic_EaseInOut:
            c = a.easing(Phaser.Easing.Cubic.InOut);
            break;
        case ccs.FrameEaseType.Quart_EaseIn:
            c = a.easing(Phaser.Easing.Quartic.In);
            break;
        case ccs.FrameEaseType.Quart_EaseOut:
            c = a.easing(Phaser.Easing.Quartic.Out);
            break;
        case ccs.FrameEaseType.Quart_EaseInOut:
            c = a.easing(Phaser.Easing.Quartic.InOut);
            break;
        case ccs.FrameEaseType.Quint_EaseIn:
            c = a.easing(Phaser.Easing.Quintic.In);
            break;
        case ccs.FrameEaseType.Quint_EaseOut:
            c = a.easing(Phaser.Easing.Quintic.Out);
            break;
        case ccs.FrameEaseType.Quint_EaseInOut:
            c = a.easing(Phaser.Easing.Quintic.InOut);
            break;
        case ccs.FrameEaseType.Expo_EaseIn:
            c = a.easing(Phaser.Easing.Exponential.In);
            break;
        case ccs.FrameEaseType.Expo_EaseOut:
            c = a.easing(Phaser.Easing.Exponential.Out);
            break;
        case ccs.FrameEaseType.Expo_EaseInOut:
            c = a.easing(Phaser.Easing.Exponential.InOut);
            break;
        case ccs.FrameEaseType.Circ_EaseIn:
            c = a.easing(Phaser.Easing.Circular.In);
            break;
        case ccs.FrameEaseType.Circ_EaseOut:
            c = a.easing(Phaser.Easing.Circular.Out);
            break;
        case ccs.FrameEaseType.Circ_EaseInOut:
            c = a.easing(Phaser.Easing.Circular.InOut);
            break;
        case ccs.FrameEaseType.Elastic_EaesIn:
            c = a.easing(Phaser.Easing.Elastic.In);
            break;
        case ccs.FrameEaseType.Elastic_EaesOut:
            c = a.easing(Phaser.Easing.Elastic.Out);
            break;
        case ccs.FrameEaseType.Elastic_EaesInOut:
            c = a.easing(Phaser.Easing.Elastic.InOut);
            break;
        case ccs.FrameEaseType.Back_EaseIn:
            c = a.easing(Phaser.Easing.Back.In);
            break;
        case ccs.FrameEaseType.Back_EaseOut:
            c = a.easing(Phaser.Easing.Back.Out);
            break;
        case ccs.FrameEaseType.Back_EaseInOut:
            c = a.easing(Phaser.Easing.Back.InOut);
            break;
        case ccs.FrameEaseType.Bounce_EaseIn:
            c = a.easing(Phaser.Easing.Bounce.In);
            break;
        case ccs.FrameEaseType.Bounce_EaseOut:
            c = a.easing(Phaser.Easing.Bounce.Out);
            break;
        case ccs.FrameEaseType.Bounce_EaseInOut:
            c = a.easing(Phaser.Easing.Bounce.InOut)
        }
        return c
    },
    setEasingParameter: function(a) {
        this._Parameter = [];
        for (var b = 0; B9l.G8C(b, a.length); b++) this._Parameter.push(a[b])
    },
    setEasingType: function(a) {
        this.easingType = a
    }
}),
ccs.ActionMoveFrame = ccs.ActionFrame.extend({
    _position: null,
    ctor: function(a) {
        ccs.ActionFrame.prototype.ctor.call(this, a),
        this._position = cc.p(0, 0),
        this.frameType = ccs.FRAME_TYPE_MOVE
    },
    setPosition: function(a, b) {
        void 0 === b ? (this._position.x = a.x, this._position.y = a.y) : (this._position.x = a, this._position.y = b)
    },
    getPosition: function() {
        return this._position
    },
    getAction: function(a, b) {
        var c = function() {
            a = B9l.g8C(1e3, a)
        };
        c();
        var d = null;
        if (B9l.n8C(b.parent.__uiParent, cifw.UILayout)) {
            var e = b.parent.__uiParent.getAnchorPoint(),
            f = b.parent.__uiParent.getSize();
            if (B9l.y8C(b.__uiParent, cifw.UILayout)) {
                var g = b.__uiParent.getSize();
                d = new Phaser.Point(this._position.x + B9l.N8C(e.x, f.x) - B9l.p8C(b.__uiParent.getSize().x, 1 - b.__uiParent.getAnchorPoint().x), B9l.o8C((1 - e.y) * f.y, this._position.y, g.y * (1 - b.__uiParent.getAnchorPoint().y)))
            } else d = new Phaser.Point(this._position.x, B9l.t8C(b.parent.__uiParent.getSize().y, this._position.y))
        } else if (d = new Phaser.Point(this._position.x, -this._position.y), B9l.C8C(b.__uiParent, cifw.UITextBMFont) && console.log("Warning: UITextBMFont does not support Animation"), B9l.a8C(b.__uiParent, cifw.UILayout)) {
            var h = b.__uiParent.getAnchorPoint(),
            i = b.__uiParent.getSize();
            d = new Phaser.Point(B9l.h8C(this._position.x, i.x * h.x), -this._position.y - i.y * h.y)
        }
        return this._getEasingAction(this.game.add.tween(b).to({
            x: d.x,
            y: d.y
        },
        a))
    }
}),
ccs.ActionScaleFrame = ccs.ActionFrame.extend({
    _scaleX: 1,
    _scaleY: 1,
    ctor: function(a) {
        ccs.ActionFrame.prototype.ctor.call(this, a),
        this._scaleX = 1,
        this._scaleY = 1,
        this.frameType = ccs.FRAME_TYPE_SCALE
    },
    setScaleX: function(a) {
        this._scaleX = a
    },
    getScaleX: function() {
        return this._scaleX
    },
    setScaleY: function(a) {
        this._scaleY = a
    },
    getScaleY: function() {
        return this._scaleY
    },
    getAction: function(a, b) {
        return a = B9l.H8C(1e3, a),
        this._getEasingAction(this.game.add.tween(b.scale).to({
            x: this._scaleX,
            y: this._scaleY
        },
        a))
    }
}),
ccs.ActionRotationFrame = ccs.ActionFrame.extend({
    _rotation: 0,
    ctor: function(a) {
        ccs.ActionFrame.prototype.ctor.call(this, a),
        this._rotation = 0,
        this.frameType = ccs.FRAME_TYPE_ROTATE
    },
    setRotation: function(a) {
        this._rotation = a
    },
    getRotation: function() {
        return this._rotation
    },
    getAction: function(a, b) {
        return a = B9l.E8C(1e3, a),
        this._getEasingAction(this.game.add.tween(b).to({
            angle: this._rotation
        },
        a))
    }
}),
ccs.ActionFadeFrame = ccs.ActionFrame.extend({
    _opacity: 255,
    ctor: function(a) {
        ccs.ActionFrame.prototype.ctor.call(this, a),
        this._opacity = 255,
        this.frameType = ccs.FRAME_TYPE_FADE
    },
    setOpacity: function(a) {
        this._opacity = a
    },
    getOpacity: function() {
        return this._opacity
    },
    getAction: function(a, b) {
        return a = B9l.l2C(1e3, a),
        this._getEasingAction(this.game.add.tween(b).to({
            alpha: B9l.X2C(this._opacity, 255)
        },
        a))
    }
}),
ccs.ActionTintFrame = ccs.ActionFrame.extend({
    _color: null,
    ctor: function(a) {
        ccs.ActionFrame.prototype.ctor.call(this, a),
        this._color = cc.color(255, 255, 255, 255),
        this.frameType = ccs.FRAME_TYPE_TINT
    },
    setColor: function(a) {
        var b = this._color;
        b.r = a.r,
        b.g = a.g,
        b.b = a.b
    },
    getColor: function() {
        var a = this._color;
        return cc.color(a.r, a.g, a.b, a.a)
    },
    getAction: function(a) {}
}),
cifw.config = cifw.config || {},
cifw.config.DEBUG_DRAW = !1,
cifw.config.language = "en",
cifw.screen.DESIGN_WIDTH = 640,
cifw.screen.DESIGN_HEIGHT = 960,
cifw.screen.BACKGROUND_WIDTH = 640,
cifw.screen.BACKGROUND_HEIGHT = 960,
cifw.screen.DESIGN_ORIENTATION = cifw.screen.ORIENTATION.PORTRAIT,
cifw.screen.SHOW_ROTATION_SCREEN = !0,
cifw.screen.POLICY = cifw.screen.RESOLUTION_POLICY.FIXED_HEIGHT,
cifw.CSS.rotate_device_id = "rotate-device-overlay",
cifw.CSS.rotate_device_image_class = "rotate-device-image",
cifw.CSS.game_container_id = "#gameContainer",
cifw.config.SITE_LOCK = !1,
cifw.config.LICENSED = !1,
GameConstants.VERSION = "0.2.2",
GameConstants.DEVELOPMENT = !0,
GameConstants.FADE_OUT_LAYER_COLOR = "#0D0722",
GameConstants.WORLD_BOUNDS_OFFSET = 200,
GameConstants.ORB_DIAMETER = 36,
GameConstants.PUSHER = "pusher",
GameConstants.BLUE_ORB = "blue",
GameConstants.RED_ORB = "red",
GameConstants.GREEN_ORB = "green",
GameConstants.YELLOW_ORB = "yellow",
GameConstants.PURPLE_ORB = "purple",
GameVars.getInstance = function() {
    return null === GameVars._instance && (GameVars._instance = new GameVars),
    GameVars._instance
},
GameVars.prototype.init = function(a) {
    this.game = a,
    this._gameText = this.game.cache.getJSON("game_text")
},
GameVars.prototype.getColorName = function(a) {
    var b;
    switch (a) {
    case - 1 : b = GameConstants.PUSHER;
        break;
    case 1:
        b = GameConstants.BLUE_ORB;
        break;
    case 2:
        b = GameConstants.RED_ORB;
        break;
    case 3:
        b = GameConstants.GREEN_ORB;
        break;
    case 4:
        b = GameConstants.YELLOW_ORB;
        break;
    case 5:
        b = GameConstants.PURPLE_ORB
    }
    return b
},
Object.defineProperty(GameVars.prototype, "gameText", {
    get: function() {
        return this._gameText
    },
    enumerable: !0,
    configurable: !0
}),
GameVars._instance = null;
var howlSound = new Howl({
    src: ["static/audiosprite.ogg", "static/audiosprite.mp3"],
    sprite: {
        play_button: [0, 1200],
        generic_button: [1300, 80],
        orb_switch: [1400, 190],
        throw_orb: [1600, 190],
        orb_match: [1800, 190],
        chain_combo01: [2e3, 560],
        chain_combo02: [2600, 560],
        chain_combo03: [3200, 560],
        chain_combo04: [3800, 560],
        chain_combo05: [4400, 560],
        chain_combo06: [5e3, 560],
        chain_combo07: [5600, 560],
        chain_combo08: [6200, 560],
        chain_combo09: [6800, 560],
        orb_touch: [7400, 150],
        orb_pusher_destroyed: [7600, 1200],
        level_start: [8900, 4480],
        level_failed: [13400, 4380],
        level_completed: [17800, 5880],
        orbs_enter: [23800, 940],
        level_end: [24800, 2550],
        powerup_appear: [27400, 1700],
        level_blocked: [29200, 2300],
        orb_pusher_crushed: [31600, 570],
        powerup_slow: [32200, 2350],
        powerup_back: [34700, 1400],
        powerup_fireball: [36200, 1320],
        launch_fireball: [37600, 480],
        exp_fireball: [38100, 1700],
        powerup_slow_inverted: [39900, 1460]
    },
    volume: 1
}),
mainMenuMusic = new Howl({
    src: ["static/music_menu.ogg", "static/music_menu.mp3"],
    loop: !1,
    preload: !1,
    onend: function() {
        playMM()
    },
    volume: .7
}),
playMM = function() {
    mainMenuMusic.play()
},
forestMusic = new Howl({
    src: ["static/terrain-forest.ogg", "static/terrain-forest.mp3"],
    loop: !1,
    preload: !1,
    onend: function() {
        playGP1()
    },
    volume: .7
}),
playGP1 = function() {
    forestMusic.play()
},
swampMusic = new Howl({
    src: ["static/terrain-swamp.ogg", "static/terrain-swamp.mp3"],
    loop: !1,
    preload: !1,
    onend: function() {
        playGP4()
    },
    volume: .7
}),
playGP4 = function() {
    swampMusic.play()
},
LEVELS = {
    0 : {
        ORBS_PER_WAVE: 10,
        TIME_PER_WAVE: 20,
        COLORS: 3,
        WAVES: 1,
        SLINGER_POSITION: {
            x: 180,
            y: 275
        },
        ROOTS_POINT: 400
    },
    1 : {
        ORBS_PER_WAVE: 19,
        TIME_PER_WAVE: 55,
        COLORS: 3,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 350,
            y: 240
        },
        ROOTS_POINT: 550
    },
    2 : {
        ORBS_PER_WAVE: 20,
        TIME_PER_WAVE: 50,
        COLORS: 4,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 390,
            y: 210
        },
        ROOTS_POINT: 400
    },
    3 : {
        ORBS_PER_WAVE: 18,
        TIME_PER_WAVE: 45,
        COLORS: 5,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 370,
            y: 200
        },
        ROOTS_POINT: 1100
    },
    4 : {
        ORBS_PER_WAVE: 20,
        TIME_PER_WAVE: 40,
        COLORS: 6,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 260,
            y: 315
        },
        ROOTS_POINT: 400
    },
    5 : {
        ORBS_PER_WAVE: 20,
        TIME_PER_WAVE: 35,
        COLORS: 7,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 95,
            y: 165
        },
        ROOTS_POINT: 400
    },
    6 : {
        ORBS_PER_WAVE: 19,
        TIME_PER_WAVE: 35,
        COLORS: 7,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 275,
            y: 185
        },
        ROOTS_POINT: 280
    },
    7 : {
        ORBS_PER_WAVE: 22,
        TIME_PER_WAVE: 35,
        COLORS: 7,
        WAVES: 6,
        SLINGER_POSITION: {
            x: 465,
            y: 165
        },
        ROOTS_POINT: 400
    }
},
START_DASH = .28,
NORMAL_SPEED = 4.5,
MAX_SPEED = 30,
GAMEOVER_SPEED = 1.2 * MAX_SPEED,
FINAL_MIN_SPEED = .1,
BACKWARDS_SPEED = -5,
MAX_ORBS_IN_SLINGER = 4,
LEVEL_FAIL_WAIT = 1,
MATCHES_FOR_POWERUP = 3,
SLOW_POWERUP = .5,
SLOW_POWERUP_DURATION = 5,
BACKWARD_POWERUP_DURATION = 5,
POINTS_MATCH = 150,
POINTS_FIREBALL = 250,
PUSHER_POOL = 5,
NORMAL_ORBS_POOL = 20;
Orb = function(a, b) {
    8 > b ? Phaser.Image.call(this, a, 0, 0, "gp_orbs", !1) : Phaser.Image.call(this, a, 0, 0, "gp_fireball", !1),
    this.anchor.setTo(.5, .5),
    this.state = Game.GameState.s_gameState,
    this.colorID = b,
    this.doneStartRoll = !1,
    this.speed = 0,
    this.pathPos = 0,
    this.pos = 0,
    this.placed = !0,
    this.placingTimer = 0,
    this.deathTimer = 0,
    this.canMatch = !1,
    this.canBeHit = !0,
    this.connected = !1,
    this.connecting = !1,
    this.flying = !1,
    this.inSlinger = !1,
    this.inHole = !1,
    this.dying = !1,
    this.visible = !1,
    this.exists = !1,
    this.powerup = !1,
    this.flyingOrbCollided = !1,
    this.id = Orb.id_counter,
    Orb.id_counter++,
    this.connectionStart_px = 0,
    this.connectionStart_py = 0,
    this.connectionStartAngle = 0,
    0 == b ? (this.orbFrameNames = ["pusher.png"], this.isPusher = !0) : 8 != b && (this.orbFrameNames = Orb.getFrameNamesArray(b), this.isPusher = !1),
    8 != b && (this.frameName = this.orbFrameNames[0], this.currentFrame = Math.floor(79 * Math.random()))
},
Orb.prototype = Object.create(Phaser.Image.prototype),
Orb.prototype.constructor = Orb,
Orb.prototype.destroyOrb = function(a, b, c) {
    var d, e;
    if (null != a && (a.connected = !1, a.connecting = !1), this.isNormal() && Game.GameState.s_gameState.stage_stats.orbs_destroyed++, 8 != this.colorID) {
        switch (d = Orb.explosionsPool.getFirstDead(), d.reset(this.x, this.y), this.state._group.add(d), this.colorID) {
        case 0:
            e = d.play("killGold", 30, !1, !0);
            break;
        case 1:
            e = d.play("killRed", 30, !1, !0);
            break;
        case 2:
            e = d.play("killGreen", 30, !1, !0);
            break;
        case 3:
            e = d.play("killBlue", 30, !1, !0);
            break;
        case 4:
            e = d.play("killGold", 30, !1, !0);
            break;
        case 5:
            e = d.play("killPurple", 30, !1, !0);
            break;
        case 6:
            e = d.play("killCalypso", 30, !1, !0);
            break;
        case 7:
            e = d.play("killBlack", 30, !1, !0)
        }
        e.onComplete.addOnce(function() {
            d.kill(),
            Orb.explosionsPool.add(d)
        },
        this),
        this.kill()
    } else this.flying = !1,
    this.kill()
},
Orb.prototype.update = function() {
    if (!this.flyingOrbCollided) {
        if (this.state = Game.GameState.s_gameState, this.inSlinger) {
            if (this.visible || (this.visible = !0, this.exists = !0), this.colorID > 7) return;
            this.currentFrame += .3,
            this.frameName = this.orbFrameNames[Math.floor(this.currentFrame) % 79]
        } else if (this.flying) {
            if (this.x += this.nx * Orb.SLINGER_ORB_SPEED, this.y += this.ny * Orb.SLINGER_ORB_SPEED, (this.x > Orb.RIGHT_LIMIT_X || this.x < Orb.LEFT_LIMIT_X || this.y > Orb.BOTTOM_LIMIT_Y || this.y < Orb.TOP_LIMIT_Y) && Game.GameState.s_gameState.onFlyinOrbOutOfBounds(this), this.colorID > 7) return;
            this.tail.x = this.x,
            this.tail.y = this.y,
            this.tail.scaleNumber < 1 && (this.tail.scaleNumber += .05),
            this.tail.scale.setTo(this.tail.scaleNumber, 1),
            this.currentFrame += 1.5,
            this.frameName = this.orbFrameNames[Math.floor(this.currentFrame) % 79]
        }
        Phaser.Image.prototype.update.call(this)
    }
},
Orb.prototype.updatePathPosition = function() {
    this.pathPos = Math.floor(this.pos),
    this.pos += this.speed
},
Orb.prototype.update2 = function() {
    this.pathPos += Math.floor(this.speed)
},
Orb.prototype.setOrbPositionAndAngle = function(a) {
    var b;
    this.inHole || (this.pathPos > 0 && (b = void 0 == a[this.pathPos] ? a[a.length - 1] : a[this.pathPos], this.x = b.x, this.y = b.y, this.angle = b.a), this.placed || (this.x = this.placingTimer * this.x + (1 - this.placingTimer) * this.connectionStart_px, this.y = this.placingTimer * this.y + (1 - this.placingTimer) * this.connectionStart_py), this.isPusher ? this.angle += .075 * Math.sin(.1 * this.pathPos) : this.pathPos > 0 && (this.frameName = this.orbFrameNames[Math.floor(.3 * this.pathPos) % 79]))
},
Orb.prototype["throw"] = function(a, b, c) {
    this.inSlinger = !1,
    this.flying = !0,
    this.x = a,
    this.y = b,
    this.nx = Math.cos(c * Math.PI / 180),
    this.ny = Math.sin(c * Math.PI / 180),
    this.angle = c,
    this.colorID < 8 && (this.tail = this.state.orbsTailPool.getFirstDead(), this.tail.reset(this.x, this.y), this.tail.alpha = 1, this.tail.frameName = "tail_" + this.colorID + ".png", this.tail.scaleNumber = 0, this.tail.anchor.setTo(1, .5), this.tail.scale.setTo(this.tail.scaleNumber, 1), this.tail.angle = c)
},
Orb.prototype.holeReached = function(a) {
    var b;
    b = a ? this.game.add.tween(this.scale).to({
        x: 0,
        y: 0
    },
    150, Phaser.Easing.Cubic.Out, !0) : this.game.add.tween(this.scale).to({
        x: 0,
        y: 0
    },
    600, Phaser.Easing.Cubic.Out, !0),
    b.onComplete.add(function() {
        if (a) this.visible = !1,
        this.exists = !1;
        else {
            var b = this.parent;
            b.remove(this)
        }
    },
    this)
},
Orb.prototype.matches = function(a) {
    return a.colorID === this.colorID
},
Orb.prototype.isNormal = function() {
    return ! 0
},
Orb.prototype.isPowerUp = function() {
    return this.powerup
},
Orb.prototype.kill = function() {
    this.speed = 0,
    this.pathPos = 0,
    this.pos = 0,
    this.doneStartRoll = !1,
    this.placed = !0,
    this.placingTimer = 0,
    this.deathTimer = 0,
    this.canMatch = !1,
    this.canBeHit = !0,
    this.connected = !1,
    this.connecting = !1,
    this.flying = !1,
    this.inSlinger = !1,
    this.inHole = !1,
    this.dying = !1,
    this.visible = !1,
    this.exists = !1,
    this.dying = !1,
    this.flyingOrbCollided = !1,
    this.alive = !1,
    this.connectionStart_px = 0,
    this.connectionStart_py = 0,
    this.connectionStartAngle = 0,
    Orb.addToPool(this, this.colorID)
},
Orb.loadFrameNames = function() {
    var a;
    for (this.redOrbFrames = [], this.greenOrbFrames = [], this.blueOrbFrames = [], this.goldOrbFrames = [], this.purpleOrbFrames = [], this.calypsoOrbFrames = [], this.blackOrbFrames = [], a = 0; 80 > a; a++) this.redOrbFrames.push("orb_red_" + a + ".png"),
    this.greenOrbFrames.push("orb_green_" + a + ".png"),
    this.blueOrbFrames.push("orb_blue_" + a + ".png"),
    this.goldOrbFrames.push("orb_gold_" + a + ".png"),
    this.purpleOrbFrames.push("orb_purple_" + a + ".png"),
    this.calypsoOrbFrames.push("orb_calypso_" + a + ".png"),
    this.blackOrbFrames.push("orb_black_" + a + ".png")
},
Orb.getFrameNamesArray = function(a) {
    switch (a) {
    case 1:
        return this.redOrbFrames;
    case 2:
        return this.greenOrbFrames;
    case 3:
        return this.blueOrbFrames;
    case 4:
        return this.goldOrbFrames;
    case 5:
        return this.purpleOrbFrames;
    case 6:
        return this.calypsoOrbFrames;
    case 7:
        return this.blackOrbFrames
    }
},
Orb.createOrbsPool = function(a, b) {
    this.game = a;
    var c, d, e, f, g, h, i = LEVELS[b].COLORS;
    for (this.pusherPool = this.game.make.group(null), this.redPool = this.game.make.group(null), this.greenPool = this.game.make.group(null), this.bluePool = this.game.make.group(null), this.goldPool = this.game.make.group(null), this.purplePool = this.game.make.group(null), this.calypsoPool = this.game.make.group(null), this.blackPool = this.game.make.group(null), this.explosionsPool = this.game.make.group(null), this.fireballPool = this.game.make.group(null), c = 0; i >= c; c++) if (0 == c) for (d = 0; PUSHER_POOL > d; d++) f = new Orb(this.game, c),
    f.alive = !1,
    this.addToPool(f, c);
    else for (d = 0; NORMAL_ORBS_POOL > d; d++) f = new Orb(this.game, c),
    f.alive = !1,
    this.addToPool(f, c),
    g = this.game.make.sprite(0, 0, "gp_orbs_exp"),
    g.anchor.setTo(.5),
    g.kill(),
    this.explosionsPool.add(g);
    for (c = 0; 6 >= c; c++) e = new Orb(this.game, 8),
    e.alive = !1,
    this.fireballPool.add(e);
    h = Phaser.Animation.generateFrameNames("anim_exp_red", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killRed", h),
    h = Phaser.Animation.generateFrameNames("anim_exp_green", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killGreen", h),
    h = Phaser.Animation.generateFrameNames("anim_exp_blue", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killBlue", h),
    h = Phaser.Animation.generateFrameNames("anim_exp_yellow", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killGold", h),
    h = Phaser.Animation.generateFrameNames("anim_exp_purple", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killPurple", h),
    h = Phaser.Animation.generateFrameNames("anim_exp_cyan", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killCalypso", h),
    h = Phaser.Animation.generateFrameNames("anim_exp_black", 1, 13, ".png"),
    this.explosionsPool.callAll("animations.add", "animations", "killBlack", h)
},
Orb.addToPool = function(a, b) {
    switch (b) {
    case 0:
        this.pusherPool.add(a);
        break;
    case 1:
        this.redPool.add(a);
        break;
    case 2:
        this.greenPool.add(a);
        break;
    case 3:
        this.bluePool.add(a);
        break;
    case 4:
        this.goldPool.add(a);
        break;
    case 5:
        this.purplePool.add(a);
        break;
    case 6:
        this.calypsoPool.add(a);
        break;
    case 7:
        this.blackPool.add(a);
        break;
    case 8:
        this.fireballPool.add(a)
    }
},
Orb.getOrbFromPool = function(a) {
    if (void 0 != a) {
        var b;
        switch (a) {
        case 0:
            b = this.pusherPool.getFirstDead();
            break;
        case 1:
            b = this.redPool.getFirstDead();
            break;
        case 2:
            b = this.greenPool.getFirstDead();
            break;
        case 3:
            b = this.bluePool.getFirstDead();
            break;
        case 4:
            b = this.goldPool.getFirstDead();
            break;
        case 5:
            b = this.purplePool.getFirstDead();
            break;
        case 6:
            b = this.calypsoPool.getFirstDead();
            break;
        case 7:
            b = this.blackPool.getFirstDead();
            break;
        case 8:
            b = this.fireballPool.getFirstDead()
        }
        if (void 0 == b) {
            if (void 0 == a) return;
            8 > a && (b = new Orb(this.game, a), b.alive = !1, this.addToPool(b, a))
        }
        return b
    }
},
Orb.SLINGER_ORB_SPEED = 12,
Orb.LEFT_LIMIT_X = -175,
Orb.RIGHT_LIMIT_X = 815,
Orb.TOP_LIMIT_Y = -175,
Orb.BOTTOM_LIMIT_Y = 655,
Orb.DELTA_PATH_POS = 145,
Orb.ORB_DEATH_WAIT = 1,
Orb.id_counter = 0,
Slinger = function(a, b, c) {
    Phaser.Group.call(this, a, null, "orb-slinger", !1),
    this.audioManager = cifw.AudioManager.getInstance(),
    this.posX = b,
    this.posY = c,
    this.state = Game.GameState.s_gameState,
    this.oscillationDeltaY = -Slinger.OSCILLATION_DELTA_Y,
    this.oscillationUpperLimit = this.posY - .5 * Slinger.OSCILLATION_AMPLITUDE,
    this.oscillationLowerLimit = this.posY + .5 * Slinger.OSCILLATION_AMPLITUDE,
    this.throwingOrb = !1,
    this.possibleColors = [],
    this.orbs = [],
    this.pad = this.create(this.posX, this.posY, "gp_slinger", "orb-slinger-pad.png"),
    this.pad.inputEnabled = !0,
    this.pad.events.onInputDown.add(this.swapOrbs, this),
    this.pad.anchor.setTo(.5, .5),
    this.rotatingItems = new Phaser.Group(this.game),
    this.rotatingItems.position.setTo(this.posX, this.posY),
    this.add(this.rotatingItems),
    this.slingerShadow = this.rotatingItems.create(0, 0, "gp_slinger", "orb-slinger-shadow.png"),
    this.slingerShadow.anchor.setTo(.5, .5),
    this.slinger = this.rotatingItems.create(0, 0, "gp_slinger", "orb-slinger.png"),
    this.slinger.anchor.setTo(.5, .5),
    this.slingerGlow = this.rotatingItems.create(0, 0, "gp_slinger", "orb-slinger-glow.png"),
    this.slingerGlow.anchor.setTo(.5, .5),
    this.slingerGlow.visible = !1,
    this.converted = new Phaser.Point,
    this.gameOver = !1,
    this.complete = !1,
    this.gamePaused = !0,
    this.readyToReload = !1,
    this.reloadTimer = this.game.time.create(!1),
    this.reloadTimer.loop(500, this.checkReload, this),
    this.reloadTimer.start()
},
Slinger.prototype = Object.create(Phaser.Group.prototype),
Slinger.prototype.constructor = Slinger,
Slinger.prototype.destroy = function() {
    Phaser.Group.prototype.destroy.call(this)
},
Slinger.prototype.checkReload = function() {
    this.reloadTimer.stop(!1),
    this.readyToReload = !0
},
Slinger.prototype.update = function() {
    if (this.state = Game.GameState.s_gameState, !(this.gameOver || this.complete || this.gamePaused)) {
        var a, b, c = _.find(this.parent.children,
        function(a) {
            return "orbs-container" == a.name
        },
        this);
        for (c = c.paths[0].orbs, this.rotatingItems.y > this.oscillationLowerLimit ? this.oscillationDeltaY = -this.oscillationDeltaY: this.rotatingItems.y < this.oscillationUpperLimit && (this.oscillationDeltaY = -this.oscillationDeltaY), this.rotatingItems.y += this.oscillationDeltaY, this.possibleColors = [], a = 0; a < c.length; a++) c[a].colorID > 0 && this.possibleColors.push(c[a].colorID);
        for (this.possibleColors = _.unique(this.possibleColors), this.checkSlingerOrbs(), a = 0; a < this.orbs.length; a++) switch (b = this.orbs[a], b.update(), a) {
        case 0:
            b.x = Slinger.ORB_3_PX,
            b.y = 0,
            b.colorID < 8 ? b.scale.x < 1 ? b.scale.setTo(b.scale.x + .1) : b.scale.setTo(1) : b.scale.x < 2 ? b.scale.setTo(b.scale.x + .2) : b.scale.setTo(2),
            b.visible = !0;
            break;
        case 1:
            b.x = Slinger.ORB_2_PX,
            b.y = 0,
            b.scale.x < Slinger.ORB_2_SCALE ? b.scale.setTo(b.scale.x + .1) : b.scale.setTo(Slinger.ORB_2_SCALE),
            b.visible = !0;
            break;
        case 2:
            b.x = Slinger.ORB_1_PX,
            b.y = 0,
            b.scale.x < Slinger.ORB_1_SCALE ? b.scale.setTo(b.scale.x + .1) : b.scale.setTo(Slinger.ORB_1_SCALE),
            b.visible = !0;
            break;
        default:
            b.x = 0,
            b.y = 0,
            b.visible = !1,
            b.scale.setTo(0)
        }
        this.readyToReload && (this.orbs.length < MAX_ORBS_IN_SLINGER && !Objects.gameOver && !this.parent.stage_completed ? (this.createNewSlingerOrb(), this.readyToReload = !1, this.reloadTimer.start()) : (this.reloadTimer.stop(!1), this.readyToReload = !1))
    }
},
Slinger.prototype.createNewSlingerOrb = function() {
    if (void 0 != this.possibleColors) {
        void 0 != this.state && this.state.stage_params.IsInstructions && (this.possibleColors = [1, 2, 3]);
        var a;
        a = Orb.getOrbFromPool(_.sample(this.possibleColors)),
        void 0 != a && (a.alive = !0, a.scale.setTo(0), a.visible = !1, a.inSlinger = !0, a.speed = 1, this.rotatingItems.add(a), this.orbs.push(a))
    }
},
Slinger.prototype.checkSlingerOrbs = function() {
    var a, b, c;
    if (0 != this.possibleColors.length && 0 != this.orbs.length) for (a = 0; a < this.orbs.length; a++) b = this.orbs[a],
    8 != b.colorID && -1 == _.indexOf(this.possibleColors, b.colorID) && (c = _.sample(this.possibleColors), b.colorID = c, b.orbFrameNames = Orb.getFrameNamesArray(c))
},
Slinger.prototype.onMouseMove = function(a) {
    this.game.input.getLocalPosition(this, a, this.converted);
    var b = Math.atan2(this.posX - this.converted.x, this.posY - this.converted.y);
    this.rotatingItems.rotation = -b - .5 * Math.PI
},
Slinger.prototype.onClickInScene = function(a) {
    if (this.state.stage_params.IsInstructions && (3 == this.state.tutorialSteps || 8 == this.state.tutorialSteps)) {
        var b = new Phaser.Point;
        this.game.input.getLocalPosition(this.parent, a, b),
        this.state.tutorial1.getDisplay().position.distance(b) < .35 * this.state.tutorial1.getDisplay().width && this.state.tutorialSteps++
    }
    this.gamePaused || (this.onMouseMove(a), this.launchOrb())
},
Slinger.prototype.launchOrb = function() {
    if (0 != this.orbs.length && !(this.orbs[0].scale.x < 1)) {
        this.reloadTimer.start();
        var a = Math.cos(this.rotatingItems.angle * Math.PI / 180),
        b = Math.sin(this.rotatingItems.angle * Math.PI / 180);
        this.slingerGlow.visible = !0,
        this.game.time.events.add(50,
        function() {
            this.slingerGlow.visible = !1
        },
        this),
        this.game.add.tween(this.rotatingItems).to({
            x: this.posX - 4 * a,
            y: this.posY - 4 * b
        },
        225, Phaser.Easing.Cubic.Out, !0, 0, 0, !0);
        var c = this.posX + a * Slinger.ORB_3_PX,
        d = this.posY + b * Slinger.ORB_3_PX;
        if (8 == this.orbs[0].colorID) {
            this.orbs[0].scale.setTo(1.5),
            this.orbs[0]["throw"](c, d, this.rotatingItems.angle);
            var e = 0;
            this.audioManager.playEffect("launch_fireball");
            do {
                var f;
                f = Orb.getOrbFromPool(8), f.x = this.orbs[0].x, f.y = this.orbs[0].y, this.rotatingItems.add(f), f.alive = !0, f.scale.setTo(1.5), f.visible = !0, f.inSlinger = !0, f.powerup = !0, f.speed = 1, f.colorID = 8;
                var g = Phaser.Animation.generateFrameNames("anim_fire_", 1, 28, ".png");
                f.animations.add("fireball", g), g = Phaser.Animation.generateFrameNames("anim_exp_fire_", 1, 18, ".png"), f.animations.add("fireExp", g), f.play("fireball", 25, !0), f.update(), 0 == e ? f["throw"](c, d, this.rotatingItems.angle - 15) : f["throw"](c, d, this.rotatingItems.angle + 15), Objects.currentOrbsContainer.addFlyingOrb(f), e++
            } while ( 2 > e )
        } else this.orbs[0]["throw"](c, d, this.rotatingItems.angle),
        this.audioManager.playEffect("throw_orb");
        Objects.currentOrbsContainer.addFlyingOrb(this.orbs[0]),
        this.orbs.splice(0, 1)
    }
},
Slinger.prototype.swapOrbs = function(a, b) {
    if (! (this.orbs.length < 2 || this.gameOver || this.complete || this.gamePaused)) {
        this.state.stage_params.IsInstructions && 13 == this.state.tutorialSteps && this.state.tutorialSteps++;
        var c = new Phaser.Point;
        if (this.game.input.getLocalPosition(this.parent, b, c), a.position.distance(c) > .35 * a.width) return void this.onClickInScene(b);
        this.audioManager.playEffect("orb_switch");
        var d;
        d = this.orbs[0],
        this.orbs[0] = this.orbs[1],
        this.orbs[1] = d
    }
},
Slinger.prototype.pauseSlinger = function() {
    this.gamePaused = !0,
    this.reloadTimer.running && this.reloadTimer.pause()
},
Slinger.prototype.resumeSlinger = function() {
    this.gamePaused = !1,
    this.reloadTimer.paused && this.reloadTimer.resume()
},
Slinger.ORB_SPEED = 850,
Slinger.OSCILLATION_DELTA_Y = .02,
Slinger.OSCILLATION_AMPLITUDE = 3,
Slinger.ORB_1_PX = -35,
Slinger.ORB_2_PX = -10,
Slinger.ORB_3_PX = 28,
Slinger.ORB_1_SCALE = .35,
Slinger.ORB_2_SCALE = .7,
SlingerController = function(a, b) {
    this.game = a,
    this.slinger = b,
    this.discardClick = !1,
    this.lastPointer_px = 0,
    this.lastPointer_py = 0,
    this.game.onResume.add(this.onGameResumed, this),
    this.gameOver = !1,
    this.complete = !1,
    this.gamePaused = !1,
    this.pointer = new Phaser.Point
},
SlingerController.prototype.update = function() {
    this.gameOver || this.complete || (this.game.input.activePointer.position.x != this.lastPointer_px || this.game.input.activePointer.position.y != this.lastPointer_py) && (this.pointer.x = this.game.input.activePointer.position.x, this.pointer.y = this.game.input.activePointer.position.y, this.slinger.onMouseMove(this.pointer), this.lastPointer_px = this.game.input.activePointer.position.x, this.lastPointer_py = this.game.input.activePointer.position.y)
},
SlingerController.prototype.init = function(a) {
    this._backgroundImage = a
},
SlingerController.prototype.destroy = function() {
    this.game.onResume.remove(this.onGameResumed, this),
    this._backgroundImage.events.onInputUp.remove(this.onClickInGameScene, this)
},
SlingerController.prototype.onClickInGameScene = function(a, b) {
    this.gameOver || this.complete || this.slinger.onClickInScene(b)
},
SlingerController.prototype.onGameResumed = function() {
    this.discardClick = !0
},
SlingerController.prototype.pauseSlingerController = function() {
    this.gamePaused = !0
},
SlingerController.prototype.resumeSlingerController = function() {
    this.gamePaused = !1
},
Object.defineProperty(SlingerController.prototype, "backgroundImage", {
    set: function(a) {
        this._backgroundImage = a,
        this._backgroundImage.inputEnabled = !0,
        this._backgroundImage.input.priorityID = 0,
        this._backgroundImage.events.onInputUp.add(this.onClickInGameScene, this)
    },
    enumerable: !0,
    configurable: !0
}),
Objects = function(a, b) {
    this.game = a,
    this.gameOverScreen = new Game.GameOver(this.game),
    this.completeScreen = new Game.LevelComplete(this.game),
    this.tutorialGO = !1,
    this.audioManager = cifw.AudioManager.getInstance(),
    Phaser.Group.call(this, a, null, "orbs-container", !1),
    this.enterSoundPlayed = !1,
    this.roots = this.game.make.sprite(0, 0, "gp_roots", "roots_1.png"),
    this.roots.anchor.setTo(.5),
    this.roots.visible = !1,
    this.roots.exists = !1;
    var c = Phaser.Animation.generateFrameNames("roots_", 1, 20, ".png");
    this.roots.animations.add("create", c),
    Objects.currentOrbsContainer = this,
    this.state = Game.GameState.s_gameState,
    this.tutorialMatches = 0,
    this.flyingOrbs = [],
    this.path = new Path(this.game, b),
    this.add(this.path),
    this.paths = [],
    this.paths.push(this.path),
    this.waitingOrbs = [],
    this.orbsCreated = 0,
    this.level = b,
    this.wave = 0,
    this.waveForUI = 0,
    this.gameOver = !1,
    this.powerups = [],
    this.gamePaused = !1,
    this.previousOrbCreated = 0,
    this.sameColorOrbs = 1,
    this.levelFailTimer = 0,
    this.slowActive = !1,
    this.backwardActive = !1,
    this.slowTimer = this.game.time.create(!1),
    this.slowTimer.loop(1e3 * SLOW_POWERUP_DURATION, this.normalSpeed, this),
    this.backwardTimer = this.game.time.create(!1),
    this.backwardTimer.loop(1e3 * BACKWARD_POWERUP_DURATION, this.forwardMovement, this),
    this.waveTimer = this.game.time.create(!1),
    this.waveTimer.loop(1e3 * LEVELS[this.level].TIME_PER_WAVE, this.newWave, this),
    this.waveTimer.start(),
    this.fireBallSoundTimer = this.game.time.create(!1),
    this.waveTimer.loop(1710, this.fireBallExploded, this)
},
Objects.prototype = Object.create(Phaser.Group.prototype),
Objects.prototype.constructor = Objects,
Objects.prototype.update = function() {
    if (this.gameOver || this.state.stage_completed || this.gamePaused) return void(this.state.stage_completed && Phaser.Group.prototype.update.call(this));
    var a;
    if (!this.state.stage_params.IsInstructions && !this.roots.visible && this.wave == LEVELS[this.level].WAVES && this.paths[0].orbs[0].pathPos > LEVELS[this.level].ROOTS_POINT + 100) {
        this.audioManager.playEffect("level_blocked");
        var b = this.paths[0].pathPoints[LEVELS[this.level].ROOTS_POINT].x,
        c = this.paths[0].pathPoints[LEVELS[this.level].ROOTS_POINT].y;
        this.roots.x = b,
        this.roots.y = c,
        this.state._group.add(this.roots),
        this.roots.visible = !0,
        this.roots.exists = !0,
        this.roots.play("create", 10)
    }
    Phaser.Group.prototype.update.call(this);
    var d;
    if (0 == this.paths[0].orbs.length && this.wave == LEVELS[this.level].WAVES && !this.state.stage_completed && !this.tutorialGO) {
        if (this.state.stage_params.IsInstructions) {
            if (this.state.tutorialSteps > 15 && this.state.tutorialSteps < 20) return void(this.wave = 0);
            if (this.wave = 0, this.state.tutorialSteps++, 30 != this.state.tutorialSteps) return
        }
        this.state.stage_completed = !0,
        this.state._disableButtons(),
        this.game.time.events.add(500,
        function() {
            if (this.state.stage_params.IsInstructions) {
                Game.DataManager.getInstance().tutorialPlayed(),
                this.state.overlay.alpha = 0,
                this.state.overlay.visible = !0;
                var a = this.game.add.tween(this.state.overlay).to({
                    alpha: .8
                },
                1e3, Phaser.Easing.Linear.None, !0, 0);
                a.onComplete.addOnce(function() {
                    this.state._loadingGroup.visible = !0,
                    this.state.localization.localizeUILabel(this.state._loadingWidget, "loading_", "0%", !0),
                    ccs.actionManager.playActionByName("ui_json_loading", "in", this.loadNextLevelFiles, this)
                },
                this)
            } else this.audioManager.stopMusic(),
            this.completeScreen.openLevelComplete(this.level, Math.round(this.state.levelTime), this.state.overlay),
            this.completeScreen.nextLevelSignal.add(this.toNextLevel, this)
        },
        this)
    }
    if (d = this.wave < LEVELS[this.level].WAVES && this.orbsCreated < LEVELS[this.level].ORBS_PER_WAVE, this.state.stage_params.IsInstructions && (this.state.tutorialSteps < 16 || this.state.tutorialSteps > 20) && this.state.tutorialSteps < 29 && (d = !1), this.paths[0].orbs[0] && this.paths[0].orbs[0].pathPos < Orb.DELTA_PATH_POS && (d = !1), d) for (0 != this.orbsCreated || this.enterSoundPlayed || (this.tutorialGO = !1, this.audioManager.playEffect("orbs_enter"), this.enterSoundPlayed = !0), this.state.stage_stats.Update(), a = 0; a < this.paths.length; a++) this.CreateNewOrbs(a, !1);
    else if (this.orbsCreated == LEVELS[this.level].ORBS_PER_WAVE) for (a = 0; a < this.paths.length; a++) this.enterSoundPlayed = !1,
    this.CreateNewOrbs(a, !0),
    this.wave == LEVELS[this.level].WAVES && this.waveTimer.stop(!1);
    this.checkDistanceToHole(),
    this.updatePowerUps(),
    this.MoveWaitingOrbsToPath(),
    this.CheckCollisions(),
    this.UpdatePathOrbs(),
    this.UpdateDyingOrbs(),
    this.UpdateLevelEffects(),
    this.CheckMatches(),
    this.CheckDeadOrbs()
},
Objects.prototype.updatePowerUps = function() {
    this.powerups.forEach(function(a) {
        if (a.lifetime += this.game.time.physicsElapsedMS, a.lifetime > 9500) {
            if (!a.alive) return;
            26 == this.state.tutorialSteps && this.state.tutorialSteps--,
            a.alive = !1,
            a.visible = !1,
            a.exists = !1,
            this.state.powerupsPool.add(a);
            var b = _.findIndex(this.powerups,
            function(a) {
                return 0 == a.alive
            },
            this);
            this.powerups.splice(b, 1)
        }
    },
    this)
},
Objects.prototype.checkDistanceToHole = function() {
    var a, b, c = this.paths[0].orbs;
    0 != c.length && (a = c[c.length - 1].pathPos, b = a / this.path.pathPoints.length, b > .9 ? ("init" == this.state.nearHoleAnimation.armature.animation._lastAnimationState.name && this.state.nearHoleAnimation.gotoAndPlay("in"), "out" == this.state.nearHoleAnimation.armature.animation._lastAnimationState.name && this.state.nearHoleAnimation.gotoAndPlay("in")) : "in" == this.state.nearHoleAnimation.armature.animation._lastAnimationState.name && this.state.nearHoleAnimation.gotoAndPlay("out"))
},
Objects.prototype.toNextLevel = function() {
    this.state.overlay.alpha = 0,
    this.state.overlay.visible = !0;
    var a = this.game.add.tween(this.state.overlay).to({
        alpha: .8
    },
    1e3, Phaser.Easing.Linear.None, !0, 0);
    a.onComplete.addOnce(function() {
        this.state._loadingGroup.visible = !0,
        this.state.localization.localizeUILabel(this.state._loadingWidget, "loading_bmp", "loading"),
        this.state.localization.localizeUILabel(this.state._loadingWidget, "loading_", "0%", !0),
        ccs.actionManager.playActionByName("ui_json_loading", "in", this.loadNextLevelFiles, this)
    },
    this)
},
Objects.prototype.loadNextLevelFiles = function(a) {
    function b(a) {
        d.state.localization.localizeUILabel(d.state._loadingWidget, "loading_", a + "%", !0),
        100 == a && d.game.time.events.add(500,
        function() {
            d.game.state.start("GameplayState", !0, !1, this.level + 1)
        },
        d)
    }
    if ("loading_pattern" == a.name) {
        var c, d = this,
        e = new Phaser.Loader(this.game);
        c = this.game.add.sprite(.92 * cifw.screen.DESIGN_WIDTH, .9 * cifw.screen.DESIGN_HEIGHT, "loadingWindMill"),
        c.anchor.setTo(.5),
        this.game.add.tween(c).from({
            alpha: 0
        },
        200, Phaser.Easing.Linear.None, !0, 0),
        this.game.add.tween(c).to({
            angle: c.angle + 360
        },
        2e3, Phaser.Easing.Linear.None, !0, 0, -1),
        e.image("level_" + (this.level + 1) + "_bg", "static/level_" + (this.level + 1) + ".png"),
        e.onFileComplete.add(b, this),
        e.start()
    }
},
Objects.prototype.addFlyingOrb = function(a) {
    this.flyingOrbs.push(a),
    this.add(a)
},
Objects.prototype.fireBallExploded = function() {
    this.fireBallSoundTimer.stop(!1)
},
Objects.prototype.normalSpeed = function() {
    this.audioManager.playEffect("powerup_slow_inverted"),
    this.state.slowAnimation.gotoAndPlay("out"),
    this.slowActive = !1,
    this.slowTimer.stop(!1)
},
Objects.prototype.forwardMovement = function() {
    this.backwardActive = !1,
    this.backwardTimer.stop(!1)
},
Objects.prototype.newWave = function() {
    if (this.wave < LEVELS[this.level].WAVES) {
        if (this.orbsCreated != LEVELS[this.level].ORBS_PER_WAVE + 1) return;
        this.orbsCreated = 0
    } else this.waveTimer.stop(!1)
},
Objects.prototype.removeFlyingOrb = function(a) {
    var b = this.flyingOrbs.indexOf(a);
    this.flyingOrbs.splice(b, 1),
    this.remove(a),
    a.colorID < 8 && a.tail.kill(),
    a.kill()
},
Objects.prototype.CreateNewOrbs = function(a, b) {
    var c;
    if (! (this.state.stage_completed || this.gameOver || this.state.stage_params.IsInstructions && this.state.GetNumberOfOrbs() > 0 || this.state.stage_params.IsInstructions && this.state.GetNumberOfOrbs() > 0)) {
        var d = this.paths[a].orbs,
        e = !1;
        if (0 === d.length ? e = !0 : d[0].pathPos > Orb.DELTA_PATH_POS && (e = !0), e) {
            if (0 != this.orbsCreated || this.state.stage_params.IsInstructions || (this.waveForUI++, this.state.localization.localizeUILabel(this.state._widget, "gp_wavenumber_bmp", this.waveForUI + " - " + LEVELS[this.level].WAVES, !0), this.game.add.tween(this.state.waveTitleUI).to({
                alpha: 1
            },
            400, Phaser.Easing.Linear.None, !0, 0), this.game.add.tween(this.state.waveNumberUI).to({
                alpha: 1
            },
            400, Phaser.Easing.Linear.None, !0, 0), this.game.time.events.add(2400,
            function() {
                this.game.add.tween(this.state.waveTitleUI).to({
                    alpha: 0
                },
                400, Phaser.Easing.Linear.None, !0, 0),
                this.game.add.tween(this.state.waveNumberUI).to({
                    alpha: 0
                },
                400, Phaser.Easing.Linear.None, !0, 0)
            },
            this)), b) c = Orb.getOrbFromPool(0),
            c.connected = !1,
            this.wave++;
            else {
                if (c = Orb.getOrbFromPool(Math.floor(Math.random() * LEVELS[this.level].COLORS) + 1), c.colorID == this.previousOrbCreated ? this.sameColorOrbs++:this.sameColorOrbs = 1, this.sameColorOrbs > 4) {
                    do c = Orb.getOrbFromPool(Math.floor(Math.random() * LEVELS[this.level].COLORS) + 1);
                    while (c.colorID == this.previousOrbCreated);
                    this.sameColorOrbs = 1
                }
                c.connected = !0,
                this.previousOrbCreated = c.colorID
            }
            c.alive = !0,
            c.placed = !0,
            c.visible = !0,
            c.exists = !0,
            c.x = this.paths[a].pathPoints[0].x,
            c.y = this.paths[a].pathPoints[0].y,
            d.unshift(c),
            this.paths[a].add(c),
            c.speed = this.GetTargetSpeed(0, 0),
            this.orbsCreated++
        }
    }
},
Objects.prototype.MoveWaitingOrbsToPath = function() {},
Objects.prototype.CheckCollisions = function() {
    for (var a, b = 0; b < this.flyingOrbs.length; b++) {
        if (a = this.flyingOrbs[b], this.powerups.length > 0) {
            var c = this.checkPowerUpsCollision(a);
            if (c) return a.colorID < 8 && this.tailFadeOut(a.tail),
            this.flyingOrbs.splice(b, 1),
            void a.destroyOrb()
        }
        c = this.checkFlyingOrbCollision(a),
        c && this.flyingOrbs.splice(b, 1)
    }
},
Objects.prototype.UpdatePathOrbs = function() {
    for (var a, b = 0,
    c = 0; c < this.paths.length; c++) for (var d = this.paths[c].orbs, e = 0; e < d.length; e++) {
        var f = d[e],
        g = e > 0 ? d[e - 1] : null,
        h = e + 1 < d.length ? d[e + 1] : null,
        i = 1;
        if (null === g || g.placed || (i = g.placingTimer), f.isPusher) {
            if (f.speed = this.getPusherSpeed(c, d, e), f.updatePathPosition(), f.speed < 0 && this.roots.visible) {
                var j = LEVELS[this.level].ROOTS_POINT + 200;
                j > f.pathPos && (f.pathPos = j, f.speed = 0, this.backwardActive && this.forwardMovement())
            }
            if (h && h.isPusher || !h) {
                this.audioManager.playEffect("orb_pusher_destroyed"),
                this.paths[c].remove(f),
                f.destroyOrb(h, !0),
                d.splice(e, 1),
                e--;
                var k = 0;
                for (a = 0; a < d.length; a++) d[a].isPusher && k++;
                0 == d.length && (this.orbsCreated = 0),
                this.waveTimer.stop(!1),
                this.wave != LEVELS[this.level].WAVES && this.waveTimer.start(),
                16 == this.state.stage_params && this.state.tutorialSteps++;
                continue
            }
        } else 0 === e && (f.speed = this.getPusherSpeed(c, d, e), f.updatePathPosition());
        if (g ? f.placed ? f.connected && (f.speed = g.speed, f.pathPos = Math.floor(g.pathPos + Orb.DELTA_PATH_POS * i), f.pos += f.speed) : (f.connected && (f.speed = g.speed), f.placingTimer += .125, f.connected ? f.pathPos = Math.floor(g.pathPos + Orb.DELTA_PATH_POS * i) : null !== h && h.connected && (f.pathPos = Math.floor(h.pathPos - Orb.DELTA_PATH_POS * f.placingTimer)), f.placingTimer > .99 && (f.placingTimer = 0, f.placed = !0, f.canMatch = !0, this.ClearConnectingStatus(d, e), null !== h && this.ClearConnectingStatus(d, e + 1), this.CheckChainOrb(d, f, e))) : f.placed || (f.placingTimer += .125, f.placingTimer > .99 && (f.placingTimer = 0, f.placed = !0, f.canMatch = !0, this.CheckChainOrb(d, f, e))), f.connected || 0 == e || this.UpdateUnconnectedOrb(f, d, c, e) && e--, f.setOrbPositionAndAngle(this.paths[c].pathPoints), this.state.stage_failed) {
            if (f.pathPos > this.paths[c].pathPoints.length - 25 && f.holeReached(!0), d[0].pathPos > this.paths[c].pathPoints.length - 25) return this.gameOver = !0,
            _.each(this.paths[0].orbs,
            function(a) {
                a.kill()
            },
            this),
            void this.game.time.events.add(500,
            function() {
                this.state.stage_params.IsInstructions ? (this.state._enableButtons(), this.state.stage_failed = !1, this.gameOver = !1, this.paths[0].orbs = [], this.orbsCreated = 0, this.tutorialGO = !0, this.wave = 0) : (this.audioManager.stopMusic(), this.gameOverScreen.openGameOver(this.level, this.state.overlay))
            },
            this)
        } else f.pathPos > this.paths[c].pathPoints.length - 10 ? (f.inHole = !0, b++, f.scale.x > 0 ? f.scale.setTo(f.scale.x -= .05) : f.scale.setTo(0)) : (f.inHole = !1, f.scale.setTo(1))
    }
    this.state.stage_stats.orbs_in_hole = b
},
Objects.prototype.UpdateLevelEffects = function() {
    var a, b, c = this.paths[0].orbs,
    d = c.length,
    e = !0;
    if (this.state.stage_failed || this.state.stage_stats.orbs_in_hole > 0) {
        for (this.levelFailTimer += .01, this.levelFailTimer > LEVEL_FAIL_WAIT && this.state.stage_stats.orbs_in_hole > 0 && (this.state.stage_failed = !0, this.state._disableButtons(), this.audioManager.playEffect("level_end")), a = d - 1; a >= 0; a--) {
            if (b = c[a], 0 == a) {
                e = !1;
                break
            }
            if (!b.connected) {
                b.matches(c[a - 1]) || (e = !1);
                break
            }
        } ! this.state.stage_failed && e && (this.levelFailTimer = 0)
    }
},
Objects.prototype.checkPowerUpsCollision = function(a) {
    var b, c, d, e = GameConstants.ORB_DIAMETER;
    for (b = 0; b < this.powerups.length; b++) if (c = Phaser.Math.distance(a.x, a.y, this.powerups[b].x, this.powerups[b].y), e > c) return 26 == this.state.tutorialSteps && this.state.tutorialSteps++,
    d = _.find(this.parent.children,
    function(a) {
        return "orb-slinger" == a.name
    }),
    this.HandlePowerup(this.powerups[b], d),
    this.powerups.splice(b, 1),
    !0;
    return ! 1
},
Objects.prototype.checkFlyingOrbCollision = function(a) {
    var b, c, d, e;
    for (c = 0; c < this.paths.length; c++) {
        for (d = this.paths[c].orbs, e = this.paths[c].pathPoints, b = 0; b < this.paths[c].length; b++) {
            var f = d[b],
            g = (b > 0 ? d[b - 1] : null, GameConstants.ORB_DIAMETER);
            if (void 0 == f) return;
            f.isNormal() && a.colorID === f.colorID && (g *= 1.2);
            var h = Phaser.Math.distance(a.x, a.y, f.x, f.y);
            if (g > h && f.canBeHit) {
                if (a.isPowerUp()) {
                    if (!f.isPusher) {
                        a.destroyOrb(),
                        this.fireBallSoundTimer.running || this.audioManager.playEffect("exp_fireball"),
                        this.fireBallSoundTimer.start();
                        var i = b + 1 < d.length ? d[b + 1] : null;
                        this.paths[c].remove(d[b]),
                        d[b].destroyOrb(i, !0),
                        d.splice(b, 1),
                        this.state.score += POINTS_FIREBALL
                    }
                } else {
                    this.tailFadeOut(a.tail),
                    this.audioManager.playEffect("orb_touch");
                    var j = a.x - f.x,
                    k = a.y - f.y;
                    if (j = j * Math.cos(f.angle * Math.PI / 180) + k * Math.sin(f.angle * Math.PI / 180), a.placed = !1, a.placingTimer = 0, a.flyingOrbCollided = !0, a.speed = f.speed, a.connectionStart_px = a.x, a.connectionStart_py = a.y, a.connectionStartAngle = a.angle, !f.isPusher && 0 > j) a.pathPos = f.pathPos,
                    a.pos = a.pathPos,
                    a.connected = f.connected,
                    f.connected = !0,
                    d.splice(b, 0, a),
                    this.ClearConnectingStatus(d, b),
                    this.ClearConnectingStatus(d, b + 1),
                    this.CheckChainOrb(d, a, b),
                    b--;
                    else {
                        var l = 1;
                        a.pathPos = f.pathPos + Orb.DELTA_PATH_POS * l,
                        a.pos = a.pathPos,
                        d.splice(b + 1, 0, a),
                        this.ClearConnectingStatus(d, b + 1),
                        this.CheckChainOrb(d, a, b + 1)
                    }
                    this.path.add(a)
                }
                return ! 0
            }
        }
        return ! 1
    }
},
Objects.prototype.ClearConnectingStatus = function(a, b) {
    var c = a[b];
    c.connecting = !1;
    for (var d = b + 1,
    e = d < a.length ? a[d] : null; null !== e && c.matches(e);) e.connecting = !1,
    d++,
    e = d < a.length ? a[d] : null;
    for (d = b - 1, e = d > 0 ? a[d] : null; null !== e && c.matches(e);) e.connecting = !1,
    d--,
    e = d > 0 ? a[d] : null
},
Objects.prototype.UpdateDyingOrbs = function() {
    for (var a = 0; a < this.paths.length; a++) for (var b = this.paths[a].orbs, c = 0; c < b.length; c++) {
        var d = b[c];
        d.dying && (d.deathTimer += .125)
    }
},
Objects.prototype.CheckMatches = function() {
    for (var a = 0; a < this.paths.length; a++) for (var b, c, d = this.paths[a].orbs, e = 0, f = !1, g = !0, h = !1, i = null, j = d.length, k = 0; j > k; k++) if (c = d[k], null !== i && c.matches(i) && (0 === e || c.connected)) {
        if (f = f || c.canMatch, g = g && c.connected && c.placed, i = c, e++, k === j - 1 && e >= 3 && g && f && !h) return void this.MarkDyingOrbs(d, a, k - e + 1, e)
    } else if (e >= 3 && g && f && !h) this.MarkDyingOrbs(d, a, k - e, e),
    e = 1,
    i = c,
    f = c.canMatch,
    g = c.placed,
    h = c.connecting;
    else if (k === j - 1 && f && h) for (b = k - e + 1; k >= b; b++) d[b].connecting = !1;
    else {
        if (f && h) for (b = k - e + 1; k >= b; b++) d[b].connecting = !1;
        e = 1,
        i = c,
        f = c.canMatch,
        g = c.placed,
        h = c.connecting
    }
},
Objects.prototype.CheckDeadOrbs = function() {
    for (var a = 0; a < this.paths.length; a++) for (var b = this.paths[a].orbs, c = 0; c < b.length; c++) {
        for (var d = b[c], e = 0; null != d && d.dying && d.deathTimer > Orb.ORB_DEATH_WAIT && (!(e > 0) || d.matches(b[c + e - 1]));) e++,
        d = c + e < b.length ? b[c + e] : null;
        if (e > 0) {
            var f = b[c],
            g = b[c + e - 1],
            h = c > 0 ? b[c - 1] : null,
            i = c + e < b.length ? b[c + e] : null,
            j = null != h && h.matches(f) || null != i && i.matches(g);
            if (!j && e >= 3) return void this.HandleMatch(b, a, c, e);
            if (j) {
                if (j && e >= 3) {
                    for (var k = c; null != h && f.connected && h.matches(f);) k--,
                    e++,
                    f = h,
                    h = k > 0 ? b[k - 1] : 0,
                    f.dying = !0,
                    f.deathTimer = Orb.ORB_DEATH_WAIT;
                    for (; null != i && i.connected && i.matches(g);) e++,
                    g = i,
                    i = k + e > b.length ? b[k + e] : 0,
                    g.dying = !0,
                    g.deathTimer = Orb.ORB_DEATH_WAIT
                }
            } else for (var l = 0; e > l; l++) b[c + l].deathTimer = 0,
            b[c + l].dying = !1;
            c += e - 1
        }
    }
},
Objects.prototype.HandleMatch = function(a, b, c, d) {
    var e, f, g, h, i = a[c + Math.floor(.5 * d)].pos,
    j = a[c + Math.floor(.5 * d)].position,
    k = a[c + Math.floor(.5 * d)].pathPos;
    if (this.state.stage_stats.combos++, this.state.stage_stats.chains++, this.state.stage_params.IsInstructions && 16 == this.state.tutorialSteps && (this.tutorialMatches++, 2 == this.tutorialMatches && this.state.tutorialSteps++), this.state.stage_stats.chains > 1 && (f = this.state.multipliersPool.getFirstDead(), f.reset(j.x, j.y), f.alpha = 1, f.scale.setTo(1), f.frame = this.state.stage_stats.chains - 1, this.multiAnimation(f), g = this.state.stage_stats.chains - 1, g > 9 && (g = 9), this.audioManager.playEffect("chain_combo0" + g)), this.audioManager.playEffect("orb_match"), this.state.score += POINTS_MATCH * d, this.state.stage_params.powerup_matches_needed > 0 && !this.state.stage_params.IsInstructions && this.state.stage_stats.chains % this.state.stage_params.powerup_matches_needed == 0) {
        for (this.audioManager.playEffect("powerup_appear"), this.CreatePowerUp(i, j, b, k), e = c; e >= 0; e--) {
            if (a[e].isPusher) {
                a[e].speed -= 16;
                break
            }
            if (!a[e].connected) {
                a[e].speed -= 16;
                break
            }
            0 == e && (a[e].speed -= 16)
        }
        h = a[c + d],
        h && h.connected && !h.isPusher && (h.speed += 14)
    }
    for (e = 0; d > e; e++) {
        var l = c + e + 1 < a.length ? a[c + e + 1] : null;
        this.paths[b].remove(a[c + e]),
        a[c + e].destroyOrb(l, !0)
    }
    a.splice(c, d)
},
Objects.prototype.MarkDyingOrbs = function(a, b, c, d) {
    for (var e = 0; d > e; e++) a[c + e].dying = !0,
    a[c + e].canMatch = !1,
    a[c + e].deathTimer = 0,
    this.state.addOrbDeathEffect(a[c + e].x, a[c + e].y, a[c + e].colorID)
},
Objects.prototype.CheckChainOrb = function(a, b, c) {
    var d, e = 1,
    f = b;
    for (d = c + 1; d < a.length && f.matches(a[d]); d++) e++,
    f = a[d];
    for (f = b, d = c - 1; d >= 0 && f.matches(a[d]); d--) e++,
    f = a[d];
    3 > e && (this.state.stage_stats.chains = 0),
    this.state.stage_stats.combos = 0
},
Objects.prototype.UpdateUnconnectedOrb = function(a, b, c, d) {
    var e, f = d > 0 ? b[d - 1] : null,
    g = 1;
    f && a.matches(f) || f.isPusher && !a.isPusher ? (a.speed -= .5, a.update2(), a.connected = !1) : a.isPusher || (this.backwardActive ? a.speed = BACKWARDS_SPEED: a.speed > 0 ? (a.speed -= .5, a.speed < 0 && (a.speed = 0)) : a.speed < 0 && (a.speed += .5, a.speed > 0 && (a.speed = 0)), a.update2(), a.connected = !1);
    var h = !1;
    if (null !== f && a.pathPos <= f.pathPos + Orb.DELTA_PATH_POS * g) {
        if (a.speed < 0 && a.placed) for (e = d - 1; e >= 0; e--) {
            if (b[e].isPusher) {
                b[e].speed -= 8;
                break
            }
            if (!b[e].connected) {
                b[e].speed -= 8;
                break
            }
            0 == e && (b[e].speed -= 8)
        }
        a.pathPos = f.pathPos + Orb.DELTA_PATH_POS * g,
        h = this.HandlePathCollision(a, f, b, d, c)
    }
    return h
},
Objects.prototype.HandlePathCollision = function(a, b, c, d, e) {
    var f, g;
    a.canMatch = b.matches(a) && !a.connecting || a.canMatch,
    this.ClearConnectingStatus(c, d),
    a.connected = !0,
    this.audioManager.playEffect("orb_touch");
    for (var h = d; ! c[h].isPusher && c[h].connected && h > 0;) h--;
    var i = c[h],
    j = this.GetTargetSpeed(e, d);
    j > i.speed ? i.speed += .1 : i.speed -= .1;
    var k = a.isPusher;
    for (k && (g = d < c.length - 1 ? c[d + 1] : null, g.speed = a.speed, g && (g.connecting = !g.dying), this.audioManager.playEffect("orb_pusher_crushed"), this.paths[0].remove(a), a.destroyOrb(g, !0), c.splice(d, 1)), f = h; f < c.length && c[f].connected; f++) c[f].speed = i.speed;
    return k
},
Objects.prototype.getPusherSpeed = function(a, b, c) {
    var d, e = b[c],
    f = e.speed;
    return d = this.backwardActive ? BACKWARDS_SPEED: this.GetTargetSpeed(a, c),
    d > f ? f += .5 : (f -= .5, FINAL_MIN_SPEED > f && !this.backwardActive && (f = FINAL_MIN_SPEED)),
    this.slowActive ? f * SLOW_POWERUP: f
},
Objects.prototype.GetTargetSpeed = function(a, b) {
    var c, d, e, f, g = 0,
    h = this.paths[a].orbs;
    if (this.state.stage_failed) return GAMEOVER_SPEED;
    for (c = b + 1; h.length && (h[c] && h[c].connected); c++) g++;
    return d = h[b + g].pathPos,
    e = d / this.path.pathPoints.length,
    START_DASH > e && !h[b].doneStartRoll ? f = MAX_SPEED: (h[b].doneStartRoll = !0, f = (1 - e) * NORMAL_SPEED),
    FINAL_MIN_SPEED > f && (f = FINAL_MIN_SPEED),
    f
},
Objects.prototype.CreatePowerUp = function(a, b, c, d, e) {
    var f, g, h, i, j = new Phaser.Line(0, 0, 0, 0),
    k = _.find(this.parent.children,
    function(a) {
        return "orb-slinger" == a.name
    });
    switch (j.setTo(k.posX, k.posY, b.x, b.y), void 0 == e && j.fromAngle(b.x, b.y, j.angle, 1.5 * GameConstants.ORB_DIAMETER), i = this.state.powerupsPool.getFirstDead(), i.alive = !0, i.visible = !0, i.exists = !0, i.x = j.end.x, i.y = j.end.y, i.pos = a, i.lifetime = 0, f = i.armature.getBone("fire"), g = i.armature.getBone("slow"), h = i.armature.getBone("back"), f._visible = !1, g._visible = !1, h._visible = !1, void 0 == e ? i.type = this.game.rnd.between(0, 2) : i.type = e, i.type) {
    case 0:
        f._visible = !0;
        break;
    case 1:
        g._visible = !0;
        break;
    case 2:
        h._visible = !0
    }
    i.armature.gotoAndPlay("stand"),
    this.parent.add(i),
    this.powerups.push(i)
},
Objects.prototype.HandlePowerup = function(a, b) {
    var c, d;
    switch (a.alive = !1, a.visible = !1, a.exists = !1, this.state.powerupsPool.add(a), a.type) {
    case 0:
        this.audioManager.playEffect("powerup_fireball"),
        b.orbs[0] && (b.orbs[0].destroy(), b.orbs.shift()),
        c = Orb.getOrbFromPool(8),
        c.alive = !0,
        c.scale.setTo(0),
        c.visible = !1,
        c.inSlinger = !0,
        c.powerup = !0,
        c.speed = 1,
        c.colorID = 8,
        d = Phaser.Animation.generateFrameNames("anim_fire_", 1, 28, ".png"),
        c.animations.add("fireball", d),
        c.play("fireball", 15, !0),
        b.rotatingItems.add(c),
        b.orbs.unshift(c);
        break;
    case 1:
        this.audioManager.playEffect("powerup_slow"),
        this.state.slowAnimation.gotoAndPlay("in"),
        this.slowActive = !0,
        this.slowTimer.start();
        break;
    case 2:
        this.audioManager.playEffect("powerup_back"),
        this.backwardActive = !0,
        this.backwardTimer.start()
    }
},
Objects.prototype.tailFadeOut = function(a) {
    this.game.add.tween(a).to({
        alpha: 0
    },
    150, Phaser.Easing.Linear.None, !0, 0).onComplete.addOnce(function() {
        a.kill()
    },
    this)
},
Objects.prototype.multiAnimation = function(a) {
    var b, c, d;
    b = this.game.add.tween(a.scale).from({
        x: 0,
        y: 0
    },
    100, Phaser.Easing.Linear.None, !0, 0),
    b.onComplete.addOnce(function() {
        c = this.game.add.tween(a).to({
            y: a.y - 10
        },
        800, Phaser.Easing.Linear.None, !0, 0),
        c.onComplete.addOnce(function() {
            d = this.game.add.tween(a).to({
                alpha: 0
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            d.onComplete.addOnce(function() {
                a.kill()
            },
            this)
        },
        this)
    },
    this)
},
Objects.prototype.pauseObjects = function() {
    this.gamePaused = !0,
    this.slowTimer.running && this.slowTimer.pause(),
    this.backwardTimer.running && this.backwardTimer.pause(),
    this.waveTimer.running && this.waveTimer.pause()
},
Objects.prototype.resumeObjects = function() {
    this.gamePaused = !1,
    this.slowTimer.paused && this.slowTimer.resume(),
    this.backwardTimer.paused && this.backwardTimer.resume(),
    this.waveTimer.paused && this.waveTimer.resume()
},
Path = function(a, b) {
    Phaser.Group.call(this, a, null, "orbs-container", !1),
    this.orbs = [],
    this.waves = [];
    var c = "level_" + b + "_path";
    this.pathPoints = a.cache.getJSON(c)
},
Path.prototype = Object.create(Phaser.Group.prototype),
Path.prototype.constructor = Path,
StageStats = function(a, b) {},
StageStats.prototype.Update = function() {},
ButterFly = function(a, b, c) {
    Phaser.Image.call(this, a, b, c, "ui_atlas_mainmenu", null),
    this.vel = new Phaser.Point(0, 0),
    this.makey = Math.random(),
    this.anchor.setTo(.5, .5),
    this.animations.add("fly", Phaser.Animation.generateFrameNames("butterfly_", 0, 19, ".png", 4), 14, !0),
    this.game.time.events.add(500 * Math.random(),
    function() {
        this.animations.play("fly", 60 + 50 * Math.floor(Math.random()), !0, !1)
    },
    this),
    this.blendMode = 3
},
ButterFly.prototype = Object.create(Phaser.Image.prototype),
ButterFly.prototype.constructor = ButterFly,
ButterFliesEffect = function(a) {
    var b, c;
    for (Phaser.Group.call(this, a, null, "butterflies-effect", !1), this.tDelta = .0085, this.butterflyTtarget = new Phaser.Point( - 200, 200), b = 0; 10 > b; b++) c = new ButterFly(this.game, this.butterflyTtarget.x + 75 * Math.random(), this.butterflyTtarget.y + 75 * Math.random()),
    this.add(c);
    this.changeTarget(),
    this.game.time.events.loop(3500, this.changeTarget, this)
},
ButterFliesEffect.prototype = Object.create(Phaser.Group.prototype),
ButterFliesEffect.prototype.constructor = ButterFliesEffect,
ButterFliesEffect.prototype.changeTarget = function() {
    this.butterflyTtarget = new Phaser.Point(40 + 560 * Math.random(), 40 + 400 * Math.random())
},
ButterFliesEffect.prototype.getNearestButterFly = function(a, b, c) {
    var d, e, f, g = -1,
    h = 1e4;
    for (null == c && (c = -1), d = 0; d < this.length && d !== c; d++) e = this.getAt(d),
    f = Phaser.Math.distance(a.x, a.y, e.x, e.y),
    h > f && b >= f && (h = f, g = d);
    return - 1 === g ? null: this.getAt(g)
},
ButterFliesEffect.prototype.update = function() {
    var a, b, c, d, e, f;
    for (Phaser.Group.prototype.update.call(this), a = 0; a < this.length; a++) b = this.getAt(a),
    e = .2 + (20 + a % 7) / 20,
    b.makey += e + this.tDelta,
    b.makey > 3 && (b.makey -= 3),
    f = .1 + a % 13 / 13,
    e *= .25 + .75 * Math.pow(1 + Math.cos(a + f * b.makey * Math.PI * 2), 2),
    d = new Phaser.Point(this.butterflyTtarget.x - b.x, this.butterflyTtarget.y - b.y),
    d = Phaser.Point.normalize(d),
    b.vel = Phaser.Point.add(b.vel, d.multiply(170 * e * this.tDelta, 170 * e * this.tDelta)),
    c = this.getNearestButterFly(new Phaser.Point(b.x, b.y), 30, a),
    null != c && (d = new Phaser.Point(b.x, c.x, c.y - b.y), d = Phaser.Point.normalize(d), b.vel = Phaser.Point.add(b.vel, d.multiply(170 * e * this.tDelta, 170 * e * this.tDelta))),
    b.vel.getMagnitude() > 70 && (b.vel = Phaser.Point.normalize(b.vel), b.vel = b.vel.multiply(70, 70)),
    b.x += 2 * e * this.tDelta * b.vel.x,
    b.y += 2 * e * this.tDelta * b.vel.y,
    b.vel.x > 0 ? b.scale.setTo( - 1, 1) : b.scale.setTo(1, 1)
};
var Game = Game || {};
Game.BootState = function(a) {
    this.game = a
},
Game.BootState.prototype = {
    init: function() {
        this.input.maxPointers = 1,
        this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL,
        this.game.scale.pageAlignHorizontally = !0,
        this.game.scale.pageAlignVertically = !0,
        cifw.init(this.game),
        this.game.onPause.add(function() {
            var a = cifw.AudioManager.getInstance();
            try {
                a._playingMusic && a.pauseMusic()
            } catch(b) {
                console.log(b)
            }
        },
        this),
        this.game.onResume.add(function() {
            var a = cifw.AudioManager.getInstance();
            try {
                a._playingMusic || a.resumeMusic()
            } catch(b) {
                console.log(b)
            }
        },
        this)
    },
    preload: function() {
        this.load.image("loadingWindMill", "static/windmill.png"),
        this.load.image("preloaderBarBackground", "static/loading_bar_bg.png"),
        this.load.image("preloaderBar", "static/loading_bar.png"),
        this.load.image("preloaderLogo", "static/loading_logo.png"),
        this.load.image("gh_logo", "static/gh_logo.png")
    },
    create: function() {
        this.state.start("PreloaderState", !0, !1, "MainMenuState")
    }
},
Phaser.TileSprite.prototype.destroy = function(a) {
    Phaser.Component.Destroy.prototype.destroy.call(this, a),
    PIXI.Sprite.prototype.destroy.call(this),
    this.tileScale = null,
    this.tileScaleOffset = null,
    this.tilePosition = null
},
Game.PreloaderState = function(a) {
    cifw.PreloaderState.call(this, a)
},
Game.PreloaderState.prototype = Object.create(cifw.PreloaderState.prototype),
Game.PreloaderState.prototype.constructor = Game.PreloaderState,
Game.PreloaderState.prototype.preload = function() {
    cifw.PreloaderState.prototype.preload.call(this),
    this._preloadLocalizationFiles();
    var a = this;
    mainMenuMusic._loaded || (this.load._totalFileCount++, mainMenuMusic.on("load",
    function() {
        a.load._loadedFileCount++,
        a.fileLoaded(a.load.progress)
    }), mainMenuMusic.load()),
    forestMusic._loaded || (this.load._totalFileCount++, forestMusic.on("load",
    function() {
        a.load._loadedFileCount++,
        a.fileLoaded(a.load.progress)
    }), forestMusic.load()),
    swampMusic._loaded || (this.load._totalFileCount++, swampMusic.on("load",
    function() {
        a.load._loadedFileCount++,
        a.fileLoaded(a.load.progress)
    }), swampMusic.load()),
    this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.centerY), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
    this.add.existing(this._group),
    this.preloadBackground = new Phaser.Sprite(this.game, cifw.screen.DESIGN_WIDTH / 2, cifw.screen.DESIGN_HEIGHT / 2 + 30, "preloaderBarBackground"),
    this.preloadBar = new Phaser.Sprite(this.game, this.preloadBackground.x - this.preloadBackground.width / 2, cifw.screen.DESIGN_HEIGHT / 2 + 30, "preloaderBar"),
    this.preloadLogo = new Phaser.Sprite(this.game, .5 * cifw.screen.DESIGN_WIDTH, .5 * cifw.screen.DESIGN_HEIGHT - 100, "preloaderLogo"),
    this.preloadWindmill = new Phaser.Sprite(this.game, .5 * cifw.screen.DESIGN_WIDTH, .5 * cifw.screen.DESIGN_HEIGHT + 100, "loadingWindMill"),
    this.preloadBackground.anchor.setTo(.5, .5),
    this.preloadBar.anchor.setTo(0, .5),
    this.preloadLogo.anchor.setTo(.5),
    this.preloadWindmill.anchor.setTo(.5),
    this._group.add(this.preloadBackground),
    this._group.add(this.preloadBar),
    this._group.add(this.preloadLogo),
    this._group.add(this.preloadWindmill),
    this.game.add.tween(this.preloadWindmill).to({
        angle: this.preloadWindmill.angle + 360
    },
    2e3, Phaser.Easing.Linear.None, !0, 0, -1),
    this.load.onFileComplete.add(this.fileLoaded, this),
    this.load.setPreloadSprite(this.preloadBar)
},
Game.PreloaderState.prototype.fileLoaded = function(a) {
    if (100 == a) {
        if (!mainMenuMusic._loaded || !forestMusic._loaded || !swampMusic._loaded) return;
        if (this.preloadBar.cropEnabled = !1, this._initLocalization(), "GameplayState" == this._toState) this.game.time.events.add(500,
        function() {
            this.game.state.start(this._toState, !0, !1, 0)
        },
        this);
        else {
            this.game.add.tween(this.preloadBar).to({
                alpha: 0
            },
            500, Phaser.Easing.Linear.None, !0, 0),
            this.game.add.tween(this.preloadBackground).to({
                alpha: 0
            },
            500, Phaser.Easing.Linear.None, !0, 0);
            var b = this.game.add.tween(this.preloadWindmill).to({
                alpha: 0
            },
            500, Phaser.Easing.Linear.None, !0, 0);
            b.onComplete.addOnce(function() {
                var a = Game.LocalizationManager.getInstance(),
                b = this.game.add.bitmapText(this.preloadWindmill.x, this.preloadWindmill.y, "tutorial.fnt");
                b.fontSize = 35,
                b.setText(a.string("touch_start")),
                b.updateTransform(),
                b.pivot.x = .5 * b.textWidth,
                b.pivot.y = .5 * b.textHeight,
                this._group.add(b),
                this.game.add.tween(b).from({
                    alpha: 0
                },
                500, Phaser.Easing.Linear.None, !0, 0),
                this.game.add.tween(b).to({
                    y: b.y + 20
                },
                1500, Phaser.Easing.Quadratic.InOut, !0, 500, -1, !0),
                this.game.input.onDown.addOnce(function() {
                    var a = this.game.add.tween(this.preloadLogo).to({
                        alpha: 0
                    },
                    1500, Phaser.Easing.Linear.None, !0, 0);
                    this.game.add.tween(b).to({
                        alpha: 0
                    },
                    1500, Phaser.Easing.Linear.None, !0, 0),
                    a.onComplete.addOnce(function() {
                        var a = this.game.add.sprite(.5 * cifw.screen.DESIGN_WIDTH, .5 * cifw.screen.DESIGN_HEIGHT, "gh_logo");
                        a.anchor.setTo(.5),
                        this._group.add(a);
                        var b = this.game.add.tween(a).from({
                            alpha: 0
                        },
                        500, Phaser.Easing.Linear.None, !0, 0);
                        b.onComplete.addOnce(function() {
                            this.game.time.events.add(2e3,
                            function() {
                                var b = this.game.add.tween(a).to({
                                    alpha: 0
                                },
                                500, Phaser.Easing.Linear.None, !0, 0);
                                b.onComplete.addOnce(function() {
                                    this.game.state.start(this._toState)
                                },
                                this)
                            },
                            this)
                        },
                        this)
                    },
                    this)
                },
                this)
            },
            this)
        }
    }
},
Game.PreloaderState.prototype.update = function() {
    console.log()
},
Game.PreloaderState.prototype.create = function() {
    console.log()
},
Game.PreloaderState.prototype._preloadLocalizationFiles = function() {
    console.log("Preloading Localization Files");
    var a = Game.LocalizationManager.getInstance().getLanguage();
    this.game.load.json("localization_json", "static/strings.json")
},
Game.PreloaderState.prototype._initLocalization = function() {
    Game.LocalizationManager.getInstance().setLocalizationJson(this.game.cache.getJSON("localization_json"))
},
Game.MainMenuState = function(a) {
    this.game = a
},
Game.MainMenuState.prototype = {
    create: function() {
        this.audioManager = cifw.AudioManager.getInstance(),
        this.localization = Game.LocalizationManager.getInstance(),
        this.options = new Game.Options(this.game),
        this.butterfliesEffect = new ButterFliesEffect(this.game),
        dragonBones.game = this.game,
        this._bg = new cifw.ResponsiveBackground(this.game, "mm_bg", new Phaser.Point(.5, .5)),
        this.add.existing(this._bg),
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this.add.existing(this._group),
        this.overlay = this.game.make.tileSprite(0, 0, this.world.width, this.world.height, "black_bg", null),
        this.overlay.alpha = .5,
        this.overlay.visible = !1,
        this.add.existing(this.overlay);
        var a = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_mainmenu", "ui_atlas_mainmenu");
        this._group.visible = !1,
        this._group.add(a),
        this._group.add(this.butterfliesEffect),
        this._disableButtons(),
        ccs.actionManager.playActionByName("ui_json_mainmenu", "init"),
        this.game.time.events.add(500, this.initFinish, this),
        this.audioManager.switchMusic(mainMenuMusic),
        this.localization.localizeUILabel(a, "mm_play_bmp", "play"),
        this.localization.localizeUILabel(a, "mm_exit_bmp", "exit"),
        ccui.helper.seekWidgetByName(a, "mm_exit_button").visible = !1,
        ApiManager.getInstance().trackScreen("MainMenu")
    },
    resize: function() {
        this.overlay.width = this.world.width,
        this.overlay.height = this.world.height
    },
    initFinish: function() {
        this._group.visible = !0,
        ccs.actionManager.playActionByName("ui_json_mainmenu", "in", this._onTransitionFinished, this)
    },
    _onTransitionFinished: function(a) {
        "mm_play_button" == a.name && (this._enableButtons(), ccui.helper.addTouchCallback(this._widget, "mm_play_button", this._gotoGameplay, this), ccui.helper.addTouchCallback(this._widget, "mm_options_button", this._gotoSettings, this), ccui.helper.addTouchCallback(this._widget, "mm_exit_button", this._gotoExit, this))
    },
    _gotoGameplay: function() {
        ApiManager.getInstance().trackEvent("Menu", "Press", "Button.GameStart"),
        this._disableButtons(),
        this.audioManager.playEffect("play_button"),
        ccs.actionManager.playActionByName("ui_json_mainmenu", "out", this._toGameplayTransition, this)
    },
    _toGameplayTransition: function(a) {
        "mm_image_logo" == a.name && this.game.state.start("PreloaderState", !0, !1, "GameplayState")
    },
    _gotoSettings: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.options.openOptions("options", 0, this.overlay, this._group),
        this.options.closeSignal.add(this._closeOptions, this)
    },
    _closeOptions: function() {
        this._enableButtons(),
        this.overlay.visible = !1
    },
    _gotoExit: function() {},
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "mm_play_button"),
        ccui.helper.disableTouch(this._widget, "mm_options_button")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "mm_play_button"),
        ccui.helper.enableTouch(this._widget, "mm_options_button")
    },
    shutdown: function() {
        dragonBones.animation.WorldClock.clock.clear(),
        dragonBones.animation.AnimationState._clear()
    }
},
Game.GameState = function(a) {
    this.game = a,
    this.can_create_orbs_in_tutorial = !0
},
Game.GameState.prototype = {
    init: function(a) {
        var b, c;
        for (this.level = a, this.stage_params = {},
        this.stage_params.IsInstructions = 0 == this.level, Orb.loadFrameNames(), this.powerupsPool = this.game.make.group(null), c = 0; 15 > c; c++) b = new cifw.DragonBonesArmature(this.game, "gp_powerup_sk", "gp_powerup_atlas", "powerup", 0, 0),
        b.getDisplay().visible = !1,
        b.getDisplay().alive = !1,
        b.getDisplay().exists = !1,
        this.powerupsPool.add(b.getDisplay());
        this.gameStarted = !1,
        this.gamePaused = !1
    },
    create: function() {
        var a;
        switch (0 == this.level ? ApiManager.getInstance().trackScreen("Level.Tutorial") : ApiManager.getInstance().trackScreen("Level." + this.level), this.stage_failed = !1, this.stage_completed = !1, this.options = new Game.Options(this.game), this.audioManager = cifw.AudioManager.getInstance(), this.localization = Game.LocalizationManager.getInstance(), this.level) {
        case 0:
            this.audioManager.switchMusic(forestMusic);
            break;
        case 1:
            this.audioManager.switchMusic(forestMusic);
            break;
        case 2:
            this.audioManager.switchMusic(swampMusic);
            break;
        case 3:
            this.audioManager.switchMusic(forestMusic);
            break;
        case 4:
            this.audioManager.switchMusic(swampMusic);
            break;
        case 5:
            this.audioManager.switchMusic(forestMusic);
            break;
        case 6:
            this.audioManager.switchMusic(swampMusic);
            break;
        case 7:
            this.audioManager.switchMusic(forestMusic)
        }
        this.audioManager.stopMusic(),
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this.add.existing(this._group),
        a = "level_" + this.level + "_bg",
        this.backgroundImage = this.add.image(0, 0, a),
        this._group.add(this.backgroundImage);
        var b = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_gp", "ui_atlas_gp");
        this._group.visible = !1,
        this._group.add(b);
        var c = this._loadingWidget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_loading", "ui_atlas_loading");
        if (this.slinger = new Slinger(this.game, LEVELS[this.level].SLINGER_POSITION.x, LEVELS[this.level].SLINGER_POSITION.y), this._group.add(this.slinger), this.slingerController = new SlingerController(this.game, this.slinger), this.slingerController.backgroundImage = this.backgroundImage, this.levelTime = 0, this.waveNumberUI = ccui.helper.seekWidgetByName(this._widget, "gp_wavenumber_bmp"), this.waveTitleUI = ccui.helper.seekWidgetByName(this._widget, "gp_wave_bmp"), this.localization.localizeUILabel(null, this.waveNumberUI, "0 - " + LEVELS[this.level].WAVES, !0), this.localization.localizeUILabel(null, this.waveTitleUI, "wave"), this.waveTitleUI.alpha = 0, this.waveNumberUI.alpha = 0, this.overlay = this.game.make.tileSprite(0, 0, this.world.width, this.world.height, "black_bg", null), this.overlay.alpha = .5, this.overlay.visible = !1, this.add.existing(this.overlay), this._loadingGroup = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER), this.add.existing(this._loadingGroup), this._loadingGroup.add(c), this._loadingGroup.visible = !1, Game.GameState.s_gameState = this, this.stage_params.IsInstructions) {
            ccui.helper.seekWidgetByName(this._widget, "gp_title_bmp").visible = !1,
            this.dataManager = Game.DataManager.getInstance();
            var d = this._tutorialWidget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_tutorial", "ui_atlas_tutorial");
            d.visible = !1,
            this.dataManager.checkNewPlayer() || (ccui.helper.seekWidgetByName(d, "tutorial_skip_button").visible = !1),
            this.tutorialSteps = 0,
            this.tutorial1 = new cifw.DragonBonesArmature(this.game, "gp_tutorial1_sk", "gp_tutorial1_atlas", "tutorial", 450, 300),
            this.tutorial1.gotoAndPlay("stand"),
            this.tutorial1.getDisplay().visible = !1,
            this._group.add(this.tutorial1.getDisplay()),
            this.tutorial2 = new cifw.DragonBonesArmature(this.game, "gp_tutorial2_sk", "gp_tutorial2_atlas", "tutorial2", 180, 275),
            this.tutorial2.gotoAndPlay("stand"),
            this.tutorial2.getDisplay().visible = !1,
            this._group.add(this.tutorial2.getDisplay()),
            ccs.actionManager.playActionByName("ui_json_tutorial", "init"),
            this.localization.localizeUILabel(d, "skip_bmp", "skip"),
            this.localization.localizeUILabel(d, "tutorial_title_bmp", "how_to_play"),
            this.localization.localizeUILabel(d, "tutorial1_bmp", "tutorial_1"),
            this.localization.localizeUILabel(d, "tutorial2_bmp", "tutorial_2"),
            this.localization.localizeUILabel(d, "tutorial3_bmp", "tutorial_3"),
            this.localization.localizeUILabel(d, "tutorial4_bmp", "tutorial_4"),
            this.localization.localizeUILabel(d, "tutorial5_bmp", "tutorial_5"),
            this.localization.localizeUILabel(d, "tutorial6_bmp", "tutorial_6"),
            this.localization.localizeUILabel(d, "tutorial7_bmp", "tutorial_7")
        } else this.localization.localizeUILabel(this._widget, "gp_title_bmp", "level_" + this.level);
        this.slowAnimation = new cifw.DragonBonesArmature(this.game, "gp_slow_sk", "gp_slow_atlas", "slow", .5 * cifw.screen.DESIGN_WIDTH, .5 * cifw.screen.DESIGN_HEIGHT),
        this.nearHoleAnimation = new cifw.DragonBonesArmature(this.game, "gp_nearHole_sk", "gp_nearHole_atlas", "time", .5 * cifw.screen.DESIGN_WIDTH, .5 * cifw.screen.DESIGN_HEIGHT),
        this.slowAnimation.gotoAndPlay("init"),
        this.nearHoleAnimation.gotoAndPlay("init"),
        this._group.add(this.slowAnimation.getDisplay()),
        this._group.add(this.nearHoleAnimation.getDisplay()),
        this._disableButtons(),
        ccs.actionManager.playActionByName("ui_json_gp", "init"),
        ccs.actionManager.playActionByName("ui_json_loading", "init"),
        this.game.time.events.add(500, this._initFinish, this)
    },
    _initFinish: function() {
        this._group.visible = !0,
        ccs.actionManager.playActionByName("ui_json_gp", "in", this._onTransitionFinished, this),
        this.audioManager.playEffect("level_start")
    },
    _onTransitionFinished: function(a) {
        "gp_pause_button" == a.name && (ccui.helper.addTouchCallback(this._widget, "gp_pause_button", this._pauseGame, this), this.game.time.events.add(3e3,
        function() {
            var a = ccui.helper.seekWidgetByName(this._widget, "gp_title_pattern");
            this.game.add.tween(a).to({
                alpha: 0
            },
            300, Phaser.Easing.Linear.None, !0, 0).onComplete.addOnce(function() {
                a.visible = !1
            },
            this),
            this.stage_params.IsInstructions && ccs.actionManager.playActionByName("ui_json_tutorial", "in")
        },
        this), this.game.time.events.add(4e3,
        function() {
            this.gameStarted = !0,
            this._enableButtons(),
            this.audioManager.isMusicEnabled() && this.audioManager.playMusic(),
            this.stage_stats = new StageStats,
            this.stage_stats.chains = 0,
            this.stage_stats.combos = 0,
            this.stage_stats.orbs_destroyed = 0,
            this.stage_stats.orbs_been_in_hole = !1,
            this.stage_stats.orbs_in_hole = 0,
            this.stage_params.powerup_matches_needed = MATCHES_FOR_POWERUP,
            this.stage_stats.new_pusher_timers = [],
            this.orbsTailPool = this.game.make.group(null),
            this.orbsTailPool.name = "Tails-Pool",
            this.orbsTailPool.createMultiple(20, "gp_orbs_tail"),
            this._group.add(this.orbsTailPool),
            this.multipliersPool = this.game.make.group(null),
            this.multipliersPool.name = "Multi-pool",
            this.multipliersPool.createMultiple(10, "gp_multipliers"),
            Orb.createOrbsPool(this.game, this.level),
            this.objects = new Objects(this.game, this.level),
            this._group.add(this.objects),
            this._group.add(this.multipliersPool),
            this.slinger.gamePaused = !1,
            this.slinger.gameOver = !1,
            this.slinger.complete = !1,
            this.slingerController.complete = !1,
            this.slingerController.gameOver = !1,
            this.slingerController.gamePaused = !1,
            this.stage_params.IsInstructions && (this.tutorialSteps++, ccui.helper.addTouchCallback(this._tutorialWidget, "tutorial_skip_button", this.skipTutorial, this), this._group.add(this._tutorialWidget), this._tutorialWidget.visible = !0),
            "undefined" != typeof ACTIVATE_CHEATS && 1 == ACTIVATE_CHEATS && this._initializeCheats()
        },
        this))
    },
    resize: function() {
        this.overlay.width = this.world.width,
        this.overlay.height = this.world.height
    },
    _initializeCheats: function() {
        var a = this.make.sprite(0, 0, "gp_orbs");
        this.game.input.keyboard.addKey(Phaser.Keyboard.M).onDown.add(function() {
            this.game.state.start("MainMenuState")
        },
        this),
        this.game.input.keyboard.addKey(Phaser.Keyboard.Q).onDown.add(function() {
            a.type = 0,
            this.objects.HandlePowerup(a, this.slinger)
        },
        this),
        this.game.input.keyboard.addKey(Phaser.Keyboard.W).onDown.add(function() {
            a.type = 1,
            this.objects.HandlePowerup(a, this.slinger)
        },
        this),
        this.game.input.keyboard.addKey(Phaser.Keyboard.E).onDown.add(function() {
            a.type = 2,
            this.objects.HandlePowerup(a, this.slinger)
        },
        this),
        this.game.input.keyboard.addKey(Phaser.Keyboard.A).onDown.add(function() {
            this.stage_completed = !0,
            this.objects.completeScreen.openLevelComplete(this.level, this.levelTime, this.overlay),
            this.objects.completeScreen.nextLevelSignal.add(this.objects.toNextLevel, this.objects)
        },
        this),
        this.game.input.keyboard.addKey(Phaser.Keyboard.S).onDown.add(function() {
            this.stage_failed = !0
        },
        this),
        this.game.input.keyboard.addKey(Phaser.Keyboard.P).onDown.add(function() {
            this.game.paused = !0
        },
        this)
    },
    onFlyinOrbOutOfBounds: function(a) {
        this.objects.removeFlyingOrb(a),
        this.stage_stats.chains = 0,
        this.stage_stats.combos = 0
    },
    addOrbDeathEffect: function(a, b, c) {},
    skip: function() {
        this.game.state.start("MapState", !0, !1)
    },
    GetNumberOfPaths: function() {
        return 1
    },
    GetPathOrbs: function(a) {
        return null
    },
    GetNumberOfOrbs: function() {
        return 0
    },
    GetWaitingOrbs: function(a) {
        return null
    },
    update: function() {
        this.stage_failed && (this.slinger.gameOver = !0, this.slingerController.gameOver = !0),
        this.stage_completed && (this.slinger.gameOver = !0, this.slingerController.complete = !0),
        void 0 != this.slingerController && this.slingerController.update(),
        dragonBones.animation.WorldClock.clock.advanceTime(this.game.time.physicsElapsedMS / 1e3),
        this.stage_params.IsInstructions && (this.checkTutorialSteps(), this.stage_failed || (this.slinger.gameOver = !1, this.slingerController.gameOver = !1)),
        this.gameStarted && !this.gamePaused && (this.levelTime += .001 * this.game.time.physicsElapsedMS)
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "gp_pause_button")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "gp_pause_button")
    },
    _pauseGame: function() {
        this._disableButtons(),
        this.gamePaused = !0,
        this.objects.pauseObjects(),
        this.slinger.pauseSlinger(),
        this.slingerController.pauseSlingerController(),
        this.options.openOptions("pause", this.level, this.overlay),
        this.options.closeSignal.add(this._resumeGame, this),
        this.options.restartSignal.add(this._restartLevel, this),
        this.options.quitSignal.add(this._quitLevel, this)
    },
    _resumeGame: function() {
        this.overlay.visible = !1,
        this._enableButtons(),
        this.gamePaused = !1,
        this.objects.resumeObjects(),
        this.slinger.resumeSlinger(),
        this.slingerController.resumeSlingerController()
    },
    _restartLevel: function() {
        this.game.state.start("GameplayState", !0, !1, this.level)
    },
    _quitLevel: function() {
        this.game.state.start("MainMenuState")
    },
    shutdown: function() {
        dragonBones.animation.WorldClock.clock.clear(),
        dragonBones.animation.AnimationState._clear()
    },
    checkTutorialSteps: function() {
        var a;
        switch (this.tutorialSteps) {
        case 1:
            this.tutorial1.getDisplay().alpha = 0,
            this.tutorial1.getDisplay().visible = !0,
            a = this.game.add.tween(this.tutorial1.getDisplay()).to({
                alpha: 1
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorialSteps++
            },
            this);
            break;
        case 4:
            ccs.actionManager.playActionByName("ui_json_tutorial", "out"),
            a = this.game.add.tween(this.tutorial1.getDisplay()).to({
                alpha: 0
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorial1.getDisplay().visible = !1,
                this.tutorialSteps++
            },
            this);
            break;
        case 6:
            ccs.actionManager.playActionByName("ui_json_tutorial", "in2"),
            this.tutorial1.getDisplay().x = 440,
            this.tutorial1.getDisplay().y = 160,
            this.tutorial1.getDisplay().visible = !0,
            a = this.game.add.tween(this.tutorial1.getDisplay()).to({
                alpha: 1
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorialSteps++
            },
            this);
            break;
        case 9:
            ccs.actionManager.playActionByName("ui_json_tutorial", "out2"),
            a = this.game.add.tween(this.tutorial1.getDisplay()).to({
                alpha: 0
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorial1.getDisplay().visible = !1,
                this.tutorialSteps++
            },
            this);
            break;
        case 11:
            this.tutorial2.getDisplay().alpha = 0,
            this.tutorial2.getDisplay().visible = !0,
            ccs.actionManager.playActionByName("ui_json_tutorial", "in3"),
            a = this.game.add.tween(this.tutorial2.getDisplay()).to({
                alpha: 1
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorialSteps++
            },
            this);
            break;
        case 14:
            ccs.actionManager.playActionByName("ui_json_tutorial", "out3"),
            a = this.game.add.tween(this.tutorial2.getDisplay()).to({
                alpha: 0
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorial2.getDisplay().visible = !1,
                this.tutorialSteps++,
                ccs.actionManager.playActionByName("ui_json_tutorial", "in4")
            },
            this);
            break;
        case 17:
            this.tutorialSteps++,
            ccs.actionManager.playActionByName("ui_json_tutorial", "out4",
            function(a) {
                "tutorial_4" == a.name && this.tutorialSteps++
            },
            this);
            break;
        case 19:
            ccs.actionManager.playActionByName("ui_json_tutorial", "in5"),
            this.tutorialSteps++;
            break;
        case 21:
            this.tutorialSteps++,
            ccs.actionManager.playActionByName("ui_json_tutorial", "out5",
            function(a) {
                "tutorial_5" == a.name && this.tutorialSteps++
            },
            this);
            break;
        case 23:
            ccs.actionManager.playActionByName("ui_json_tutorial", "in6"),
            this.tutorial1.getDisplay().visible = !0,
            a = this.game.add.tween(this.tutorial1.getDisplay()).to({
                alpha: 1
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorialSteps++
            },
            this);
            break;
        case 25:
            var b = new Phaser.Point(440, 160);
            this.objects.CreatePowerUp(0, b, null, null, 0),
            this.tutorialSteps++;
            break;
        case 27:
            ccs.actionManager.playActionByName("ui_json_tutorial", "out6"),
            a = this.game.add.tween(this.tutorial1.getDisplay()).to({
                alpha: 0
            },
            200, Phaser.Easing.Linear.None, !0, 0),
            this.tutorialSteps++,
            a.onComplete.addOnce(function() {
                this.tutorial2.getDisplay().visible = !1,
                this.tutorialSteps++,
                ccs.actionManager.playActionByName("ui_json_tutorial", "in7")
            },
            this)
        }
    },
    skipTutorial: function() {
        ccui.helper.disableTouch(this._tutorialWidget, "tutorial_skip_button"),
        this.objects.paths[0].orbs.length = 0,
        this.objects.wave = LEVELS[this.level].WAVES,
        this.stage_completed = !1,
        this.tutorialSteps = 29
    }
},
Game.DataManager = function() {
    cifw.DataManager.call()
},
Game.DataManager.prototype = Object.create(cifw.DataManager.prototype),
Game.DataManager.prototype.constructor = Game.DataManager,
Game.DataManager.prototype.init = function() {
    return this._data = {},
    this.loadData(),
    !0
},
Game.DataManager.prototype.loadData = function() {
    var a = localStorage.getItem(cifw.config.NEW_PLAYER);
    this._exists(a) || this.saveBoolData(cifw.config.NEW_PLAYER, !1);
},
Game.DataManager.prototype.checkNewPlayer = function() {
    return this.loadBoolData(cifw.config.NEW_PLAYER)
},
Game.DataManager.prototype.tutorialPlayed = function() {
    this.saveBoolData(cifw.config.NEW_PLAYER, !0)
},
Game.DataManager.prototype.clearAllDataSaved = function() {
    localStorage.removeItem(cifw.config.NEW_PLAYER),
    this.loadData()
},
Game.DataManager._instance = null,
Game.DataManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new Game.DataManager, this._instance.init() ? this._instance: null)
};
var ApiManager = function() {
    this._api = null,
    this._pause = null,
    this._resume = null,
    this._callbackLoad = null,
    this._targetLoad = null,
    this._callbackContinue = null,
    this._targetContinue = null
};
ApiManager.prototype = {
    init: function() {
        return ! 0
    },
    loadAPI: function(a, b) {
        this._callbackLoad = a,
        this._targetLoad = b,
        this._api = new GamehouseAPI,
        this._api.initialize()
    },
    ghCallgbackAPIReady: function() {
        this._callbackLoad && this._targetLoad ? this._callbackLoad.call(this._targetLoad) : console.log("WARNING: You must define a callback function when GH API is ready!")
    },
    getLanguage: function() {
        return this._api.languageCode + "-" + this._api.countryCode
    },
    gameBreak: function(a, b) {
        this._pauseGame(),
        this._callbackContinue = a,
        this._targetContinue = b,
        this._api.fireGAMEBREAK()
    },
    ghCallbackGameContinue: function() {
        this._resumeGame(),
        this._callbackContinue && this._targetContinue ? this._callbackContinue.call(this._targetContinue) : console.log("WARNING: You must define a callback function when GH Gamebreak is ready!")
    },
    startGameDownload: function() {
        this._api.fireGAMEDOWNLOAD()
    },
    _pauseGame: function() {
        var a = cifw.AudioManager.getInstance();
        try {
            a._playingMusic && a.pauseMusic()
        } catch(b) {
            console.log(b)
        }
    },
    _resumeGame: function() {
        var a = cifw.AudioManager.getInstance();
        try {
            a._playingMusic || a.playMusic()
        } catch(b) {
            console.log(b)
        }
    },
    submitScore: function(a, b) {
        this._api.submitScore(a, b)
    },
    isCheatsEnabled: function() {
        return this._api.enableCheats === !0
    },
    showDownloadButton: function() {
        return this._api.showDownloadButton === !0
    },
    showIngameUpsell: function() {
        return this._api.showIngameUpsell === !0
    },
    trackScreen: function(a) {
        // ga("send", " screenview", {
        //     screenName: a
        // }),
        // console.log("============ APIManager: trackScreen() -> " + a)
    },
    trackEvent: function(a, b, c) {
        // console.log("============ APIManager: trackEvent() -> category: " + a + ", action: " + b + ", label:" + c),
        // a && b ? c ? ga("send", "event", a, b, c) : ga("send", "event", a, b) : console.log("ERROR: You need to send category and action to trackClick Method")
    }
},
ApiManager._instance = null,
ApiManager.getInstance = function() {
    return this._instance ? this._instance: (this._instance = new ApiManager, this._instance.init(), this._instance)
},
Game.LocalizationManager = function() {
    cifw.LocalizationManager.call()
},
Game.LocalizationManager.prototype = Object.create(cifw.LocalizationManager.prototype),
Game.LocalizationManager.prototype.constructor = Game.LocalizationManager,
Game.LocalizationManager.prototype.string = function(a) {
    var b = this._localizedStrings[a].text;
    return b ? b: (console.log("Error LocalizationManager: " + a + " is not defined for language: " + this._languageCode), "undefined")
},
Game.LocalizationManager.prototype.scale = function(a) {
    var b = this._localizedStrings[a];
    return b ? b.size ? b.size: 1 : (console.log("Error LocalizationManager: " + a + " is not defined for language: " + this._languageCode), "undefined")
},
Game.LocalizationManager.prototype.localizedNumber = function(a, b) {
    var c = b || 0;
    return this._number_format(a, c, this.string("number.decimal_separator"), this.string("number.thousands_separator"))
},
Game.LocalizationManager.prototype._number_format = function(a, b, c, d) {
    var e = isFinite( + a) ? +a: 0,
    f = isFinite( + b) ? Math.abs(b) : 0,
    g = "undefined" == typeof d ? ",": d,
    h = "undefined" == typeof c ? ".": c,
    i = function(a, b) {
        var c = Math.pow(10, b);
        return Math.round(a * c) / c
    },
    j = (f ? i(e, f) : Math.round(e)).toString().split(".");
    return j[0].length > 3 && (j[0] = j[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, g)),
    (j[1] || "").length < f && (j[1] = j[1] || "", j[1] += new Array(f - j[1].length + 1).join("0")),
    j.join(h)
},
Game.LocalizationManager._instance = null,
Game.LocalizationManager.getInstance = function() {
    return this._instance || (this._instance = new Game.LocalizationManager, this._instance.init()),
    this._instance
},
Game.Confirmation = function(a) {
    this.game = a
},
Game.Confirmation.prototype = {
    beginConfirmation: function(a, b) {
        var c = {
            x: .5 * cifw.screen.DESIGN_WIDTH,
            y: .5 * cifw.screen.DESIGN_HEIGHT
        };
        this.parentOverlay = b,
        this.audioManager = cifw.AudioManager.getInstance(),
        this.localization = Game.LocalizationManager.getInstance(),
        this._popUpGroup = new cifw.ResponsiveGroup(this.game, new Phaser.Point(c.x, c.y), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this._popUpGroup.alpha = 0,
        this.game.add.existing(this._popUpGroup),
        this.acceptSignal = new Phaser.Signal,
        this.cancelSignal = new Phaser.Signal;
        var d = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_confirmation", "ui_atlas_confirmation");
        this._popUpGroup.add(d),
        ccs.actionManager.playActionByName("ui_json_confirmation", "init"),
        this.game.time.events.add(100, this.onTransitionFinished, this),
        this.localizeUI(a)
    },
    localizeUI: function(a) {
        switch (a) {
        case "resetData":
            this.localization.localizeUILabel(this._widget, "conf_description_bmp", "reset_conf");
            break;
        case "restartGame":
            this.localization.localizeUILabel(this._widget, "conf_description_bmp", "restart_conf");
            break;
        case "quitGame":
            this.localization.localizeUILabel(this._widget, "conf_description_bmp", "quit_conf")
        }
        this.localization.localizeUILabel(this._widget, "conf_yes_bmp", "yes"),
        this.localization.localizeUILabel(this._widget, "conf_no_bmp", "no")
    },
    onTransitionFinished: function() {
        this._popUpGroup.alpha = 1,
        this.parentOverlay.visible = !0,
        this._disableButtons(),
        ccs.actionManager.playActionByName("ui_json_confirmation", "in", this._addTouchListeners, this)
    },
    _addTouchListeners: function(a) {
        "conf_bg" == a.name && (this._enableButtons(), ccui.helper.addTouchCallback(this._widget, "conf_no_button", this.cancel, this), ccui.helper.addTouchCallback(this._widget, "conf_yes_button", this.accept, this))
    },
    cancel: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName("ui_json_confirmation", "out",
        function(a) {
            "conf_bg" == a.name && (this._popUpGroup.destroy(), this.cancelSignal.dispatch(this))
        },
        this)
    },
    accept: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName("ui_json_confirmation", "out",
        function(a) {
            "conf_bg" == a.name && (this._popUpGroup.destroy(), this.acceptSignal.dispatch(this))
        },
        this)
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "conf_no_button"),
        ccui.helper.disableTouch(this._widget, "conf_yes_button")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "conf_no_button"),
        ccui.helper.enableTouch(this._widget, "conf_yes_button")
    }
},
Game.Deluxe = function(a) {
    this.game = a
},
Game.Deluxe.prototype = {
    openDeluxe: function(a) {
        this.parentOverlay = a,
        this.audioManager = cifw.AudioManager.getInstance(),
        this.localization = Game.LocalizationManager.getInstance(),
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this._group.alpha = 0,
        this.game.add.existing(this._group);
        var b = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_deluxe", "ui_atlas_deluxe");
        if (this._group.add(b), this.closeSignal = new Phaser.Signal, !ApiManager.getInstance().showDownloadButton()) {
            var c = ccui.helper.seekWidgetByName(b, "deluxe_download_button");
            c.visible = !1
        }
        this.localization.localizeUILabel(b, "deluxe_download_bmp", "download"),
        this.localization.localizeUILabel(b, "deluxe_close_bmp", "close"),
        this.localization.localizeUILabel(b, "deluxe_description1", "feature_1"),
        this.localization.localizeUILabel(b, "deluxe_description2", "feature_2"),
        this.localization.localizeUILabel(b, "deluxe_description3", "feature_3"),
        this.localization.localizeUILabel(b, "deluxe_description4", "feature_4");
        var d = ccui.helper.seekWidgetByName(this._widget, "deluxe_description1"),
        e = ccui.helper.seekWidgetByName(this._widget, "deluxe_description2"),
        f = ccui.helper.seekWidgetByName(this._widget, "deluxe_description3"),
        g = ccui.helper.seekWidgetByName(this._widget, "deluxe_description4");
        d.__uiParent.alignLeft(),
        e.__uiParent.alignLeft(),
        f.__uiParent.alignLeft(),
        g.__uiParent.alignLeft(),
        d.x = 20,
        e.x = 20,
        f.x = 20,
        g.x = 20,
        ccs.actionManager.playActionByName("ui_json_deluxe", "init"),
        ApiManager.getInstance().trackScreen("UpsellInvitation"),
        this.game.time.events.add(100, this.onTransitionFinished, this)
    },
    onTransitionFinished: function() {
        this._group.alpha = 1,
        this.parentOverlay.visible = !0,
        ccs.actionManager.playActionByName("ui_json_deluxe", "in", this._addTouchListeners, this)
    },
    _addTouchListeners: function(a) {
        "deluxe_star1" == a.name && (ccui.helper.addTouchCallback(this._widget, "deluxe_download_button", this.download, this), ccui.helper.addTouchCallback(this._widget, "deluxe_close_button", this.gotoMainMenu, this))
    },
    gotoMainMenu: function() {
        this._disableButtons(),
        ApiManager.getInstance().trackEvent("Promo.gpn", "Call"),
        this.audioManager.playEffect("generic_button"),
        ApiManager.getInstance().gameBreak(this.backFromGameBreak, this)
    },
    backFromGameBreak: function() {
        ccs.actionManager.playActionByName("ui_json_deluxe", "out",
        function(a) {
            "deluxe_bg" == a.name && (this._group.destroy(), this.closeSignal.dispatch(this))
        },
        this)
    },
    download: function() {
        ApiManager.getInstance().startGameDownload()
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "deluxe_download_button"),
        ccui.helper.disableTouch(this._widget, "deluxe_close_button")
    }
},
Game.Credits = function(a) {
    this.game = a
},
Game.Credits.prototype = {
    openCredits: function(a) {
        this.parentOverlay = a,
        this.audioManager = cifw.AudioManager.getInstance(),
        this.localization = Game.LocalizationManager.getInstance(),
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this._group.alpha = 0,
        this.game.add.existing(this._group);
        var b = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_credits", "ui_atlas_credits");
        this._group.add(b),
        this.closeSignal = new Phaser.Signal,
        this.localization.localizeUILabel(b, "title1_bmp", "game_by"),
        this.localization.localizeUILabel(b, "title2_bmp", "html_version"),
        this.localization.localizeUILabel(b, "back_bmp", "back"),
        ccs.actionManager.playActionByName("ui_json_credits", "init"),
        this.game.time.events.add(100, this.onTransitionFinished, this)
    },
    onTransitionFinished: function() {
        this._group.alpha = 1,
        this.parentOverlay.visible = !0,
        ccs.actionManager.playActionByName("ui_json_credits", "in", this._addTouchListeners, this)
    },
    _addTouchListeners: function(a) {
        "bg" == a.name && ccui.helper.addTouchCallback(this._widget, "back_button", this.goBack, this)
    },
    goBack: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName("ui_json_credits", "out",
        function() {
            this._group.destroy(),
            this.closeSignal.dispatch(this)
        },
        this)
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "back_button")
    }
},
Game.Options = function(a) {
    this.game = a
},
Game.Options.prototype = {
    openOptions: function(a, b, c) {
        this.action = a,
        this.level = b,
        this.parentOverlay = c,
        this.audioManager = cifw.AudioManager.getInstance(),
        this.localization = Game.LocalizationManager.getInstance(),
        this.confirmation = new Game.Confirmation(this.game),
        this.credits = new Game.Credits(this.game),
        this.overlay = this.game.make.tileSprite(0, 0, this.game.world.width, this.game.world.height, "black_bg", null),
        this.overlay.alpha = .5,
        this.overlay.visible = !1,
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this._group.visible = !1,
        this.game.add.existing(this._group),
        this.game.add.existing(this.overlay),
        this.closeSignal = new Phaser.Signal,
        this.restartSignal = new Phaser.Signal,
        this.quitSignal = new Phaser.Signal;
        var d = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, "ui_json_options", "ui_atlas_options");
        this._group.add(d),
        this.audio = cifw.AudioManager.getInstance(),
        "pause" == a ? (this.localization.localizeUILabel(d, "options_title_bmp", "pause"), this.localization.localizeUILabel(d, "options_button1_bmp", "continue"), this.localization.localizeUILabel(d, "options_button2_bmp", "restart"), this.localization.localizeUILabel(d, "options_button3_bmp", "quit")) : (this.localization.localizeUILabel(d, "options_title_bmp", "settings"), this.localization.localizeUILabel(d, "options_button1_bmp", "credits"), this.localization.localizeUILabel(d, "options_button2_bmp", "reset"), this.localization.localizeUILabel(d, "options_button3_bmp", "back"));
        var e = ccui.helper.seekWidgetByName(this._widget, "options_music_button"),
        f = ccui.helper.seekWidgetByName(this._widget, "options_fx_button");
        this.audioManager.isMusicEnabled() ? (f.__uiParent.loadTextureNormal("button_fx_on.png"), f.__uiParent.loadTexturePressed("button_fx_on_press.png")) : (f.__uiParent.loadTextureNormal("button_fx_off.png"), f.__uiParent.loadTexturePressed("button_fx_off_press.png")),
        this.audioManager.isSfxEnabled() ? (e.__uiParent.loadTextureNormal("button_music_on.png"), e.__uiParent.loadTexturePressed("button_music_on_press.png")) : (e.__uiParent.loadTextureNormal("button_music_off.png"), e.__uiParent.loadTexturePressed("button_music_off_press.png")),
        ccs.actionManager.playActionByName("ui_json_options", "init"),
        this.game.time.events.add(100, this.onTransitionFinished, this)
    },
    resize: function() {
        this.darkOverlay.width = this.game.world.width,
        this.darkOverlay.height = this.game.world.height
    },
    onTransitionFinished: function() {
        this._group.visible = !0,
        this.parentOverlay.visible = !0,
        ccs.actionManager.playActionByName("ui_json_options", "in", this._addTouchListeners, this)
    },
    _addTouchListeners: function(a) {
        "options_bg" == a.name && (ccui.helper.addTouchCallback(this._widget, "options_fx_button", this.soundOff, this), ccui.helper.addTouchCallback(this._widget, "options_music_button", this.musicOff, this), "pause" == this.action ? (ccui.helper.addTouchCallback(this._widget, "options_button1", this.continueGame, this), ccui.helper.addTouchCallback(this._widget, "options_button2", this.restartGame, this), ccui.helper.addTouchCallback(this._widget, "options_button3", this.quitGame, this)) : (ccui.helper.addTouchCallback(this._widget, "options_button1", this.showCredits, this), ccui.helper.addTouchCallback(this._widget, "options_button2", this.resetData, this), ccui.helper.addTouchCallback(this._widget, "options_button3", this.back, this)))
    },
    soundOff: function() {
        var a = ccui.helper.seekWidgetByName(this._widget, "options_fx_button");
        this.audioManager.playEffect("generic_button"),
        this.audioManager.isSfxEnabled() ? (this.audioManager.switchSfxState(), a.__uiParent.loadTextureNormal("button_fx_off.png"), a.__uiParent.loadTexturePressed("button_fx_off_press.png")) : (this.audioManager.switchSfxState(), a.__uiParent.loadTextureNormal("button_fx_on.png"), a.__uiParent.loadTexturePressed("button_fx_on_press.png"))
    },
    musicOff: function() {
        var a = ccui.helper.seekWidgetByName(this._widget, "options_music_button");
        this.audioManager.playEffect("generic_button"),
        this.audioManager.isMusicEnabled() ? (this.audioManager.stopMusic(), this.audioManager.switchMusicState(), a.__uiParent.loadTextureNormal("button_music_off.png"), a.__uiParent.loadTexturePressed("button_music_off_press.png")) : (this.audioManager.switchMusicState(), this.audioManager.playMusic(), a.__uiParent.loadTextureNormal("button_music_on.png"), a.__uiParent.loadTexturePressed("button_music_on_press.png"))
    },
    continueGame: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName("ui_json_options", "out",
        function() {
            this.overlay.destroy(),
            this._group.destroy(),
            this.closeSignal.dispatch(this)
        },
        this)
    },
    restartGame: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.confirmation.beginConfirmation("restartGame", this.overlay),
        this.confirmation.cancelSignal.add(this.cancelRestart, this),
        this.confirmation.acceptSignal.add(this.acceptRestart, this)
    },
    cancelRestart: function() {
        this.game.time.events.add(200, this._enableButtons, this),
        this.overlay.visible = !1
    },
    acceptRestart: function() {
        this.overlay.visible = !1,
        ccs.actionManager.playActionByName("ui_json_options", "out",
        function() {
            this._group.destroy(),
            this.restartSignal.dispatch(this)
        },
        this)
    },
    quitGame: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.confirmation.beginConfirmation("quitGame", this.overlay),
        this.confirmation.cancelSignal.add(this.cancelQuit, this),
        this.confirmation.acceptSignal.add(this.acceptQuit, this)
    },
    cancelQuit: function() {
        this.game.time.events.add(200, this._enableButtons, this),
        this.overlay.visible = !1
    },
    acceptQuit: function() {
        this.overlay.visible = !1,
        ccs.actionManager.playActionByName("ui_json_options", "out",
        function() {
            this._group.destroy(),
            this.quitSignal.dispatch(this)
        },
        this)
    },
    showCredits: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.credits.openCredits(this.overlay),
        this.credits.closeSignal.add(this.backFromCredits, this)
    },
    backFromCredits: function() {
        this.game.time.events.add(200, this._enableButtons, this),
        this.overlay.visible = !1
    },
    back: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName("ui_json_options", "out", this.toMenu, this)
    },
    toMenu: function(a) { (a.name = "options_bg") && (this.closeSignal.dispatch(this), this._group.destroy())
    },
    resetData: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.confirmation.beginConfirmation("resetData", this.overlay),
        this.confirmation.cancelSignal.add(this.cancelReset, this),
        this.confirmation.acceptSignal.add(this.acceptReset, this)
    },
    cancelReset: function() {
        this.game.time.events.add(200, this._enableButtons, this),
        this.overlay.visible = !1
    },
    acceptReset: function() {
        Game.DataManager.getInstance().clearAllDataSaved(),
        this.game.time.events.add(300, this._enableButtons, this),
        this.overlay.visible = !1
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "options_button1"),
        ccui.helper.disableTouch(this._widget, "options_button2"),
        ccui.helper.disableTouch(this._widget, "options_button3"),
        ccui.helper.disableTouch(this._widget, "options_music_button"),
        ccui.helper.disableTouch(this._widget, "options_fx_button")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "options_button1"),
        ccui.helper.enableTouch(this._widget, "options_button2"),
        ccui.helper.enableTouch(this._widget, "options_button3"),
        ccui.helper.enableTouch(this._widget, "options_music_button"),
        ccui.helper.enableTouch(this._widget, "options_fx_button")
    }
},
Game.GameOver = function(a) {

    this.game = a,
    this.json = "ui_json_gameover",
    this.atlas = "ui_atlas_gameover"
},
Game.GameOver.prototype = {
    openGameOver: function(a, b) {
        this.level = a,
        this.parentOverlay = b,
        this.localization = Game.LocalizationManager.getInstance(),
        this.audioManager = cifw.AudioManager.getInstance(),
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this._group.visible = !1,
        this.game.add.existing(this._group);
        var c = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, this.json, this.atlas);
        this._group.add(c),
        this._disableButtons(),
        this.localization.localizeUILabel(this._widget, "go_title_bmp", "game_over"),
        this.localization.localizeUILabel(this._widget, "go_bmp", "level_" + this.level),
        this.localization.localizeUILabel(this._widget, "go_time_bmp", "failed"),
        this.localization.localizeUILabel(this._widget, "go_playagain_bmp", "play_again"),
        this.localization.localizeUILabel(this._widget, "go_close_bmp", "exit"),
        ccs.actionManager.playActionByName(this.json, "init"),
        this.game.time.events.add(100, this.onTransitionFinished, this)
    },
    onTransitionFinished: function() {
        this._group.visible = !0,
        this.parentOverlay.visible = !0,
        this.audioManager.playEffect("level_failed"),
        ccs.actionManager.playActionByName(this.json, "in", this._addTouchListeners, this)
    },
    _addTouchListeners: function(a) {
        "go_bg" == a.name && (this._enableButtons(), ccui.helper.addTouchCallback(this._widget, "go_playagain_button", this._playAgain, this), ccui.helper.addTouchCallback(this._widget, "go_close_button", this._mainMenu, this))
    },
    _playAgain: function() {mobConfig.stop(),
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName(this.json, "out", this._toGameplay, this)
    },
    _toGameplay: function(a) {
        "go_bg" == a.name && this.game.state.start("GameplayState", !0, !1, this.level)
    },
    _mainMenu: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        ccs.actionManager.playActionByName(this.json, "out", this._toMainMenu, this)
    },
    _toMainMenu: function(a) {
        "go_bg" == a.name && this.game.state.start("MainMenuState")
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "go_playagain_button"),
        ccui.helper.disableTouch(this._widget, "go_close_button")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "go_playagain_button"),
        ccui.helper.enableTouch(this._widget, "go_close_button")
    }
},
Game.LevelComplete = function(a) {

    this.game = a,
    this.json = "ui_json_completed",
    this.atlas = "ui_atlas_completed"
},
Game.LevelComplete.prototype = {
    openLevelComplete: function(a, b, c) {

        var d, e;
        this.level = a,
        this.time = b,
        this.parentOverlay = c,
        this.localization = Game.LocalizationManager.getInstance(),
        this.audioManager = cifw.AudioManager.getInstance(),
        this.confirmation = new Game.Confirmation(this.game),
        this.deluxe = new Game.Deluxe(this.game),
        this.nextLevelSignal = new Phaser.Signal,
        this.overlay = this.game.make.tileSprite(0, 0, this.game.world.width, this.game.world.height, "black_bg", null),
        this.overlay.alpha = .5,
        this.overlay.visible = !1,
        this._group = new cifw.ResponsiveGroup(this.game, new Phaser.Point(this.game.world.centerX, this.game.world.height), cifw.screen.HORIZONTAL_ALIGNMENT.CENTER, cifw.screen.VERTICAL_ALIGNMENT.CENTER),
        this._group.visible = !1,
        this.game.add.existing(this._group);
        var f = this._widget = ccs.uiReader.widgetFromJsonFile(this.game, this.json, this.atlas);
        this._group.add(f),
        this._disableButtons(),
        this.localization.localizeUILabel(f, "lc_title_bmp", "level_completed"),
        this.localization.localizeUILabel(f, "lc_time_bmp", "time"),
        this.localization.localizeUILabel(f, "lc_playagain_bmp", "quit"),
        this.localization.localizeUILabel(f, "lc_close_bmp", "next_level"),
        this.localization.localizeUILabel(this._widget, "lc_lvl_bmp", "level_" + this.level),
        d = Math.floor(this.time / 60),
        10 > d && (d = "0" + d),
        e = Math.floor(this.time - 60 * d),
        10 > e && (e = "0" + e),
        this.localization.localizeUILabel(this._widget, "lc_timenumeber_bmp", d + " : " + e, !0),
        ccs.actionManager.playActionByName(this.json, "init"),
        this.game.time.events.add(100, this.onTransitionFinished, this)
    },
    resize: function() {
        this.darkOverlay.width = this.game.world.width,
        this.darkOverlay.height = this.game.world.height
    },
    onTransitionFinished: function() {
        this._group.visible = !0,
        this.parentOverlay.visible = !0,
        this.audioManager.playEffect("level_completed"),
        ccs.actionManager.playActionByName(this.json, "in", this._addTouchListeners, this)
    },
    _addTouchListeners: function(a) {
        "lc_bg" == a.name && (this._enableButtons(), ccui.helper.addTouchCallback(this._widget, "lc_playagain_button", this._mainMenu, this), ccui.helper.addTouchCallback(this._widget, "lc_close_button", this._nextLevel, this))
    },
    _nextLevel: function() {mobConfig.stop(),
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.level < 7 ? ApiManager.getInstance().gameBreak(this.backFromGameBreak, this) : ApiManager.getInstance().showIngameUpsell() ? this._toDeluxe() : ccs.actionManager.playActionByName(this.json, "out", this._toNextLevel, this)
    },
    backFromGameBreak: function() {
        ccs.actionManager.playActionByName(this.json, "out", this._toNextLevel, this)
    },
    _toDeluxe: function() {
        this.deluxe.openDeluxe(this.overlay),
        this.deluxe.closeSignal.add(this.acceptQuit, this)
    },
    _toNextLevel: function(a) {
        "lc_bg" == a.name && this.nextLevelSignal.dispatch()
    },
    _mainMenu: function() {
        this._disableButtons(),
        this.audioManager.playEffect("generic_button"),
        this.confirmation.beginConfirmation("quitGame", this.overlay),
        this.confirmation.cancelSignal.add(this.cancelQuit, this),
        this.confirmation.acceptSignal.add(this.acceptQuit, this)
    },
    cancelQuit: function() {
        this.game.time.events.add(200, this._enableButtons, this),
        this.overlay.visible = !1
    },
    acceptQuit: function() {
        this.overlay.visible = !1,
        ccs.actionManager.playActionByName(this.json, "out", this._toMainMenu, this)
    },
    _toMainMenu: function(a) {
        "lc_bg" == a.name && this.game.state.start("MainMenuState")
    },
    _disableButtons: function() {
        ccui.helper.disableTouch(this._widget, "lc_close_button"),
        ccui.helper.disableTouch(this._widget, "lc_playagain_button")
    },
    _enableButtons: function() {
        ccui.helper.enableTouch(this._widget, "lc_close_button"),
        ccui.helper.enableTouch(this._widget, "lc_playagain_button")
    }
},
cifw.config.GAME_DATA_PREFIX = "sparkle2_",
cifw.config.NEW_PLAYER = cifw.config.GAME_DATA_PREFIX + "new_player",
cifw.config.DEBUG_DRAW = !1,
cifw.config.language = "en-US",
cifw.screen.DESIGN_WIDTH = 640,
cifw.screen.DESIGN_HEIGHT = 480,
cifw.screen.BACKGROUND_WIDTH = 640,
cifw.screen.BACKGROUND_HEIGHT = 480,
cifw.screen.DESIGN_ORIENTATION = cifw.screen.ORIENTATION.LANDSCAPE,
cifw.screen.SHOW_ROTATION_SCREEN = !1,
cifw.screen.POLICY = cifw.screen.RESOLUTION_POLICY.NONE,
cifw.config.LICENSED = !1;
var res = {
    mm_bg: {
        key: "mm_bg",
        url: "static/mm_bg.png"
    },
    black_bg: {
        key: "black_bg",
        url: "static/black_bg.png"
    },
    achievements_json: {
        key: "achievements_json",
        url: "static/achievements.json"
    },
    ui_json_confirmation: {
        key: "ui_json_confirmation",
        url: "static/UI_confirmation.ExportJson"
    },
    ui_atlas_confirmation: {
        key: "ui_atlas_confirmation",
        texture: "static/UI_confirmation.png",
        atlas: "static/UI_confirmation.json"
    },
    ui_json_credits: {
        key: "ui_json_credits",
        url: "static/UI_credits.ExportJson"
    },
    ui_atlas_credits: {
        key: "ui_atlas_credits",
        texture: "static/UI_credits.png",
        atlas: "static/UI_credits.json"
    },
    ui_json_completed: {
        key: "ui_json_completed",
        url: "static/UI_lc.ExportJson"
    },
    ui_atlas_completed: {
        key: "ui_atlas_completed",
        texture: "static/UI_lc.png",
        atlas: "static/UI_lc.json"
    },
    ui_json_gameover: {
        key: "ui_json_gameover",
        url: "static/UI_go.ExportJson"
    },
    ui_atlas_gameover: {
        key: "ui_atlas_gameover",
        texture: "static/UI_go.png",
        atlas: "static/UI_go.json"
    },
    ui_json_mainmenu: {
        key: "ui_json_mainmenu",
        url: "static/UI_mm.ExportJson"
    },
    ui_atlas_mainmenu: {
        key: "ui_atlas_mainmenu",
        texture: "static/UI_mm.png",
        atlas: "static/UI_mm.json"
    },
    ui_json_options: {
        key: "ui_json_options",
        url: "static/UI_options.ExportJson"
    },
    ui_atlas_options: {
        key: "ui_atlas_options",
        texture: "static/UI_options.png",
        atlas: "static/UI_options.json"
    },
    ui_json_gp: {
        key: "ui_json_gp",
        url: "static/UI_gp.ExportJson"
    },
    ui_atlas_gp: {
        key: "ui_atlas_gp",
        texture: "static/UI_gp.png",
        atlas: "static/UI_gp.json"
    },
    ui_json_deluxe: {
        key: "ui_json_deluxe",
        url: "static/UI_deluxe.ExportJson"
    },
    ui_atlas_deluxe: {
        key: "ui_atlas_deluxe",
        texture: "static/UI_deluxe.png",
        atlas: "static/UI_deluxe.json"
    },
    ui_json_tutorial: {
        key: "ui_json_tutorial",
        url: "static/UI_tutorial.ExportJson"
    },
    ui_atlas_tutorial: {
        key: "ui_atlas_tutorial",
        texture: "static/UI_tutorial.png",
        atlas: "static/UI_tutorial.json"
    },
    ui_json_loading: {
        key: "ui_json_loading",
        url: "static/UI_loading.ExportJson"
    },
    ui_atlas_loading: {
        key: "ui_atlas_loading",
        texture: "static/UI_loading.png",
        atlas: "static/UI_loading.json"
    },
    gp_orbs: {
        key: "gp_orbs",
        texture: "static/gp_orbs.png",
        atlas: "static/gp_orbs.json"
    },
    gp_slinger: {
        key: "gp_slinger",
        texture: "static/gp_slinger.png",
        atlas: "static/gp_slinger.json"
    },
    gp_roots: {
        key: "gp_roots",
        texture: "static/gp_roots.png",
        atlas: "static/gp_roots.json"
    },
    gp_orbs_exp: {
        key: "gp_orbs_exp",
        texture: "static/anim_exp.png",
        atlas: "static/anim_exp.json"
    },
    gp_orbs_tail: {
        key: "gp_orbs_tail",
        texture: "static/gp_orbs_tail.png",
        atlas: "static/gp_orbs_tail.json"
    },
    gp_multipliers: {
        key: "gp_multipliers",
        texture: "static/gp_multipliers.png",
        atlas: "static/gp_multipliers.json"
    },
    gp_fireball: {
        key: "gp_fireball",
        texture: "static/anim_fire.png",
        atlas: "static/anim_fire.json"
    },
    gp_powerup_sk: {
        key: "gp_powerup_sk",
        url: "static/db_powerup_sk.json"
    },
    gp_powerup_atlas: {
        key: "gp_powerup_atlas",
        texture: "static/db_powerup.png",
        atlas: "static/db_powerup.json"
    },
    gp_tutorial1_sk: {
        key: "gp_tutorial1_sk",
        url: "static/db_tutorial_sk.json"
    },
    gp_tutorial1_atlas: {
        key: "gp_tutorial1_atlas",
        texture: "static/db_tutorial.png",
        atlas: "static/db_tutorial.json"
    },
    gp_tutorial2_sk: {
        key: "gp_tutorial2_sk",
        url: "static/db_tutorial2_sk.json"
    },
    gp_tutorial2_atlas: {
        key: "gp_tutorial2_atlas",
        texture: "static/db_tutorial2.png",
        atlas: "static/db_tutorial2.json"
    },
    gp_nearHole_sk: {
        key: "gp_nearHole_sk",
        url: "static/db_time_sk.json"
    },
    gp_nearHole_atlas: {
        key: "gp_nearHole_atlas",
        texture: "static/db_time.png",
        atlas: "static/db_time.json"
    },
    gp_slow_sk: {
        key: "gp_slow_sk",
        url: "static/db_slow_sk.json"
    },
    gp_slow_atlas: {
        key: "gp_slow_atlas",
        texture: "static/db_slow.png",
        atlas: "static/db_slow.json"
    },
    white: {
        key: "white.fnt",
        texture: "static/white.png",
        fnt: "static/white.fnt"
    },
    black: {
        key: "black.fnt",
        texture: "static/black.png",
        fnt: "static/black.fnt"
    },
    buttons: {
        key: "buttons.fnt",
        texture: "static/buttons.png",
        fnt: "static/buttons.fnt"
    },
    description: {
        key: "description.fnt",
        texture: "static/description.png",
        fnt: "static/description.fnt"
    },
    title: {
        key: "title.fnt",
        texture: "static/title.png",
        fnt: "static/title.fnt"
    },
    tutorial: {
        key: "tutorial.fnt",
        texture: "static/tutorial.png",
        fnt: "static/tutorial.fnt"
    },
    font_white_gp: {
        key: "font_white_gp.fnt",
        texture: "static/font_white_gp.png",
        fnt: "static/font_white_gp.fnt"
    },
    font_description_number: {
        key: "font_description_number.fnt",
        texture: "static/font_description_number.png",
        fnt: "static/font_description_number.fnt"
    },
    font_white_number: {
        key: "font_white_number.fnt",
        texture: "static/font_white_number.png",
        fnt: "static/font_white_number.fnt"
    },
    level_0_path: {
        key: "level_0_path",
        url: "static/level_0.json"
    },
    level_1_path: {
        key: "level_1_path",
        url: "static/level_1.json"
    },
    level_2_path: {
        key: "level_2_path",
        url: "static/level_2.json"
    },
    level_3_path: {
        key: "level_3_path",
        url: "static/level_3.json"
    },
    level_4_path: {
        key: "level_4_path",
        url: "static/level_4.json"
    },
    level_5_path: {
        key: "level_5_path",
        url: "static/level_5.json"
    },
    level_6_path: {
        key: "level_6_path",
        url: "static/level_6.json"
    },
    level_7_path: {
        key: "level_7_path",
        url: "static/level_7.json"
    },
    level_0_bg: {
        key: "level_0_bg",
        url: "static/level_0.png"
    }
},
fonts = {
    baseFont: {
        name: "black.fnt",
        size: 30
    },
    "black.fnt": {
        name: res.black,
        size: 30
    },
    "white.fnt": {
        name: res.white,
        size: 30
    },
    "buttons.fnt": {
        name: res.buttons,
        size: 30
    },
    "description.fnt": {
        name: res.description,
        size: 30
    },
    "title.fnt": {
        name: res.title,
        size: 30
    },
    "tutorial.fnt": {
        name: res.tutorial,
        size: 30
    },
    "font_white_gp.fnt": {
        name: res.font_white_gp,
        size: 30
    },
    "font_description_number.fnt": {
        name: res.font_description_number,
        size: 30
    },
    "font_white_number.fnt": {
        name: res.font_white_number,
        size: 30
    }
},
stateResources = {
    MainMenuState: {
        image: [res.mm_bg, res.black_bg],
        json: [res.level_0_path, res.level_1_path, res.level_2_path, res.level_3_path, res.level_4_path, res.level_5_path, res.level_6_path, res.level_7_path, res.achievements_json, res.ui_json_mainmenu, res.ui_json_options, res.ui_json_credits, res.ui_json_confirmation],
        atlas: [res.ui_atlas_mainmenu, res.ui_atlas_options, res.ui_atlas_credits, res.ui_atlas_confirmation],
        bitmapFont: [res.white, res.black, res.buttons, res.description, res.title, res.tutorial, res.font_white_gp, res.font_description_number, res.font_white_number]
    },
    GameplayState: {
        image: [res.level_0_bg],
        json: [res.ui_json_gp, res.ui_json_gameover, res.ui_json_completed, res.ui_json_tutorial, res.ui_json_deluxe, res.ui_json_loading, res.gp_powerup_sk, res.gp_tutorial1_sk, res.gp_tutorial2_sk, res.gp_slow_sk, res.gp_nearHole_sk, res.level_0_path],
        atlas: [res.ui_atlas_gp, res.ui_atlas_gameover, res.ui_atlas_completed, res.ui_atlas_tutorial, res.ui_atlas_deluxe, res.ui_atlas_loading, res.gp_orbs, res.gp_slinger, res.gp_roots, res.gp_orbs_exp, res.gp_orbs_tail, res.gp_multipliers, res.gp_fireball, res.gp_powerup_atlas, res.gp_tutorial1_atlas, res.gp_tutorial2_atlas, res.gp_slow_atlas, res.gp_nearHole_atlas]
    }
},
PhaserGlobal = {
    hideBanner: !0
},
console = {};
console.log = function() {},
console.warn = function() {},
console.error = function() {};
var initgame = function() {
    var a = Phaser.AUTO; - 1 !== navigator.userAgent.indexOf("SM-T310") && (a = Phaser.CANVAS),
    ( - 1 !== navigator.userAgent.indexOf("MSIE") || -1 !== navigator.userAgent.indexOf("rv:")) && (a = Phaser.CANVAS);
    var b = new Phaser.Game(640, 480, a);
    b.state.add("BootState", Game.BootState),
    b.state.add("PreloaderState", Game.PreloaderState),
    b.state.add("MainMenuState", Game.MainMenuState),
    b.state.add("GameplayState", Game.GameState),
    ApiManager.getInstance().loadAPI(function() {
        var a = ApiManager.getInstance().getLanguage();
        "undefined" != typeof LINGUISTIC_LOCALIZATION_DEFAULT && (a = LINGUISTIC_LOCALIZATION_DEFAULT, console.log("Using Linguistic Build: " + a)),
        Game.LocalizationManager.getInstance().setLanguage(a),
        b.state.start("BootState")
    },
    this)
};
//# sourceMappingURL=game.min.map
