!function(){var t=function(){this.initialize(),this.init()};t.prototype=new createjs.Container,t.prototype.init=function(){this.face_mc=new createjs.Container,this.game_mc=new createjs.Container;var t=preload.getResult("bgChapter"),e=new createjs.Bitmap(t);e.scaleX=scaleGraphics,e.scaleY=scaleGraphics,e.w=e.image.width*e.scaleX,e.h=e.image.height*e.scaleY,this.addChild(e),this.addChild(this.game_mc),this.addChild(this.face_mc),this.curChapter=1,this.arButtons=[],this.chapter1=this.addObj("chapter1",512,360),this.chapter1.rotation=-7,this.game_mc.addChild(this.chapter1),this.chapter2=this.addObj("chapter2",_WO+512,360),this.chapter2.rotation=-7,this.game_mc.addChild(this.chapter2),this.chapter3=this.addObj("chapter3",2*_WO+512,360),this.chapter3.rotation=-7,this.game_mc.addChild(this.chapter3),this.chapter4=new ItemAchiev,this.chapter4.scaleX=scaleGraphics,this.chapter4.scaleY=scaleGraphics,this.chapter4.x=(3*_WO+512)*scaleGraphics,this.chapter4.y=360*scaleGraphics,this.chapter4.rotation=-7,this.game_mc.addChild(this.chapter4),this.btnMenu=this.add_button("menu",950*scaleGraphics,620*scaleGraphics,"ButtonMenu"),this.btnMenu.scaleX=.6,this.btnMenu.scaleY=.6,this.face_mc.addChild(this.btnMenu),this.btnPlay=this.add_button("play",500*scaleGraphics,600*scaleGraphics,"btnPlay"),this.face_mc.addChild(this.btnPlay),this.btnNext=this.add_button("next",900*scaleGraphics,430*scaleGraphics,"ButtonNext"),this.face_mc.addChild(this.btnNext),this.btnPrev=this.add_button("prev",124*scaleGraphics,430*scaleGraphics,"ButtonNext"),this.btnPrev.name="ButtonPrev",this.btnPrev.scaleX=-1*this.btnPrev.scaleX,this.face_mc.addChild(this.btnPrev),this.btnSound=new createjs.Container,this.btnSound.fname="btnSound",this.btnSound.x=955*scaleGraphics,this.btnSound.y=55*scaleGraphics,this.btnSound._selected=!1,this.btnSound.width=88*scaleGraphics,this.btnSound.height=85*scaleGraphics,this.btnSound.r=88*scaleGraphics/2,this.btnSound.rr=this.btnSound.r*this.btnSound.r,this.addChild(this.btnSound),this.arButtons.push(this.btnSound),this.btnSoundOn=this.add_button("sound",955*scaleGraphics,55*scaleGraphics,"ButtonSoundOn"),this.btnSoundOff=this.add_button("sound",955*scaleGraphics,55*scaleGraphics,"ButtonSoundOff"),this.btnSoundOn.name="btnSound",this.btnSoundOff.name="btnSound",this.medal=new ItemAnima("medal"),this.medal.sprite.stop(),this.medal.scaleX=scaleGraphics,this.medal.scaleY=scaleGraphics,this.medal.x=670*scaleGraphics,this.medal.y=520*scaleGraphics,this.face_mc.addChild(this.medal),this.lock=this.addObj("lock",510,600),this.face_mc.addChild(this.lock),this.refreshSound(),this.checkChapter(),this.touchHandler=this.touchHandler.bind(this),this.addEventListener("mousedown",this.touchHandler),this.addEventListener("pressmove",this.touchHandler),this.addEventListener("pressup",this.touchHandler)},t.prototype.addObj=function(t,e,s,i,h){i||(i=1),h||(h=1);var a=new createjs.Container,r=preload.getResult(t),c=new createjs.Bitmap(r);return c.x=-(c.image.width/2),c.y=-(c.image.height/2),a.addChild(c),a.scaleX=scaleGraphics*i,a.scaleY=scaleGraphics*h,a.x=e*scaleGraphics,a.y=s*scaleGraphics,a.w=c.image.width*a.scaleX,a.h=c.image.height*a.scaleY,a.name=t,a},t.prototype.add_button=function(t,e,s,i){var h=new createjs.Container;h.title=t,h.x=e,h.y=s,h.name=i;var a=preload.getResult(i),r=new createjs.Bitmap(a);return r.scaleX=scaleGraphics,r.scaleY=scaleGraphics,r.x=-r.image.width/2*r.scaleX,r.y=-r.image.height/2*r.scaleY,h.addChild(r),a=preload.getResult(i+"Activ"),h.over=new createjs.Bitmap(a),h.over.image&&(h.over.scaleX=scaleGraphics,h.over.scaleY=scaleGraphics,h.over.x=-h.over.image.width/2*h.over.scaleX,h.over.y=-h.over.image.height/2*h.over.scaleY,h.over.visible=!1,h.addChild(h.over)),h.r=r.image.width*r.scaleX/2,h.rr=h.r*h.r,h._selected=!1,h.w=r.image.width,h.h=r.image.height,this.arButtons.push(h),this.face_mc.addChild(h),h},t.prototype.clickSound=function(){options_sound?(options_sound=!1,options_music=!1,music_stop()):(options_sound=!0,options_music=!0,musicTheme="none",music_play("musicMenu")),this.refreshSound()},t.prototype.refreshSound=function(){options_sound?(this.btnSoundOn.visible=!0,this.btnSoundOff.visible=!1):(this.btnSoundOn.visible=!1,this.btnSoundOff.visible=!0)},t.prototype.checkChapter=function(){this.btnPrev.visible=!0,this.btnNext.visible=!0,this.medal.visible=!0,this.curChapter=Math.min(this.curChapter,4),this.curChapter=Math.max(this.curChapter,1),1==this.curChapter&&(this.btnPrev.visible=!1),4==this.curChapter&&(this.btnNext.visible=!1);var t="chapter"+this.curChapter;this.medal.sprite.gotoAndStop(login_obj[t]?1:0);var e="chapter"+(this.curChapter-1);1==this.curChapter?(this.btnPlay.visible=!0,this.lock.visible=!1):"chapter4"==t?(this.btnPlay.visible=!1,this.lock.visible=!1):login_obj[e]?(this.btnPlay.visible=!0,this.lock.visible=!1):(this.btnPlay.visible=!1,this.lock.visible=!0)},t.prototype.moveChapter=function(t){var e=_W,s=this;this.btnPlay.visible=!1,this.btnPrev.visible=!1,this.btnNext.visible=!1,this.medal.visible=!1,this.lock.visible=!1,"prev"==t?(this.curChapter--,createjs.Tween.get(this.chapter1).to({x:this.chapter1.x+e},500),createjs.Tween.get(this.chapter2).to({x:this.chapter2.x+e},500),createjs.Tween.get(this.chapter4).to({x:this.chapter4.x+e},500),createjs.Tween.get(this.chapter3).to({x:this.chapter3.x+e},500).call(function(){s.checkChapter()})):(this.curChapter++,createjs.Tween.get(this.chapter1).to({x:this.chapter1.x-e},500),createjs.Tween.get(this.chapter2).to({x:this.chapter2.x-e},500),createjs.Tween.get(this.chapter4).to({x:this.chapter4.x-e},500),createjs.Tween.get(this.chapter3).to({x:this.chapter3.x-e},500).call(function(){s.checkChapter()}))},t.prototype.clickObj=function(t){var e=t.name;if(t._selected=!1,t.over&&(t.over.visible=!1),"btnSound"==e)return void this.clickSound();if("ButtonPrev"==e)this.moveChapter("prev");else if("ButtonNext"==e)this.moveChapter("next");else if("ButtonMenu"==e)this.removeEventListener("mousedown",this.touchHandler),this.removeEventListener("pressmove",this.touchHandler),this.removeEventListener("pressup",this.touchHandler),showMenu();else if("btnPlay"==e)return 1==this.curChapter?(checkData(),HTML5API_levelStarted(),showGame(1)):2==this.curChapter?(checkData(),HTML5API_levelStarted(),showGame(9)):3==this.curChapter&&(checkData(),HTML5API_levelStarted(),showGame(23)),com.funtomic.GameOps.reportEvent("story_started",{story_id:this.curChapter}),com.funtomic.GameOps.levelStarted(this.curChapter),this.removeEventListener("mousedown",this.touchHandler),this.removeEventListener("pressmove",this.touchHandler),void this.removeEventListener("pressup",this.touchHandler)},t.prototype.checkButtons=function(t){for(var e=t.stageX,s=t.stageY,i=0;i<this.arButtons.length;i++){var h=this.arButtons[i];hit_test_rec(h,h.w,h.h,e,s)?h.visible&&0==h._selected&&(h._selected=!0,h.over&&(h.over.visible=!0)):h._selected&&(h._selected=!1,h.over&&(h.over.visible=!1))}},t.prototype.touchHandler=function(t){var e,s=t.type,i=(t.stageX,t.stageY,0);if("mousedown"==s||"pressmove"==s)this.checkButtons(t);else if("pressup"==s)for(i=0;i<this.arButtons.length;i++)if(e=this.arButtons[i],e.visible&&e._selected)return void this.clickObj(e)},window.ScrSelect=t}();