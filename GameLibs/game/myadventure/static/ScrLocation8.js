!function(){var e=function(){this.initialize(),this.init()};e.prototype=new createjs.Container,e.prototype.init=function(){this.face_mc=new createjs.Container,this.game_mc=new createjs.Container,this.cells_mc=new createjs.Container,this.lock_mc=new createjs.Container,this._gameOver,this.arButtons=[],this.arItems=[],this.arBgInvent=[],this.levelObj={},this.curObj,this.showLock,login_obj.location=8,this.bgDay=new ItemAnima("location1_6_daynight"),this.bgDay.scaleX=1.5*scaleGraphics,this.bgDay.scaleY=1.25*scaleGraphics,this.bgDay.x=400*scaleGraphics,this.bgDay.y=275*scaleGraphics,this.bgDay.sprite.gotoAndStop(login_obj["1_night"]?0:1),this.addChild(this.bgDay);var e=preload.getResult("location1_8");this.bgGame=new createjs.Bitmap(e),this.bgGame.scaleX=scaleGraphics,this.bgGame.scaleY=scaleGraphics,this.addChild(this.bgGame),this.addChild(this.game_mc),this.addChild(this.lock_mc),this.addChild(this.face_mc),this.face_mc.addChild(this.cells_mc),this.loadLevel(),this.touchHandler=this.touchHandler.bind(this),this.addEventListener("mousedown",this.touchHandler),this.addEventListener("pressmove",this.touchHandler),this.addEventListener("pressup",this.touchHandler)},e.prototype.loadLevel=function(){var e=new ItemAnima("animFire");e.scaleX=scaleGraphics,e.scaleY=scaleGraphics,e.x=875*scaleGraphics,e.y=185*scaleGraphics,e.sprite.gotoAndPlay("one"),this.game_mc.addChild(e),login_obj["1_8_keyTook"]||(this.key=this.addObj("l1_8_key",640,640),this.game_mc.addChild(this.key),this.arItems.push(this.key)),this.desk=this.addObj("l1_8_desk",350,435),this.game_mc.addChild(this.desk),this.arItems.push(this.desk),this.l1_8_gear1=this.addObj("l1_8_gear1",303,430),this.game_mc.addChild(this.l1_8_gear1),this.l1_8_gear2=this.addObj("l1_8_gear2",353,430),this.game_mc.addChild(this.l1_8_gear2),this.l1_8_gear3=this.addObj("l1_8_gear3",401,430),this.game_mc.addChild(this.l1_8_gear3),this.gateOpen=this.addObj("l1_8_gate1",730,465),this.game_mc.addChild(this.gateOpen),this.Arrow1=this.addObj("Strelka7",70,560),this.Arrow1.name="Arrow1",this.Arrow1._selected=!1,this.game_mc.addChild(this.Arrow1),this.Arrow2=this.addObj("Strelka2",900,520),this.Arrow2.name="Arrow2",this.Arrow2._selected=!1,this.game_mc.addChild(this.Arrow2),login_obj.l1_8_gateOpen||(this.gate=this.addObj("l1_8_gate2",857,420),this.game_mc.addChild(this.gate),this.Arrow2.visible=!1,this.gateOpen.visible=!1,login_obj["1_8_gear1Put"]||(this.l1_8_gear1.visible=!1),login_obj["1_8_gear2Put"]||(this.l1_8_gear2.visible=!1),login_obj["1_8_gear3Put"]||(this.l1_8_gear3.visible=!1));var t=this.addObj("l1_8_wheel",950,620);this.game_mc.addChild(t),login_obj.l1_8_gearTook||(this.gear2=this.addObj("l1_8_gear",170,480),this.game_mc.addChild(this.gear2),this.arItems.push(this.gear2)),this.arItems.push(this.Arrow1),this.arButtons.push(this.Arrow1),this.arItems.push(this.Arrow2),this.arButtons.push(this.Arrow2),this.hero=new ItemHero,this.hero._parent=this,this.hero.scaleY=scaleGraphics,this.game_mc.addChild(this.hero),6==login_obj.prevLoc?(this.hero.scaleX=-1*scaleGraphics,this.hero.x=800*scaleGraphics,this.hero.y=520*scaleGraphics):(this.hero.scaleX=1*scaleGraphics,this.hero.x=200*scaleGraphics,this.hero.y=560*scaleGraphics),this.textHero=new ItemText,this.textHero._parent=this,this.textHero.scaleX=scaleGraphics,this.textHero.scaleY=scaleGraphics,this.textHero.y=this.hero.y-100*scaleGraphics,this.hero.x<300*scaleGraphics?(this.textHero.oblachko.scaleX=-1,this.textHero.x=this.hero.x+200*scaleGraphics):this.textHero.x=this.hero.x-200*scaleGraphics,this.game_mc.addChild(this.textHero),login_obj.l1_8_gateOpen||(this.createMech(),this.hero.showText(),this.textHero.showText("emergence_1_8")),this.createCells(),this.loadInvent()},e.prototype.createMech=function(){this.showLock=!1;var e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,0.8)").drawRect(0,0,_W,_H),this.lock_mc.addChild(e);var t=this.addObj("location1_8_mech",_WO/2,_HO/2);this.lock_mc.addChild(t);var i=380,s=120*scaleGraphics,a=120*scaleGraphics;if(this.gear1Big=this.addObj("l1_8_gear1Big",360,i),this.lock_mc.addChild(this.gear1Big),this.gear2Big=this.addObj("l1_8_gear2Big",520,i),this.lock_mc.addChild(this.gear2Big),this.gear3Big=this.addObj("l1_8_gear3Big",680,i),this.lock_mc.addChild(this.gear3Big),login_obj["1_8_gear1Put"]);else{this.gear1Big.visible=!1;var h=new createjs.Container;h.name="gear1Put",h.x=360*scaleGraphics,h.y=i*scaleGraphics,h.w=s,h.h=a,this.lock_mc.addChild(h),this.arItems.push(h)}if(login_obj["1_8_gear2Put"]);else{this.gear2Big.visible=!1;var r=new createjs.Container;r.name="gear2Put",r.x=520*scaleGraphics,r.y=i*scaleGraphics,r.w=s,r.h=a,this.lock_mc.addChild(r),this.arItems.push(r)}if(login_obj["1_8_gear3Put"]);else{this.gear3Big.visible=!1;var o=new createjs.Container;o.name="gear3Put",o.x=680*scaleGraphics,o.y=i*scaleGraphics,o.w=s,o.h=a,this.lock_mc.addChild(o),this.arItems.push(o)}var l=this.add_button("close",835*scaleGraphics,135*scaleGraphics,"btnExit");this.lock_mc.addChild(l),this.arItems.push(l),this.lock_mc.visible=!1},e.prototype.createCells=function(){var e,t=0;for(t=0;8>t;t++){var e=this.addObj("Cell",944-120*t,688);e.alpha=0,e.empty=!0,this.cells_mc.addChild(e),this.arBgInvent.push(e)}},e.prototype.addObj=function(e,t,i,s,a){s||(s=1),a||(a=1);var h=new createjs.Container,r=preload.getResult(e),o=new createjs.Bitmap(r);return o.x=-(o.image.width/2),o.y=-(o.image.height/2),h.addChild(o),h.scaleX=scaleGraphics*s,h.scaleY=scaleGraphics*a,h.x=t*scaleGraphics,h.y=i*scaleGraphics,h.w=o.image.width*scaleGraphics,h.h=o.image.height*scaleGraphics,h.name=e,h.w<50&&(h.w=50),h.h<50&&(h.h=50),h},e.prototype.add_button=function(e,t,i,s){var a=new createjs.Container;a.title=e,a.x=t,a.y=i,a.name=s;var h=preload.getResult(s),r=new createjs.Bitmap(h);return r.scaleX=scaleGraphics,r.scaleY=scaleGraphics,r.x=-r.image.width/2*r.scaleX,r.y=-r.image.height/2*r.scaleY,a.addChild(r),h=preload.getResult(s+"Activ"),a.over=new createjs.Bitmap(h),a.over.image&&(a.over.scaleX=scaleGraphics,a.over.scaleY=scaleGraphics,a.over.x=-a.over.image.width/2*a.over.scaleX,a.over.y=-a.over.image.height/2*a.over.scaleY,a.over.visible=!1,a.addChild(a.over)),a.w=r.image.width*r.scaleX,a.h=r.image.height*r.scaleX,a.r=r.image.width*r.scaleX/2,a.rr=a.r*a.r,a._selected=!1,a.width=r.image.width,a.height=r.image.height,this.arButtons.push(a),a},e.prototype.pushObj=function(e){if(e){var t,i=0;for(i=0;i<this.arBgInvent.length&&(t=this.arBgInvent[i],!t.empty);i++);var s=this;t&&(createjs.Tween.get(t).to({alpha:1},200),createjs.Tween.get(e).to({x:t.x,y:t.y},300).call(function(){"l1_8_gear"==e.name?(login_obj.l1_8_gearTook=!0,reportFound(e.name,"Gear-4")):"l1_8_key"==e.name&&(login_obj["1_8_keyTook"]=!0,reportFound(e.name,"Red key")),invent_obj.push(e),s.removeFromArray(s.arItems,e.name),s.face_mc.addChild(e),s.refreshInvent()}))}},e.prototype.clickObj=function(e){var t=e.name,i=this;if(this.curObj)this.showLock&&("gear1Put"==t&&"i_l1_7_gear"==this.curObj.name&&(reportUsed("l1_7_gear","Gear-8"),this.removeFromArray(this.arItems,t),this.removeFromArray(invent_obj,this.curObj.name),this.face_mc.removeChild(this.curObj),this.refreshInvent(),login_obj["1_8_gear1Put"]=!0,this.l1_8_gear1.visible=!0,this.gear1Big.visible=!0,saveData()),"gear2Put"==t&&"i_l1_5_gear"==this.curObj.name&&(reportUsed("l1_5_gear","Gear-2"),this.removeFromArray(this.arItems,t),this.removeFromArray(invent_obj,this.curObj.name),this.face_mc.removeChild(this.curObj),this.refreshInvent(),login_obj["1_8_gear2Put"]=!0,this.l1_8_gear2.visible=!0,this.gear2Big.visible=!0,saveData()),"gear3Put"==t&&"i_l1_8_gear"==this.curObj.name&&(reportUsed("l1_8_gear","Gear-4"),this.removeFromArray(this.arItems,t),this.removeFromArray(invent_obj,this.curObj.name),this.face_mc.removeChild(this.curObj),this.refreshInvent(),login_obj["1_8_gear3Put"]=!0,this.l1_8_gear3.visible=!0,this.gear3Big.visible=!0,saveData()),login_obj.l1_8_gateOpen||login_obj["1_8_gear1Put"]&&login_obj["1_8_gear2Put"]&&login_obj["1_8_gear3Put"]&&(login_obj.l1_8_gateOpen=!0,this.Arrow2.visible=!0,this.gateOpen.visible=!0,this.gate.visible=!1,this.showLock=!1,this.lock_mc.visible=!1,this.desk&&(this.desk.visible=!0),saveData()));else if(this.showLock)"btnExit"==t&&(this.showLock=!1,this.lock_mc.visible=!1,this.desk&&(this.desk.visible=!0));else if("l1_8_gear"==t)this.pushObj(e);else if("l1_8_key"==t)this.pushObj(e);else if("l1_8_desk"==t)login_obj.l1_8_gateOpen||(this.showLock=!0,this.lock_mc.visible=!0,this.desk&&(this.desk.visible=!1));else{if("Arrow1"==t)return this._gameOver=!0,e.visible=!1,void this.hero.initMove(e,function(){i.removeAllListener(),showGame(7),saveData()});if("Arrow2"==t)return this._gameOver=!0,e.visible=!1,void this.hero.initMove(e,function(){i.removeAllListener(),showGame(6),saveData()})}this.curObj&&this.refreshInvent()},e.prototype.loadInvent=function(){invent_obj=[];for(var e=0;e<login_obj.arInvent.length;e++){var t=login_obj.arInvent[e];if(t){var i=this.addObj(t,0,0);invent_obj.push(i)}}this.refreshInvent()},e.prototype.refreshInvent=function(){var e,t,i=0;for(i=0;i<this.arBgInvent.length;i++){if(t=this.arBgInvent[i],t.empty=!0,invent_obj&&(e=invent_obj[i])){t.empty=!1;var s=e.name,a=s.indexOf("i_");-1==a&&(this.face_mc.removeChild(e),e=this.addObj("i_"+s,0,0),invent_obj[i]=e),e.x=t.x,e.y=t.y,this.face_mc.addChild(e)}t.empty&&1==t.alpha&&createjs.Tween.get(t).to({alpha:0},200),0==t.empty&&0==t.alpha&&createjs.Tween.get(t).to({alpha:1},200)}},e.prototype.removeFromArray=function(e,t,i){var s,a=0;for(a=0;a<e.length;a++)if(s=e[a],s.name==t){i&&this.face_mc.removeChild(s),e.splice(a,1);break}},e.prototype.turnHandler=function(e){return this._gameOver?void e.remove():void 0},e.prototype.checkInvent=function(e){for(var t=e.stageX,i=e.stageY,s=null,a=0;a<invent_obj.length;a++){var h=invent_obj[a];if(hit_test_rec(h,h.w,h.h,t,i)){s=h;break}}return s},e.prototype.checkButtons=function(e){for(var t=e.stageX,i=e.stageY,s=0;s<this.arButtons.length;s++){var a=this.arButtons[s];hit_test_rec(a,a.w,a.h,t,i)?a.visible&&0==a._selected&&(a._selected=!0,a.scaleX=1.2*scaleGraphics,a.scaleY=1.2*scaleGraphics):a._selected&&(a.scaleX=scaleGraphics,a.scaleY=scaleGraphics,a._selected=!1)}},e.prototype.touchHandler=function(e){if(this._gameOver)return void e.remove();var t,i,s=e.type,a=e.stageX,h=e.stageY,r=0;if("mousedown"==s)this.curObj=this.checkInvent(e),null==this.curObj&&this.checkButtons(e);else if("pressmove"==s)this.checkButtons(e),this.curObj?(this.curObj.x=a,this.curObj.y=h):this.checkButtons(e);else if("pressup"==s){for(i=getDD(this.hero.x,this.hero.y,a,h),this.Hand&&1!=login_obj.tutor_1&&(login_obj.tutor_1=!0,createjs.Tween.get(this.Hand).to({x:480*scaleGraphics,y:320*scaleGraphics},1e3)),i<hitHero*scaleGraphics?this.hero.say?(this.hero.hideText(),this.textHero.hideText()):(this.hero.showText(),this.textHero.showText()):(this.hero.hideText(),this.textHero.hideText(),this.stars&&this.stars.removeAll()),r=0;r<this.arItems.length;r++)if(t=this.arItems[r],hit_test_rec(t,t.w,t.h,a,h)&&t.visible)return void this.clickObj(t);this.curObj&&this.refreshInvent()}},e.prototype.removeAllListener=function(){this.hero&&this.hero.removeAllListener(),this._resultGame=!0,this.removeEventListener("mousedown",this.touchHandler),this.removeEventListener("pressmove",this.touchHandler),this.removeEventListener("pressup",this.touchHandler)},window.ScrLocation8=e}();