!function(){var t=function(){this.initialize(),this.init()};t.prototype=new createjs.Container,t.prototype.init=function(){this.face_mc=new createjs.Container,this.game_mc=new createjs.Container,this.cells_mc=new createjs.Container,this.lock_mc=new createjs.Container,this._gameOver,this.arButtons=[],this.arItems=[],this.arBgInvent=[],this.levelObj={},this.curObj,this.showLock,login_obj.location=26;var t=preload.getResult("location3_6");this.bgGame=new createjs.Bitmap(t),this.bgGame.scaleX=scaleGraphics,this.bgGame.scaleY=scaleGraphics,this.addChild(this.bgGame),this.addChild(this.game_mc),this.addChild(this.lock_mc),this.addChild(this.face_mc),this.face_mc.addChild(this.cells_mc),this.loadLevel(),this.touchHandler=this.touchHandler.bind(this),this.addEventListener("mousedown",this.touchHandler),this.addEventListener("pressmove",this.touchHandler),this.addEventListener("pressup",this.touchHandler)},t.prototype.loadLevel=function(){if(this.Arrow1=this.addObj("Strelka7",150,630),this.Arrow1.name="Arrow1",this.Arrow1._selected=!1,this.game_mc.addChild(this.Arrow1),this.Arrow2=this.addObj("Strelka1",520,450),this.Arrow2.name="Arrow2",this.Arrow2._selected=!1,this.game_mc.addChild(this.Arrow2),this.arItems.push(this.Arrow1),this.arButtons.push(this.Arrow1),this.arItems.push(this.Arrow2),this.arButtons.push(this.Arrow2),login_obj.l3_6_colaTook);else{var t=this.addObj("l3_4_cola",940,190,.6,.6);this.game_mc.addChild(t),this.arItems.push(t)}login_obj.puzzle_15||(this.itemPuzzle=new ItemPuzzle(15,150,460,this),this.face_mc.addChild(this.itemPuzzle)),this.lamp=new ItemAnima("l3_6_lamp"),this.lamp.scaleX=scaleGraphics,this.lamp.scaleY=scaleGraphics,this.lamp.x=525*scaleGraphics,this.lamp.y=230*scaleGraphics,this.game_mc.addChild(this.lamp),login_obj.l3_6_doorOpen?this.lamp.sprite.gotoAndStop(1):(this.door=this.addObj("l3_6_door",518,382),this.game_mc.addChild(this.door),this.arItems.push(this.door),this.lamp.sprite.gotoAndStop(0),this.Arrow2.visible=!1),this.hero=new ItemHero,this.hero._parent=this,this.hero.scaleY=scaleGraphics,this.game_mc.addChild(this.hero),27==login_obj.prevLoc?(this.hero.scaleX=-1*scaleGraphics,this.hero.x=430*scaleGraphics,this.hero.y=550*scaleGraphics):(this.hero.scaleX=1*scaleGraphics,this.hero.x=250*scaleGraphics,this.hero.y=550*scaleGraphics),this.textHero=new ItemText,this.textHero._parent=this,this.textHero.scaleX=scaleGraphics,this.textHero.scaleY=scaleGraphics,this.textHero.y=this.hero.y-100*scaleGraphics,this.hero.x<300*scaleGraphics?(this.textHero.oblachko.scaleX=-1,this.textHero.x=this.hero.x+200*scaleGraphics):this.textHero.x=this.hero.x-200*scaleGraphics,this.game_mc.addChild(this.textHero),login_obj.l3_6_doorOpen||(this.hero.showText(),this.textHero.showText("emergence_3_6")),this.createLock(),this.createCells(),this.loadInvent()},t.prototype.hideDetector=function(){this.face_mc.visible=!0,this.hero.visible=!0,this.Arrow1.visible=!0,this.Arrow2.visible=!0,this.detector&&(this.detector.visible=!1)},t.prototype.showDetector=function(){this.face_mc.visible?(this.face_mc.visible=!1,this.hero.visible=!1,this.Arrow1.visible=!1,this.Arrow2.visible=!1,this.detector?this.detector.visible=!0:(this.detector=new ItemDetector,this.detector._parent=this,this.detector.scaleX=scaleGraphics,this.detector.scaleY=scaleGraphics,this.game_mc.addChild(this.detector),this.detector.x=_W/2,this.detector.y=_H-160*scaleGraphics,this.detector._x=_W/2,this.detector._y=this.detector.y)):this.hideDetector()},t.prototype.createLock=function(){this.showLock=!1;var t=new createjs.Shape;t.graphics.beginFill("rgba(0,0,0,0.8)").drawRect(0,0,_W,_H),this.lock_mc.addChild(t);var e=this.addObj("location3_6_lock",_WO/2,_HO/2);this.lock_mc.addChild(e),this.lock1=this.addObj("l3_6_lock1",_WO/2-60,_HO/2-80),this.lock1.name="lock1",this.lock_mc.addChild(this.lock1),this.lock2=this.addObj("l3_6_lock2",_WO/2-60,_HO/2-10),this.lock2.name="lock2",this.lock_mc.addChild(this.lock2),this.lock3=this.addObj("l3_6_lock1",_WO/2-60,_HO/2+60),this.lock3.name="lock3",this.lock_mc.addChild(this.lock3),this.lock4=this.addObj("l3_6_lock2",_WO/2-60,_HO/2+130),this.lock4.name="lock4",this.lock_mc.addChild(this.lock4);var e=this.addObj("l3_6_bgLock",_WO/2+70,_HO/2+10);this.lock_mc.addChild(e),this.lamp1=new ItemAnima("l3_6_lock"),this.lamp1.name="lamp1",this.lamp1.scaleX=scaleGraphics,this.lamp1.scaleY=scaleGraphics,this.lamp1.x=570*scaleGraphics,this.lamp1.y=300*scaleGraphics,this.lamp1.sprite.gotoAndStop(0),this.lock_mc.addChild(this.lamp1),this.lamp2=new ItemAnima("l3_6_lock"),this.lamp2.name="lamp2",this.lamp2.scaleX=scaleGraphics,this.lamp2.scaleY=scaleGraphics,this.lamp2.x=570*scaleGraphics,this.lamp2.y=370*scaleGraphics,this.lamp2.sprite.gotoAndStop(0),this.lock_mc.addChild(this.lamp2),this.lamp3=new ItemAnima("l3_6_lock"),this.lamp3.name="lamp3",this.lamp3.scaleX=scaleGraphics,this.lamp3.scaleY=scaleGraphics,this.lamp3.x=570*scaleGraphics,this.lamp3.y=440*scaleGraphics,this.lamp3.sprite.gotoAndStop(0),this.lock_mc.addChild(this.lamp3),this.lamp4=new ItemAnima("l3_6_lock"),this.lamp4.name="lamp4",this.lamp4.scaleX=scaleGraphics,this.lamp4.scaleY=scaleGraphics,this.lamp4.x=570*scaleGraphics,this.lamp4.y=510*scaleGraphics,this.lamp4.sprite.gotoAndStop(0),this.lock_mc.addChild(this.lamp4);var s=this.add_button("close",835*scaleGraphics,135*scaleGraphics,"btnExit");this.lock_mc.addChild(s),this.arItems.push(s),this.p1=this.lock1.x,this.p2=this.lock1.x+105*scaleGraphics,this.arItems.push(this.lamp1),this.arItems.push(this.lamp2),this.arItems.push(this.lamp3),this.arItems.push(this.lamp4),this.lamp1.left=!0,this.lamp2.left=!0,this.lamp3.left=!0,this.lamp4.left=!0,this.lock_mc.visible=!1},t.prototype.checkLock=function(){this.lock1.x==this.p2&&this.lock2.x==this.p2&&this.lock3.x==this.p2&&this.lock4.x==this.p2&&(login_obj.l3_6_doorOpen=!0,this.door.visible=!1,this.showLock=!1,this.lock_mc.visible=!1,this.Arrow2.visible=!0)},t.prototype.moveLock=function(t,e){var s=(t.x,this);t.x==this.p1?(createjs.Tween.get(t).to({x:this.p2},500).call(function(){s.checkLock()}),e.left=!1,e.sprite.gotoAndStop(1)):(createjs.Tween.get(t).to({x:this.p1},500),e.left=!0,e.sprite.gotoAndStop(0))},t.prototype.createCells=function(){var t,e=0;for(e=0;8>e;e++){var t=this.addObj("Cell",944-120*e,688);t.alpha=0,t.empty=!0,this.cells_mc.addChild(t),this.arBgInvent.push(t)}},t.prototype.addObj=function(t,e,s,i,h){i||(i=1),h||(h=1);var a=new createjs.Container,o=preload.getResult(t),r=new createjs.Bitmap(o);return r.x=-(r.image.width/2),r.y=-(r.image.height/2),a.addChild(r),a.scaleX=scaleGraphics*i,a.scaleY=scaleGraphics*h,a.x=e*scaleGraphics,a.y=s*scaleGraphics,a.w=r.image.width*a.scaleX,a.h=r.image.height*a.scaleY,a.name=t,a.w<50&&(a.w=50),a.h<50&&(a.h=50),a},t.prototype.add_button=function(t,e,s,i){var h=new createjs.Container;h.title=t,h.x=e,h.y=s,h.name=i;var a=preload.getResult(i),o=new createjs.Bitmap(a);return o.scaleX=scaleGraphics,o.scaleY=scaleGraphics,o.x=-o.image.width/2*o.scaleX,o.y=-o.image.height/2*o.scaleY,h.addChild(o),a=preload.getResult(i+"Activ"),h.over=new createjs.Bitmap(a),h.over.image&&(h.over.scaleX=scaleGraphics,h.over.scaleY=scaleGraphics,h.over.x=-h.over.image.width/2*h.over.scaleX,h.over.y=-h.over.image.height/2*h.over.scaleY,h.over.visible=!1,h.addChild(h.over)),h.w=o.image.width*o.scaleX,h.h=o.image.height*o.scaleX,h.r=o.image.width*o.scaleX/2,h.rr=h.r*h.r,h._selected=!1,h.width=o.image.width,h.height=o.image.height,this.arButtons.push(h),h},t.prototype.pushObj=function(t){if(t){var e,s=0;for(s=0;s<this.arBgInvent.length&&(e=this.arBgInvent[s],!e.empty);s++);var i=this;e&&(createjs.Tween.get(e).to({alpha:1},200),createjs.Tween.get(t).to({x:e.x,y:e.y},300).call(function(){"l3_4_cola"==t.name&&(login_obj.l3_6_colaTook=!0,reportFound(t.name,"Cola")),invent_obj3.push(t),i.removeFromArray(i.arItems,t.name),i.face_mc.addChild(t),i.refreshInvent()}))}},t.prototype.clickObj=function(t){var e=t.name,s=this;if(this.curObj);else if(this.showLock)"btnExit"==e?(this.showLock=!1,this.lock_mc.visible=!1,this.door&&(this.door.visible=!0)):"lamp1"==e?(this.moveLock(this.lock1,this.lamp1),this.moveLock(this.lock4,this.lamp4)):"lamp2"==e?this.moveLock(this.lock2,this.lamp2):"lamp3"==e?(this.moveLock(this.lock3,this.lamp3),this.moveLock(this.lock4,this.lamp4)):"lamp4"==e&&(this.moveLock(this.lock4,this.lamp4),this.moveLock(this.lock2,this.lamp2));else if("l3_4_cola"==e)this.pushObj(t);else if("l3_6_door"==e)this.showLock=!0,this.lock_mc.visible=!0,this.door&&(this.door.visible=!1);else{if("Arrow1"==e)return this._gameOver=!0,t.visible=!1,void this.hero.initMove(t,function(){s.removeAllListener(),showGame(23),saveData()});if("Arrow2"==e)return this._gameOver=!0,t.visible=!1,void this.hero.initMove(t,function(){s.removeAllListener(),showGame(27),saveData()})}this.curObj&&this.refreshInvent()},t.prototype.loadInvent=function(){invent_obj3=[];for(var t=0;t<login_obj.arInvent3.length;t++){var e=login_obj.arInvent3[t];if(e){var s=this.addObj(e,0,0);invent_obj3.push(s)}}this.refreshInvent()},t.prototype.refreshInvent=function(){var t,e,s=0;for(s=0;s<this.arBgInvent.length;s++){if(e=this.arBgInvent[s],e.empty=!0,invent_obj3&&(t=invent_obj3[s])){e.empty=!1;var i=t.name,h=i.indexOf("i_");-1==h&&(this.face_mc.removeChild(t),t=this.addObj("i_"+i,0,0),invent_obj3[s]=t),t.x=e.x,t.y=e.y,this.face_mc.addChild(t)}e.empty&&1==e.alpha&&createjs.Tween.get(e).to({alpha:0},200),0==e.empty&&0==e.alpha&&createjs.Tween.get(e).to({alpha:1},200)}saveData()},t.prototype.removeFromArray=function(t,e,s){var i,h=0;for(h=0;h<t.length;h++)if(i=t[h],i.name==e){s&&this.face_mc.removeChild(i),t.splice(h,1);break}},t.prototype.turnHandler=function(t){return this._gameOver?void t.remove():void 0},t.prototype.checkInvent=function(t){var e=t.stageX,s=t.stageY,i=null;if(0!=this.face_mc.visible){for(var h=0;h<invent_obj3.length;h++){var a=invent_obj3[h];if(hit_test_rec(a,a.w,a.h,e,s)){i=a;break}}return i&&"i_l3_5_detector"==i.name&&this.showDetector(),i}},t.prototype.checkButtons=function(t){for(var e=t.stageX,s=t.stageY,i=0;i<this.arButtons.length;i++){var h=this.arButtons[i];hit_test_rec(h,h.w,h.h,e,s)?h.visible&&0==h._selected&&(h._selected=!0,h.scaleX=1.2*scaleGraphics,h.scaleY=1.2*scaleGraphics):h._selected&&(h.scaleX=scaleGraphics,h.scaleY=scaleGraphics,h._selected=!1)}},t.prototype.touchHandler=function(t){if(this._gameOver)return void t.remove();var e,s,i=t.type,h=t.stageX,a=t.stageY,o=0;if("mousedown"==i)this.curObj=this.checkInvent(t),null==this.curObj&&this.checkButtons(t);else if("pressmove"==i)this.checkButtons(t),this.curObj?(this.curObj.x=h,this.curObj.y=a):this.checkButtons(t);else if("pressup"==i){for(s=getDD(this.hero.x,this.hero.y,h,a),s<hitHero*scaleGraphics&&this.hero.visible?this.hero.say?(this.hero.hideText(),this.textHero.hideText()):(this.hero.showText(),this.textHero.showText()):(this.hero.hideText(),this.textHero.hideText()),o=0;o<this.arItems.length;o++)if(e=this.arItems[o],hit_test_rec(e,e.w,e.h,h,a)&&e.visible)return void this.clickObj(e);this.curObj&&this.refreshInvent()}},t.prototype.removeAllListener=function(){this.hero&&this.hero.removeAllListener(),this.detector&&this.detector.removeAllListener(),this._resultGame=!0,this.removeEventListener("mousedown",this.touchHandler),this.removeEventListener("pressmove",this.touchHandler),this.removeEventListener("pressup",this.touchHandler)},window.ScrLocation26=t}();