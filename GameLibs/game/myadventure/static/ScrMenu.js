!function(){var t=function(){this.initialize(),this.init()};t.prototype=new createjs.Container,t.prototype.init=function(){music_play("musicMenu"),this.openWnd=!1,this.newGameB=!1,this.restartGroup=new createjs.Container,this.creditsGroup=new createjs.Container;var t=preload.getResult("bgMenu"),e=new createjs.Bitmap(t);e.scaleX=scaleGraphics,e.scaleY=scaleGraphics,e.w=e.image.width*e.scaleX,e.h=e.image.height*e.scaleY,this.addChild(e),this.arButtons=[],this.screenBack=new createjs.Shape,this.screenBack.graphics.beginFill("rgba(0,0,0,0.8)").drawRect(0,0,_W,_H),this.addChild(this.screenBack),this.screenBack.visible=!1,this.btnPlay=this.add_button("play",530*scaleGraphics,491*scaleGraphics,"btnPlay"),this.btnRestart=this.add_button("restart",65*scaleGraphics,605*scaleGraphics,"btnReset"),this.btnCredits=this.add_button("credits",65*scaleGraphics,500*scaleGraphics,"ButtonCredits"),this.btnSound=new createjs.Container,this.btnSound.fname="btnSound",this.btnSound.x=955*scaleGraphics,this.btnSound.y=55*scaleGraphics,this.btnSound._selected=!1,this.btnSound.width=88*scaleGraphics,this.btnSound.height=85*scaleGraphics,this.btnSound.r=88*scaleGraphics/2,this.btnSound.rr=this.btnSound.r*this.btnSound.r,this.addChild(this.btnSound),this.arButtons.push(this.btnSound),this.btnSoundOn=this.add_button("sound",955*scaleGraphics,55*scaleGraphics,"ButtonSoundOn"),this.btnSoundOff=this.add_button("sound",955*scaleGraphics,55*scaleGraphics,"ButtonSoundOff"),this.btnSoundOn.name="btnSound",this.btnSoundOff.name="btnSound";var s=new createjs.Text("v. 1.00",14*scaleGraphics+"px Verdana","#ffffff");s.x=_W-185*scaleGraphics,s.y=_H-25*scaleGraphics+options_txt_offset,this.addChild(s),this.refreshSound(),this.createRestart(),this.createCredits(),this.addChild(this.restartGroup),this.addChild(this.creditsGroup),this.touchHandler=this.touchHandler.bind(this),this.addEventListener("mousedown",this.touchHandler),this.addEventListener("pressmove",this.touchHandler),this.addEventListener("pressup",this.touchHandler)},t.prototype.addObj=function(t,e,s,i,n){i||(i=1),n||(n=1);var a=new createjs.Container,r=preload.getResult(t),o=new createjs.Bitmap(r);return o.x=-(o.image.width/2),o.y=-(o.image.height/2),a.addChild(o),a.scaleX=scaleGraphics*i,a.scaleY=scaleGraphics*n,a.x=e*scaleGraphics,a.y=s*scaleGraphics,a.w=o.image.width*a.scaleX,a.h=o.image.height*a.scaleY,a.name=t,a},t.prototype.add_button=function(t,e,s,i){var n=new createjs.Container;n.title=t,n.x=e,n.y=s,n.name=i;var a=preload.getResult(i),r=new createjs.Bitmap(a);return r.scaleX=scaleGraphics,r.scaleY=scaleGraphics,r.x=-r.image.width/2*r.scaleX,r.y=-r.image.height/2*r.scaleY,n.addChild(r),a=preload.getResult(i+"Activ"),n.over=new createjs.Bitmap(a),n.over.image&&(n.over.scaleX=scaleGraphics,n.over.scaleY=scaleGraphics,n.over.x=-n.over.image.width/2*n.over.scaleX,n.over.y=-n.over.image.height/2*n.over.scaleY,n.over.visible=!1,n.addChild(n.over)),n.r=r.image.width*r.scaleX/2,n.rr=n.r*n.r,n._selected=!1,n.w=r.image.width*scaleGraphics,n.h=r.image.height*scaleGraphics,this.arButtons.push(n),this.addChild(n),n},t.prototype.createRestart=function(){var t=preload.getResult("ResetPlashka"),e=new createjs.Bitmap(t);e.scaleX=scaleGraphics,e.scaleY=scaleGraphics,e.x=_W/2-e.image.width/2*scaleGraphics,e.y=_H/2-e.image.height/2*scaleGraphics,this.restartGroup.addChild(e);var s=_H/2+130*scaleGraphics;this.btnYesR=this.add_button("yes",_W/2+190*scaleGraphics,s,"ResetButtonYes"),this.restartGroup.addChild(this.btnYesR),this.btnNoR=this.add_button("no",_W/2-190*scaleGraphics,s,"ResetButtonNo"),this.restartGroup.addChild(this.btnNoR),this.restartGroup.visible=!1},t.prototype.createCredits=function(){var t=preload.getResult("Credits_Plashka"),e=new createjs.Bitmap(t);e.scaleX=scaleGraphics,e.scaleY=scaleGraphics,e.x=_W/2-e.image.width/2*scaleGraphics,e.y=_H/2-e.image.height/2*scaleGraphics,this.creditsGroup.addChild(e);var s=_W/2+170*scaleGraphics,i=_H/2+220*scaleGraphics;this.btnYesC=this.add_button("yes",s,i,"ResetButtonYes"),this.btnYesC.name="CreditsButtonYes",this.creditsGroup.addChild(this.btnYesC),this.creditsGroup.visible=!1},t.prototype.showRestart=function(){this.openWnd=!0,this.restartGroup.visible=!0,this.screenBack.visible=!0,this.btnYesC.visible=!1},t.prototype.hideRestart=function(){this.openWnd=!1,this.restartGroup.visible=!1,this.screenBack.visible=!1,this.btnYesC.visible=!0},t.prototype.showCredits=function(t){t?(this.openWnd=!0,this.screenBack.visible=!0,this.creditsGroup.visible=!0,this.btnYesR.visible=!1,this.btnNoR.visible=!1):(this.openWnd=!1,this.screenBack.visible=!1,this.creditsGroup.visible=!1,this.btnYesR.visible=!0,this.btnNoR.visible=!0)},t.prototype.resetGame=function(){login_obj={},login_obj.arInvent=[],invent_obj=[],login_obj.arInvent2=[],invent_obj2=[],login_obj.arInvent3=[],invent_obj3=[],login_obj.arPuzzle=[],login_obj.prevLoc=1},t.prototype.newGame=function(){this.resetGame(),this.removeAllListener(),showComix()},t.prototype.clickSound=function(){options_sound?(options_sound=!1,options_music=!1,music_stop()):(options_sound=!0,options_music=!0,musicTheme="none",music_play("musicMenu")),this.refreshSound()},t.prototype.refreshSound=function(){options_sound?(this.btnSoundOn.visible=!0,this.btnSoundOff.visible=!1):(this.btnSoundOn.visible=!1,this.btnSoundOff.visible=!0)},t.prototype.clickObj=function(t){var e=t.name;if(t._selected=!1,t.over&&(t.over.visible=!1),this.openWnd){if("ResetButtonNo"==e)return void this.hideRestart();if("CreditsButtonYes"==e)return void this.showCredits(!1);if("ResetButtonYes"==e)return void this.newGame()}else{if("btnReset"==e)return void this.showRestart();if("ButtonCredits"==e)return void this.showCredits(!0);if("btnSound"==e)return void this.clickSound();if("btnPlay"==e)return this.removeAllListener(),void(this.newGameB?showComix():showSelect())}},t.prototype.checkButtons=function(t){for(var e=t.stageX,s=t.stageY,i=0;i<this.arButtons.length;i++){var n=this.arButtons[i];hit_test_rec(n,n.w,n.h,e,s)?n.visible&&0==n._selected&&(n._selected=!0,n.over&&(n.over.visible=!0)):n._selected&&(n._selected=!1,n.over&&(n.over.visible=!1))}},t.prototype.touchHandler=function(t){var e,s=t.type,i=(t.stageX,t.stageY,0);if("mousedown"==s||"pressmove"==s)this.checkButtons(t);else if("pressup"==s)for(i=0;i<this.arButtons.length;i++)if(e=this.arButtons[i],e.visible&&e._selected)return void this.clickObj(e)},t.prototype.removeAllListener=function(){this.removeEventListener("mousedown",this.touchHandler),this.removeEventListener("pressmove",this.touchHandler),this.removeEventListener("pressup",this.touchHandler)},window.ScrMenu=t}();